import{j as e}from"./ui-vendor-izRNgCO_.js";import{r as a}from"./react-vendor-r9Et1EnL.js";import{C as s,d as t}from"./card-Sps0XDlE.js";import{c as r,a as i,u as l,B as c,j as n,b as d,k as o,l as m,h as x}from"./index-Dpso9GU3.js";import"./chart-vendor-D0NPwkge.js";
/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=r("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);function u(){const[r,u]=a.useState([]),[p,N]=a.useState(!0),[f,j]=a.useState(null);a.useEffect(()=>{g()},[]);const g=async()=>{try{const e=await i.get("http://localhost:5000/api/user/notifications",{withCredentials:!0});e.data.success&&u(e.data.data.notifications)}catch(e){l.error("Failed to fetch notifications")}finally{N(!1)}},b=a=>{switch(a){case"APPOINTMENT_ACCEPTED":case"APPOINTMENT_REJECTED":case"APPOINTMENT_REMINDER":return e.jsx(x,{className:"h-5 w-5"});case"DOCTOR_MESSAGE":return e.jsx(m,{className:"h-5 w-5"});default:return e.jsx(n,{className:"h-5 w-5"})}},y=e=>{switch(e){case"APPOINTMENT_ACCEPTED":return"text-green-600 bg-green-100 dark:bg-green-900/30";case"APPOINTMENT_REJECTED":return"text-red-600 bg-red-100 dark:bg-red-900/30";case"APPOINTMENT_REMINDER":return"text-blue-600 bg-blue-100 dark:bg-blue-900/30";case"DOCTOR_MESSAGE":return"text-purple-600 bg-purple-100 dark:bg-purple-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}},k=r.filter(e=>!e.isRead).length;return p?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Stay updated with your health appointments and messages"})]}),k>0&&e.jsxs(c,{onClick:async()=>{try{await i.put("http://localhost:5000/api/user/notifications/mark-all-read",{},{withCredentials:!0}),u(e=>e.map(e=>({...e,isRead:!0}))),l.success("All notifications marked as read")}catch(e){l.error("Failed to mark all notifications as read")}},variant:"outline",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),"Mark All as Read"]})]})}),e.jsx("div",{className:"space-y-4",children:0===r.length?e.jsx(s,{children:e.jsxs(t,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(n,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No notifications yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"You'll receive notifications about appointments, messages, and important updates here."})]})}):r.map(a=>e.jsx(s,{className:"transition-all duration-200 "+(a.isRead?"opacity-75":"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10"),children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full ${y(a.type)}`,children:b(a.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.title}),!a.isRead&&e.jsx(d,{variant:"destructive",className:"text-xs",children:"New"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:a.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:new Date(a.createdAt).toLocaleDateString()}),e.jsx("span",{children:new Date(a.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),!a.isRead&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>(async e=>{j(e);try{await i.put(`http://localhost:5000/api/user/notifications/${e}/read`,{},{withCredentials:!0}),u(a=>a.map(a=>a.id===e?{...a,isRead:!0}:a)),l.success("Notification marked as read")}catch(a){l.error("Failed to mark notification as read")}finally{j(null)}})(a.id),disabled:f===a.id,className:"ml-4",children:f===a.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):e.jsx(o,{className:"h-4 w-4"})})]})})},a.id))})]})}export{u as default};
