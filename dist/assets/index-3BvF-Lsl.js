var U6=Object.defineProperty;var yx=e=>{throw TypeError(e)};var V6=(e,t,r)=>t in e?U6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var we=(e,t,r)=>V6(e,typeof t!="symbol"?t+"":t,r),bx=(e,t,r)=>t.has(e)||yx("Cannot "+r);var Dr=(e,t,r)=>(bx(e,t,"read from private field"),r?r.call(e):t.get(e)),Xs=(e,t,r)=>t.has(e)?yx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Kn=(e,t,r,n)=>(bx(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);function $6(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function zb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xE={exports:{}},Tg={},SE={exports:{}},Kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=Symbol.for("react.element"),W6=Symbol.for("react.portal"),z6=Symbol.for("react.fragment"),H6=Symbol.for("react.strict_mode"),q6=Symbol.for("react.profiler"),K6=Symbol.for("react.provider"),G6=Symbol.for("react.context"),Y6=Symbol.for("react.forward_ref"),J6=Symbol.for("react.suspense"),Q6=Symbol.for("react.memo"),X6=Symbol.for("react.lazy"),wx=Symbol.iterator;function Z6(e){return e===null||typeof e!="object"?null:(e=wx&&e[wx]||e["@@iterator"],typeof e=="function"?e:null)}var EE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RE=Object.assign,kE={};function Cu(e,t,r){this.props=e,this.context=t,this.refs=kE,this.updater=r||EE}Cu.prototype.isReactComponent={};Cu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function CE(){}CE.prototype=Cu.prototype;function Hb(e,t,r){this.props=e,this.context=t,this.refs=kE,this.updater=r||EE}var qb=Hb.prototype=new CE;qb.constructor=Hb;RE(qb,Cu.prototype);qb.isPureReactComponent=!0;var _x=Array.isArray,TE=Object.prototype.hasOwnProperty,Kb={current:null},PE={key:!0,ref:!0,__self:!0,__source:!0};function NE(e,t,r){var n,s={},i=null,c=null;if(t!=null)for(n in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(i=""+t.key),t)TE.call(t,n)&&!PE.hasOwnProperty(n)&&(s[n]=t[n]);var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){for(var l=Array(d),o=0;o<d;o++)l[o]=arguments[o+2];s.children=l}if(e&&e.defaultProps)for(n in d=e.defaultProps,d)s[n]===void 0&&(s[n]=d[n]);return{$$typeof:Nh,type:e,key:i,ref:c,props:s,_owner:Kb.current}}function eO(e,t){return{$$typeof:Nh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nh}function tO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xx=/\/+/g;function kv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tO(""+e.key):t.toString(36)}function sm(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(i){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case Nh:case W6:c=!0}}if(c)return c=e,s=s(c),e=n===""?"."+kv(c,0):n,_x(s)?(r="",e!=null&&(r=e.replace(xx,"$&/")+"/"),sm(s,t,r,"",function(o){return o})):s!=null&&(Gb(s)&&(s=eO(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(xx,"$&/")+"/")+e)),t.push(s)),1;if(c=0,n=n===""?".":n+":",_x(e))for(var d=0;d<e.length;d++){i=e[d];var l=n+kv(i,d);c+=sm(i,t,r,l,s)}else if(l=Z6(e),typeof l=="function")for(e=l.call(e),d=0;!(i=e.next()).done;)i=i.value,l=n+kv(i,d++),c+=sm(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function kf(e,t,r){if(e==null)return e;var n=[],s=0;return sm(e,n,"","",function(i){return t.call(r,i,s++)}),n}function rO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Si={current:null},im={transition:null},nO={ReactCurrentDispatcher:Si,ReactCurrentBatchConfig:im,ReactCurrentOwner:Kb};function AE(){throw Error("act(...) is not supported in production builds of React.")}Kr.Children={map:kf,forEach:function(e,t,r){kf(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return kf(e,function(){t++}),t},toArray:function(e){return kf(e,function(t){return t})||[]},only:function(e){if(!Gb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kr.Component=Cu;Kr.Fragment=z6;Kr.Profiler=q6;Kr.PureComponent=Hb;Kr.StrictMode=H6;Kr.Suspense=J6;Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nO;Kr.act=AE;Kr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=RE({},e.props),s=e.key,i=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,c=Kb.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(l in t)TE.call(t,l)&&!PE.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&d!==void 0?d[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){d=Array(l);for(var o=0;o<l;o++)d[o]=arguments[o+2];n.children=d}return{$$typeof:Nh,type:e.type,key:s,ref:i,props:n,_owner:c}};Kr.createContext=function(e){return e={$$typeof:G6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:K6,_context:e},e.Consumer=e};Kr.createElement=NE;Kr.createFactory=function(e){var t=NE.bind(null,e);return t.type=e,t};Kr.createRef=function(){return{current:null}};Kr.forwardRef=function(e){return{$$typeof:Y6,render:e}};Kr.isValidElement=Gb;Kr.lazy=function(e){return{$$typeof:X6,_payload:{_status:-1,_result:e},_init:rO}};Kr.memo=function(e,t){return{$$typeof:Q6,type:e,compare:t===void 0?null:t}};Kr.startTransition=function(e){var t=im.transition;im.transition={};try{e()}finally{im.transition=t}};Kr.unstable_act=AE;Kr.useCallback=function(e,t){return Si.current.useCallback(e,t)};Kr.useContext=function(e){return Si.current.useContext(e)};Kr.useDebugValue=function(){};Kr.useDeferredValue=function(e){return Si.current.useDeferredValue(e)};Kr.useEffect=function(e,t){return Si.current.useEffect(e,t)};Kr.useId=function(){return Si.current.useId()};Kr.useImperativeHandle=function(e,t,r){return Si.current.useImperativeHandle(e,t,r)};Kr.useInsertionEffect=function(e,t){return Si.current.useInsertionEffect(e,t)};Kr.useLayoutEffect=function(e,t){return Si.current.useLayoutEffect(e,t)};Kr.useMemo=function(e,t){return Si.current.useMemo(e,t)};Kr.useReducer=function(e,t,r){return Si.current.useReducer(e,t,r)};Kr.useRef=function(e){return Si.current.useRef(e)};Kr.useState=function(e){return Si.current.useState(e)};Kr.useSyncExternalStore=function(e,t,r){return Si.current.useSyncExternalStore(e,t,r)};Kr.useTransition=function(){return Si.current.useTransition()};Kr.version="18.3.1";SE.exports=Kr;var A=SE.exports;const pt=zb(A),Kc=$6({__proto__:null,default:pt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sO=A,iO=Symbol.for("react.element"),aO=Symbol.for("react.fragment"),oO=Object.prototype.hasOwnProperty,cO=sO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lO={key:!0,ref:!0,__self:!0,__source:!0};function OE(e,t,r){var n,s={},i=null,c=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(c=t.ref);for(n in t)oO.call(t,n)&&!lO.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:iO,type:e,key:i,ref:c,props:s,_owner:cO.current}}Tg.Fragment=aO;Tg.jsx=OE;Tg.jsxs=OE;xE.exports=Tg;var a=xE.exports,U0={},jE={exports:{}},ea={},DE={exports:{}},IE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,I){var G=M.length;M.push(I);e:for(;0<G;){var de=G-1>>>1,ee=M[de];if(0<s(ee,I))M[de]=I,M[G]=ee,G=de;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var I=M[0],G=M.pop();if(G!==I){M[0]=G;e:for(var de=0,ee=M.length,Q=ee>>>1;de<Q;){var ae=2*(de+1)-1,_e=M[ae],Se=ae+1,ie=M[Se];if(0>s(_e,G))Se<ee&&0>s(ie,_e)?(M[de]=ie,M[Se]=G,de=Se):(M[de]=_e,M[ae]=G,de=ae);else if(Se<ee&&0>s(ie,G))M[de]=ie,M[Se]=G,de=Se;else break e}}return I}function s(M,I){var G=M.sortIndex-I.sortIndex;return G!==0?G:M.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var l=[],o=[],p=1,y=null,m=3,u=!1,b=!1,f=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var I=r(o);I!==null;){if(I.callback===null)n(o);else if(I.startTime<=M)n(o),I.sortIndex=I.expirationTime,t(l,I);else break;I=r(o)}}function S(M){if(f=!1,w(M),!b)if(r(l)!==null)b=!0,D(E);else{var I=r(o);I!==null&&L(S,I.startTime-M)}}function E(M,I){b=!1,f&&(f=!1,g(k),k=-1),u=!0;var G=m;try{for(w(I),y=r(l);y!==null&&(!(y.expirationTime>I)||M&&!x());){var de=y.callback;if(typeof de=="function"){y.callback=null,m=y.priorityLevel;var ee=de(y.expirationTime<=I);I=e.unstable_now(),typeof ee=="function"?y.callback=ee:y===r(l)&&n(l),w(I)}else n(l);y=r(l)}if(y!==null)var Q=!0;else{var ae=r(o);ae!==null&&L(S,ae.startTime-I),Q=!1}return Q}finally{y=null,m=G,u=!1}}var O=!1,C=null,k=-1,T=5,h=-1;function x(){return!(e.unstable_now()-h<T)}function R(){if(C!==null){var M=e.unstable_now();h=M;var I=!0;try{I=C(!0,M)}finally{I?P():(O=!1,C=null)}}else O=!1}var P;if(typeof v=="function")P=function(){v(R)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=R,P=function(){j.postMessage(null)}}else P=function(){_(R,0)};function D(M){C=M,O||(O=!0,P())}function L(M,I){k=_(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||u||(b=!0,D(E))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var G=m;m=I;try{return M()}finally{m=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=m;m=M;try{return I()}finally{m=G}},e.unstable_scheduleCallback=function(M,I,G){var de=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?de+G:de):G=de,M){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,M={id:p++,callback:I,priorityLevel:M,startTime:G,expirationTime:ee,sortIndex:-1},G>de?(M.sortIndex=G,t(o,M),r(l)===null&&M===r(o)&&(f?(g(k),k=-1):f=!0,L(S,G-de))):(M.sortIndex=ee,t(l,M),b||u||(b=!0,D(E))),M},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(M){var I=m;return function(){var G=m;m=I;try{return M.apply(this,arguments)}finally{m=G}}}})(IE);DE.exports=IE;var dO=DE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uO=A,Zi=dO;function _t(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ME=new Set,Yp={};function od(e,t){fu(e,t),fu(e+"Capture",t)}function fu(e,t){for(Yp[e]=t,e=0;e<t.length;e++)ME.add(t[e])}var To=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V0=Object.prototype.hasOwnProperty,pO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sx={},Ex={};function hO(e){return V0.call(Ex,e)?!0:V0.call(Sx,e)?!1:pO.test(e)?Ex[e]=!0:(Sx[e]=!0,!1)}function fO(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mO(e,t,r,n){if(t===null||typeof t>"u"||fO(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ei(e,t,r,n,s,i,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=c}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ri[e]=new Ei(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ri[t]=new Ei(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ri[e]=new Ei(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ri[e]=new Ei(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ri[e]=new Ei(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ri[e]=new Ei(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ri[e]=new Ei(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ri[e]=new Ei(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ri[e]=new Ei(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yb=/[\-:]([a-z])/g;function Jb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yb,Jb);ri[t]=new Ei(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yb,Jb);ri[t]=new Ei(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yb,Jb);ri[t]=new Ei(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ri[e]=new Ei(e,1,!1,e.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ri[e]=new Ei(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qb(e,t,r,n){var s=ri.hasOwnProperty(t)?ri[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mO(t,r,s,n)&&(r=null),n||s===null?hO(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Lo=uO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cf=Symbol.for("react.element"),Bd=Symbol.for("react.portal"),Ud=Symbol.for("react.fragment"),Xb=Symbol.for("react.strict_mode"),$0=Symbol.for("react.profiler"),LE=Symbol.for("react.provider"),FE=Symbol.for("react.context"),Zb=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),z0=Symbol.for("react.suspense_list"),ew=Symbol.for("react.memo"),_c=Symbol.for("react.lazy"),BE=Symbol.for("react.offscreen"),Rx=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=Rx&&e[Rx]||e["@@iterator"],typeof e=="function"?e:null)}var ms=Object.assign,Cv;function kp(e){if(Cv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Cv=t&&t[1]||""}return`
`+Cv+e}var Tv=!1;function Pv(e,t){if(!e||Tv)return"";Tv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(o){var n=o}Reflect.construct(e,[],t)}else{try{t.call()}catch(o){n=o}e.call(t.prototype)}else{try{throw Error()}catch(o){n=o}e()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var s=o.stack.split(`
`),i=n.stack.split(`
`),c=s.length-1,d=i.length-1;1<=c&&0<=d&&s[c]!==i[d];)d--;for(;1<=c&&0<=d;c--,d--)if(s[c]!==i[d]){if(c!==1||d!==1)do if(c--,d--,0>d||s[c]!==i[d]){var l=`
`+s[c].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=c&&0<=d);break}}}finally{Tv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?kp(e):""}function gO(e){switch(e.tag){case 5:return kp(e.type);case 16:return kp("Lazy");case 13:return kp("Suspense");case 19:return kp("SuspenseList");case 0:case 2:case 15:return e=Pv(e.type,!1),e;case 11:return e=Pv(e.type.render,!1),e;case 1:return e=Pv(e.type,!0),e;default:return""}}function H0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ud:return"Fragment";case Bd:return"Portal";case $0:return"Profiler";case Xb:return"StrictMode";case W0:return"Suspense";case z0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case FE:return(e.displayName||"Context")+".Consumer";case LE:return(e._context.displayName||"Context")+".Provider";case Zb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ew:return t=e.displayName||null,t!==null?t:H0(e.type)||"Memo";case _c:t=e._payload,e=e._init;try{return H0(e(t))}catch{}}return null}function vO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H0(t);case 8:return t===Xb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Uc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function UE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yO(e){var t=UE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){n=""+c,i.call(this,c)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tf(e){e._valueTracker||(e._valueTracker=yO(e))}function VE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=UE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function jm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q0(e,t){var r=t.checked;return ms({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Uc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $E(e,t){t=t.checked,t!=null&&Qb(e,"checked",t,!1)}function K0(e,t){$E(e,t);var r=Uc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?G0(e,t.type,r):t.hasOwnProperty("defaultValue")&&G0(e,t.type,Uc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function G0(e,t,r){(t!=="number"||jm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Cp=Array.isArray;function ru(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Uc(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Y0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_t(91));return ms({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(_t(92));if(Cp(r)){if(1<r.length)throw Error(_t(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Uc(r)}}function WE(e,t){var r=Uc(t.value),n=Uc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Px(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pf,HE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pf=Pf||document.createElement("div"),Pf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Dp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bO=["Webkit","ms","Moz","O"];Object.keys(Dp).forEach(function(e){bO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dp[t]=Dp[e]})});function qE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Dp.hasOwnProperty(e)&&Dp[e]?(""+t).trim():t+"px"}function KE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=qE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var wO=ms({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q0(e,t){if(t){if(wO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_t(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_t(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_t(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_t(62))}}function X0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z0=null;function tw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ey=null,nu=null,su=null;function Nx(e){if(e=jh(e)){if(typeof ey!="function")throw Error(_t(280));var t=e.stateNode;t&&(t=jg(t),ey(e.stateNode,e.type,t))}}function GE(e){nu?su?su.push(e):su=[e]:nu=e}function YE(){if(nu){var e=nu,t=su;if(su=nu=null,Nx(e),t)for(e=0;e<t.length;e++)Nx(t[e])}}function JE(e,t){return e(t)}function QE(){}var Nv=!1;function XE(e,t,r){if(Nv)return e(t,r);Nv=!0;try{return JE(e,t,r)}finally{Nv=!1,(nu!==null||su!==null)&&(QE(),YE())}}function Qp(e,t){var r=e.stateNode;if(r===null)return null;var n=jg(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(_t(231,t,typeof r));return r}var ty=!1;if(To)try{var fp={};Object.defineProperty(fp,"passive",{get:function(){ty=!0}}),window.addEventListener("test",fp,fp),window.removeEventListener("test",fp,fp)}catch{ty=!1}function _O(e,t,r,n,s,i,c,d,l){var o=Array.prototype.slice.call(arguments,3);try{t.apply(r,o)}catch(p){this.onError(p)}}var Ip=!1,Dm=null,Im=!1,ry=null,xO={onError:function(e){Ip=!0,Dm=e}};function SO(e,t,r,n,s,i,c,d,l){Ip=!1,Dm=null,_O.apply(xO,arguments)}function EO(e,t,r,n,s,i,c,d,l){if(SO.apply(this,arguments),Ip){if(Ip){var o=Dm;Ip=!1,Dm=null}else throw Error(_t(198));Im||(Im=!0,ry=o)}}function cd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ZE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ax(e){if(cd(e)!==e)throw Error(_t(188))}function RO(e){var t=e.alternate;if(!t){if(t=cd(e),t===null)throw Error(_t(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ax(s),e;if(i===n)return Ax(s),t;i=i.sibling}throw Error(_t(188))}if(r.return!==n.return)r=s,n=i;else{for(var c=!1,d=s.child;d;){if(d===r){c=!0,r=s,n=i;break}if(d===n){c=!0,n=s,r=i;break}d=d.sibling}if(!c){for(d=i.child;d;){if(d===r){c=!0,r=i,n=s;break}if(d===n){c=!0,n=i,r=s;break}d=d.sibling}if(!c)throw Error(_t(189))}}if(r.alternate!==n)throw Error(_t(190))}if(r.tag!==3)throw Error(_t(188));return r.stateNode.current===r?e:t}function eR(e){return e=RO(e),e!==null?tR(e):null}function tR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=tR(e);if(t!==null)return t;e=e.sibling}return null}var rR=Zi.unstable_scheduleCallback,Ox=Zi.unstable_cancelCallback,kO=Zi.unstable_shouldYield,CO=Zi.unstable_requestPaint,Rs=Zi.unstable_now,TO=Zi.unstable_getCurrentPriorityLevel,rw=Zi.unstable_ImmediatePriority,nR=Zi.unstable_UserBlockingPriority,Mm=Zi.unstable_NormalPriority,PO=Zi.unstable_LowPriority,sR=Zi.unstable_IdlePriority,Pg=null,Za=null;function NO(e){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(Pg,e,void 0,(e.current.flags&128)===128)}catch{}}var ja=Math.clz32?Math.clz32:jO,AO=Math.log,OO=Math.LN2;function jO(e){return e>>>=0,e===0?32:31-(AO(e)/OO|0)|0}var Nf=64,Af=4194304;function Tp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lm(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,c=r&268435455;if(c!==0){var d=c&~s;d!==0?n=Tp(d):(i&=c,i!==0&&(n=Tp(i)))}else c=r&~s,c!==0?n=Tp(c):i!==0&&(n=Tp(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ja(t),s=1<<r,n|=e[r],t&=~s;return n}function DO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IO(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var c=31-ja(i),d=1<<c,l=s[c];l===-1?(!(d&r)||d&n)&&(s[c]=DO(d,t)):l<=t&&(e.expiredLanes|=d),i&=~d}}function ny(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iR(){var e=Nf;return Nf<<=1,!(Nf&4194240)&&(Nf=64),e}function Av(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ah(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ja(t),e[t]=r}function MO(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ja(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function nw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ja(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Tn=0;function aR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var oR,sw,cR,lR,dR,sy=!1,Of=[],Tc=null,Pc=null,Nc=null,Xp=new Map,Zp=new Map,Sc=[],LO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jx(e,t){switch(e){case"focusin":case"focusout":Tc=null;break;case"dragenter":case"dragleave":Pc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Xp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zp.delete(t.pointerId)}}function mp(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=jh(t),t!==null&&sw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function FO(e,t,r,n,s){switch(t){case"focusin":return Tc=mp(Tc,e,t,r,n,s),!0;case"dragenter":return Pc=mp(Pc,e,t,r,n,s),!0;case"mouseover":return Nc=mp(Nc,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Xp.set(i,mp(Xp.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Zp.set(i,mp(Zp.get(i)||null,e,t,r,n,s)),!0}return!1}function uR(e){var t=Ll(e.target);if(t!==null){var r=cd(t);if(r!==null){if(t=r.tag,t===13){if(t=ZE(r),t!==null){e.blockedOn=t,dR(e.priority,function(){cR(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function am(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=iy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Z0=n,r.target.dispatchEvent(n),Z0=null}else return t=jh(r),t!==null&&sw(t),e.blockedOn=r,!1;t.shift()}return!0}function Dx(e,t,r){am(e)&&r.delete(t)}function BO(){sy=!1,Tc!==null&&am(Tc)&&(Tc=null),Pc!==null&&am(Pc)&&(Pc=null),Nc!==null&&am(Nc)&&(Nc=null),Xp.forEach(Dx),Zp.forEach(Dx)}function gp(e,t){e.blockedOn===t&&(e.blockedOn=null,sy||(sy=!0,Zi.unstable_scheduleCallback(Zi.unstable_NormalPriority,BO)))}function eh(e){function t(s){return gp(s,e)}if(0<Of.length){gp(Of[0],e);for(var r=1;r<Of.length;r++){var n=Of[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Tc!==null&&gp(Tc,e),Pc!==null&&gp(Pc,e),Nc!==null&&gp(Nc,e),Xp.forEach(t),Zp.forEach(t),r=0;r<Sc.length;r++)n=Sc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Sc.length&&(r=Sc[0],r.blockedOn===null);)uR(r),r.blockedOn===null&&Sc.shift()}var iu=Lo.ReactCurrentBatchConfig,Fm=!0;function UO(e,t,r,n){var s=Tn,i=iu.transition;iu.transition=null;try{Tn=1,iw(e,t,r,n)}finally{Tn=s,iu.transition=i}}function VO(e,t,r,n){var s=Tn,i=iu.transition;iu.transition=null;try{Tn=4,iw(e,t,r,n)}finally{Tn=s,iu.transition=i}}function iw(e,t,r,n){if(Fm){var s=iy(e,t,r,n);if(s===null)Vv(e,t,n,Bm,r),jx(e,n);else if(FO(s,e,t,r,n))n.stopPropagation();else if(jx(e,n),t&4&&-1<LO.indexOf(e)){for(;s!==null;){var i=jh(s);if(i!==null&&oR(i),i=iy(e,t,r,n),i===null&&Vv(e,t,n,Bm,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Vv(e,t,n,null,r)}}var Bm=null;function iy(e,t,r,n){if(Bm=null,e=tw(n),e=Ll(e),e!==null)if(t=cd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ZE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bm=e,null}function pR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TO()){case rw:return 1;case nR:return 4;case Mm:case PO:return 16;case sR:return 536870912;default:return 16}default:return 16}}var Rc=null,aw=null,om=null;function hR(){if(om)return om;var e,t=aw,r=t.length,n,s="value"in Rc?Rc.value:Rc.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var c=r-e;for(n=1;n<=c&&t[r-n]===s[i-n];n++);return om=s.slice(e,1<n?1-n:void 0)}function cm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jf(){return!0}function Ix(){return!1}function ta(e){function t(r,n,s,i,c){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=c,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jf:Ix,this.isPropagationStopped=Ix,this}return ms(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jf)},persist:function(){},isPersistent:jf}),t}var Tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ow=ta(Tu),Oh=ms({},Tu,{view:0,detail:0}),$O=ta(Oh),Ov,jv,vp,Ng=ms({},Oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vp&&(vp&&e.type==="mousemove"?(Ov=e.screenX-vp.screenX,jv=e.screenY-vp.screenY):jv=Ov=0,vp=e),Ov)},movementY:function(e){return"movementY"in e?e.movementY:jv}}),Mx=ta(Ng),WO=ms({},Ng,{dataTransfer:0}),zO=ta(WO),HO=ms({},Oh,{relatedTarget:0}),Dv=ta(HO),qO=ms({},Tu,{animationName:0,elapsedTime:0,pseudoElement:0}),KO=ta(qO),GO=ms({},Tu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),YO=ta(GO),JO=ms({},Tu,{data:0}),Lx=ta(JO),QO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ej(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ZO[e])?!!t[e]:!1}function cw(){return ej}var tj=ms({},Oh,{key:function(e){if(e.key){var t=QO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?XO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cw,charCode:function(e){return e.type==="keypress"?cm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rj=ta(tj),nj=ms({},Ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fx=ta(nj),sj=ms({},Oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cw}),ij=ta(sj),aj=ms({},Tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),oj=ta(aj),cj=ms({},Ng,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lj=ta(cj),dj=[9,13,27,32],lw=To&&"CompositionEvent"in window,Mp=null;To&&"documentMode"in document&&(Mp=document.documentMode);var uj=To&&"TextEvent"in window&&!Mp,fR=To&&(!lw||Mp&&8<Mp&&11>=Mp),Bx=" ",Ux=!1;function mR(e,t){switch(e){case"keyup":return dj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vd=!1;function pj(e,t){switch(e){case"compositionend":return gR(t);case"keypress":return t.which!==32?null:(Ux=!0,Bx);case"textInput":return e=t.data,e===Bx&&Ux?null:e;default:return null}}function hj(e,t){if(Vd)return e==="compositionend"||!lw&&mR(e,t)?(e=hR(),om=aw=Rc=null,Vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fR&&t.locale!=="ko"?null:t.data;default:return null}}var fj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fj[e.type]:t==="textarea"}function vR(e,t,r,n){GE(n),t=Um(t,"onChange"),0<t.length&&(r=new ow("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Lp=null,th=null;function mj(e){TR(e,0)}function Ag(e){var t=zd(e);if(VE(t))return e}function gj(e,t){if(e==="change")return t}var yR=!1;if(To){var Iv;if(To){var Mv="oninput"in document;if(!Mv){var $x=document.createElement("div");$x.setAttribute("oninput","return;"),Mv=typeof $x.oninput=="function"}Iv=Mv}else Iv=!1;yR=Iv&&(!document.documentMode||9<document.documentMode)}function Wx(){Lp&&(Lp.detachEvent("onpropertychange",bR),th=Lp=null)}function bR(e){if(e.propertyName==="value"&&Ag(th)){var t=[];vR(t,th,e,tw(e)),XE(mj,t)}}function vj(e,t,r){e==="focusin"?(Wx(),Lp=t,th=r,Lp.attachEvent("onpropertychange",bR)):e==="focusout"&&Wx()}function yj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ag(th)}function bj(e,t){if(e==="click")return Ag(t)}function wj(e,t){if(e==="input"||e==="change")return Ag(t)}function _j(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:_j;function rh(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!V0.call(t,s)||!Ia(e[s],t[s]))return!1}return!0}function zx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hx(e,t){var r=zx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zx(r)}}function wR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _R(){for(var e=window,t=jm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=jm(e.document)}return t}function dw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xj(e){var t=_R(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&wR(r.ownerDocument.documentElement,r)){if(n!==null&&dw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Hx(r,i);var c=Hx(r,n);s&&c&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sj=To&&"documentMode"in document&&11>=document.documentMode,$d=null,ay=null,Fp=null,oy=!1;function qx(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oy||$d==null||$d!==jm(n)||(n=$d,"selectionStart"in n&&dw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fp&&rh(Fp,n)||(Fp=n,n=Um(ay,"onSelect"),0<n.length&&(t=new ow("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$d)))}function Df(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wd={animationend:Df("Animation","AnimationEnd"),animationiteration:Df("Animation","AnimationIteration"),animationstart:Df("Animation","AnimationStart"),transitionend:Df("Transition","TransitionEnd")},Lv={},xR={};To&&(xR=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function Og(e){if(Lv[e])return Lv[e];if(!Wd[e])return e;var t=Wd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in xR)return Lv[e]=t[r];return e}var SR=Og("animationend"),ER=Og("animationiteration"),RR=Og("animationstart"),kR=Og("transitionend"),CR=new Map,Kx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gc(e,t){CR.set(e,t),od(t,[e])}for(var Fv=0;Fv<Kx.length;Fv++){var Bv=Kx[Fv],Ej=Bv.toLowerCase(),Rj=Bv[0].toUpperCase()+Bv.slice(1);Gc(Ej,"on"+Rj)}Gc(SR,"onAnimationEnd");Gc(ER,"onAnimationIteration");Gc(RR,"onAnimationStart");Gc("dblclick","onDoubleClick");Gc("focusin","onFocus");Gc("focusout","onBlur");Gc(kR,"onTransitionEnd");fu("onMouseEnter",["mouseout","mouseover"]);fu("onMouseLeave",["mouseout","mouseover"]);fu("onPointerEnter",["pointerout","pointerover"]);fu("onPointerLeave",["pointerout","pointerover"]);od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));od("onBeforeInput",["compositionend","keypress","textInput","paste"]);od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pp));function Gx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,EO(n,t,void 0,e),e.currentTarget=null}function TR(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var c=n.length-1;0<=c;c--){var d=n[c],l=d.instance,o=d.currentTarget;if(d=d.listener,l!==i&&s.isPropagationStopped())break e;Gx(s,d,o),i=l}else for(c=0;c<n.length;c++){if(d=n[c],l=d.instance,o=d.currentTarget,d=d.listener,l!==i&&s.isPropagationStopped())break e;Gx(s,d,o),i=l}}}if(Im)throw e=ry,Im=!1,ry=null,e}function Yn(e,t){var r=t[py];r===void 0&&(r=t[py]=new Set);var n=e+"__bubble";r.has(n)||(PR(t,e,2,!1),r.add(n))}function Uv(e,t,r){var n=0;t&&(n|=4),PR(r,e,n,t)}var If="_reactListening"+Math.random().toString(36).slice(2);function nh(e){if(!e[If]){e[If]=!0,ME.forEach(function(r){r!=="selectionchange"&&(kj.has(r)||Uv(r,!1,e),Uv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[If]||(t[If]=!0,Uv("selectionchange",!1,t))}}function PR(e,t,r,n){switch(pR(t)){case 1:var s=UO;break;case 4:s=VO;break;default:s=iw}r=s.bind(null,t,r,e),s=void 0,!ty||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Vv(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var d=n.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(c===4)for(c=n.return;c!==null;){var l=c.tag;if((l===3||l===4)&&(l=c.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;c=c.return}for(;d!==null;){if(c=Ll(d),c===null)return;if(l=c.tag,l===5||l===6){n=i=c;continue e}d=d.parentNode}}n=n.return}XE(function(){var o=i,p=tw(r),y=[];e:{var m=CR.get(e);if(m!==void 0){var u=ow,b=e;switch(e){case"keypress":if(cm(r)===0)break e;case"keydown":case"keyup":u=rj;break;case"focusin":b="focus",u=Dv;break;case"focusout":b="blur",u=Dv;break;case"beforeblur":case"afterblur":u=Dv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=Mx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=zO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=ij;break;case SR:case ER:case RR:u=KO;break;case kR:u=oj;break;case"scroll":u=$O;break;case"wheel":u=lj;break;case"copy":case"cut":case"paste":u=YO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Fx}var f=(t&4)!==0,_=!f&&e==="scroll",g=f?m!==null?m+"Capture":null:m;f=[];for(var v=o,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=Qp(v,g),S!=null&&f.push(sh(v,S,w)))),_)break;v=v.return}0<f.length&&(m=new u(m,b,null,r,p),y.push({event:m,listeners:f}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",u=e==="mouseout"||e==="pointerout",m&&r!==Z0&&(b=r.relatedTarget||r.fromElement)&&(Ll(b)||b[Po]))break e;if((u||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,u?(b=r.relatedTarget||r.toElement,u=o,b=b?Ll(b):null,b!==null&&(_=cd(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(u=null,b=o),u!==b)){if(f=Mx,S="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(f=Fx,S="onPointerLeave",g="onPointerEnter",v="pointer"),_=u==null?m:zd(u),w=b==null?m:zd(b),m=new f(S,v+"leave",u,r,p),m.target=_,m.relatedTarget=w,S=null,Ll(p)===o&&(f=new f(g,v+"enter",b,r,p),f.target=w,f.relatedTarget=_,S=f),_=S,u&&b)t:{for(f=u,g=b,v=0,w=f;w;w=Id(w))v++;for(w=0,S=g;S;S=Id(S))w++;for(;0<v-w;)f=Id(f),v--;for(;0<w-v;)g=Id(g),w--;for(;v--;){if(f===g||g!==null&&f===g.alternate)break t;f=Id(f),g=Id(g)}f=null}else f=null;u!==null&&Yx(y,m,u,f,!1),b!==null&&_!==null&&Yx(y,_,b,f,!0)}}e:{if(m=o?zd(o):window,u=m.nodeName&&m.nodeName.toLowerCase(),u==="select"||u==="input"&&m.type==="file")var E=gj;else if(Vx(m))if(yR)E=wj;else{E=yj;var O=vj}else(u=m.nodeName)&&u.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=bj);if(E&&(E=E(e,o))){vR(y,E,r,p);break e}O&&O(e,m,o),e==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&G0(m,"number",m.value)}switch(O=o?zd(o):window,e){case"focusin":(Vx(O)||O.contentEditable==="true")&&($d=O,ay=o,Fp=null);break;case"focusout":Fp=ay=$d=null;break;case"mousedown":oy=!0;break;case"contextmenu":case"mouseup":case"dragend":oy=!1,qx(y,r,p);break;case"selectionchange":if(Sj)break;case"keydown":case"keyup":qx(y,r,p)}var C;if(lw)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vd?mR(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(fR&&r.locale!=="ko"&&(Vd||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vd&&(C=hR()):(Rc=p,aw="value"in Rc?Rc.value:Rc.textContent,Vd=!0)),O=Um(o,k),0<O.length&&(k=new Lx(k,e,null,r,p),y.push({event:k,listeners:O}),C?k.data=C:(C=gR(r),C!==null&&(k.data=C)))),(C=uj?pj(e,r):hj(e,r))&&(o=Um(o,"onBeforeInput"),0<o.length&&(p=new Lx("onBeforeInput","beforeinput",null,r,p),y.push({event:p,listeners:o}),p.data=C))}TR(y,t)})}function sh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Um(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qp(e,r),i!=null&&n.unshift(sh(e,i,s)),i=Qp(e,t),i!=null&&n.push(sh(e,i,s))),e=e.return}return n}function Id(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yx(e,t,r,n,s){for(var i=t._reactName,c=[];r!==null&&r!==n;){var d=r,l=d.alternate,o=d.stateNode;if(l!==null&&l===n)break;d.tag===5&&o!==null&&(d=o,s?(l=Qp(r,i),l!=null&&c.unshift(sh(r,l,d))):s||(l=Qp(r,i),l!=null&&c.push(sh(r,l,d)))),r=r.return}c.length!==0&&e.push({event:t,listeners:c})}var Cj=/\r\n?/g,Tj=/\u0000|\uFFFD/g;function Jx(e){return(typeof e=="string"?e:""+e).replace(Cj,`
`).replace(Tj,"")}function Mf(e,t,r){if(t=Jx(t),Jx(e)!==t&&r)throw Error(_t(425))}function Vm(){}var cy=null,ly=null;function dy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uy=typeof setTimeout=="function"?setTimeout:void 0,Pj=typeof clearTimeout=="function"?clearTimeout:void 0,Qx=typeof Promise=="function"?Promise:void 0,Nj=typeof queueMicrotask=="function"?queueMicrotask:typeof Qx<"u"?function(e){return Qx.resolve(null).then(e).catch(Aj)}:uy;function Aj(e){setTimeout(function(){throw e})}function $v(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),eh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);eh(t)}function Ac(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Pu=Math.random().toString(36).slice(2),Ga="__reactFiber$"+Pu,ih="__reactProps$"+Pu,Po="__reactContainer$"+Pu,py="__reactEvents$"+Pu,Oj="__reactListeners$"+Pu,jj="__reactHandles$"+Pu;function Ll(e){var t=e[Ga];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Po]||r[Ga]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xx(e);e!==null;){if(r=e[Ga])return r;e=Xx(e)}return t}e=r,r=e.parentNode}return null}function jh(e){return e=e[Ga]||e[Po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_t(33))}function jg(e){return e[ih]||null}var hy=[],Hd=-1;function Yc(e){return{current:e}}function Jn(e){0>Hd||(e.current=hy[Hd],hy[Hd]=null,Hd--)}function $n(e,t){Hd++,hy[Hd]=e.current,e.current=t}var Vc={},fi=Yc(Vc),Li=Yc(!1),Yl=Vc;function mu(e,t){var r=e.type.contextTypes;if(!r)return Vc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fi(e){return e=e.childContextTypes,e!=null}function $m(){Jn(Li),Jn(fi)}function Zx(e,t,r){if(fi.current!==Vc)throw Error(_t(168));$n(fi,t),$n(Li,r)}function NR(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(_t(108,vO(e)||"Unknown",s));return ms({},r,n)}function Wm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vc,Yl=fi.current,$n(fi,e),$n(Li,Li.current),!0}function e1(e,t,r){var n=e.stateNode;if(!n)throw Error(_t(169));r?(e=NR(e,t,Yl),n.__reactInternalMemoizedMergedChildContext=e,Jn(Li),Jn(fi),$n(fi,e)):Jn(Li),$n(Li,r)}var So=null,Dg=!1,Wv=!1;function AR(e){So===null?So=[e]:So.push(e)}function Dj(e){Dg=!0,AR(e)}function Jc(){if(!Wv&&So!==null){Wv=!0;var e=0,t=Tn;try{var r=So;for(Tn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}So=null,Dg=!1}catch(s){throw So!==null&&(So=So.slice(e+1)),rR(rw,Jc),s}finally{Tn=t,Wv=!1}}return null}var qd=[],Kd=0,zm=null,Hm=0,ua=[],pa=0,Jl=null,Eo=1,Ro="";function jl(e,t){qd[Kd++]=Hm,qd[Kd++]=zm,zm=e,Hm=t}function OR(e,t,r){ua[pa++]=Eo,ua[pa++]=Ro,ua[pa++]=Jl,Jl=e;var n=Eo;e=Ro;var s=32-ja(n)-1;n&=~(1<<s),r+=1;var i=32-ja(t)+s;if(30<i){var c=s-s%5;i=(n&(1<<c)-1).toString(32),n>>=c,s-=c,Eo=1<<32-ja(t)+s|r<<s|n,Ro=i+e}else Eo=1<<i|r<<s|n,Ro=e}function uw(e){e.return!==null&&(jl(e,1),OR(e,1,0))}function pw(e){for(;e===zm;)zm=qd[--Kd],qd[Kd]=null,Hm=qd[--Kd],qd[Kd]=null;for(;e===Jl;)Jl=ua[--pa],ua[pa]=null,Ro=ua[--pa],ua[pa]=null,Eo=ua[--pa],ua[pa]=null}var Qi=null,Ji=null,rs=!1,Pa=null;function jR(e,t){var r=fa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function t1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qi=e,Ji=Ac(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qi=e,Ji=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Jl!==null?{id:Eo,overflow:Ro}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qi=e,Ji=null,!0):!1;default:return!1}}function fy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function my(e){if(rs){var t=Ji;if(t){var r=t;if(!t1(e,t)){if(fy(e))throw Error(_t(418));t=Ac(r.nextSibling);var n=Qi;t&&t1(e,t)?jR(n,r):(e.flags=e.flags&-4097|2,rs=!1,Qi=e)}}else{if(fy(e))throw Error(_t(418));e.flags=e.flags&-4097|2,rs=!1,Qi=e}}}function r1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qi=e}function Lf(e){if(e!==Qi)return!1;if(!rs)return r1(e),rs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dy(e.type,e.memoizedProps)),t&&(t=Ji)){if(fy(e))throw DR(),Error(_t(418));for(;t;)jR(e,t),t=Ac(t.nextSibling)}if(r1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_t(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ji=Ac(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ji=null}}else Ji=Qi?Ac(e.stateNode.nextSibling):null;return!0}function DR(){for(var e=Ji;e;)e=Ac(e.nextSibling)}function gu(){Ji=Qi=null,rs=!1}function hw(e){Pa===null?Pa=[e]:Pa.push(e)}var Ij=Lo.ReactCurrentBatchConfig;function yp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(_t(309));var n=r.stateNode}if(!n)throw Error(_t(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(c){var d=s.refs;c===null?delete d[i]:d[i]=c},t._stringRef=i,t)}if(typeof e!="string")throw Error(_t(284));if(!r._owner)throw Error(_t(290,e))}return e}function Ff(e,t){throw e=Object.prototype.toString.call(t),Error(_t(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function n1(e){var t=e._init;return t(e._payload)}function IR(e){function t(g,v){if(e){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function r(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=Ic(g,v),g.index=0,g.sibling=null,g}function i(g,v,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function c(g){return e&&g.alternate===null&&(g.flags|=2),g}function d(g,v,w,S){return v===null||v.tag!==6?(v=Jv(w,g.mode,S),v.return=g,v):(v=s(v,w),v.return=g,v)}function l(g,v,w,S){var E=w.type;return E===Ud?p(g,v,w.props.children,S,w.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===_c&&n1(E)===v.type)?(S=s(v,w.props),S.ref=yp(g,v,w),S.return=g,S):(S=mm(w.type,w.key,w.props,null,g.mode,S),S.ref=yp(g,v,w),S.return=g,S)}function o(g,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Qv(w,g.mode,S),v.return=g,v):(v=s(v,w.children||[]),v.return=g,v)}function p(g,v,w,S,E){return v===null||v.tag!==7?(v=zl(w,g.mode,S,E),v.return=g,v):(v=s(v,w),v.return=g,v)}function y(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Jv(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cf:return w=mm(v.type,v.key,v.props,null,g.mode,w),w.ref=yp(g,null,v),w.return=g,w;case Bd:return v=Qv(v,g.mode,w),v.return=g,v;case _c:var S=v._init;return y(g,S(v._payload),w)}if(Cp(v)||hp(v))return v=zl(v,g.mode,w,null),v.return=g,v;Ff(g,v)}return null}function m(g,v,w,S){var E=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:d(g,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cf:return w.key===E?l(g,v,w,S):null;case Bd:return w.key===E?o(g,v,w,S):null;case _c:return E=w._init,m(g,v,E(w._payload),S)}if(Cp(w)||hp(w))return E!==null?null:p(g,v,w,S,null);Ff(g,w)}return null}function u(g,v,w,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,d(v,g,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Cf:return g=g.get(S.key===null?w:S.key)||null,l(v,g,S,E);case Bd:return g=g.get(S.key===null?w:S.key)||null,o(v,g,S,E);case _c:var O=S._init;return u(g,v,w,O(S._payload),E)}if(Cp(S)||hp(S))return g=g.get(w)||null,p(v,g,S,E,null);Ff(v,S)}return null}function b(g,v,w,S){for(var E=null,O=null,C=v,k=v=0,T=null;C!==null&&k<w.length;k++){C.index>k?(T=C,C=null):T=C.sibling;var h=m(g,C,w[k],S);if(h===null){C===null&&(C=T);break}e&&C&&h.alternate===null&&t(g,C),v=i(h,v,k),O===null?E=h:O.sibling=h,O=h,C=T}if(k===w.length)return r(g,C),rs&&jl(g,k),E;if(C===null){for(;k<w.length;k++)C=y(g,w[k],S),C!==null&&(v=i(C,v,k),O===null?E=C:O.sibling=C,O=C);return rs&&jl(g,k),E}for(C=n(g,C);k<w.length;k++)T=u(C,g,k,w[k],S),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?k:T.key),v=i(T,v,k),O===null?E=T:O.sibling=T,O=T);return e&&C.forEach(function(x){return t(g,x)}),rs&&jl(g,k),E}function f(g,v,w,S){var E=hp(w);if(typeof E!="function")throw Error(_t(150));if(w=E.call(w),w==null)throw Error(_t(151));for(var O=E=null,C=v,k=v=0,T=null,h=w.next();C!==null&&!h.done;k++,h=w.next()){C.index>k?(T=C,C=null):T=C.sibling;var x=m(g,C,h.value,S);if(x===null){C===null&&(C=T);break}e&&C&&x.alternate===null&&t(g,C),v=i(x,v,k),O===null?E=x:O.sibling=x,O=x,C=T}if(h.done)return r(g,C),rs&&jl(g,k),E;if(C===null){for(;!h.done;k++,h=w.next())h=y(g,h.value,S),h!==null&&(v=i(h,v,k),O===null?E=h:O.sibling=h,O=h);return rs&&jl(g,k),E}for(C=n(g,C);!h.done;k++,h=w.next())h=u(C,g,k,h.value,S),h!==null&&(e&&h.alternate!==null&&C.delete(h.key===null?k:h.key),v=i(h,v,k),O===null?E=h:O.sibling=h,O=h);return e&&C.forEach(function(R){return t(g,R)}),rs&&jl(g,k),E}function _(g,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Ud&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Cf:e:{for(var E=w.key,O=v;O!==null;){if(O.key===E){if(E=w.type,E===Ud){if(O.tag===7){r(g,O.sibling),v=s(O,w.props.children),v.return=g,g=v;break e}}else if(O.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===_c&&n1(E)===O.type){r(g,O.sibling),v=s(O,w.props),v.ref=yp(g,O,w),v.return=g,g=v;break e}r(g,O);break}else t(g,O);O=O.sibling}w.type===Ud?(v=zl(w.props.children,g.mode,S,w.key),v.return=g,g=v):(S=mm(w.type,w.key,w.props,null,g.mode,S),S.ref=yp(g,v,w),S.return=g,g=S)}return c(g);case Bd:e:{for(O=w.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(g,v.sibling),v=s(v,w.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else t(g,v);v=v.sibling}v=Qv(w,g.mode,S),v.return=g,g=v}return c(g);case _c:return O=w._init,_(g,v,O(w._payload),S)}if(Cp(w))return b(g,v,w,S);if(hp(w))return f(g,v,w,S);Ff(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(g,v.sibling),v=s(v,w),v.return=g,g=v):(r(g,v),v=Jv(w,g.mode,S),v.return=g,g=v),c(g)):r(g,v)}return _}var vu=IR(!0),MR=IR(!1),qm=Yc(null),Km=null,Gd=null,fw=null;function mw(){fw=Gd=Km=null}function gw(e){var t=qm.current;Jn(qm),e._currentValue=t}function gy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function au(e,t){Km=e,fw=Gd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ii=!0),e.firstContext=null)}function ya(e){var t=e._currentValue;if(fw!==e)if(e={context:e,memoizedValue:t,next:null},Gd===null){if(Km===null)throw Error(_t(308));Gd=e,Km.dependencies={lanes:0,firstContext:e}}else Gd=Gd.next=e;return t}var Fl=null;function vw(e){Fl===null?Fl=[e]:Fl.push(e)}function LR(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,vw(t)):(r.next=s.next,s.next=r),t.interleaved=r,No(e,n)}function No(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var xc=!1;function yw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ko(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,vn&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,No(e,r)}return s=n.interleaved,s===null?(t.next=t,vw(n)):(t.next=s.next,s.next=t),n.interleaved=t,No(e,r)}function lm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nw(e,r)}}function s1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=c:i=i.next=c,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gm(e,t,r,n){var s=e.updateQueue;xc=!1;var i=s.firstBaseUpdate,c=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var l=d,o=l.next;l.next=null,c===null?i=o:c.next=o,c=l;var p=e.alternate;p!==null&&(p=p.updateQueue,d=p.lastBaseUpdate,d!==c&&(d===null?p.firstBaseUpdate=o:d.next=o,p.lastBaseUpdate=l))}if(i!==null){var y=s.baseState;c=0,p=o=l=null,d=i;do{var m=d.lane,u=d.eventTime;if((n&m)===m){p!==null&&(p=p.next={eventTime:u,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var b=e,f=d;switch(m=t,u=r,f.tag){case 1:if(b=f.payload,typeof b=="function"){y=b.call(u,y,m);break e}y=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=f.payload,m=typeof b=="function"?b.call(u,y,m):b,m==null)break e;y=ms({},y,m);break e;case 2:xc=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[d]:m.push(d))}else u={eventTime:u,lane:m,tag:d.tag,payload:d.payload,callback:d.callback,next:null},p===null?(o=p=u,l=y):p=p.next=u,c|=m;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;m=d,d=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(l=y),s.baseState=l,s.firstBaseUpdate=o,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do c|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Xl|=c,e.lanes=c,e.memoizedState=y}}function i1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(_t(191,s));s.call(n)}}}var Dh={},eo=Yc(Dh),ah=Yc(Dh),oh=Yc(Dh);function Bl(e){if(e===Dh)throw Error(_t(174));return e}function bw(e,t){switch($n(oh,t),$n(ah,e),$n(eo,Dh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:J0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=J0(t,e)}Jn(eo),$n(eo,t)}function yu(){Jn(eo),Jn(ah),Jn(oh)}function BR(e){Bl(oh.current);var t=Bl(eo.current),r=J0(t,e.type);t!==r&&($n(ah,e),$n(eo,r))}function ww(e){ah.current===e&&(Jn(eo),Jn(ah))}var ds=Yc(0);function Ym(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zv=[];function _w(){for(var e=0;e<zv.length;e++)zv[e]._workInProgressVersionPrimary=null;zv.length=0}var dm=Lo.ReactCurrentDispatcher,Hv=Lo.ReactCurrentBatchConfig,Ql=0,hs=null,Ls=null,Hs=null,Jm=!1,Bp=!1,ch=0,Mj=0;function li(){throw Error(_t(321))}function xw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ia(e[r],t[r]))return!1;return!0}function Sw(e,t,r,n,s,i){if(Ql=i,hs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dm.current=e===null||e.memoizedState===null?Uj:Vj,e=r(n,s),Bp){i=0;do{if(Bp=!1,ch=0,25<=i)throw Error(_t(301));i+=1,Hs=Ls=null,t.updateQueue=null,dm.current=$j,e=r(n,s)}while(Bp)}if(dm.current=Qm,t=Ls!==null&&Ls.next!==null,Ql=0,Hs=Ls=hs=null,Jm=!1,t)throw Error(_t(300));return e}function Ew(){var e=ch!==0;return ch=0,e}function Ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?hs.memoizedState=Hs=e:Hs=Hs.next=e,Hs}function ba(){if(Ls===null){var e=hs.alternate;e=e!==null?e.memoizedState:null}else e=Ls.next;var t=Hs===null?hs.memoizedState:Hs.next;if(t!==null)Hs=t,Ls=e;else{if(e===null)throw Error(_t(310));Ls=e,e={memoizedState:Ls.memoizedState,baseState:Ls.baseState,baseQueue:Ls.baseQueue,queue:Ls.queue,next:null},Hs===null?hs.memoizedState=Hs=e:Hs=Hs.next=e}return Hs}function lh(e,t){return typeof t=="function"?t(e):t}function qv(e){var t=ba(),r=t.queue;if(r===null)throw Error(_t(311));r.lastRenderedReducer=e;var n=Ls,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var c=s.next;s.next=i.next,i.next=c}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var d=c=null,l=null,o=i;do{var p=o.lane;if((Ql&p)===p)l!==null&&(l=l.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:e(n,o.action);else{var y={lane:p,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};l===null?(d=l=y,c=n):l=l.next=y,hs.lanes|=p,Xl|=p}o=o.next}while(o!==null&&o!==i);l===null?c=n:l.next=d,Ia(n,t.memoizedState)||(Ii=!0),t.memoizedState=n,t.baseState=c,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,hs.lanes|=i,Xl|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Kv(e){var t=ba(),r=t.queue;if(r===null)throw Error(_t(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var c=s=s.next;do i=e(i,c.action),c=c.next;while(c!==s);Ia(i,t.memoizedState)||(Ii=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function UR(){}function VR(e,t){var r=hs,n=ba(),s=t(),i=!Ia(n.memoizedState,s);if(i&&(n.memoizedState=s,Ii=!0),n=n.queue,Rw(zR.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Hs!==null&&Hs.memoizedState.tag&1){if(r.flags|=2048,dh(9,WR.bind(null,r,n,s,t),void 0,null),qs===null)throw Error(_t(349));Ql&30||$R(r,t,s)}return s}function $R(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=hs.updateQueue,t===null?(t={lastEffect:null,stores:null},hs.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function WR(e,t,r,n){t.value=r,t.getSnapshot=n,HR(t)&&qR(e)}function zR(e,t,r){return r(function(){HR(t)&&qR(e)})}function HR(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ia(e,r)}catch{return!0}}function qR(e){var t=No(e,1);t!==null&&Da(t,e,1,-1)}function a1(e){var t=Ka();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lh,lastRenderedState:e},t.queue=e,e=e.dispatch=Bj.bind(null,hs,e),[t.memoizedState,e]}function dh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=hs.updateQueue,t===null?(t={lastEffect:null,stores:null},hs.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function KR(){return ba().memoizedState}function um(e,t,r,n){var s=Ka();hs.flags|=e,s.memoizedState=dh(1|t,r,void 0,n===void 0?null:n)}function Ig(e,t,r,n){var s=ba();n=n===void 0?null:n;var i=void 0;if(Ls!==null){var c=Ls.memoizedState;if(i=c.destroy,n!==null&&xw(n,c.deps)){s.memoizedState=dh(t,r,i,n);return}}hs.flags|=e,s.memoizedState=dh(1|t,r,i,n)}function o1(e,t){return um(8390656,8,e,t)}function Rw(e,t){return Ig(2048,8,e,t)}function GR(e,t){return Ig(4,2,e,t)}function YR(e,t){return Ig(4,4,e,t)}function JR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QR(e,t,r){return r=r!=null?r.concat([e]):null,Ig(4,4,JR.bind(null,t,e),r)}function kw(){}function XR(e,t){var r=ba();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ZR(e,t){var r=ba();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function ek(e,t,r){return Ql&21?(Ia(r,t)||(r=iR(),hs.lanes|=r,Xl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ii=!0),e.memoizedState=r)}function Lj(e,t){var r=Tn;Tn=r!==0&&4>r?r:4,e(!0);var n=Hv.transition;Hv.transition={};try{e(!1),t()}finally{Tn=r,Hv.transition=n}}function tk(){return ba().memoizedState}function Fj(e,t,r){var n=Dc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},rk(e))nk(t,r);else if(r=LR(e,t,r,n),r!==null){var s=xi();Da(r,e,n,s),sk(r,t,n)}}function Bj(e,t,r){var n=Dc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(rk(e))nk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var c=t.lastRenderedState,d=i(c,r);if(s.hasEagerState=!0,s.eagerState=d,Ia(d,c)){var l=t.interleaved;l===null?(s.next=s,vw(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=LR(e,t,s,n),r!==null&&(s=xi(),Da(r,e,n,s),sk(r,t,n))}}function rk(e){var t=e.alternate;return e===hs||t!==null&&t===hs}function nk(e,t){Bp=Jm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nw(e,r)}}var Qm={readContext:ya,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useInsertionEffect:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useSyncExternalStore:li,useId:li,unstable_isNewReconciler:!1},Uj={readContext:ya,useCallback:function(e,t){return Ka().memoizedState=[e,t===void 0?null:t],e},useContext:ya,useEffect:o1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,um(4194308,4,JR.bind(null,t,e),r)},useLayoutEffect:function(e,t){return um(4194308,4,e,t)},useInsertionEffect:function(e,t){return um(4,2,e,t)},useMemo:function(e,t){var r=Ka();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ka();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Fj.bind(null,hs,e),[n.memoizedState,e]},useRef:function(e){var t=Ka();return e={current:e},t.memoizedState=e},useState:a1,useDebugValue:kw,useDeferredValue:function(e){return Ka().memoizedState=e},useTransition:function(){var e=a1(!1),t=e[0];return e=Lj.bind(null,e[1]),Ka().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=hs,s=Ka();if(rs){if(r===void 0)throw Error(_t(407));r=r()}else{if(r=t(),qs===null)throw Error(_t(349));Ql&30||$R(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,o1(zR.bind(null,n,i,e),[e]),n.flags|=2048,dh(9,WR.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ka(),t=qs.identifierPrefix;if(rs){var r=Ro,n=Eo;r=(n&~(1<<32-ja(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ch++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Mj++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vj={readContext:ya,useCallback:XR,useContext:ya,useEffect:Rw,useImperativeHandle:QR,useInsertionEffect:GR,useLayoutEffect:YR,useMemo:ZR,useReducer:qv,useRef:KR,useState:function(){return qv(lh)},useDebugValue:kw,useDeferredValue:function(e){var t=ba();return ek(t,Ls.memoizedState,e)},useTransition:function(){var e=qv(lh)[0],t=ba().memoizedState;return[e,t]},useMutableSource:UR,useSyncExternalStore:VR,useId:tk,unstable_isNewReconciler:!1},$j={readContext:ya,useCallback:XR,useContext:ya,useEffect:Rw,useImperativeHandle:QR,useInsertionEffect:GR,useLayoutEffect:YR,useMemo:ZR,useReducer:Kv,useRef:KR,useState:function(){return Kv(lh)},useDebugValue:kw,useDeferredValue:function(e){var t=ba();return Ls===null?t.memoizedState=e:ek(t,Ls.memoizedState,e)},useTransition:function(){var e=Kv(lh)[0],t=ba().memoizedState;return[e,t]},useMutableSource:UR,useSyncExternalStore:VR,useId:tk,unstable_isNewReconciler:!1};function ka(e,t){if(e&&e.defaultProps){t=ms({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function vy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ms({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Mg={isMounted:function(e){return(e=e._reactInternals)?cd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xi(),s=Dc(e),i=ko(n,s);i.payload=t,r!=null&&(i.callback=r),t=Oc(e,i,s),t!==null&&(Da(t,e,s,n),lm(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xi(),s=Dc(e),i=ko(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Oc(e,i,s),t!==null&&(Da(t,e,s,n),lm(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xi(),n=Dc(e),s=ko(r,n);s.tag=2,t!=null&&(s.callback=t),t=Oc(e,s,n),t!==null&&(Da(t,e,n,r),lm(t,e,n))}};function c1(e,t,r,n,s,i,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,c):t.prototype&&t.prototype.isPureReactComponent?!rh(r,n)||!rh(s,i):!0}function ik(e,t,r){var n=!1,s=Vc,i=t.contextType;return typeof i=="object"&&i!==null?i=ya(i):(s=Fi(t)?Yl:fi.current,n=t.contextTypes,i=(n=n!=null)?mu(e,s):Vc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mg,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function l1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Mg.enqueueReplaceState(t,t.state,null)}function yy(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},yw(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ya(i):(i=Fi(t)?Yl:fi.current,s.context=mu(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vy(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Mg.enqueueReplaceState(s,s.state,null),Gm(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function bu(e,t){try{var r="",n=t;do r+=gO(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Gv(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function by(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Wj=typeof WeakMap=="function"?WeakMap:Map;function ak(e,t,r){r=ko(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Zm||(Zm=!0,Py=n),by(e,t)},r}function ok(e,t,r){r=ko(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){by(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){by(e,t),typeof n!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),r}function d1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Wj;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=nD.bind(null,e,t,r),t.then(e,e))}function u1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function p1(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ko(-1,1),t.tag=2,Oc(r,t,1))),r.lanes|=1),e)}var zj=Lo.ReactCurrentOwner,Ii=!1;function yi(e,t,r,n){t.child=e===null?MR(t,null,r,n):vu(t,e.child,r,n)}function h1(e,t,r,n,s){r=r.render;var i=t.ref;return au(t,s),n=Sw(e,t,r,n,i,s),r=Ew(),e!==null&&!Ii?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ao(e,t,s)):(rs&&r&&uw(t),t.flags|=1,yi(e,t,n,s),t.child)}function f1(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Dw(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ck(e,t,i,n,s)):(e=mm(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var c=i.memoizedProps;if(r=r.compare,r=r!==null?r:rh,r(c,n)&&e.ref===t.ref)return Ao(e,t,s)}return t.flags|=1,e=Ic(i,n),e.ref=t.ref,e.return=t,t.child=e}function ck(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(rh(i,n)&&e.ref===t.ref)if(Ii=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ii=!0);else return t.lanes=e.lanes,Ao(e,t,s)}return wy(e,t,r,n,s)}function lk(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Jd,Gi),Gi|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$n(Jd,Gi),Gi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$n(Jd,Gi),Gi|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,$n(Jd,Gi),Gi|=n;return yi(e,t,s,r),t.child}function dk(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wy(e,t,r,n,s){var i=Fi(r)?Yl:fi.current;return i=mu(t,i),au(t,s),r=Sw(e,t,r,n,i,s),n=Ew(),e!==null&&!Ii?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ao(e,t,s)):(rs&&n&&uw(t),t.flags|=1,yi(e,t,r,s),t.child)}function m1(e,t,r,n,s){if(Fi(r)){var i=!0;Wm(t)}else i=!1;if(au(t,s),t.stateNode===null)pm(e,t),ik(t,r,n),yy(t,r,n,s),n=!0;else if(e===null){var c=t.stateNode,d=t.memoizedProps;c.props=d;var l=c.context,o=r.contextType;typeof o=="object"&&o!==null?o=ya(o):(o=Fi(r)?Yl:fi.current,o=mu(t,o));var p=r.getDerivedStateFromProps,y=typeof p=="function"||typeof c.getSnapshotBeforeUpdate=="function";y||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==n||l!==o)&&l1(t,c,n,o),xc=!1;var m=t.memoizedState;c.state=m,Gm(t,n,c,s),l=t.memoizedState,d!==n||m!==l||Li.current||xc?(typeof p=="function"&&(vy(t,r,p,n),l=t.memoizedState),(d=xc||c1(t,r,d,n,m,l,o))?(y||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),c.props=n,c.state=l,c.context=o,n=d):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{c=t.stateNode,FR(e,t),d=t.memoizedProps,o=t.type===t.elementType?d:ka(t.type,d),c.props=o,y=t.pendingProps,m=c.context,l=r.contextType,typeof l=="object"&&l!==null?l=ya(l):(l=Fi(r)?Yl:fi.current,l=mu(t,l));var u=r.getDerivedStateFromProps;(p=typeof u=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==y||m!==l)&&l1(t,c,n,l),xc=!1,m=t.memoizedState,c.state=m,Gm(t,n,c,s);var b=t.memoizedState;d!==y||m!==b||Li.current||xc?(typeof u=="function"&&(vy(t,r,u,n),b=t.memoizedState),(o=xc||c1(t,r,o,n,m,b,l)||!1)?(p||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,b,l),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,b,l)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),c.props=n,c.state=b,c.context=l,n=o):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return _y(e,t,r,n,i,s)}function _y(e,t,r,n,s,i){dk(e,t);var c=(t.flags&128)!==0;if(!n&&!c)return s&&e1(t,r,!1),Ao(e,t,i);n=t.stateNode,zj.current=t;var d=c&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&c?(t.child=vu(t,e.child,null,i),t.child=vu(t,null,d,i)):yi(e,t,d,i),t.memoizedState=n.state,s&&e1(t,r,!0),t.child}function uk(e){var t=e.stateNode;t.pendingContext?Zx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zx(e,t.context,!1),bw(e,t.containerInfo)}function g1(e,t,r,n,s){return gu(),hw(s),t.flags|=256,yi(e,t,r,n),t.child}var xy={dehydrated:null,treeContext:null,retryLane:0};function Sy(e){return{baseLanes:e,cachePool:null,transitions:null}}function pk(e,t,r){var n=t.pendingProps,s=ds.current,i=!1,c=(t.flags&128)!==0,d;if((d=c)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$n(ds,s&1),e===null)return my(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=n.children,e=n.fallback,i?(n=t.mode,i=t.child,c={mode:"hidden",children:c},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=c):i=Bg(c,n,0,null),e=zl(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Sy(r),t.memoizedState=xy,e):Cw(t,c));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return Hj(e,t,c,n,d,s,r);if(i){i=n.fallback,c=t.mode,s=e.child,d=s.sibling;var l={mode:"hidden",children:n.children};return!(c&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Ic(s,l),n.subtreeFlags=s.subtreeFlags&14680064),d!==null?i=Ic(d,i):(i=zl(i,c,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,c=e.child.memoizedState,c=c===null?Sy(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},i.memoizedState=c,i.childLanes=e.childLanes&~r,t.memoizedState=xy,n}return i=e.child,e=i.sibling,n=Ic(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Cw(e,t){return t=Bg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bf(e,t,r,n){return n!==null&&hw(n),vu(t,e.child,null,r),e=Cw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hj(e,t,r,n,s,i,c){if(r)return t.flags&256?(t.flags&=-257,n=Gv(Error(_t(422))),Bf(e,t,c,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Bg({mode:"visible",children:n.children},s,0,null),i=zl(i,s,c,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&vu(t,e.child,null,c),t.child.memoizedState=Sy(c),t.memoizedState=xy,i);if(!(t.mode&1))return Bf(e,t,c,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var d=n.dgst;return n=d,i=Error(_t(419)),n=Gv(i,n,void 0),Bf(e,t,c,n)}if(d=(c&e.childLanes)!==0,Ii||d){if(n=qs,n!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|c)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,No(e,s),Da(n,e,s,-1))}return jw(),n=Gv(Error(_t(421))),Bf(e,t,c,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=sD.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ji=Ac(s.nextSibling),Qi=t,rs=!0,Pa=null,e!==null&&(ua[pa++]=Eo,ua[pa++]=Ro,ua[pa++]=Jl,Eo=e.id,Ro=e.overflow,Jl=t),t=Cw(t,n.children),t.flags|=4096,t)}function v1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gy(e.return,t,r)}function Yv(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function hk(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(yi(e,t,n.children,r),n=ds.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&v1(e,r,t);else if(e.tag===19)v1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($n(ds,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ym(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Yv(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ym(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Yv(t,!0,r,null,i);break;case"together":Yv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ao(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Xl|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_t(153));if(t.child!==null){for(e=t.child,r=Ic(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ic(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qj(e,t,r){switch(t.tag){case 3:uk(t),gu();break;case 5:BR(t);break;case 1:Fi(t.type)&&Wm(t);break;case 4:bw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;$n(qm,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($n(ds,ds.current&1),t.flags|=128,null):r&t.child.childLanes?pk(e,t,r):($n(ds,ds.current&1),e=Ao(e,t,r),e!==null?e.sibling:null);$n(ds,ds.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return hk(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$n(ds,ds.current),n)break;return null;case 22:case 23:return t.lanes=0,lk(e,t,r)}return Ao(e,t,r)}var fk,Ey,mk,gk;fk=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ey=function(){};mk=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Bl(eo.current);var i=null;switch(r){case"input":s=q0(e,s),n=q0(e,n),i=[];break;case"select":s=ms({},s,{value:void 0}),n=ms({},n,{value:void 0}),i=[];break;case"textarea":s=Y0(e,s),n=Y0(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Vm)}Q0(r,n);var c;r=null;for(o in s)if(!n.hasOwnProperty(o)&&s.hasOwnProperty(o)&&s[o]!=null)if(o==="style"){var d=s[o];for(c in d)d.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yp.hasOwnProperty(o)?i||(i=[]):(i=i||[]).push(o,null));for(o in n){var l=n[o];if(d=s!=null?s[o]:void 0,n.hasOwnProperty(o)&&l!==d&&(l!=null||d!=null))if(o==="style")if(d){for(c in d)!d.hasOwnProperty(c)||l&&l.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in l)l.hasOwnProperty(c)&&d[c]!==l[c]&&(r||(r={}),r[c]=l[c])}else r||(i||(i=[]),i.push(o,r)),r=l;else o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,d=d?d.__html:void 0,l!=null&&d!==l&&(i=i||[]).push(o,l)):o==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(o,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(Yp.hasOwnProperty(o)?(l!=null&&o==="onScroll"&&Yn("scroll",e),i||d===l||(i=[])):(i=i||[]).push(o,l))}r&&(i=i||[]).push("style",r);var o=i;(t.updateQueue=o)&&(t.flags|=4)}};gk=function(e,t,r,n){r!==n&&(t.flags|=4)};function bp(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function di(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Kj(e,t,r){var n=t.pendingProps;switch(pw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return di(t),null;case 1:return Fi(t.type)&&$m(),di(t),null;case 3:return n=t.stateNode,yu(),Jn(Li),Jn(fi),_w(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Lf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pa!==null&&(Oy(Pa),Pa=null))),Ey(e,t),di(t),null;case 5:ww(t);var s=Bl(oh.current);if(r=t.type,e!==null&&t.stateNode!=null)mk(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(_t(166));return di(t),null}if(e=Bl(eo.current),Lf(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ga]=t,n[ih]=i,e=(t.mode&1)!==0,r){case"dialog":Yn("cancel",n),Yn("close",n);break;case"iframe":case"object":case"embed":Yn("load",n);break;case"video":case"audio":for(s=0;s<Pp.length;s++)Yn(Pp[s],n);break;case"source":Yn("error",n);break;case"img":case"image":case"link":Yn("error",n),Yn("load",n);break;case"details":Yn("toggle",n);break;case"input":kx(n,i),Yn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Yn("invalid",n);break;case"textarea":Tx(n,i),Yn("invalid",n)}Q0(r,i),s=null;for(var c in i)if(i.hasOwnProperty(c)){var d=i[c];c==="children"?typeof d=="string"?n.textContent!==d&&(i.suppressHydrationWarning!==!0&&Mf(n.textContent,d,e),s=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&Mf(n.textContent,d,e),s=["children",""+d]):Yp.hasOwnProperty(c)&&d!=null&&c==="onScroll"&&Yn("scroll",n)}switch(r){case"input":Tf(n),Cx(n,i,!0);break;case"textarea":Tf(n),Px(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Vm)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),r==="select"&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[Ga]=t,e[ih]=n,fk(e,t,!1,!1),t.stateNode=e;e:{switch(c=X0(r,n),r){case"dialog":Yn("cancel",e),Yn("close",e),s=n;break;case"iframe":case"object":case"embed":Yn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Pp.length;s++)Yn(Pp[s],e);s=n;break;case"source":Yn("error",e),s=n;break;case"img":case"image":case"link":Yn("error",e),Yn("load",e),s=n;break;case"details":Yn("toggle",e),s=n;break;case"input":kx(e,n),s=q0(e,n),Yn("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ms({},n,{value:void 0}),Yn("invalid",e);break;case"textarea":Tx(e,n),s=Y0(e,n),Yn("invalid",e);break;default:s=n}Q0(r,s),d=s;for(i in d)if(d.hasOwnProperty(i)){var l=d[i];i==="style"?KE(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HE(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Jp(e,l):typeof l=="number"&&Jp(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Yn("scroll",e):l!=null&&Qb(e,i,l,c))}switch(r){case"input":Tf(e),Cx(e,n,!1);break;case"textarea":Tf(e),Px(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Uc(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ru(e,!!n.multiple,i,!1):n.defaultValue!=null&&ru(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Vm)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return di(t),null;case 6:if(e&&t.stateNode!=null)gk(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_t(166));if(r=Bl(oh.current),Bl(eo.current),Lf(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ga]=t,(i=n.nodeValue!==r)&&(e=Qi,e!==null))switch(e.tag){case 3:Mf(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mf(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ga]=t,t.stateNode=n}return di(t),null;case 13:if(Jn(ds),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rs&&Ji!==null&&t.mode&1&&!(t.flags&128))DR(),gu(),t.flags|=98560,i=!1;else if(i=Lf(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(_t(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_t(317));i[Ga]=t}else gu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;di(t),i=!1}else Pa!==null&&(Oy(Pa),Pa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ds.current&1?Fs===0&&(Fs=3):jw())),t.updateQueue!==null&&(t.flags|=4),di(t),null);case 4:return yu(),Ey(e,t),e===null&&nh(t.stateNode.containerInfo),di(t),null;case 10:return gw(t.type._context),di(t),null;case 17:return Fi(t.type)&&$m(),di(t),null;case 19:if(Jn(ds),i=t.memoizedState,i===null)return di(t),null;if(n=(t.flags&128)!==0,c=i.rendering,c===null)if(n)bp(i,!1);else{if(Fs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=Ym(e),c!==null){for(t.flags|=128,bp(i,!1),n=c.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,c=i.alternate,c===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,e=c.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $n(ds,ds.current&1|2),t.child}e=e.sibling}i.tail!==null&&Rs()>wu&&(t.flags|=128,n=!0,bp(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ym(c),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!c.alternate&&!rs)return di(t),null}else 2*Rs()-i.renderingStartTime>wu&&r!==1073741824&&(t.flags|=128,n=!0,bp(i,!1),t.lanes=4194304);i.isBackwards?(c.sibling=t.child,t.child=c):(r=i.last,r!==null?r.sibling=c:t.child=c,i.last=c)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Rs(),t.sibling=null,r=ds.current,$n(ds,n?r&1|2:r&1),t):(di(t),null);case 22:case 23:return Ow(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Gi&1073741824&&(di(t),t.subtreeFlags&6&&(t.flags|=8192)):di(t),null;case 24:return null;case 25:return null}throw Error(_t(156,t.tag))}function Gj(e,t){switch(pw(t),t.tag){case 1:return Fi(t.type)&&$m(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yu(),Jn(Li),Jn(fi),_w(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ww(t),null;case 13:if(Jn(ds),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_t(340));gu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jn(ds),null;case 4:return yu(),null;case 10:return gw(t.type._context),null;case 22:case 23:return Ow(),null;case 24:return null;default:return null}}var Uf=!1,ui=!1,Yj=typeof WeakSet=="function"?WeakSet:Set,tr=null;function Yd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ys(e,t,n)}else r.current=null}function Ry(e,t,r){try{r()}catch(n){ys(e,t,n)}}var y1=!1;function Jj(e,t){if(cy=Fm,e=_R(),dw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var c=0,d=-1,l=-1,o=0,p=0,y=e,m=null;t:for(;;){for(var u;y!==r||s!==0&&y.nodeType!==3||(d=c+s),y!==i||n!==0&&y.nodeType!==3||(l=c+n),y.nodeType===3&&(c+=y.nodeValue.length),(u=y.firstChild)!==null;)m=y,y=u;for(;;){if(y===e)break t;if(m===r&&++o===s&&(d=c),m===i&&++p===n&&(l=c),(u=y.nextSibling)!==null)break;y=m,m=y.parentNode}y=u}r=d===-1||l===-1?null:{start:d,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ly={focusedElem:e,selectionRange:r},Fm=!1,tr=t;tr!==null;)if(t=tr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tr=e;else for(;tr!==null;){t=tr;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var f=b.memoizedProps,_=b.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?f:ka(t.type,f),_);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_t(163))}}catch(S){ys(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,tr=e;break}tr=t.return}return b=y1,y1=!1,b}function Up(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ry(t,r,i)}s=s.next}while(s!==n)}}function Lg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ky(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vk(e){var t=e.alternate;t!==null&&(e.alternate=null,vk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ga],delete t[ih],delete t[py],delete t[Oj],delete t[jj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yk(e){return e.tag===5||e.tag===3||e.tag===4}function b1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cy(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Vm));else if(n!==4&&(e=e.child,e!==null))for(Cy(e,t,r),e=e.sibling;e!==null;)Cy(e,t,r),e=e.sibling}function Ty(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ty(e,t,r),e=e.sibling;e!==null;)Ty(e,t,r),e=e.sibling}var Zs=null,Ca=!1;function fc(e,t,r){for(r=r.child;r!==null;)bk(e,t,r),r=r.sibling}function bk(e,t,r){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(Pg,r)}catch{}switch(r.tag){case 5:ui||Yd(r,t);case 6:var n=Zs,s=Ca;Zs=null,fc(e,t,r),Zs=n,Ca=s,Zs!==null&&(Ca?(e=Zs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Zs.removeChild(r.stateNode));break;case 18:Zs!==null&&(Ca?(e=Zs,r=r.stateNode,e.nodeType===8?$v(e.parentNode,r):e.nodeType===1&&$v(e,r),eh(e)):$v(Zs,r.stateNode));break;case 4:n=Zs,s=Ca,Zs=r.stateNode.containerInfo,Ca=!0,fc(e,t,r),Zs=n,Ca=s;break;case 0:case 11:case 14:case 15:if(!ui&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,c=i.destroy;i=i.tag,c!==void 0&&(i&2||i&4)&&Ry(r,t,c),s=s.next}while(s!==n)}fc(e,t,r);break;case 1:if(!ui&&(Yd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){ys(r,t,d)}fc(e,t,r);break;case 21:fc(e,t,r);break;case 22:r.mode&1?(ui=(n=ui)||r.memoizedState!==null,fc(e,t,r),ui=n):fc(e,t,r);break;default:fc(e,t,r)}}function w1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Yj),t.forEach(function(n){var s=iD.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function xa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,c=t,d=c;e:for(;d!==null;){switch(d.tag){case 5:Zs=d.stateNode,Ca=!1;break e;case 3:Zs=d.stateNode.containerInfo,Ca=!0;break e;case 4:Zs=d.stateNode.containerInfo,Ca=!0;break e}d=d.return}if(Zs===null)throw Error(_t(160));bk(i,c,s),Zs=null,Ca=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(o){ys(s,t,o)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wk(t,e),t=t.sibling}function wk(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xa(t,e),Ha(e),n&4){try{Up(3,e,e.return),Lg(3,e)}catch(f){ys(e,e.return,f)}try{Up(5,e,e.return)}catch(f){ys(e,e.return,f)}}break;case 1:xa(t,e),Ha(e),n&512&&r!==null&&Yd(r,r.return);break;case 5:if(xa(t,e),Ha(e),n&512&&r!==null&&Yd(r,r.return),e.flags&32){var s=e.stateNode;try{Jp(s,"")}catch(f){ys(e,e.return,f)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,c=r!==null?r.memoizedProps:i,d=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&$E(s,i),X0(d,c);var o=X0(d,i);for(c=0;c<l.length;c+=2){var p=l[c],y=l[c+1];p==="style"?KE(s,y):p==="dangerouslySetInnerHTML"?HE(s,y):p==="children"?Jp(s,y):Qb(s,p,y,o)}switch(d){case"input":K0(s,i);break;case"textarea":WE(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var u=i.value;u!=null?ru(s,!!i.multiple,u,!1):m!==!!i.multiple&&(i.defaultValue!=null?ru(s,!!i.multiple,i.defaultValue,!0):ru(s,!!i.multiple,i.multiple?[]:"",!1))}s[ih]=i}catch(f){ys(e,e.return,f)}}break;case 6:if(xa(t,e),Ha(e),n&4){if(e.stateNode===null)throw Error(_t(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){ys(e,e.return,f)}}break;case 3:if(xa(t,e),Ha(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{eh(t.containerInfo)}catch(f){ys(e,e.return,f)}break;case 4:xa(t,e),Ha(e);break;case 13:xa(t,e),Ha(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nw=Rs())),n&4&&w1(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(ui=(o=ui)||p,xa(t,e),ui=o):xa(t,e),Ha(e),n&8192){if(o=e.memoizedState!==null,(e.stateNode.isHidden=o)&&!p&&e.mode&1)for(tr=e,p=e.child;p!==null;){for(y=tr=p;tr!==null;){switch(m=tr,u=m.child,m.tag){case 0:case 11:case 14:case 15:Up(4,m,m.return);break;case 1:Yd(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(f){ys(n,r,f)}}break;case 5:Yd(m,m.return);break;case 22:if(m.memoizedState!==null){x1(y);continue}}u!==null?(u.return=m,tr=u):x1(y)}p=p.sibling}e:for(p=null,y=e;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,o?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=y.stateNode,l=y.memoizedProps.style,c=l!=null&&l.hasOwnProperty("display")?l.display:null,d.style.display=qE("display",c))}catch(f){ys(e,e.return,f)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=o?"":y.memoizedProps}catch(f){ys(e,e.return,f)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:xa(t,e),Ha(e),n&4&&w1(e);break;case 21:break;default:xa(t,e),Ha(e)}}function Ha(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(yk(r)){var n=r;break e}r=r.return}throw Error(_t(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Jp(s,""),n.flags&=-33);var i=b1(e);Ty(e,i,s);break;case 3:case 4:var c=n.stateNode.containerInfo,d=b1(e);Cy(e,d,c);break;default:throw Error(_t(161))}}catch(l){ys(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qj(e,t,r){tr=e,_k(e)}function _k(e,t,r){for(var n=(e.mode&1)!==0;tr!==null;){var s=tr,i=s.child;if(s.tag===22&&n){var c=s.memoizedState!==null||Uf;if(!c){var d=s.alternate,l=d!==null&&d.memoizedState!==null||ui;d=Uf;var o=ui;if(Uf=c,(ui=l)&&!o)for(tr=s;tr!==null;)c=tr,l=c.child,c.tag===22&&c.memoizedState!==null?S1(s):l!==null?(l.return=c,tr=l):S1(s);for(;i!==null;)tr=i,_k(i),i=i.sibling;tr=s,Uf=d,ui=o}_1(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,tr=i):_1(e)}}function _1(e){for(;tr!==null;){var t=tr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ui||Lg(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ui)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ka(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&i1(t,i,n);break;case 3:var c=t.updateQueue;if(c!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}i1(t,c,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var o=t.alternate;if(o!==null){var p=o.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&eh(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_t(163))}ui||t.flags&512&&ky(t)}catch(m){ys(t,t.return,m)}}if(t===e){tr=null;break}if(r=t.sibling,r!==null){r.return=t.return,tr=r;break}tr=t.return}}function x1(e){for(;tr!==null;){var t=tr;if(t===e){tr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,tr=r;break}tr=t.return}}function S1(e){for(;tr!==null;){var t=tr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Lg(4,t)}catch(l){ys(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){ys(t,s,l)}}var i=t.return;try{ky(t)}catch(l){ys(t,i,l)}break;case 5:var c=t.return;try{ky(t)}catch(l){ys(t,c,l)}}}catch(l){ys(t,t.return,l)}if(t===e){tr=null;break}var d=t.sibling;if(d!==null){d.return=t.return,tr=d;break}tr=t.return}}var Xj=Math.ceil,Xm=Lo.ReactCurrentDispatcher,Tw=Lo.ReactCurrentOwner,ma=Lo.ReactCurrentBatchConfig,vn=0,qs=null,Ds=null,ti=0,Gi=0,Jd=Yc(0),Fs=0,uh=null,Xl=0,Fg=0,Pw=0,Vp=null,Di=null,Nw=0,wu=1/0,xo=null,Zm=!1,Py=null,jc=null,Vf=!1,kc=null,eg=0,$p=0,Ny=null,hm=-1,fm=0;function xi(){return vn&6?Rs():hm!==-1?hm:hm=Rs()}function Dc(e){return e.mode&1?vn&2&&ti!==0?ti&-ti:Ij.transition!==null?(fm===0&&(fm=iR()),fm):(e=Tn,e!==0||(e=window.event,e=e===void 0?16:pR(e.type)),e):1}function Da(e,t,r,n){if(50<$p)throw $p=0,Ny=null,Error(_t(185));Ah(e,r,n),(!(vn&2)||e!==qs)&&(e===qs&&(!(vn&2)&&(Fg|=r),Fs===4&&Ec(e,ti)),Bi(e,n),r===1&&vn===0&&!(t.mode&1)&&(wu=Rs()+500,Dg&&Jc()))}function Bi(e,t){var r=e.callbackNode;IO(e,t);var n=Lm(e,e===qs?ti:0);if(n===0)r!==null&&Ox(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ox(r),t===1)e.tag===0?Dj(E1.bind(null,e)):AR(E1.bind(null,e)),Nj(function(){!(vn&6)&&Jc()}),r=null;else{switch(aR(n)){case 1:r=rw;break;case 4:r=nR;break;case 16:r=Mm;break;case 536870912:r=sR;break;default:r=Mm}r=Pk(r,xk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xk(e,t){if(hm=-1,fm=0,vn&6)throw Error(_t(327));var r=e.callbackNode;if(ou()&&e.callbackNode!==r)return null;var n=Lm(e,e===qs?ti:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=tg(e,n);else{t=n;var s=vn;vn|=2;var i=Ek();(qs!==e||ti!==t)&&(xo=null,wu=Rs()+500,Wl(e,t));do try{tD();break}catch(d){Sk(e,d)}while(!0);mw(),Xm.current=i,vn=s,Ds!==null?t=0:(qs=null,ti=0,t=Fs)}if(t!==0){if(t===2&&(s=ny(e),s!==0&&(n=s,t=Ay(e,s))),t===1)throw r=uh,Wl(e,0),Ec(e,n),Bi(e,Rs()),r;if(t===6)Ec(e,n);else{if(s=e.current.alternate,!(n&30)&&!Zj(s)&&(t=tg(e,n),t===2&&(i=ny(e),i!==0&&(n=i,t=Ay(e,i))),t===1))throw r=uh,Wl(e,0),Ec(e,n),Bi(e,Rs()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(_t(345));case 2:Dl(e,Di,xo);break;case 3:if(Ec(e,n),(n&130023424)===n&&(t=Nw+500-Rs(),10<t)){if(Lm(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){xi(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=uy(Dl.bind(null,e,Di,xo),t);break}Dl(e,Di,xo);break;case 4:if(Ec(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var c=31-ja(n);i=1<<c,c=t[c],c>s&&(s=c),n&=~i}if(n=s,n=Rs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Xj(n/1960))-n,10<n){e.timeoutHandle=uy(Dl.bind(null,e,Di,xo),n);break}Dl(e,Di,xo);break;case 5:Dl(e,Di,xo);break;default:throw Error(_t(329))}}}return Bi(e,Rs()),e.callbackNode===r?xk.bind(null,e):null}function Ay(e,t){var r=Vp;return e.current.memoizedState.isDehydrated&&(Wl(e,t).flags|=256),e=tg(e,t),e!==2&&(t=Di,Di=r,t!==null&&Oy(t)),e}function Oy(e){Di===null?Di=e:Di.push.apply(Di,e)}function Zj(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ia(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ec(e,t){for(t&=~Pw,t&=~Fg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ja(t),n=1<<r;e[r]=-1,t&=~n}}function E1(e){if(vn&6)throw Error(_t(327));ou();var t=Lm(e,0);if(!(t&1))return Bi(e,Rs()),null;var r=tg(e,t);if(e.tag!==0&&r===2){var n=ny(e);n!==0&&(t=n,r=Ay(e,n))}if(r===1)throw r=uh,Wl(e,0),Ec(e,t),Bi(e,Rs()),r;if(r===6)throw Error(_t(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dl(e,Di,xo),Bi(e,Rs()),null}function Aw(e,t){var r=vn;vn|=1;try{return e(t)}finally{vn=r,vn===0&&(wu=Rs()+500,Dg&&Jc())}}function Zl(e){kc!==null&&kc.tag===0&&!(vn&6)&&ou();var t=vn;vn|=1;var r=ma.transition,n=Tn;try{if(ma.transition=null,Tn=1,e)return e()}finally{Tn=n,ma.transition=r,vn=t,!(vn&6)&&Jc()}}function Ow(){Gi=Jd.current,Jn(Jd)}function Wl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Pj(r)),Ds!==null)for(r=Ds.return;r!==null;){var n=r;switch(pw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$m();break;case 3:yu(),Jn(Li),Jn(fi),_w();break;case 5:ww(n);break;case 4:yu();break;case 13:Jn(ds);break;case 19:Jn(ds);break;case 10:gw(n.type._context);break;case 22:case 23:Ow()}r=r.return}if(qs=e,Ds=e=Ic(e.current,null),ti=Gi=t,Fs=0,uh=null,Pw=Fg=Xl=0,Di=Vp=null,Fl!==null){for(t=0;t<Fl.length;t++)if(r=Fl[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var c=i.next;i.next=s,n.next=c}r.pending=n}Fl=null}return e}function Sk(e,t){do{var r=Ds;try{if(mw(),dm.current=Qm,Jm){for(var n=hs.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Jm=!1}if(Ql=0,Hs=Ls=hs=null,Bp=!1,ch=0,Tw.current=null,r===null||r.return===null){Fs=1,uh=t,Ds=null;break}e:{var i=e,c=r.return,d=r,l=t;if(t=ti,d.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var o=l,p=d,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var u=u1(c);if(u!==null){u.flags&=-257,p1(u,c,d,i,t),u.mode&1&&d1(i,o,t),t=u,l=o;var b=t.updateQueue;if(b===null){var f=new Set;f.add(l),t.updateQueue=f}else b.add(l);break e}else{if(!(t&1)){d1(i,o,t),jw();break e}l=Error(_t(426))}}else if(rs&&d.mode&1){var _=u1(c);if(_!==null){!(_.flags&65536)&&(_.flags|=256),p1(_,c,d,i,t),hw(bu(l,d));break e}}i=l=bu(l,d),Fs!==4&&(Fs=2),Vp===null?Vp=[i]:Vp.push(i),i=c;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=ak(i,l,t);s1(i,g);break e;case 1:d=l;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(jc===null||!jc.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=ok(i,d,t);s1(i,S);break e}}i=i.return}while(i!==null)}kk(r)}catch(E){t=E,Ds===r&&r!==null&&(Ds=r=r.return);continue}break}while(!0)}function Ek(){var e=Xm.current;return Xm.current=Qm,e===null?Qm:e}function jw(){(Fs===0||Fs===3||Fs===2)&&(Fs=4),qs===null||!(Xl&268435455)&&!(Fg&268435455)||Ec(qs,ti)}function tg(e,t){var r=vn;vn|=2;var n=Ek();(qs!==e||ti!==t)&&(xo=null,Wl(e,t));do try{eD();break}catch(s){Sk(e,s)}while(!0);if(mw(),vn=r,Xm.current=n,Ds!==null)throw Error(_t(261));return qs=null,ti=0,Fs}function eD(){for(;Ds!==null;)Rk(Ds)}function tD(){for(;Ds!==null&&!kO();)Rk(Ds)}function Rk(e){var t=Tk(e.alternate,e,Gi);e.memoizedProps=e.pendingProps,t===null?kk(e):Ds=t,Tw.current=null}function kk(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Gj(r,t),r!==null){r.flags&=32767,Ds=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fs=6,Ds=null;return}}else if(r=Kj(r,t,Gi),r!==null){Ds=r;return}if(t=t.sibling,t!==null){Ds=t;return}Ds=t=e}while(t!==null);Fs===0&&(Fs=5)}function Dl(e,t,r){var n=Tn,s=ma.transition;try{ma.transition=null,Tn=1,rD(e,t,r,n)}finally{ma.transition=s,Tn=n}return null}function rD(e,t,r,n){do ou();while(kc!==null);if(vn&6)throw Error(_t(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(_t(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(MO(e,i),e===qs&&(Ds=qs=null,ti=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vf||(Vf=!0,Pk(Mm,function(){return ou(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ma.transition,ma.transition=null;var c=Tn;Tn=1;var d=vn;vn|=4,Tw.current=null,Jj(e,r),wk(r,e),xj(ly),Fm=!!cy,ly=cy=null,e.current=r,Qj(r),CO(),vn=d,Tn=c,ma.transition=i}else e.current=r;if(Vf&&(Vf=!1,kc=e,eg=s),i=e.pendingLanes,i===0&&(jc=null),NO(r.stateNode),Bi(e,Rs()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Zm)throw Zm=!1,e=Py,Py=null,e;return eg&1&&e.tag!==0&&ou(),i=e.pendingLanes,i&1?e===Ny?$p++:($p=0,Ny=e):$p=0,Jc(),null}function ou(){if(kc!==null){var e=aR(eg),t=ma.transition,r=Tn;try{if(ma.transition=null,Tn=16>e?16:e,kc===null)var n=!1;else{if(e=kc,kc=null,eg=0,vn&6)throw Error(_t(331));var s=vn;for(vn|=4,tr=e.current;tr!==null;){var i=tr,c=i.child;if(tr.flags&16){var d=i.deletions;if(d!==null){for(var l=0;l<d.length;l++){var o=d[l];for(tr=o;tr!==null;){var p=tr;switch(p.tag){case 0:case 11:case 15:Up(8,p,i)}var y=p.child;if(y!==null)y.return=p,tr=y;else for(;tr!==null;){p=tr;var m=p.sibling,u=p.return;if(vk(p),p===o){tr=null;break}if(m!==null){m.return=u,tr=m;break}tr=u}}}var b=i.alternate;if(b!==null){var f=b.child;if(f!==null){b.child=null;do{var _=f.sibling;f.sibling=null,f=_}while(f!==null)}}tr=i}}if(i.subtreeFlags&2064&&c!==null)c.return=i,tr=c;else e:for(;tr!==null;){if(i=tr,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Up(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,tr=g;break e}tr=i.return}}var v=e.current;for(tr=v;tr!==null;){c=tr;var w=c.child;if(c.subtreeFlags&2064&&w!==null)w.return=c,tr=w;else e:for(c=v;tr!==null;){if(d=tr,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Lg(9,d)}}catch(E){ys(d,d.return,E)}if(d===c){tr=null;break e}var S=d.sibling;if(S!==null){S.return=d.return,tr=S;break e}tr=d.return}}if(vn=s,Jc(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(Pg,e)}catch{}n=!0}return n}finally{Tn=r,ma.transition=t}}return!1}function R1(e,t,r){t=bu(r,t),t=ak(e,t,1),e=Oc(e,t,1),t=xi(),e!==null&&(Ah(e,1,t),Bi(e,t))}function ys(e,t,r){if(e.tag===3)R1(e,e,r);else for(;t!==null;){if(t.tag===3){R1(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jc===null||!jc.has(n))){e=bu(r,e),e=ok(t,e,1),t=Oc(t,e,1),e=xi(),t!==null&&(Ah(t,1,e),Bi(t,e));break}}t=t.return}}function nD(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xi(),e.pingedLanes|=e.suspendedLanes&r,qs===e&&(ti&r)===r&&(Fs===4||Fs===3&&(ti&130023424)===ti&&500>Rs()-Nw?Wl(e,0):Pw|=r),Bi(e,t)}function Ck(e,t){t===0&&(e.mode&1?(t=Af,Af<<=1,!(Af&130023424)&&(Af=4194304)):t=1);var r=xi();e=No(e,t),e!==null&&(Ah(e,t,r),Bi(e,r))}function sD(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ck(e,r)}function iD(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(_t(314))}n!==null&&n.delete(t),Ck(e,r)}var Tk;Tk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Li.current)Ii=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ii=!1,qj(e,t,r);Ii=!!(e.flags&131072)}else Ii=!1,rs&&t.flags&1048576&&OR(t,Hm,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;pm(e,t),e=t.pendingProps;var s=mu(t,fi.current);au(t,r),s=Sw(null,t,n,e,s,r);var i=Ew();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fi(n)?(i=!0,Wm(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yw(t),s.updater=Mg,t.stateNode=s,s._reactInternals=t,yy(t,n,e,r),t=_y(null,t,n,!0,i,r)):(t.tag=0,rs&&i&&uw(t),yi(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(pm(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=oD(n),e=ka(n,e),s){case 0:t=wy(null,t,n,e,r);break e;case 1:t=m1(null,t,n,e,r);break e;case 11:t=h1(null,t,n,e,r);break e;case 14:t=f1(null,t,n,ka(n.type,e),r);break e}throw Error(_t(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ka(n,s),wy(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ka(n,s),m1(e,t,n,s,r);case 3:e:{if(uk(t),e===null)throw Error(_t(387));n=t.pendingProps,i=t.memoizedState,s=i.element,FR(e,t),Gm(t,n,null,r);var c=t.memoizedState;if(n=c.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=bu(Error(_t(423)),t),t=g1(e,t,n,r,s);break e}else if(n!==s){s=bu(Error(_t(424)),t),t=g1(e,t,n,r,s);break e}else for(Ji=Ac(t.stateNode.containerInfo.firstChild),Qi=t,rs=!0,Pa=null,r=MR(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gu(),n===s){t=Ao(e,t,r);break e}yi(e,t,n,r)}t=t.child}return t;case 5:return BR(t),e===null&&my(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,c=s.children,dy(n,s)?c=null:i!==null&&dy(n,i)&&(t.flags|=32),dk(e,t),yi(e,t,c,r),t.child;case 6:return e===null&&my(t),null;case 13:return pk(e,t,r);case 4:return bw(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=vu(t,null,n,r):yi(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ka(n,s),h1(e,t,n,s,r);case 7:return yi(e,t,t.pendingProps,r),t.child;case 8:return yi(e,t,t.pendingProps.children,r),t.child;case 12:return yi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,c=s.value,$n(qm,n._currentValue),n._currentValue=c,i!==null)if(Ia(i.value,c)){if(i.children===s.children&&!Li.current){t=Ao(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var d=i.dependencies;if(d!==null){c=i.child;for(var l=d.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=ko(-1,r&-r),l.tag=2;var o=i.updateQueue;if(o!==null){o=o.shared;var p=o.pending;p===null?l.next=l:(l.next=p.next,p.next=l),o.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),gy(i.return,r,t),d.lanes|=r;break}l=l.next}}else if(i.tag===10)c=i.type===t.type?null:i.child;else if(i.tag===18){if(c=i.return,c===null)throw Error(_t(341));c.lanes|=r,d=c.alternate,d!==null&&(d.lanes|=r),gy(c,r,t),c=i.sibling}else c=i.child;if(c!==null)c.return=i;else for(c=i;c!==null;){if(c===t){c=null;break}if(i=c.sibling,i!==null){i.return=c.return,c=i;break}c=c.return}i=c}yi(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,au(t,r),s=ya(s),n=n(s),t.flags|=1,yi(e,t,n,r),t.child;case 14:return n=t.type,s=ka(n,t.pendingProps),s=ka(n.type,s),f1(e,t,n,s,r);case 15:return ck(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ka(n,s),pm(e,t),t.tag=1,Fi(n)?(e=!0,Wm(t)):e=!1,au(t,r),ik(t,n,s),yy(t,n,s,r),_y(null,t,n,!0,e,r);case 19:return hk(e,t,r);case 22:return lk(e,t,r)}throw Error(_t(156,t.tag))};function Pk(e,t){return rR(e,t)}function aD(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(e,t,r,n){return new aD(e,t,r,n)}function Dw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oD(e){if(typeof e=="function")return Dw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zb)return 11;if(e===ew)return 14}return 2}function Ic(e,t){var r=e.alternate;return r===null?(r=fa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mm(e,t,r,n,s,i){var c=2;if(n=e,typeof e=="function")Dw(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case Ud:return zl(r.children,s,i,t);case Xb:c=8,s|=8;break;case $0:return e=fa(12,r,t,s|2),e.elementType=$0,e.lanes=i,e;case W0:return e=fa(13,r,t,s),e.elementType=W0,e.lanes=i,e;case z0:return e=fa(19,r,t,s),e.elementType=z0,e.lanes=i,e;case BE:return Bg(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case LE:c=10;break e;case FE:c=9;break e;case Zb:c=11;break e;case ew:c=14;break e;case _c:c=16,n=null;break e}throw Error(_t(130,e==null?e:typeof e,""))}return t=fa(c,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function zl(e,t,r,n){return e=fa(7,e,n,t),e.lanes=r,e}function Bg(e,t,r,n){return e=fa(22,e,n,t),e.elementType=BE,e.lanes=r,e.stateNode={isHidden:!1},e}function Jv(e,t,r){return e=fa(6,e,null,t),e.lanes=r,e}function Qv(e,t,r){return t=fa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cD(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Av(0),this.expirationTimes=Av(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Av(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iw(e,t,r,n,s,i,c,d,l){return e=new cD(e,t,r,d,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yw(i),e}function lD(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Nk(e){if(!e)return Vc;e=e._reactInternals;e:{if(cd(e)!==e||e.tag!==1)throw Error(_t(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_t(171))}if(e.tag===1){var r=e.type;if(Fi(r))return NR(e,r,t)}return t}function Ak(e,t,r,n,s,i,c,d,l){return e=Iw(r,n,!0,e,s,i,c,d,l),e.context=Nk(null),r=e.current,n=xi(),s=Dc(r),i=ko(n,s),i.callback=t??null,Oc(r,i,s),e.current.lanes=s,Ah(e,s,n),Bi(e,n),e}function Ug(e,t,r,n){var s=t.current,i=xi(),c=Dc(s);return r=Nk(r),t.context===null?t.context=r:t.pendingContext=r,t=ko(i,c),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Oc(s,t,c),e!==null&&(Da(e,s,c,i),lm(e,s,c)),c}function rg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function k1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Mw(e,t){k1(e,t),(e=e.alternate)&&k1(e,t)}function dD(){return null}var Ok=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lw(e){this._internalRoot=e}Vg.prototype.render=Lw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_t(409));Ug(e,t,null,null)};Vg.prototype.unmount=Lw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zl(function(){Ug(null,e,null,null)}),t[Po]=null}};function Vg(e){this._internalRoot=e}Vg.prototype.unstable_scheduleHydration=function(e){if(e){var t=lR();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Sc.length&&t!==0&&t<Sc[r].priority;r++);Sc.splice(r,0,e),r===0&&uR(e)}};function Fw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function C1(){}function uD(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var o=rg(c);i.call(o)}}var c=Ak(t,n,e,0,null,!1,!1,"",C1);return e._reactRootContainer=c,e[Po]=c.current,nh(e.nodeType===8?e.parentNode:e),Zl(),c}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var d=n;n=function(){var o=rg(l);d.call(o)}}var l=Iw(e,0,!1,null,null,!1,!1,"",C1);return e._reactRootContainer=l,e[Po]=l.current,nh(e.nodeType===8?e.parentNode:e),Zl(function(){Ug(t,l,r,n)}),l}function Wg(e,t,r,n,s){var i=r._reactRootContainer;if(i){var c=i;if(typeof s=="function"){var d=s;s=function(){var l=rg(c);d.call(l)}}Ug(t,c,e,s)}else c=uD(r,t,e,s,n);return rg(c)}oR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Tp(t.pendingLanes);r!==0&&(nw(t,r|1),Bi(t,Rs()),!(vn&6)&&(wu=Rs()+500,Jc()))}break;case 13:Zl(function(){var n=No(e,1);if(n!==null){var s=xi();Da(n,e,1,s)}}),Mw(e,1)}};sw=function(e){if(e.tag===13){var t=No(e,134217728);if(t!==null){var r=xi();Da(t,e,134217728,r)}Mw(e,134217728)}};cR=function(e){if(e.tag===13){var t=Dc(e),r=No(e,t);if(r!==null){var n=xi();Da(r,e,t,n)}Mw(e,t)}};lR=function(){return Tn};dR=function(e,t){var r=Tn;try{return Tn=e,t()}finally{Tn=r}};ey=function(e,t,r){switch(t){case"input":if(K0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=jg(n);if(!s)throw Error(_t(90));VE(n),K0(n,s)}}}break;case"textarea":WE(e,r);break;case"select":t=r.value,t!=null&&ru(e,!!r.multiple,t,!1)}};JE=Aw;QE=Zl;var pD={usingClientEntryPoint:!1,Events:[jh,zd,jg,GE,YE,Aw]},wp={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hD={bundleType:wp.bundleType,version:wp.version,rendererPackageName:wp.rendererPackageName,rendererConfig:wp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=eR(e),e===null?null:e.stateNode},findFiberByHostInstance:wp.findFiberByHostInstance||dD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Pg=$f.inject(hD),Za=$f}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pD;ea.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fw(t))throw Error(_t(200));return lD(e,t,null,r)};ea.createRoot=function(e,t){if(!Fw(e))throw Error(_t(299));var r=!1,n="",s=Ok;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Iw(e,1,!1,null,null,r,!1,n,s),e[Po]=t.current,nh(e.nodeType===8?e.parentNode:e),new Lw(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_t(188)):(e=Object.keys(e).join(","),Error(_t(268,e)));return e=eR(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return Zl(e)};ea.hydrate=function(e,t,r){if(!$g(t))throw Error(_t(200));return Wg(null,e,t,!0,r)};ea.hydrateRoot=function(e,t,r){if(!Fw(e))throw Error(_t(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",c=Ok;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),t=Ak(t,null,e,1,r??null,s,!1,i,c),e[Po]=t.current,nh(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Vg(t)};ea.render=function(e,t,r){if(!$g(t))throw Error(_t(200));return Wg(null,e,t,!1,r)};ea.unmountComponentAtNode=function(e){if(!$g(e))throw Error(_t(40));return e._reactRootContainer?(Zl(function(){Wg(null,null,e,!1,function(){e._reactRootContainer=null,e[Po]=null})}),!0):!1};ea.unstable_batchedUpdates=Aw;ea.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$g(r))throw Error(_t(200));if(e==null||e._reactInternals===void 0)throw Error(_t(38));return Wg(e,t,r,!1,n)};ea.version="18.3.1-next-f1338f8080-20240426";function jk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jk)}catch(e){console.error(e)}}jk(),jE.exports=ea;var Qc=jE.exports;const zg=zb(Qc);var T1=Qc;U0.createRoot=T1.createRoot,U0.hydrateRoot=T1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ph.apply(this,arguments)}var Cc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cc||(Cc={}));const P1="popstate";function fD(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:c,hash:d}=n.location;return jy("",{pathname:i,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ng(s)}return gD(t,r,null,e)}function fs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mD(){return Math.random().toString(36).substr(2,8)}function N1(e,t){return{usr:e.state,key:e.key,idx:t}}function jy(e,t,r,n){return r===void 0&&(r=null),ph({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nu(t):t,{state:r,key:t&&t.key||n||mD()})}function ng(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function gD(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,c=s.history,d=Cc.Pop,l=null,o=p();o==null&&(o=0,c.replaceState(ph({},c.state,{idx:o}),""));function p(){return(c.state||{idx:null}).idx}function y(){d=Cc.Pop;let _=p(),g=_==null?null:_-o;o=_,l&&l({action:d,location:f.location,delta:g})}function m(_,g){d=Cc.Push;let v=jy(f.location,_,g);o=p()+1;let w=N1(v,o),S=f.createHref(v);try{c.pushState(w,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(S)}i&&l&&l({action:d,location:f.location,delta:1})}function u(_,g){d=Cc.Replace;let v=jy(f.location,_,g);o=p();let w=N1(v,o),S=f.createHref(v);c.replaceState(w,"",S),i&&l&&l({action:d,location:f.location,delta:0})}function b(_){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof _=="string"?_:ng(_);return v=v.replace(/ $/,"%20"),fs(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let f={get action(){return d},get location(){return e(s,c)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(P1,y),l=_,()=>{s.removeEventListener(P1,y),l=null}},createHref(_){return t(s,_)},createURL:b,encodeLocation(_){let g=b(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:u,go(_){return c.go(_)}};return f}var A1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(A1||(A1={}));function vD(e,t,r){return r===void 0&&(r="/"),yD(e,t,r)}function yD(e,t,r,n){let s=typeof t=="string"?Nu(t):t,i=_u(s.pathname||"/",r);if(i==null)return null;let c=Ik(e);bD(c);let d=null;for(let l=0;d==null&&l<c.length;++l){let o=ND(i);d=TD(c[l],o)}return d}function Ik(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,c,d)=>{let l={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:c,route:i};l.relativePath.startsWith("/")&&(fs(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let o=Mc([n,l.relativePath]),p=r.concat(l);i.children&&i.children.length>0&&(fs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),Ik(i.children,t,p,o)),!(i.path==null&&!i.index)&&t.push({path:o,score:kD(o,i.index),routesMeta:p})};return e.forEach((i,c)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))s(i,c);else for(let l of Mk(i.path))s(i,c,l)}),t}function Mk(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let c=Mk(n.join("/")),d=[];return d.push(...c.map(l=>l===""?i:[i,l].join("/"))),s&&d.push(...c),d.map(l=>e.startsWith("/")&&l===""?"/":l)}function bD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:CD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const wD=/^:[\w-]+$/,_D=3,xD=2,SD=1,ED=10,RD=-2,O1=e=>e==="*";function kD(e,t){let r=e.split("/"),n=r.length;return r.some(O1)&&(n+=RD),t&&(n+=xD),r.filter(s=>!O1(s)).reduce((s,i)=>s+(wD.test(i)?_D:i===""?SD:ED),n)}function CD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function TD(e,t,r){let{routesMeta:n}=e,s={},i="/",c=[];for(let d=0;d<n.length;++d){let l=n[d],o=d===n.length-1,p=i==="/"?t:t.slice(i.length)||"/",y=Dy({path:l.relativePath,caseSensitive:l.caseSensitive,end:o},p),m=l.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Mc([i,y.pathname]),pathnameBase:DD(Mc([i,y.pathnameBase])),route:m}),y.pathnameBase!=="/"&&(i=Mc([i,y.pathnameBase]))}return c}function Dy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=PD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],c=i.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:n.reduce((o,p,y)=>{let{paramName:m,isOptional:u}=p;if(m==="*"){let f=d[y]||"";c=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const b=d[y];return u&&!b?o[m]=void 0:o[m]=(b||"").replace(/%2F/g,"/"),o},{}),pathname:i,pathnameBase:c,pattern:e}}function PD(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Dk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,l)=>(n.push({paramName:d,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function ND(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _u(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function AD(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Nu(e):e;return{pathname:r?r.startsWith("/")?r:OD(r,t):t,search:ID(n),hash:MD(s)}}function OD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Xv(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bw(e,t){let r=jD(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Uw(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Nu(e):(s=ph({},e),fs(!s.pathname||!s.pathname.includes("?"),Xv("?","pathname","search",s)),fs(!s.pathname||!s.pathname.includes("#"),Xv("#","pathname","hash",s)),fs(!s.search||!s.search.includes("#"),Xv("#","search","hash",s)));let i=e===""||s.pathname==="",c=i?"/":s.pathname,d;if(c==null)d=r;else{let y=t.length-1;if(!n&&c.startsWith("..")){let m=c.split("/");for(;m[0]==="..";)m.shift(),y-=1;s.pathname=m.join("/")}d=y>=0?t[y]:"/"}let l=AD(s,d),o=c&&c!=="/"&&c.endsWith("/"),p=(i||c===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(o||p)&&(l.pathname+="/"),l}const Mc=e=>e.join("/").replace(/\/\/+/g,"/"),DD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ID=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function LD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Lk=["post","put","patch","delete"];new Set(Lk);const FD=["get",...Lk];new Set(FD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hh.apply(this,arguments)}const Hg=A.createContext(null),Fk=A.createContext(null),Fo=A.createContext(null),qg=A.createContext(null),co=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Bk=A.createContext(null);function BD(e,t){let{relative:r}=t===void 0?{}:t;Au()||fs(!1);let{basename:n,navigator:s}=A.useContext(Fo),{hash:i,pathname:c,search:d}=Kg(e,{relative:r}),l=c;return n!=="/"&&(l=c==="/"?n:Mc([n,c])),s.createHref({pathname:l,search:d,hash:i})}function Au(){return A.useContext(qg)!=null}function Xc(){return Au()||fs(!1),A.useContext(qg).location}function Uk(e){A.useContext(Fo).static||A.useLayoutEffect(e)}function Ba(){let{isDataRoute:e}=A.useContext(co);return e?e3():UD()}function UD(){Au()||fs(!1);let e=A.useContext(Hg),{basename:t,future:r,navigator:n}=A.useContext(Fo),{matches:s}=A.useContext(co),{pathname:i}=Xc(),c=JSON.stringify(Bw(s,r.v7_relativeSplatPath)),d=A.useRef(!1);return Uk(()=>{d.current=!0}),A.useCallback(function(o,p){if(p===void 0&&(p={}),!d.current)return;if(typeof o=="number"){n.go(o);return}let y=Uw(o,JSON.parse(c),i,p.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Mc([t,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[t,n,c,i,e])}const VD=A.createContext(null);function $D(e){let t=A.useContext(co).outlet;return t&&A.createElement(VD.Provider,{value:e},t)}function Vk(){let{matches:e}=A.useContext(co),t=e[e.length-1];return t?t.params:{}}function Kg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=A.useContext(Fo),{matches:s}=A.useContext(co),{pathname:i}=Xc(),c=JSON.stringify(Bw(s,n.v7_relativeSplatPath));return A.useMemo(()=>Uw(e,JSON.parse(c),i,r==="path"),[e,c,i,r])}function WD(e,t){return zD(e,t)}function zD(e,t,r,n){Au()||fs(!1);let{navigator:s}=A.useContext(Fo),{matches:i}=A.useContext(co),c=i[i.length-1],d=c?c.params:{};c&&c.pathname;let l=c?c.pathnameBase:"/";c&&c.route;let o=Xc(),p;if(t){var y;let _=typeof t=="string"?Nu(t):t;l==="/"||(y=_.pathname)!=null&&y.startsWith(l)||fs(!1),p=_}else p=o;let m=p.pathname||"/",u=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");u="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=vD(e,{pathname:u}),f=YD(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:Mc([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Mc([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,n);return t&&f?A.createElement(qg.Provider,{value:{location:hh({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Cc.Pop}},f):f}function HD(){let e=ZD(),t=LD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:s},r):null,null)}const qD=A.createElement(HD,null);class KD extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?A.createElement(co.Provider,{value:this.props.routeContext},A.createElement(Bk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GD(e){let{routeContext:t,match:r,children:n}=e,s=A.useContext(Hg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(co.Provider,{value:t},n)}function YD(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let c=e,d=(s=r)==null?void 0:s.errors;if(d!=null){let p=c.findIndex(y=>y.route.id&&(d==null?void 0:d[y.route.id])!==void 0);p>=0||fs(!1),c=c.slice(0,Math.min(c.length,p+1))}let l=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let y=c[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(o=p),y.route.id){let{loaderData:m,errors:u}=r,b=y.route.loader&&m[y.route.id]===void 0&&(!u||u[y.route.id]===void 0);if(y.route.lazy||b){l=!0,o>=0?c=c.slice(0,o+1):c=[c[0]];break}}}return c.reduceRight((p,y,m)=>{let u,b=!1,f=null,_=null;r&&(u=d&&y.route.id?d[y.route.id]:void 0,f=y.route.errorElement||qD,l&&(o<0&&m===0?(t3("route-fallback"),b=!0,_=null):o===m&&(b=!0,_=y.route.hydrateFallbackElement||null)));let g=t.concat(c.slice(0,m+1)),v=()=>{let w;return u?w=f:b?w=_:y.route.Component?w=A.createElement(y.route.Component,null):y.route.element?w=y.route.element:w=p,A.createElement(GD,{match:y,routeContext:{outlet:p,matches:g,isDataRoute:r!=null},children:w})};return r&&(y.route.ErrorBoundary||y.route.errorElement||m===0)?A.createElement(KD,{location:r.location,revalidation:r.revalidation,component:f,error:u,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var $k=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($k||{}),Wk=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wk||{});function JD(e){let t=A.useContext(Hg);return t||fs(!1),t}function QD(e){let t=A.useContext(Fk);return t||fs(!1),t}function XD(e){let t=A.useContext(co);return t||fs(!1),t}function zk(e){let t=XD(),r=t.matches[t.matches.length-1];return r.route.id||fs(!1),r.route.id}function ZD(){var e;let t=A.useContext(Bk),r=QD(),n=zk();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function e3(){let{router:e}=JD($k.UseNavigateStable),t=zk(Wk.UseNavigateStable),r=A.useRef(!1);return Uk(()=>{r.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hh({fromRouteId:t},i)))},[e,t])}const j1={};function t3(e,t,r){j1[e]||(j1[e]=!0)}function r3(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function n3(e){let{to:t,replace:r,state:n,relative:s}=e;Au()||fs(!1);let{future:i,static:c}=A.useContext(Fo),{matches:d}=A.useContext(co),{pathname:l}=Xc(),o=Ba(),p=Uw(t,Bw(d,i.v7_relativeSplatPath),l,s==="path"),y=JSON.stringify(p);return A.useEffect(()=>o(JSON.parse(y),{replace:r,state:n,relative:s}),[o,y,s,r,n]),null}function Wp(e){return $D(e.context)}function Cr(e){fs(!1)}function s3(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Cc.Pop,navigator:i,static:c=!1,future:d}=e;Au()&&fs(!1);let l=t.replace(/^\/*/,"/"),o=A.useMemo(()=>({basename:l,navigator:i,static:c,future:hh({v7_relativeSplatPath:!1},d)}),[l,d,i,c]);typeof n=="string"&&(n=Nu(n));let{pathname:p="/",search:y="",hash:m="",state:u=null,key:b="default"}=n,f=A.useMemo(()=>{let _=_u(p,l);return _==null?null:{location:{pathname:_,search:y,hash:m,state:u,key:b},navigationType:s}},[l,p,y,m,u,b,s]);return f==null?null:A.createElement(Fo.Provider,{value:o},A.createElement(qg.Provider,{children:r,value:f}))}function Hk(e){let{children:t,location:r}=e;return WD(Iy(t),r)}new Promise(()=>{});function Iy(e,t){t===void 0&&(t=[]);let r=[];return A.Children.forEach(e,(n,s)=>{if(!A.isValidElement(n))return;let i=[...t,s];if(n.type===A.Fragment){r.push.apply(r,Iy(n.props.children,i));return}n.type!==Cr&&fs(!1),!n.props.index||!n.props.children||fs(!1);let c={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Iy(n.props.children,i)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sg.apply(this,arguments)}function qk(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function i3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function a3(e,t){return e.button===0&&(!t||t==="_self")&&!i3(e)}const o3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c3=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],l3="6";try{window.__reactRouterVersion=l3}catch{}const d3=A.createContext({isTransitioning:!1}),u3="startTransition",D1=Kc[u3];function p3(e){let{basename:t,children:r,future:n,window:s}=e,i=A.useRef();i.current==null&&(i.current=fD({window:s,v5Compat:!0}));let c=i.current,[d,l]=A.useState({action:c.action,location:c.location}),{v7_startTransition:o}=n||{},p=A.useCallback(y=>{o&&D1?D1(()=>l(y)):l(y)},[l,o]);return A.useLayoutEffect(()=>c.listen(p),[c,p]),A.useEffect(()=>r3(n),[n]),A.createElement(s3,{basename:t,children:r,location:d.location,navigationType:d.action,navigator:c,future:n})}const h3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bs=A.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:c,state:d,target:l,to:o,preventScrollReset:p,viewTransition:y}=t,m=qk(t,o3),{basename:u}=A.useContext(Fo),b,f=!1;if(typeof o=="string"&&f3.test(o)&&(b=o,h3))try{let w=new URL(window.location.href),S=o.startsWith("//")?new URL(w.protocol+o):new URL(o),E=_u(S.pathname,u);S.origin===w.origin&&E!=null?o=E+S.search+S.hash:f=!0}catch{}let _=BD(o,{relative:s}),g=g3(o,{replace:c,state:d,target:l,preventScrollReset:p,relative:s,viewTransition:y});function v(w){n&&n(w),w.defaultPrevented||g(w)}return A.createElement("a",sg({},m,{href:b||_,onClick:f||i?n:v,ref:r,target:l}))}),I1=A.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:c=!1,style:d,to:l,viewTransition:o,children:p}=t,y=qk(t,c3),m=Kg(l,{relative:y.relative}),u=Xc(),b=A.useContext(Fk),{navigator:f,basename:_}=A.useContext(Fo),g=b!=null&&v3(m)&&o===!0,v=f.encodeLocation?f.encodeLocation(m).pathname:m.pathname,w=u.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(w=w.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&_&&(S=_u(S,_)||S);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=w===v||!c&&w.startsWith(v)&&w.charAt(E)==="/",C=S!=null&&(S===v||!c&&S.startsWith(v)&&S.charAt(v.length)==="/"),k={isActive:O,isPending:C,isTransitioning:g},T=O?n:void 0,h;typeof i=="function"?h=i(k):h=[i,O?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let x=typeof d=="function"?d(k):d;return A.createElement(bs,sg({},y,{"aria-current":T,className:h,ref:r,style:x,to:l,viewTransition:o}),typeof p=="function"?p(k):p)});var My;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(My||(My={}));var M1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(M1||(M1={}));function m3(e){let t=A.useContext(Hg);return t||fs(!1),t}function g3(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:c,viewTransition:d}=t===void 0?{}:t,l=Ba(),o=Xc(),p=Kg(e,{relative:c});return A.useCallback(y=>{if(a3(y,r)){y.preventDefault();let m=n!==void 0?n:ng(o)===ng(p);l(e,{replace:m,state:s,preventScrollReset:i,relative:c,viewTransition:d})}},[o,l,p,n,s,r,e,i,c,d])}function v3(e,t){t===void 0&&(t={});let r=A.useContext(d3);r==null&&fs(!1);let{basename:n}=m3(My.useViewTransitionState),s=Kg(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=_u(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=_u(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Dy(s.pathname,c)!=null||Dy(s.pathname,i)!=null}const Kk=A.createContext(void 0);function y3(){const e=localStorage.getItem("theme");return e==="dark"||e==="light"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function b3({children:e}){const[t,r]=A.useState(y3);A.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(t),localStorage.setItem("theme",t)},[t]),A.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)"),c=d=>{localStorage.getItem("theme")||r(d.matches?"dark":"light")};return i.addEventListener("change",c),()=>i.removeEventListener("change",c)},[]);const n=i=>{r(i)},s=()=>{r(i=>i==="dark"?"light":"dark")};return a.jsx(Kk.Provider,{value:{theme:t,setTheme:n,toggleTheme:s},children:e})}function w3(){const e=A.useContext(Kk);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function L1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Gg(...e){return t=>{let r=!1;const n=e.map(s=>{const i=L1(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():L1(e[s],null)}}}}function $i(...e){return A.useCallback(Gg(...e),e)}var xu=A.forwardRef((e,t)=>{const{children:r,...n}=e,s=A.Children.toArray(r),i=s.find(x3);if(i){const c=i.props.children,d=s.map(l=>l===i?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:l);return a.jsx(Ly,{...n,ref:t,children:A.isValidElement(c)?A.cloneElement(c,void 0,d):null})}return a.jsx(Ly,{...n,ref:t,children:r})});xu.displayName="Slot";var Ly=A.forwardRef((e,t)=>{const{children:r,...n}=e;if(A.isValidElement(r)){const s=E3(r);return A.cloneElement(r,{...S3(n,r.props),ref:t?Gg(t,s):s})}return A.Children.count(r)>1?A.Children.only(null):null});Ly.displayName="SlotClone";var _3=({children:e})=>a.jsx(a.Fragment,{children:e});function x3(e){return A.isValidElement(e)&&e.type===_3}function S3(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...d)=>{i(...d),s(...d)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function E3(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Gk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Gk(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Yk(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Gk(e))&&(n&&(n+=" "),n+=t);return n}const F1=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,B1=Yk,Yg=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return B1(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,c=Object.keys(s).map(o=>{const p=r==null?void 0:r[o],y=i==null?void 0:i[o];if(p===null)return null;const m=F1(p)||F1(y);return s[o][m]}),d=r&&Object.entries(r).reduce((o,p)=>{let[y,m]=p;return m===void 0||(o[y]=m),o},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((o,p)=>{let{class:y,className:m,...u}=p;return Object.entries(u).every(b=>{let[f,_]=b;return Array.isArray(_)?_.includes({...i,...d}[f]):{...i,...d}[f]===_})?[...o,y,m]:o},[]);return B1(e,c,l,r==null?void 0:r.class,r==null?void 0:r.className)},Vw="-",R3=e=>{const t=C3(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:c=>{const d=c.split(Vw);return d[0]===""&&d.length!==1&&d.shift(),Jk(d,t)||k3(c)},getConflictingClassGroupIds:(c,d)=>{const l=r[c]||[];return d&&n[c]?[...l,...n[c]]:l}}},Jk=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Jk(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Vw);return(c=t.validators.find(({validator:d})=>d(i)))==null?void 0:c.classGroupId},U1=/^\[(.+)\]$/,k3=e=>{if(U1.test(e)){const t=U1.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},C3=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return P3(Object.entries(e.classGroups),r).forEach(([i,c])=>{Fy(c,n,i,t)}),n},Fy=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:V1(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(T3(s)){Fy(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,c])=>{Fy(c,V1(t,i),r,n)})})},V1=(e,t)=>{let r=e;return t.split(Vw).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},T3=e=>e.isThemeGetter,P3=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([c,d])=>[t+c,d])):i);return[r,s]}):e,N3=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,c)=>{r.set(i,c),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let c=r.get(i);if(c!==void 0)return c;if((c=n.get(i))!==void 0)return s(i,c),c},set(i,c){r.has(i)?r.set(i,c):s(i,c)}}},Qk="!",A3=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,c=d=>{const l=[];let o=0,p=0,y;for(let _=0;_<d.length;_++){let g=d[_];if(o===0){if(g===s&&(n||d.slice(_,_+i)===t)){l.push(d.slice(p,_)),p=_+i;continue}if(g==="/"){y=_;continue}}g==="["?o++:g==="]"&&o--}const m=l.length===0?d:d.substring(p),u=m.startsWith(Qk),b=u?m.substring(1):m,f=y&&y>p?y-p:void 0;return{modifiers:l,hasImportantModifier:u,baseClassName:b,maybePostfixModifierPosition:f}};return r?d=>r({className:d,parseClassName:c}):c},O3=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},j3=e=>({cache:N3(e.cacheSize),parseClassName:A3(e),...R3(e)}),D3=/\s+/,I3=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],c=e.trim().split(D3);let d="";for(let l=c.length-1;l>=0;l-=1){const o=c[l],{modifiers:p,hasImportantModifier:y,baseClassName:m,maybePostfixModifierPosition:u}=r(o);let b=!!u,f=n(b?m.substring(0,u):m);if(!f){if(!b){d=o+(d.length>0?" "+d:d);continue}if(f=n(m),!f){d=o+(d.length>0?" "+d:d);continue}b=!1}const _=O3(p).join(":"),g=y?_+Qk:_,v=g+f;if(i.includes(v))continue;i.push(v);const w=s(f,b);for(let S=0;S<w.length;++S){const E=w[S];i.push(g+E)}d=o+(d.length>0?" "+d:d)}return d};function M3(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Xk(t))&&(n&&(n+=" "),n+=r);return n}const Xk=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Xk(e[n]))&&(r&&(r+=" "),r+=t);return r};function L3(e,...t){let r,n,s,i=c;function c(l){const o=t.reduce((p,y)=>y(p),e());return r=j3(o),n=r.cache.get,s=r.cache.set,i=d,d(l)}function d(l){const o=n(l);if(o)return o;const p=I3(l,r);return s(l,p),p}return function(){return i(M3.apply(null,arguments))}}const Gn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Zk=/^\[(?:([a-z-]+):)?(.+)\]$/i,F3=/^\d+\/\d+$/,B3=new Set(["px","full","screen"]),U3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,V3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,W3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_o=e=>cu(e)||B3.has(e)||F3.test(e),mc=e=>Ou(e,"length",X3),cu=e=>!!e&&!Number.isNaN(Number(e)),Zv=e=>Ou(e,"number",cu),_p=e=>!!e&&Number.isInteger(Number(e)),H3=e=>e.endsWith("%")&&cu(e.slice(0,-1)),Br=e=>Zk.test(e),gc=e=>U3.test(e),q3=new Set(["length","size","percentage"]),K3=e=>Ou(e,q3,eC),G3=e=>Ou(e,"position",eC),Y3=new Set(["image","url"]),J3=e=>Ou(e,Y3,eI),Q3=e=>Ou(e,"",Z3),xp=()=>!0,Ou=(e,t,r)=>{const n=Zk.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},X3=e=>V3.test(e)&&!$3.test(e),eC=()=>!1,Z3=e=>W3.test(e),eI=e=>z3.test(e),tI=()=>{const e=Gn("colors"),t=Gn("spacing"),r=Gn("blur"),n=Gn("brightness"),s=Gn("borderColor"),i=Gn("borderRadius"),c=Gn("borderSpacing"),d=Gn("borderWidth"),l=Gn("contrast"),o=Gn("grayscale"),p=Gn("hueRotate"),y=Gn("invert"),m=Gn("gap"),u=Gn("gradientColorStops"),b=Gn("gradientColorStopPositions"),f=Gn("inset"),_=Gn("margin"),g=Gn("opacity"),v=Gn("padding"),w=Gn("saturate"),S=Gn("scale"),E=Gn("sepia"),O=Gn("skew"),C=Gn("space"),k=Gn("translate"),T=()=>["auto","contain","none"],h=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto",Br,t],R=()=>[Br,t],P=()=>["",_o,mc],N=()=>["auto",cu,Br],j=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",Br],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[cu,Br];return{cacheSize:500,separator:":",theme:{colors:[xp],spacing:[_o,mc],blur:["none","",gc,Br],brightness:de(),borderColor:[e],borderRadius:["none","","full",gc,Br],borderSpacing:R(),borderWidth:P(),contrast:de(),grayscale:I(),hueRotate:de(),invert:I(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[H3,mc],inset:x(),margin:x(),opacity:de(),padding:R(),saturate:de(),scale:de(),sepia:I(),skew:de(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Br]}],container:["container"],columns:[{columns:[gc]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...j(),Br]}],overflow:[{overflow:h()}],"overflow-x":[{"overflow-x":h()}],"overflow-y":[{"overflow-y":h()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_p,Br]}],basis:[{basis:x()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Br]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",_p,Br]}],"grid-cols":[{"grid-cols":[xp]}],"col-start-end":[{col:["auto",{span:["full",_p,Br]},Br]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[xp]}],"row-start-end":[{row:["auto",{span:[_p,Br]},Br]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Br]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Br]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Br,t]}],"min-w":[{"min-w":[Br,t,"min","max","fit"]}],"max-w":[{"max-w":[Br,t,"none","full","min","max","fit","prose",{screen:[gc]},gc]}],h:[{h:[Br,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Br,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Br,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Br,t,"auto","min","max","fit"]}],"font-size":[{text:["base",gc,mc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zv]}],"font-family":[{font:[xp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Br]}],"line-clamp":[{"line-clamp":["none",cu,Zv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_o,Br]}],"list-image":[{"list-image":["none",Br]}],"list-style-type":[{list:["none","disc","decimal",Br]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_o,mc]}],"underline-offset":[{"underline-offset":["auto",_o,Br]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Br]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Br]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...j(),G3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",K3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},J3]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[u]}],"gradient-via":[{via:[u]}],"gradient-to":[{to:[u]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:D()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[_o,Br]}],"outline-w":[{outline:[_o,mc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[_o,mc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gc,Q3]}],"shadow-color":[{shadow:[xp]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gc,Br]}],grayscale:[{grayscale:[o]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[y]}],saturate:[{saturate:[w]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[o]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Br]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",Br]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",Br]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[_p,Br]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Br]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Br]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Br]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[_o,mc,Zv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rI=L3(tI);function Ur(...e){return rI(Yk(e))}function Ki(e){const t=e instanceof Date?e:typeof e=="number"?new Date(e):new Date(String(e));if(isNaN(t.getTime()))return"";const n=Math.floor((new Date().getTime()-t.getTime())/1e3);if(n<60)return"Just now";if(n<3600){const s=Math.floor(n/60);return`${s} minute${s>1?"s":""} ago`}if(n<86400){const s=Math.floor(n/3600);return`${s} hour${s>1?"s":""} ago`}if(n<7*86400){const s=Math.floor(n/86400);return`${s} day${s>1?"s":""} ago`}return t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const nI=Yg("inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/40 disabled:pointer-events-none disabled:opacity-50 shadow-md",{variants:{variant:{default:"bg-gradient-to-r from-blue-600 to-violet-600 text-white hover:from-blue-600/90 hover:to-violet-600/90",destructive:"bg-rose-600 text-white hover:bg-rose-600/90",outline:"border border-slate-200 dark:border-zinc-700 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-sm text-slate-700 dark:text-slate-200 hover:bg-white/80 dark:hover:bg-zinc-900/60",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-zinc-800 dark:text-slate-100 dark:hover:bg-zinc-700 border border-slate-200/60 dark:border-zinc-700/60",ghost:"hover:bg-slate-100 dark:hover:bg-zinc-800 text-slate-700 dark:text-slate-200",link:"text-blue-600 dark:text-blue-400 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-lg px-3 text-xs",lg:"h-11 rounded-xl px-6",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),rr=A.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const c=n?xu:"button";return a.jsx(c,{className:Ur(nI({variant:t,size:r,className:e})),ref:i,...s})});rr.displayName="Button";const sI=Yg("inline-flex items-center rounded-lg border px-2.5 py-1 text-xs font-medium backdrop-blur-sm transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/30",{variants:{variant:{default:"border-transparent bg-blue-100/60 text-blue-700 dark:bg-blue-400/20 dark:text-blue-300",secondary:"border-transparent bg-slate-100/60 text-slate-700 dark:bg-zinc-400/20 dark:text-slate-300",destructive:"border-transparent bg-rose-100/60 text-rose-700 dark:bg-rose-400/20 dark:text-rose-300",outline:"text-foreground border-slate-200/60 dark:border-zinc-700/60"}},defaultVariants:{variant:"default"}});function $r({className:e,variant:t,...r}){return a.jsx("div",{className:Ur(sI({variant:t}),e),...r})}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tC=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:c,...d},l)=>A.createElement("svg",{ref:l,...aI,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:tC("lucide",s),...d},[...c.map(([o,p])=>A.createElement(o,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=(e,t)=>{const r=A.forwardRef(({className:n,...s},i)=>A.createElement(oI,{ref:i,iconNode:t,className:tC(`lucide-${iI(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=wr("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=wr("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=wr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=wr("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=wr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=wr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=wr("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=wr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=wr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=wr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=wr("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=wr("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=wr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=wr("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=wr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=wr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=wr("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=wr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=wr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=wr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=wr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=wr("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=wr("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=wr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=wr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=wr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=wr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=wr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=wr("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=wr("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=wr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=wr("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=wr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=wr("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=wr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=wr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=wr("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=wr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=wr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=wr("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=wr("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=wr("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=wr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=wr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=wr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=wr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=wr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=wr("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=wr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=wr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=wr("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=wr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H1=e=>{let t;const r=new Set,n=(o,p)=>{const y=typeof o=="function"?o(t):o;if(!Object.is(y,t)){const m=t;t=p??(typeof y!="object"||y===null)?y:Object.assign({},t,y),r.forEach(u=>u(t,m))}},s=()=>t,d={setState:n,getState:s,getInitialState:()=>l,subscribe:o=>(r.add(o),()=>r.delete(o))},l=t=e(n,s,d);return d},CI=e=>e?H1(e):H1,TI=e=>e;function PI(e,t=TI){const r=pt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return pt.useDebugValue(r),r}const NI=e=>{const t=CI(e),r=n=>PI(t,n);return Object.assign(r,t),r},AI=e=>NI;function OI(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var i;const c=l=>l===null?null:JSON.parse(l,void 0),d=(i=r.getItem(s))!=null?i:null;return d instanceof Promise?d.then(c):c(d)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const $y=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return $y(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return $y(n)(r)}}}},jI=(e,t)=>(r,n,s)=>{let i={storage:OI(()=>localStorage),partialize:f=>f,version:0,merge:(f,_)=>({..._,...f}),...t},c=!1;const d=new Set,l=new Set;let o=i.storage;if(!o)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...f)},n,s);const p=()=>{const f=i.partialize({...n()});return o.setItem(i.name,{state:f,version:i.version})},y=s.setState;s.setState=(f,_)=>{y(f,_),p()};const m=e((...f)=>{r(...f),p()},n,s);s.getInitialState=()=>m;let u;const b=()=>{var f,_;if(!o)return;c=!1,d.forEach(v=>{var w;return v((w=n())!=null?w:m)});const g=((_=i.onRehydrateStorage)==null?void 0:_.call(i,(f=n())!=null?f:m))||void 0;return $y(o.getItem.bind(o))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate){const w=i.migrate(v.state,v.version);return w instanceof Promise?w.then(S=>[!0,S]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var w;const[S,E]=v;if(u=i.merge(E,(w=n())!=null?w:m),r(u,!0),S)return p()}).then(()=>{g==null||g(u,void 0),u=n(),c=!0,l.forEach(v=>v(u))}).catch(v=>{g==null||g(void 0,v)})};return s.persist={setOptions:f=>{i={...i,...f},f.storage&&(o=f.storage)},clearStorage:()=>{o==null||o.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>c,onHydrate:f=>(d.add(f),()=>{d.delete(f)}),onFinishHydration:f=>(l.add(f),()=>{l.delete(f)})},i.skipHydration||b(),u||m},DI=jI;function cC(e,t){return function(){return e.apply(t,arguments)}}const{toString:II}=Object.prototype,{getPrototypeOf:Yw}=Object,{iterator:Jg,toStringTag:lC}=Symbol,Qg=(e=>t=>{const r=II.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ua=e=>(e=e.toLowerCase(),t=>Qg(t)===e),Xg=e=>t=>typeof t===e,{isArray:ju}=Array,fh=Xg("undefined");function MI(e){return e!==null&&!fh(e)&&e.constructor!==null&&!fh(e.constructor)&&Ui(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dC=Ua("ArrayBuffer");function LI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dC(e.buffer),t}const FI=Xg("string"),Ui=Xg("function"),uC=Xg("number"),Zg=e=>e!==null&&typeof e=="object",BI=e=>e===!0||e===!1,vm=e=>{if(Qg(e)!=="object")return!1;const t=Yw(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(lC in e)&&!(Jg in e)},UI=Ua("Date"),VI=Ua("File"),$I=Ua("Blob"),WI=Ua("FileList"),zI=e=>Zg(e)&&Ui(e.pipe),HI=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ui(e.append)&&((t=Qg(e))==="formdata"||t==="object"&&Ui(e.toString)&&e.toString()==="[object FormData]"))},qI=Ua("URLSearchParams"),[KI,GI,YI,JI]=["ReadableStream","Request","Response","Headers"].map(Ua),QI=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lh(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),ju(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),c=i.length;let d;for(n=0;n<c;n++)d=i[n],t.call(null,e[d],d,e)}}function pC(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Ul=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hC=e=>!fh(e)&&e!==Ul;function Wy(){const{caseless:e}=hC(this)&&this||{},t={},r=(n,s)=>{const i=e&&pC(t,s)||s;vm(t[i])&&vm(n)?t[i]=Wy(t[i],n):vm(n)?t[i]=Wy({},n):ju(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Lh(arguments[n],r);return t}const XI=(e,t,r,{allOwnKeys:n}={})=>(Lh(t,(s,i)=>{r&&Ui(s)?e[i]=cC(s,r):e[i]=s},{allOwnKeys:n}),e),ZI=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),eM=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},tM=(e,t,r,n)=>{let s,i,c;const d={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)c=s[i],(!n||n(c,e,t))&&!d[c]&&(t[c]=e[c],d[c]=!0);e=r!==!1&&Yw(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},rM=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},nM=e=>{if(!e)return null;if(ju(e))return e;let t=e.length;if(!uC(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},sM=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Yw(Uint8Array)),iM=(e,t)=>{const n=(e&&e[Jg]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},aM=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},oM=Ua("HTMLFormElement"),cM=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),q1=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),lM=Ua("RegExp"),fC=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Lh(r,(s,i)=>{let c;(c=t(s,i,e))!==!1&&(n[i]=c||s)}),Object.defineProperties(e,n)},dM=e=>{fC(e,(t,r)=>{if(Ui(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ui(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},uM=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return ju(e)?n(e):n(String(e).split(t)),r},pM=()=>{},hM=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function fM(e){return!!(e&&Ui(e.append)&&e[lC]==="FormData"&&e[Jg])}const mM=e=>{const t=new Array(10),r=(n,s)=>{if(Zg(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const i=ju(n)?[]:{};return Lh(n,(c,d)=>{const l=r(c,s+1);!fh(l)&&(i[d]=l)}),t[s]=void 0,i}}return n};return r(e,0)},gM=Ua("AsyncFunction"),vM=e=>e&&(Zg(e)||Ui(e))&&Ui(e.then)&&Ui(e.catch),mC=((e,t)=>e?setImmediate:t?((r,n)=>(Ul.addEventListener("message",({source:s,data:i})=>{s===Ul&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Ul.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ui(Ul.postMessage)),yM=typeof queueMicrotask<"u"?queueMicrotask.bind(Ul):typeof process<"u"&&process.nextTick||mC,bM=e=>e!=null&&Ui(e[Jg]),Ge={isArray:ju,isArrayBuffer:dC,isBuffer:MI,isFormData:HI,isArrayBufferView:LI,isString:FI,isNumber:uC,isBoolean:BI,isObject:Zg,isPlainObject:vm,isReadableStream:KI,isRequest:GI,isResponse:YI,isHeaders:JI,isUndefined:fh,isDate:UI,isFile:VI,isBlob:$I,isRegExp:lM,isFunction:Ui,isStream:zI,isURLSearchParams:qI,isTypedArray:sM,isFileList:WI,forEach:Lh,merge:Wy,extend:XI,trim:QI,stripBOM:ZI,inherits:eM,toFlatObject:tM,kindOf:Qg,kindOfTest:Ua,endsWith:rM,toArray:nM,forEachEntry:iM,matchAll:aM,isHTMLForm:oM,hasOwnProperty:q1,hasOwnProp:q1,reduceDescriptors:fC,freezeMethods:dM,toObjectSet:uM,toCamelCase:cM,noop:pM,toFiniteNumber:hM,findKey:pC,global:Ul,isContextDefined:hC,isSpecCompliantForm:fM,toJSONObject:mM,isAsyncFn:gM,isThenable:vM,setImmediate:mC,asap:yM,isIterable:bM};function Ir(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Ge.inherits(Ir,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ge.toJSONObject(this.config),code:this.code,status:this.status}}});const gC=Ir.prototype,vC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vC[e]={value:e}});Object.defineProperties(Ir,vC);Object.defineProperty(gC,"isAxiosError",{value:!0});Ir.from=(e,t,r,n,s,i)=>{const c=Object.create(gC);return Ge.toFlatObject(e,c,function(l){return l!==Error.prototype},d=>d!=="isAxiosError"),Ir.call(c,e.message,t,r,n,s),c.cause=e,c.name=e.name,i&&Object.assign(c,i),c};const wM=null;function zy(e){return Ge.isPlainObject(e)||Ge.isArray(e)}function yC(e){return Ge.endsWith(e,"[]")?e.slice(0,-2):e}function K1(e,t,r){return e?e.concat(t).map(function(s,i){return s=yC(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function _M(e){return Ge.isArray(e)&&!e.some(zy)}const xM=Ge.toFlatObject(Ge,{},null,function(t){return/^is[A-Z]/.test(t)});function ev(e,t,r){if(!Ge.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ge.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,_){return!Ge.isUndefined(_[f])});const n=r.metaTokens,s=r.visitor||p,i=r.dots,c=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&Ge.isSpecCompliantForm(t);if(!Ge.isFunction(s))throw new TypeError("visitor must be a function");function o(b){if(b===null)return"";if(Ge.isDate(b))return b.toISOString();if(!l&&Ge.isBlob(b))throw new Ir("Blob is not supported. Use a Buffer instead.");return Ge.isArrayBuffer(b)||Ge.isTypedArray(b)?l&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,f,_){let g=b;if(b&&!_&&typeof b=="object"){if(Ge.endsWith(f,"{}"))f=n?f:f.slice(0,-2),b=JSON.stringify(b);else if(Ge.isArray(b)&&_M(b)||(Ge.isFileList(b)||Ge.endsWith(f,"[]"))&&(g=Ge.toArray(b)))return f=yC(f),g.forEach(function(w,S){!(Ge.isUndefined(w)||w===null)&&t.append(c===!0?K1([f],S,i):c===null?f:f+"[]",o(w))}),!1}return zy(b)?!0:(t.append(K1(_,f,i),o(b)),!1)}const y=[],m=Object.assign(xM,{defaultVisitor:p,convertValue:o,isVisitable:zy});function u(b,f){if(!Ge.isUndefined(b)){if(y.indexOf(b)!==-1)throw Error("Circular reference detected in "+f.join("."));y.push(b),Ge.forEach(b,function(g,v){(!(Ge.isUndefined(g)||g===null)&&s.call(t,g,Ge.isString(v)?v.trim():v,f,m))===!0&&u(g,f?f.concat(v):[v])}),y.pop()}}if(!Ge.isObject(e))throw new TypeError("data must be an object");return u(e),t}function G1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Jw(e,t){this._pairs=[],e&&ev(e,this,t)}const bC=Jw.prototype;bC.append=function(t,r){this._pairs.push([t,r])};bC.toString=function(t){const r=t?function(n){return t.call(this,n,G1)}:G1;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function SM(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wC(e,t,r){if(!t)return e;const n=r&&r.encode||SM;Ge.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=Ge.isURLSearchParams(t)?t.toString():new Jw(t,r).toString(n),i){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Y1{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ge.forEach(this.handlers,function(n){n!==null&&t(n)})}}const _C={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EM=typeof URLSearchParams<"u"?URLSearchParams:Jw,RM=typeof FormData<"u"?FormData:null,kM=typeof Blob<"u"?Blob:null,CM={isBrowser:!0,classes:{URLSearchParams:EM,FormData:RM,Blob:kM},protocols:["http","https","file","blob","url","data"]},Qw=typeof window<"u"&&typeof document<"u",Hy=typeof navigator=="object"&&navigator||void 0,TM=Qw&&(!Hy||["ReactNative","NativeScript","NS"].indexOf(Hy.product)<0),PM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NM=Qw&&window.location.href||"http://localhost",AM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qw,hasStandardBrowserEnv:TM,hasStandardBrowserWebWorkerEnv:PM,navigator:Hy,origin:NM},Symbol.toStringTag,{value:"Module"})),pi={...AM,...CM};function OM(e,t){return ev(e,new pi.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return pi.isNode&&Ge.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function jM(e){return Ge.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function DM(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function xC(e){function t(r,n,s,i){let c=r[i++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),l=i>=r.length;return c=!c&&Ge.isArray(s)?s.length:c,l?(Ge.hasOwnProp(s,c)?s[c]=[s[c],n]:s[c]=n,!d):((!s[c]||!Ge.isObject(s[c]))&&(s[c]=[]),t(r,n,s[c],i)&&Ge.isArray(s[c])&&(s[c]=DM(s[c])),!d)}if(Ge.isFormData(e)&&Ge.isFunction(e.entries)){const r={};return Ge.forEachEntry(e,(n,s)=>{t(jM(n),s,r,0)}),r}return null}function IM(e,t,r){if(Ge.isString(e))try{return(t||JSON.parse)(e),Ge.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Fh={transitional:_C,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=Ge.isObject(t);if(i&&Ge.isHTMLForm(t)&&(t=new FormData(t)),Ge.isFormData(t))return s?JSON.stringify(xC(t)):t;if(Ge.isArrayBuffer(t)||Ge.isBuffer(t)||Ge.isStream(t)||Ge.isFile(t)||Ge.isBlob(t)||Ge.isReadableStream(t))return t;if(Ge.isArrayBufferView(t))return t.buffer;if(Ge.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return OM(t,this.formSerializer).toString();if((d=Ge.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ev(d?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),IM(t)):t}],transformResponse:[function(t){const r=this.transitional||Fh.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Ge.isResponse(t)||Ge.isReadableStream(t))return t;if(t&&Ge.isString(t)&&(n&&!this.responseType||s)){const c=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(d){if(c)throw d.name==="SyntaxError"?Ir.from(d,Ir.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pi.classes.FormData,Blob:pi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ge.forEach(["delete","get","head","post","put","patch"],e=>{Fh.headers[e]={}});const MM=Ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LM=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(c){s=c.indexOf(":"),r=c.substring(0,s).trim().toLowerCase(),n=c.substring(s+1).trim(),!(!r||t[r]&&MM[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},J1=Symbol("internals");function Sp(e){return e&&String(e).trim().toLowerCase()}function ym(e){return e===!1||e==null?e:Ge.isArray(e)?e.map(ym):String(e)}function FM(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const BM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function e0(e,t,r,n,s){if(Ge.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!Ge.isString(t)){if(Ge.isString(n))return t.indexOf(n)!==-1;if(Ge.isRegExp(n))return n.test(t)}}function UM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function VM(e,t){const r=Ge.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,c){return this[n].call(this,t,s,i,c)},configurable:!0})})}let Vi=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(d,l,o){const p=Sp(l);if(!p)throw new Error("header name must be a non-empty string");const y=Ge.findKey(s,p);(!y||s[y]===void 0||o===!0||o===void 0&&s[y]!==!1)&&(s[y||l]=ym(d))}const c=(d,l)=>Ge.forEach(d,(o,p)=>i(o,p,l));if(Ge.isPlainObject(t)||t instanceof this.constructor)c(t,r);else if(Ge.isString(t)&&(t=t.trim())&&!BM(t))c(LM(t),r);else if(Ge.isObject(t)&&Ge.isIterable(t)){let d={},l,o;for(const p of t){if(!Ge.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[o=p[0]]=(l=d[o])?Ge.isArray(l)?[...l,p[1]]:[l,p[1]]:p[1]}c(d,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Sp(t),t){const n=Ge.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return FM(s);if(Ge.isFunction(r))return r.call(this,s,n);if(Ge.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Sp(t),t){const n=Ge.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||e0(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(c){if(c=Sp(c),c){const d=Ge.findKey(n,c);d&&(!r||e0(n,n[d],d,r))&&(delete n[d],s=!0)}}return Ge.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||e0(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return Ge.forEach(this,(s,i)=>{const c=Ge.findKey(n,i);if(c){r[c]=ym(s),delete r[i];return}const d=t?UM(i):String(i).trim();d!==i&&delete r[i],r[d]=ym(s),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ge.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&Ge.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[J1]=this[J1]={accessors:{}}).accessors,s=this.prototype;function i(c){const d=Sp(c);n[d]||(VM(s,c),n[d]=!0)}return Ge.isArray(t)?t.forEach(i):i(t),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ge.reduceDescriptors(Vi.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Ge.freezeMethods(Vi);function t0(e,t){const r=this||Fh,n=t||r,s=Vi.from(n.headers);let i=n.data;return Ge.forEach(e,function(d){i=d.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function SC(e){return!!(e&&e.__CANCEL__)}function Du(e,t,r){Ir.call(this,e??"canceled",Ir.ERR_CANCELED,t,r),this.name="CanceledError"}Ge.inherits(Du,Ir,{__CANCEL__:!0});function EC(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ir("Request failed with status code "+r.status,[Ir.ERR_BAD_REQUEST,Ir.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function $M(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function WM(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,c;return t=t!==void 0?t:1e3,function(l){const o=Date.now(),p=n[i];c||(c=o),r[s]=l,n[s]=o;let y=i,m=0;for(;y!==s;)m+=r[y++],y=y%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),o-c<t)return;const u=p&&o-p;return u?Math.round(m*1e3/u):void 0}}function zM(e,t){let r=0,n=1e3/t,s,i;const c=(o,p=Date.now())=>{r=p,s=null,i&&(clearTimeout(i),i=null),e.apply(null,o)};return[(...o)=>{const p=Date.now(),y=p-r;y>=n?c(o,p):(s=o,i||(i=setTimeout(()=>{i=null,c(s)},n-y)))},()=>s&&c(s)]}const cg=(e,t,r=3)=>{let n=0;const s=WM(50,250);return zM(i=>{const c=i.loaded,d=i.lengthComputable?i.total:void 0,l=c-n,o=s(l),p=c<=d;n=c;const y={loaded:c,total:d,progress:d?c/d:void 0,bytes:l,rate:o||void 0,estimated:o&&d&&p?(d-c)/o:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(y)},r)},Q1=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},X1=e=>(...t)=>Ge.asap(()=>e(...t)),HM=pi.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,pi.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(pi.origin),pi.navigator&&/(msie|trident)/i.test(pi.navigator.userAgent)):()=>!0,qM=pi.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const c=[e+"="+encodeURIComponent(t)];Ge.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),Ge.isString(n)&&c.push("path="+n),Ge.isString(s)&&c.push("domain="+s),i===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function KM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function GM(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function RC(e,t,r){let n=!KM(t);return e&&(n||r==!1)?GM(e,t):t}const Z1=e=>e instanceof Vi?{...e}:e;function td(e,t){t=t||{};const r={};function n(o,p,y,m){return Ge.isPlainObject(o)&&Ge.isPlainObject(p)?Ge.merge.call({caseless:m},o,p):Ge.isPlainObject(p)?Ge.merge({},p):Ge.isArray(p)?p.slice():p}function s(o,p,y,m){if(Ge.isUndefined(p)){if(!Ge.isUndefined(o))return n(void 0,o,y,m)}else return n(o,p,y,m)}function i(o,p){if(!Ge.isUndefined(p))return n(void 0,p)}function c(o,p){if(Ge.isUndefined(p)){if(!Ge.isUndefined(o))return n(void 0,o)}else return n(void 0,p)}function d(o,p,y){if(y in t)return n(o,p);if(y in e)return n(void 0,o)}const l={url:i,method:i,data:i,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(o,p,y)=>s(Z1(o),Z1(p),y,!0)};return Ge.forEach(Object.keys(Object.assign({},e,t)),function(p){const y=l[p]||s,m=y(e[p],t[p],p);Ge.isUndefined(m)&&y!==d||(r[p]=m)}),r}const kC=e=>{const t=td({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:c,auth:d}=t;t.headers=c=Vi.from(c),t.url=wC(RC(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let l;if(Ge.isFormData(r)){if(pi.hasStandardBrowserEnv||pi.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((l=c.getContentType())!==!1){const[o,...p]=l?l.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([o||"multipart/form-data",...p].join("; "))}}if(pi.hasStandardBrowserEnv&&(n&&Ge.isFunction(n)&&(n=n(t)),n||n!==!1&&HM(t.url))){const o=s&&i&&qM.read(i);o&&c.set(s,o)}return t},YM=typeof XMLHttpRequest<"u",JM=YM&&function(e){return new Promise(function(r,n){const s=kC(e);let i=s.data;const c=Vi.from(s.headers).normalize();let{responseType:d,onUploadProgress:l,onDownloadProgress:o}=s,p,y,m,u,b;function f(){u&&u(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let _=new XMLHttpRequest;_.open(s.method.toUpperCase(),s.url,!0),_.timeout=s.timeout;function g(){if(!_)return;const w=Vi.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),E={data:!d||d==="text"||d==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:w,config:e,request:_};EC(function(C){r(C),f()},function(C){n(C),f()},E),_=null}"onloadend"in _?_.onloadend=g:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(g)},_.onabort=function(){_&&(n(new Ir("Request aborted",Ir.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new Ir("Network Error",Ir.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const E=s.transitional||_C;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new Ir(S,E.clarifyTimeoutError?Ir.ETIMEDOUT:Ir.ECONNABORTED,e,_)),_=null},i===void 0&&c.setContentType(null),"setRequestHeader"in _&&Ge.forEach(c.toJSON(),function(S,E){_.setRequestHeader(E,S)}),Ge.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),d&&d!=="json"&&(_.responseType=s.responseType),o&&([m,b]=cg(o,!0),_.addEventListener("progress",m)),l&&_.upload&&([y,u]=cg(l),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",u)),(s.cancelToken||s.signal)&&(p=w=>{_&&(n(!w||w.type?new Du(null,e,_):w),_.abort(),_=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const v=$M(s.url);if(v&&pi.protocols.indexOf(v)===-1){n(new Ir("Unsupported protocol "+v+":",Ir.ERR_BAD_REQUEST,e));return}_.send(i||null)})},QM=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(o){if(!s){s=!0,d();const p=o instanceof Error?o:this.reason;n.abort(p instanceof Ir?p:new Du(p instanceof Error?p.message:p))}};let c=t&&setTimeout(()=>{c=null,i(new Ir(`timeout ${t} of ms exceeded`,Ir.ETIMEDOUT))},t);const d=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(o=>{o.unsubscribe?o.unsubscribe(i):o.removeEventListener("abort",i)}),e=null)};e.forEach(o=>o.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>Ge.asap(d),l}},XM=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},ZM=async function*(e,t){for await(const r of eL(e))yield*XM(r,t)},eL=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},eS=(e,t,r,n)=>{const s=ZM(e,t);let i=0,c,d=l=>{c||(c=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:o,value:p}=await s.next();if(o){d(),l.close();return}let y=p.byteLength;if(r){let m=i+=y;r(m)}l.enqueue(new Uint8Array(p))}catch(o){throw d(o),o}},cancel(l){return d(l),s.return()}},{highWaterMark:2})},tv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",CC=tv&&typeof ReadableStream=="function",tL=tv&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),TC=(e,...t)=>{try{return!!e(...t)}catch{return!1}},rL=CC&&TC(()=>{let e=!1;const t=new Request(pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),tS=64*1024,qy=CC&&TC(()=>Ge.isReadableStream(new Response("").body)),lg={stream:qy&&(e=>e.body)};tv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!lg[t]&&(lg[t]=Ge.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Ir(`Response type '${t}' is not supported`,Ir.ERR_NOT_SUPPORT,n)})})})(new Response);const nL=async e=>{if(e==null)return 0;if(Ge.isBlob(e))return e.size;if(Ge.isSpecCompliantForm(e))return(await new Request(pi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ge.isArrayBufferView(e)||Ge.isArrayBuffer(e))return e.byteLength;if(Ge.isURLSearchParams(e)&&(e=e+""),Ge.isString(e))return(await tL(e)).byteLength},sL=async(e,t)=>{const r=Ge.toFiniteNumber(e.getContentLength());return r??nL(t)},iL=tv&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:c,onDownloadProgress:d,onUploadProgress:l,responseType:o,headers:p,withCredentials:y="same-origin",fetchOptions:m}=kC(e);o=o?(o+"").toLowerCase():"text";let u=QM([s,i&&i.toAbortSignal()],c),b;const f=u&&u.unsubscribe&&(()=>{u.unsubscribe()});let _;try{if(l&&rL&&r!=="get"&&r!=="head"&&(_=await sL(p,n))!==0){let E=new Request(t,{method:"POST",body:n,duplex:"half"}),O;if(Ge.isFormData(n)&&(O=E.headers.get("content-type"))&&p.setContentType(O),E.body){const[C,k]=Q1(_,cg(X1(l)));n=eS(E.body,tS,C,k)}}Ge.isString(y)||(y=y?"include":"omit");const g="credentials"in Request.prototype;b=new Request(t,{...m,signal:u,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:g?y:void 0});let v=await fetch(b);const w=qy&&(o==="stream"||o==="response");if(qy&&(d||w&&f)){const E={};["status","statusText","headers"].forEach(T=>{E[T]=v[T]});const O=Ge.toFiniteNumber(v.headers.get("content-length")),[C,k]=d&&Q1(O,cg(X1(d),!0))||[];v=new Response(eS(v.body,tS,C,()=>{k&&k(),f&&f()}),E)}o=o||"text";let S=await lg[Ge.findKey(lg,o)||"text"](v,e);return!w&&f&&f(),await new Promise((E,O)=>{EC(E,O,{data:S,headers:Vi.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:b})})}catch(g){throw f&&f(),g&&g.name==="TypeError"&&/Load failed|fetch/i.test(g.message)?Object.assign(new Ir("Network Error",Ir.ERR_NETWORK,e,b),{cause:g.cause||g}):Ir.from(g,g&&g.code,e,b)}}),Ky={http:wM,xhr:JM,fetch:iL};Ge.forEach(Ky,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const rS=e=>`- ${e}`,aL=e=>Ge.isFunction(e)||e===null||e===!1,PC={getAdapter:e=>{e=Ge.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let c;if(n=r,!aL(r)&&(n=Ky[(c=String(r)).toLowerCase()],n===void 0))throw new Ir(`Unknown adapter '${c}'`);if(n)break;s[c||"#"+i]=n}if(!n){const i=Object.entries(s).map(([d,l])=>`adapter ${d} `+(l===!1?"is not supported by the environment":"is not available in the build"));let c=t?i.length>1?`since :
`+i.map(rS).join(`
`):" "+rS(i[0]):"as no adapter specified";throw new Ir("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:Ky};function r0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Du(null,e)}function nS(e){return r0(e),e.headers=Vi.from(e.headers),e.data=t0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),PC.getAdapter(e.adapter||Fh.adapter)(e).then(function(n){return r0(e),n.data=t0.call(e,e.transformResponse,n),n.headers=Vi.from(n.headers),n},function(n){return SC(n)||(r0(e),n&&n.response&&(n.response.data=t0.call(e,e.transformResponse,n.response),n.response.headers=Vi.from(n.response.headers))),Promise.reject(n)})}const NC="1.9.0",rv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{rv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const sS={};rv.transitional=function(t,r,n){function s(i,c){return"[Axios v"+NC+"] Transitional option '"+i+"'"+c+(n?". "+n:"")}return(i,c,d)=>{if(t===!1)throw new Ir(s(c," has been removed"+(r?" in "+r:"")),Ir.ERR_DEPRECATED);return r&&!sS[c]&&(sS[c]=!0,console.warn(s(c," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,c,d):!0}};rv.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function oL(e,t,r){if(typeof e!="object")throw new Ir("options must be an object",Ir.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],c=t[i];if(c){const d=e[i],l=d===void 0||c(d,i,e);if(l!==!0)throw new Ir("option "+i+" must be "+l,Ir.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ir("Unknown option "+i,Ir.ERR_BAD_OPTION)}}const bm={assertOptions:oL,validators:rv},qa=bm.validators;let Hl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Y1,response:new Y1}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=td(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&bm.assertOptions(n,{silentJSONParsing:qa.transitional(qa.boolean),forcedJSONParsing:qa.transitional(qa.boolean),clarifyTimeoutError:qa.transitional(qa.boolean)},!1),s!=null&&(Ge.isFunction(s)?r.paramsSerializer={serialize:s}:bm.assertOptions(s,{encode:qa.function,serialize:qa.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),bm.assertOptions(r,{baseUrl:qa.spelling("baseURL"),withXsrfToken:qa.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=i&&Ge.merge(i.common,i[r.method]);i&&Ge.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),r.headers=Vi.concat(c,i);const d=[];let l=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(l=l&&f.synchronous,d.unshift(f.fulfilled,f.rejected))});const o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});let p,y=0,m;if(!l){const b=[nS.bind(this),void 0];for(b.unshift.apply(b,d),b.push.apply(b,o),m=b.length,p=Promise.resolve(r);y<m;)p=p.then(b[y++],b[y++]);return p}m=d.length;let u=r;for(y=0;y<m;){const b=d[y++],f=d[y++];try{u=b(u)}catch(_){f.call(this,_);break}}try{p=nS.call(this,u)}catch(b){return Promise.reject(b)}for(y=0,m=o.length;y<m;)p=p.then(o[y++],o[y++]);return p}getUri(t){t=td(this.defaults,t);const r=RC(t.baseURL,t.url,t.allowAbsoluteUrls);return wC(r,t.params,t.paramsSerializer)}};Ge.forEach(["delete","get","head","options"],function(t){Hl.prototype[t]=function(r,n){return this.request(td(n||{},{method:t,url:r,data:(n||{}).data}))}});Ge.forEach(["post","put","patch"],function(t){function r(n){return function(i,c,d){return this.request(td(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:c}))}}Hl.prototype[t]=r(),Hl.prototype[t+"Form"]=r(!0)});let cL=class AC{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const c=new Promise(d=>{n.subscribe(d),i=d}).then(s);return c.cancel=function(){n.unsubscribe(i)},c},t(function(i,c,d){n.reason||(n.reason=new Du(i,c,d),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new AC(function(s){t=s}),cancel:t}}};function lL(e){return function(r){return e.apply(null,r)}}function dL(e){return Ge.isObject(e)&&e.isAxiosError===!0}const Gy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gy).forEach(([e,t])=>{Gy[t]=e});function OC(e){const t=new Hl(e),r=cC(Hl.prototype.request,t);return Ge.extend(r,Hl.prototype,t,{allOwnKeys:!0}),Ge.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return OC(td(e,s))},r}const Mt=OC(Fh);Mt.Axios=Hl;Mt.CanceledError=Du;Mt.CancelToken=cL;Mt.isCancel=SC;Mt.VERSION=NC;Mt.toFormData=ev;Mt.AxiosError=Ir;Mt.Cancel=Mt.CanceledError;Mt.all=function(t){return Promise.all(t)};Mt.spread=lL;Mt.isAxiosError=dL;Mt.mergeConfig=td;Mt.AxiosHeaders=Vi;Mt.formToJSON=e=>xC(Ge.isHTMLForm(e)?new FormData(e):e);Mt.getAdapter=PC.getAdapter;Mt.HttpStatusCode=Gy;Mt.default=Mt;const{Axios:NK,AxiosError:AK,CanceledError:OK,isCancel:jK,CancelToken:DK,VERSION:IK,all:MK,Cancel:LK,isAxiosError:FK,spread:BK,toFormData:UK,AxiosHeaders:VK,HttpStatusCode:$K,formToJSON:WK,getAdapter:zK,mergeConfig:HK}=Mt,Wn=AI()(DI(e=>({user:null,isLoading:!0,setUser:t=>e({user:t}),logout:()=>{e({user:null}),localStorage.removeItem("auth-storage")},login:async(t,r)=>{var n;e({isLoading:!0});try{const s=await Mt.post("undefined/api/user/login",{data:t,password:r},{withCredentials:!0});if(s.data.success){const i={id:s.data.data.id,name:s.data.data.name,email:s.data.data.email,profilePicture:s.data.data.profilePicture,role:s.data.data.role,refreshToken:s.data.data.refreshToken};e({user:i,isLoading:!1});return}throw new Error("Login failed")}catch(s){throw e({isLoading:!1}),Mt.isAxiosError(s)&&s.response?new Error(((n=s.response.data)==null?void 0:n.message)||"Login failed"):new Error("Unknown error occurred")}},checkAuth:async()=>{e({isLoading:!1})},clearLoading:()=>{e({isLoading:!1})}}),{name:"auth-storage",partialize:e=>({user:e.user})})),Xw=A.createContext({});function Zw(e){const t=A.useRef(null);return t.current===null&&(t.current=e()),t.current}const e_=typeof window<"u",jC=e_?A.useLayoutEffect:A.useEffect,nv=A.createContext(null);function t_(e,t){e.indexOf(t)===-1&&e.push(t)}function r_(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const jo=(e,t,r)=>r>t?t:r<e?e:r;let n_=()=>{};const Do={},DC=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function IC(e){return typeof e=="object"&&e!==null}const MC=e=>/^0[^.\s]+$/u.test(e);function s_(e){let t;return()=>(t===void 0&&(t=e()),t)}const ga=e=>e,uL=(e,t)=>r=>t(e(r)),Bh=(...e)=>e.reduce(uL),mh=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class i_{constructor(){this.subscriptions=[]}add(t){return t_(this.subscriptions,t),()=>r_(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const c=this.subscriptions[i];c&&c(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const to=e=>e*1e3,ro=e=>e/1e3;function LC(e,t){return t?e*(1e3/t):0}const FC=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,pL=1e-7,hL=12;function fL(e,t,r,n,s){let i,c,d=0;do c=t+(r-t)/2,i=FC(c,n,s)-e,i>0?r=c:t=c;while(Math.abs(i)>pL&&++d<hL);return c}function Uh(e,t,r,n){if(e===t&&r===n)return ga;const s=i=>fL(i,0,1,e,r);return i=>i===0||i===1?i:FC(s(i),t,n)}const BC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,UC=e=>t=>1-e(1-t),VC=Uh(.33,1.53,.69,.99),a_=UC(VC),$C=BC(a_),WC=e=>(e*=2)<1?.5*a_(e):.5*(2-Math.pow(2,-10*(e-1))),o_=e=>1-Math.sin(Math.acos(e)),zC=UC(o_),HC=BC(o_),mL=Uh(.42,0,1,1),gL=Uh(0,0,.58,1),qC=Uh(.42,0,.58,1),vL=e=>Array.isArray(e)&&typeof e[0]!="number",KC=e=>Array.isArray(e)&&typeof e[0]=="number",yL={linear:ga,easeIn:mL,easeInOut:qC,easeOut:gL,circIn:o_,circInOut:HC,circOut:zC,backIn:a_,backInOut:$C,backOut:VC,anticipate:WC},bL=e=>typeof e=="string",iS=e=>{if(KC(e)){n_(e.length===4);const[t,r,n,s]=e;return Uh(t,r,n,s)}else if(bL(e))return yL[e];return e},Wf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function wL(e,t){let r=new Set,n=new Set,s=!1,i=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function l(p){c.has(p)&&(o.schedule(p),e()),p(d)}const o={schedule:(p,y=!1,m=!1)=>{const b=m&&s?r:n;return y&&c.add(p),b.has(p)||b.add(p),p},cancel:p=>{n.delete(p),c.delete(p)},process:p=>{if(d=p,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,i&&(i=!1,o.process(p))}};return o}const _L=40;function GC(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,c=Wf.reduce((w,S)=>(w[S]=wL(i),w),{}),{setup:d,read:l,resolveKeyframes:o,preUpdate:p,update:y,preRender:m,render:u,postRender:b}=c,f=()=>{const w=Do.useManualTiming?s.timestamp:performance.now();r=!1,Do.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(w-s.timestamp,_L),1)),s.timestamp=w,s.isProcessing=!0,d.process(s),l.process(s),o.process(s),p.process(s),y.process(s),m.process(s),u.process(s),b.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(f))},_=()=>{r=!0,n=!0,s.isProcessing||e(f)};return{schedule:Wf.reduce((w,S)=>{const E=c[S];return w[S]=(O,C=!1,k=!1)=>(r||_(),E.schedule(O,C,k)),w},{}),cancel:w=>{for(let S=0;S<Wf.length;S++)c[Wf[S]].cancel(w)},state:s,steps:c}}const{schedule:ns,cancel:Wc,state:ei,steps:n0}=GC(typeof requestAnimationFrame<"u"?requestAnimationFrame:ga,!0);let wm;function xL(){wm=void 0}const Mi={now:()=>(wm===void 0&&Mi.set(ei.isProcessing||Do.useManualTiming?ei.timestamp:performance.now()),wm),set:e=>{wm=e,queueMicrotask(xL)}},YC=e=>t=>typeof t=="string"&&t.startsWith(e),c_=YC("--"),SL=YC("var(--"),l_=e=>SL(e)?EL.test(e.split("/*")[0].trim()):!1,EL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Iu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},gh={...Iu,transform:e=>jo(0,1,e)},zf={...Iu,default:1},zp=e=>Math.round(e*1e5)/1e5,d_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function RL(e){return e==null}const kL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,u_=(e,t)=>r=>!!(typeof r=="string"&&kL.test(r)&&r.startsWith(e)||t&&!RL(r)&&Object.prototype.hasOwnProperty.call(r,t)),JC=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,c,d]=n.match(d_);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},CL=e=>jo(0,255,e),s0={...Iu,transform:e=>Math.round(CL(e))},Vl={test:u_("rgb","red"),parse:JC("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+s0.transform(e)+", "+s0.transform(t)+", "+s0.transform(r)+", "+zp(gh.transform(n))+")"};function TL(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Yy={test:u_("#"),parse:TL,transform:Vl.transform},Vh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),vc=Vh("deg"),no=Vh("%"),kr=Vh("px"),PL=Vh("vh"),NL=Vh("vw"),aS={...no,parse:e=>no.parse(e)/100,transform:e=>no.transform(e*100)},Qd={test:u_("hsl","hue"),parse:JC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+no.transform(zp(t))+", "+no.transform(zp(r))+", "+zp(gh.transform(n))+")"},Os={test:e=>Vl.test(e)||Yy.test(e)||Qd.test(e),parse:e=>Vl.test(e)?Vl.parse(e):Qd.test(e)?Qd.parse(e):Yy.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Vl.transform(e):Qd.transform(e),getAnimatableNone:e=>{const t=Os.parse(e);return t.alpha=0,Os.transform(t)}},AL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OL(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(d_))==null?void 0:t.length)||0)+(((r=e.match(AL))==null?void 0:r.length)||0)>0}const QC="number",XC="color",jL="var",DL="var(",oS="${}",IL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vh(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const d=t.replace(IL,l=>(Os.test(l)?(n.color.push(i),s.push(XC),r.push(Os.parse(l))):l.startsWith(DL)?(n.var.push(i),s.push(jL),r.push(l)):(n.number.push(i),s.push(QC),r.push(parseFloat(l))),++i,oS)).split(oS);return{values:r,split:d,indexes:n,types:s}}function ZC(e){return vh(e).values}function eT(e){const{split:t,types:r}=vh(e),n=t.length;return s=>{let i="";for(let c=0;c<n;c++)if(i+=t[c],s[c]!==void 0){const d=r[c];d===QC?i+=zp(s[c]):d===XC?i+=Os.transform(s[c]):i+=s[c]}return i}}const ML=e=>typeof e=="number"?0:Os.test(e)?Os.getAnimatableNone(e):e;function LL(e){const t=ZC(e);return eT(e)(t.map(ML))}const zc={test:OL,parse:ZC,createTransformer:eT,getAnimatableNone:LL};function i0(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function FL({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,c=0;if(!t)s=i=c=r;else{const d=r<.5?r*(1+t):r+t-r*t,l=2*r-d;s=i0(l,d,e+1/3),i=i0(l,d,e),c=i0(l,d,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:n}}function dg(e,t){return r=>r>0?t:e}const us=(e,t,r)=>e+(t-e)*r,a0=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},BL=[Yy,Vl,Qd],UL=e=>BL.find(t=>t.test(e));function cS(e){const t=UL(e);if(!t)return!1;let r=t.parse(e);return t===Qd&&(r=FL(r)),r}const lS=(e,t)=>{const r=cS(e),n=cS(t);if(!r||!n)return dg(e,t);const s={...r};return i=>(s.red=a0(r.red,n.red,i),s.green=a0(r.green,n.green,i),s.blue=a0(r.blue,n.blue,i),s.alpha=us(r.alpha,n.alpha,i),Vl.transform(s))},Jy=new Set(["none","hidden"]);function VL(e,t){return Jy.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function $L(e,t){return r=>us(e,t,r)}function p_(e){return typeof e=="number"?$L:typeof e=="string"?l_(e)?dg:Os.test(e)?lS:HL:Array.isArray(e)?tT:typeof e=="object"?Os.test(e)?lS:WL:dg}function tT(e,t){const r=[...e],n=r.length,s=e.map((i,c)=>p_(i)(i,t[c]));return i=>{for(let c=0;c<n;c++)r[c]=s[c](i);return r}}function WL(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=p_(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function zL(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],c=e.indexes[i][n[i]],d=e.values[c]??0;r[s]=d,n[i]++}return r}const HL=(e,t)=>{const r=zc.createTransformer(t),n=vh(e),s=vh(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Jy.has(e)&&!s.values.length||Jy.has(t)&&!n.values.length?VL(e,t):Bh(tT(zL(n,s),s.values),r):dg(e,t)};function rT(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?us(e,t,r):p_(e)(e,t)}const qL=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>ns.update(t,r),stop:()=>Wc(t),now:()=>ei.isProcessing?ei.timestamp:Mi.now()}},nT=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},ug=2e4;function h_(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<ug;)t+=r,n=e.next(t);return t>=ug?1/0:t}function KL(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(h_(n),ug);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:ro(s)}}const GL=5;function sT(e,t,r){const n=Math.max(t-GL,0);return LC(r-e(n),t-n)}const vs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dS=.001;function YL({duration:e=vs.duration,bounce:t=vs.bounce,velocity:r=vs.velocity,mass:n=vs.mass}){let s,i,c=1-t;c=jo(vs.minDamping,vs.maxDamping,c),e=jo(vs.minDuration,vs.maxDuration,ro(e)),c<1?(s=o=>{const p=o*c,y=p*e,m=p-r,u=Qy(o,c),b=Math.exp(-y);return dS-m/u*b},i=o=>{const y=o*c*e,m=y*r+r,u=Math.pow(c,2)*Math.pow(o,2)*e,b=Math.exp(-y),f=Qy(Math.pow(o,2),c);return(-s(o)+dS>0?-1:1)*((m-u)*b)/f}):(s=o=>{const p=Math.exp(-o*e),y=(o-r)*e+1;return-.001+p*y},i=o=>{const p=Math.exp(-o*e),y=(r-o)*(e*e);return p*y});const d=5/e,l=QL(s,i,d);if(e=to(e),isNaN(l))return{stiffness:vs.stiffness,damping:vs.damping,duration:e};{const o=Math.pow(l,2)*n;return{stiffness:o,damping:c*2*Math.sqrt(n*o),duration:e}}}const JL=12;function QL(e,t,r){let n=r;for(let s=1;s<JL;s++)n=n-e(n)/t(n);return n}function Qy(e,t){return e*Math.sqrt(1-t*t)}const XL=["duration","bounce"],ZL=["stiffness","damping","mass"];function uS(e,t){return t.some(r=>e[r]!==void 0)}function e8(e){let t={velocity:vs.velocity,stiffness:vs.stiffness,damping:vs.damping,mass:vs.mass,isResolvedFromDuration:!1,...e};if(!uS(e,ZL)&&uS(e,XL))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*jo(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:vs.mass,stiffness:s,damping:i}}else{const r=YL(e);t={...t,...r,mass:vs.mass},t.isResolvedFromDuration=!0}return t}function pg(e=vs.visualDuration,t=vs.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],c=r.keyframes[r.keyframes.length-1],d={done:!1,value:i},{stiffness:l,damping:o,mass:p,duration:y,velocity:m,isResolvedFromDuration:u}=e8({...r,velocity:-ro(r.velocity||0)}),b=m||0,f=o/(2*Math.sqrt(l*p)),_=c-i,g=ro(Math.sqrt(l/p)),v=Math.abs(_)<5;n||(n=v?vs.restSpeed.granular:vs.restSpeed.default),s||(s=v?vs.restDelta.granular:vs.restDelta.default);let w;if(f<1){const E=Qy(g,f);w=O=>{const C=Math.exp(-f*g*O);return c-C*((b+f*g*_)/E*Math.sin(E*O)+_*Math.cos(E*O))}}else if(f===1)w=E=>c-Math.exp(-g*E)*(_+(b+g*_)*E);else{const E=g*Math.sqrt(f*f-1);w=O=>{const C=Math.exp(-f*g*O),k=Math.min(E*O,300);return c-C*((b+f*g*_)*Math.sinh(k)+E*_*Math.cosh(k))/E}}const S={calculatedDuration:u&&y||null,next:E=>{const O=w(E);if(u)d.done=E>=y;else{let C=E===0?b:0;f<1&&(C=E===0?to(b):sT(w,E,O));const k=Math.abs(C)<=n,T=Math.abs(c-O)<=s;d.done=k&&T}return d.value=d.done?c:O,d},toString:()=>{const E=Math.min(h_(S),ug),O=nT(C=>S.next(E*C).value,E,30);return E+"ms "+O},toTransition:()=>{}};return S}pg.applyToOptions=e=>{const t=KL(e,100,pg);return e.ease=t.ease,e.duration=to(t.duration),e.type="keyframes",e};function Xy({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:c,min:d,max:l,restDelta:o=.5,restSpeed:p}){const y=e[0],m={done:!1,value:y},u=k=>d!==void 0&&k<d||l!==void 0&&k>l,b=k=>d===void 0?l:l===void 0||Math.abs(d-k)<Math.abs(l-k)?d:l;let f=r*t;const _=y+f,g=c===void 0?_:c(_);g!==_&&(f=g-y);const v=k=>-f*Math.exp(-k/n),w=k=>g+v(k),S=k=>{const T=v(k),h=w(k);m.done=Math.abs(T)<=o,m.value=m.done?g:h};let E,O;const C=k=>{u(m.value)&&(E=k,O=pg({keyframes:[m.value,b(m.value)],velocity:sT(w,k,m.value),damping:s,stiffness:i,restDelta:o,restSpeed:p}))};return C(0),{calculatedDuration:null,next:k=>{let T=!1;return!O&&E===void 0&&(T=!0,S(k),C(k)),E!==void 0&&k>=E?O.next(k-E):(!T&&S(k),m)}}}function t8(e,t,r){const n=[],s=r||Do.mix||rT,i=e.length-1;for(let c=0;c<i;c++){let d=s(e[c],e[c+1]);if(t){const l=Array.isArray(t)?t[c]||ga:t;d=Bh(l,d)}n.push(d)}return n}function r8(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(n_(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const d=t8(t,n,s),l=d.length,o=p=>{if(c&&p<e[0])return t[0];let y=0;if(l>1)for(;y<e.length-2&&!(p<e[y+1]);y++);const m=mh(e[y],e[y+1],p);return d[y](m)};return r?p=>o(jo(e[0],e[i-1],p)):o}function n8(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=mh(0,t,n);e.push(us(r,1,s))}}function s8(e){const t=[0];return n8(t,e.length-1),t}function i8(e,t){return e.map(r=>r*t)}function a8(e,t){return e.map(()=>t||qC).splice(0,e.length-1)}function Hp({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=vL(n)?n.map(iS):iS(n),i={done:!1,value:t[0]},c=i8(r&&r.length===t.length?r:s8(t),e),d=r8(c,t,{ease:Array.isArray(s)?s:a8(t,s)});return{calculatedDuration:e,next:l=>(i.value=d(l),i.done=l>=e,i)}}const o8=e=>e!==null;function f_(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(o8),d=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!d||n===void 0?i[d]:n}const c8={decay:Xy,inertia:Xy,tween:Hp,keyframes:Hp,spring:pg};function iT(e){typeof e.type=="string"&&(e.type=c8[e.type])}class m_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const l8=e=>e/100;class g_ extends m_{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Mi.now()&&this.tick(Mi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;iT(t);const{type:r=Hp,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:c=0}=t;let{keyframes:d}=t;const l=r||Hp;l!==Hp&&typeof d[0]!="number"&&(this.mixKeyframes=Bh(l8,rT(d[0],d[1])),d=[0,100]);const o=l({...t,keyframes:d});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...d].reverse(),velocity:-c})),o.calculatedDuration===null&&(o.calculatedDuration=h_(o));const{calculatedDuration:p}=o;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=o}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:o=0,keyframes:p,repeat:y,repeatType:m,repeatDelay:u,type:b,onUpdate:f,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const g=this.currentTime-o*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,S=n;if(y){const k=Math.min(this.currentTime,s)/d;let T=Math.floor(k),h=k%1;!h&&k>=1&&(h=1),h===1&&T--,T=Math.min(T,y+1),!!(T%2)&&(m==="reverse"?(h=1-h,u&&(h-=u/d)):m==="mirror"&&(S=c)),w=jo(0,1,h)*d}const E=v?{done:!1,value:p[0]}:S.next(w);i&&(E.value=i(E.value));let{done:O}=E;!v&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return C&&b!==Xy&&(E.value=f_(p,this.options,_,this.speed)),f&&f(E.value),C&&this.finish(),E}then(t,r){return this.finished.then(t,r)}get duration(){return ro(this.calculatedDuration)}get time(){return ro(this.currentTime)}set time(t){var r;t=to(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Mi.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=ro(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=qL,startTime:r}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function d8(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $l=e=>e*180/Math.PI,Zy=e=>{const t=$l(Math.atan2(e[1],e[0]));return eb(t)},u8={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Zy,rotateZ:Zy,skewX:e=>$l(Math.atan(e[1])),skewY:e=>$l(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},eb=e=>(e=e%360,e<0&&(e+=360),e),pS=Zy,hS=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),fS=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),p8={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hS,scaleY:fS,scale:e=>(hS(e)+fS(e))/2,rotateX:e=>eb($l(Math.atan2(e[6],e[5]))),rotateY:e=>eb($l(Math.atan2(-e[2],e[0]))),rotateZ:pS,rotate:pS,skewX:e=>$l(Math.atan(e[4])),skewY:e=>$l(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function tb(e){return e.includes("scale")?1:0}function rb(e,t){if(!e||e==="none")return tb(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=p8,s=r;else{const d=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=u8,s=d}if(!s)return tb(t);const i=n[t],c=s[1].split(",").map(f8);return typeof i=="function"?i(c):c[i]}const h8=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return rb(r,t)};function f8(e){return parseFloat(e.trim())}const Mu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lu=new Set(Mu),mS=e=>e===Iu||e===kr,m8=new Set(["x","y","z"]),g8=Mu.filter(e=>!m8.has(e));function v8(e){const t=[];return g8.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const ql={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>rb(t,"x"),y:(e,{transform:t})=>rb(t,"y")};ql.translateX=ql.x;ql.translateY=ql.y;const Kl=new Set;let nb=!1,sb=!1,ib=!1;function aT(){if(sb){const e=Array.from(Kl).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=v8(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,c])=>{var d;(d=n.getValue(i))==null||d.set(c)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}sb=!1,nb=!1,Kl.forEach(e=>e.complete(ib)),Kl.clear()}function oT(){Kl.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(sb=!0)})}function y8(){ib=!0,oT(),aT(),ib=!1}class v_{constructor(t,r,n,s,i,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Kl.add(this),nb||(nb=!0,ns.read(oT),ns.resolveKeyframes(aT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),c=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const d=n.readValue(r,c);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=c),s&&i===void 0&&s.set(t[0])}d8(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Kl.delete(this)}cancel(){this.state==="scheduled"&&(Kl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const b8=e=>e.startsWith("--");function w8(e,t,r){b8(t)?e.style.setProperty(t,r):e.style[t]=r}const _8=s_(()=>window.ScrollTimeline!==void 0),x8={};function S8(e,t){const r=s_(e);return()=>x8[t]??r()}const cT=S8(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Np=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,gS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Np([0,.65,.55,1]),circOut:Np([.55,0,1,.45]),backIn:Np([.31,.01,.66,-.59]),backOut:Np([.33,1.53,.69,.99])};function lT(e,t){if(e)return typeof e=="function"?cT()?nT(e,t):"ease-out":KC(e)?Np(e):Array.isArray(e)?e.map(r=>lT(r,t)||gS.easeOut):gS[e]}function E8(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:c="loop",ease:d="easeOut",times:l}={},o=void 0){const p={[t]:r};l&&(p.offset=l);const y=lT(d,s);Array.isArray(y)&&(p.easing=y);const m={delay:n,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:i+1,direction:c==="reverse"?"alternate":"normal"};return o&&(m.pseudoElement=o),e.animate(p,m)}function dT(e){return typeof e=="function"&&"applyToOptions"in e}function R8({type:e,...t}){return dT(e)&&cT()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class k8 extends m_{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:c=!1,finalKeyframe:d,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=c,this.options=t,n_(typeof t.type!="string");const o=R8(t);this.animation=E8(r,n,s,o,i),o.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=f_(s,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(p):w8(r,n,p),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return ro(Number(t))}get time(){return ro(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=to(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&_8()?(this.animation.timeline=t,ga):r(this)}}const uT={anticipate:WC,backInOut:$C,circInOut:HC};function C8(e){return e in uT}function T8(e){typeof e.ease=="string"&&C8(e.ease)&&(e.ease=uT[e.ease])}const vS=10;class P8 extends k8{constructor(t){T8(t),iT(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...c}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const d=new g_({...c,autoplay:!1}),l=to(this.finishedTime??this.time);r.setWithVelocity(d.sample(l-vS).value,d.sample(l).value,vS),d.stop()}}const yS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zc.test(e)||e==="0")&&!e.startsWith("url("));function N8(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function A8(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],c=yS(s,t),d=yS(i,t);return!c||!d?!1:N8(e)||(r==="spring"||dT(r))&&n}function ab(e){e.duration=0,e.type}const O8=new Set(["opacity","clipPath","filter","transform"]),j8=s_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function D8(e){var p;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:c}=e;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:o}=t.owner.getProps();return j8()&&r&&O8.has(r)&&(r!=="transform"||!o)&&!l&&!n&&s!=="mirror"&&i!==0&&c!=="inertia"}const I8=40;class M8 extends m_{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:c="loop",keyframes:d,name:l,motionValue:o,element:p,...y}){var b;super(),this.stop=()=>{var f,_;this._animation&&(this._animation.stop(),(f=this.stopTimeline)==null||f.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Mi.now();const m={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:c,name:l,motionValue:o,element:p,...y},u=(p==null?void 0:p.KeyframeResolver)||v_;this.keyframeResolver=new u(d,(f,_,g)=>this.onKeyframesResolved(f,_,m,!g),l,o,p),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:c,velocity:d,delay:l,isHandoff:o,onUpdate:p}=n;this.resolvedAt=Mi.now(),A8(t,i,c,d)||((Do.instantAnimations||!l)&&(p==null||p(f_(t,n,r))),t[0]=t[t.length-1],ab(n),n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>I8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},u=!o&&D8(m)?new P8({...m,element:m.motionValue.owner.current}):new g_(m);u.finished.then(()=>this.notifyFinished()).catch(ga),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),y8()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const L8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F8(e){const t=L8.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function pT(e,t,r=1){const[n,s]=F8(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const c=i.trim();return DC(c)?parseFloat(c):c}return l_(s)?pT(s,t,r+1):s}function y_(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const hT=new Set(["width","height","top","left","right","bottom",...Mu]),B8={test:e=>e==="auto",parse:e=>e},fT=e=>t=>t.test(e),mT=[Iu,kr,no,vc,NL,PL,B8],bS=e=>mT.find(fT(e));function U8(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||MC(e):!0}const V8=new Set(["brightness","contrast","saturate","opacity"]);function $8(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(d_)||[];if(!n)return e;const s=r.replace(n,"");let i=V8.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const W8=/\b([a-z-]*)\(.*?\)/gu,ob={...zc,getAnimatableNone:e=>{const t=e.match(W8);return t?t.map($8).join(" "):e}},wS={...Iu,transform:Math.round},z8={rotate:vc,rotateX:vc,rotateY:vc,rotateZ:vc,scale:zf,scaleX:zf,scaleY:zf,scaleZ:zf,skew:vc,skewX:vc,skewY:vc,distance:kr,translateX:kr,translateY:kr,translateZ:kr,x:kr,y:kr,z:kr,perspective:kr,transformPerspective:kr,opacity:gh,originX:aS,originY:aS,originZ:kr},b_={borderWidth:kr,borderTopWidth:kr,borderRightWidth:kr,borderBottomWidth:kr,borderLeftWidth:kr,borderRadius:kr,radius:kr,borderTopLeftRadius:kr,borderTopRightRadius:kr,borderBottomRightRadius:kr,borderBottomLeftRadius:kr,width:kr,maxWidth:kr,height:kr,maxHeight:kr,top:kr,right:kr,bottom:kr,left:kr,padding:kr,paddingTop:kr,paddingRight:kr,paddingBottom:kr,paddingLeft:kr,margin:kr,marginTop:kr,marginRight:kr,marginBottom:kr,marginLeft:kr,backgroundPositionX:kr,backgroundPositionY:kr,...z8,zIndex:wS,fillOpacity:gh,strokeOpacity:gh,numOctaves:wS},H8={...b_,color:Os,backgroundColor:Os,outlineColor:Os,fill:Os,stroke:Os,borderColor:Os,borderTopColor:Os,borderRightColor:Os,borderBottomColor:Os,borderLeftColor:Os,filter:ob,WebkitFilter:ob},gT=e=>H8[e];function vT(e,t){let r=gT(e);return r!==ob&&(r=zc),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const q8=new Set(["auto","none","0"]);function K8(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!q8.has(i)&&vh(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=vT(r,s)}class G8 extends v_{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let o=t[l];if(typeof o=="string"&&(o=o.trim(),l_(o))){const p=pT(o,r.current);p!==void 0&&(t[l]=p),l===t.length-1&&(this.finalKeyframe=o)}}if(this.resolveNoneKeyframes(),!hT.has(n)||t.length!==2)return;const[s,i]=t,c=bS(s),d=bS(i);if(c!==d)if(mS(c)&&mS(d))for(let l=0;l<t.length;l++){const o=t[l];typeof o=="string"&&(t[l]=parseFloat(o))}else ql[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||U8(t[s]))&&n.push(s);n.length&&K8(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ql[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var d;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,c=n[i];n[i]=ql[r](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([l,o])=>{t.getValue(l).set(o)}),this.resolveNoneKeyframes()}}function Y8(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=(r==null?void 0:r[e])??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const yT=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function bT(e){return IC(e)&&"offsetHeight"in e}const _S=30,J8=e=>!isNaN(parseFloat(e));class Q8{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Mi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Mi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=J8(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new i_);const n=this.events[t].add(r);return t==="change"?()=>{n(),ns.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_S)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,_S);return LC(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Su(e,t){return new Q8(e,t)}const{schedule:w_}=GC(queueMicrotask,!1),Ea={x:!1,y:!1};function wT(){return Ea.x||Ea.y}function X8(e){return e==="x"||e==="y"?Ea[e]?null:(Ea[e]=!0,()=>{Ea[e]=!1}):Ea.x||Ea.y?null:(Ea.x=Ea.y=!0,()=>{Ea.x=Ea.y=!1})}function _T(e,t){const r=Y8(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function xS(e){return!(e.pointerType==="touch"||wT())}function Z8(e,t,r={}){const[n,s,i]=_T(e,r),c=d=>{if(!xS(d))return;const{target:l}=d,o=t(l,d);if(typeof o!="function"||!l)return;const p=y=>{xS(y)&&(o(y),l.removeEventListener("pointerleave",p))};l.addEventListener("pointerleave",p,s)};return n.forEach(d=>{d.addEventListener("pointerenter",c,s)}),i}const xT=(e,t)=>t?e===t?!0:xT(e,t.parentElement):!1,__=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,e7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function t7(e){return e7.has(e.tagName)||e.tabIndex!==-1}const _m=new WeakSet;function SS(e){return t=>{t.key==="Enter"&&e(t)}}function o0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const r7=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=SS(()=>{if(_m.has(r))return;o0(r,"down");const s=SS(()=>{o0(r,"up")}),i=()=>o0(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function ES(e){return __(e)&&!wT()}function n7(e,t,r={}){const[n,s,i]=_T(e,r),c=d=>{const l=d.currentTarget;if(!ES(d))return;_m.add(l);const o=t(l,d),p=(u,b)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",m),_m.has(l)&&_m.delete(l),ES(u)&&typeof o=="function"&&o(u,{success:b})},y=u=>{p(u,l===window||l===document||r.useGlobalTarget||xT(l,u.target))},m=u=>{p(u,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",m,s)};return n.forEach(d=>{(r.useGlobalTarget?window:d).addEventListener("pointerdown",c,s),bT(d)&&(d.addEventListener("focus",o=>r7(o,s)),!t7(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),i}function ST(e){return IC(e)&&"ownerSVGElement"in e}function s7(e){return ST(e)&&e.tagName==="svg"}const hi=e=>!!(e&&e.getVelocity),i7=[...mT,Os,zc],a7=e=>i7.find(fT(e)),x_=A.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class o7 extends A.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=bT(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c7({children:e,isPresent:t,anchorX:r,root:n}){const s=A.useId(),i=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=A.useContext(x_);return A.useInsertionEffect(()=>{const{width:l,height:o,top:p,left:y,right:m}=c.current;if(t||!i.current||!l||!o)return;const u=r==="left"?`left: ${y}`:`right: ${m}`;i.current.dataset.motionPopId=s;const b=document.createElement("style");d&&(b.nonce=d);const f=n??document.head;return f.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${o}px !important;
            ${u}px !important;
            top: ${p}px !important;
          }
        `),()=>{f.contains(b)&&f.removeChild(b)}},[t]),a.jsx(o7,{isPresent:t,childRef:i,sizeRef:c,children:A.cloneElement(e,{ref:i})})}const l7=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:c,anchorX:d,root:l})=>{const o=Zw(d7),p=A.useId();let y=!0,m=A.useMemo(()=>(y=!1,{id:p,initial:t,isPresent:r,custom:s,onExitComplete:u=>{o.set(u,!0);for(const b of o.values())if(!b)return;n&&n()},register:u=>(o.set(u,!1),()=>o.delete(u))}),[r,o,n]);return i&&y&&(m={...m}),A.useMemo(()=>{o.forEach((u,b)=>o.set(b,!1))},[r]),A.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),c==="popLayout"&&(e=a.jsx(c7,{isPresent:r,anchorX:d,root:l,children:e})),a.jsx(nv.Provider,{value:m,children:e})};function d7(){return new Map}function ET(e=!0){const t=A.useContext(nv);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=A.useId();A.useEffect(()=>{if(e)return s(i)},[e]);const c=A.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,c]:[!0]}const Hf=e=>e.key||"";function RS(e){const t=[];return A.Children.forEach(e,r=>{A.isValidElement(r)&&t.push(r)}),t}const u7=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:c=!1,anchorX:d="left",root:l})=>{const[o,p]=ET(c),y=A.useMemo(()=>RS(e),[e]),m=c&&!o?[]:y.map(Hf),u=A.useRef(!0),b=A.useRef(y),f=Zw(()=>new Map),[_,g]=A.useState(y),[v,w]=A.useState(y);jC(()=>{u.current=!1,b.current=y;for(let O=0;O<v.length;O++){const C=Hf(v[O]);m.includes(C)?f.delete(C):f.get(C)!==!0&&f.set(C,!1)}},[v,m.length,m.join("-")]);const S=[];if(y!==_){let O=[...y];for(let C=0;C<v.length;C++){const k=v[C],T=Hf(k);m.includes(T)||(O.splice(C,0,k),S.push(k))}return i==="wait"&&S.length&&(O=S),w(RS(O)),g(y),null}const{forceRender:E}=A.useContext(Xw);return a.jsx(a.Fragment,{children:v.map(O=>{const C=Hf(O),k=c&&!o?!1:y===v||m.includes(C),T=()=>{if(f.has(C))f.set(C,!0);else return;let h=!0;f.forEach(x=>{x||(h=!1)}),h&&(E==null||E(),w(b.current),c&&(p==null||p()),n&&n())};return a.jsx(l7,{isPresent:k,initial:!u.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:l,onExitComplete:k?void 0:T,anchorX:d,children:O},C)})})},RT=A.createContext({strict:!1}),kS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Eu={};for(const e in kS)Eu[e]={isEnabled:t=>kS[e].some(r=>!!t[r])};function p7(e){for(const t in e)Eu[t]={...Eu[t],...e[t]}}const h7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||h7.has(e)}let kT=e=>!hg(e);function f7(e){typeof e=="function"&&(kT=t=>t.startsWith("on")?!hg(t):e(t))}try{f7(require("@emotion/is-prop-valid").default)}catch{}function m7(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(kT(s)||r===!0&&hg(s)||!t&&!hg(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const sv=A.createContext({});function iv(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function yh(e){return typeof e=="string"||Array.isArray(e)}const S_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],E_=["initial",...S_];function av(e){return iv(e.animate)||E_.some(t=>yh(e[t]))}function CT(e){return!!(av(e)||e.variants)}function g7(e,t){if(av(e)){const{initial:r,animate:n}=e;return{initial:r===!1||yh(r)?r:void 0,animate:yh(n)?n:void 0}}return e.inherit!==!1?t:{}}function v7(e){const{initial:t,animate:r}=g7(e,A.useContext(sv));return A.useMemo(()=>({initial:t,animate:r}),[CS(t),CS(r)])}function CS(e){return Array.isArray(e)?e.join(" "):e}const bh={};function y7(e){for(const t in e)bh[t]=e[t],c_(t)&&(bh[t].isCSSVariable=!0)}function TT(e,{layout:t,layoutId:r}){return Lu.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!bh[e]||e==="opacity")}const b7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w7=Mu.length;function _7(e,t,r){let n="",s=!0;for(let i=0;i<w7;i++){const c=Mu[i],d=e[c];if(d===void 0)continue;let l=!0;if(typeof d=="number"?l=d===(c.startsWith("scale")?1:0):l=parseFloat(d)===0,!l||r){const o=yT(d,b_[c]);if(!l){s=!1;const p=b7[c]||c;n+=`${p}(${o}) `}r&&(t[c]=o)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function R_(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let c=!1,d=!1;for(const l in t){const o=t[l];if(Lu.has(l)){c=!0;continue}else if(c_(l)){s[l]=o;continue}else{const p=yT(o,b_[l]);l.startsWith("origin")?(d=!0,i[l]=p):n[l]=p}}if(t.transform||(c||r?n.transform=_7(t,e.transform,r):n.transform&&(n.transform="none")),d){const{originX:l="50%",originY:o="50%",originZ:p=0}=i;n.transformOrigin=`${l} ${o} ${p}`}}const k_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function PT(e,t,r){for(const n in t)!hi(t[n])&&!TT(n,r)&&(e[n]=t[n])}function x7({transformTemplate:e},t){return A.useMemo(()=>{const r=k_();return R_(r,t,e),Object.assign({},r.vars,r.style)},[t])}function S7(e,t){const r=e.style||{},n={};return PT(n,r,e),Object.assign(n,x7(e,t)),n}function E7(e,t){const r={},n=S7(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const R7={offset:"stroke-dashoffset",array:"stroke-dasharray"},k7={offset:"strokeDashoffset",array:"strokeDasharray"};function C7(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?R7:k7;e[i.offset]=kr.transform(-n);const c=kr.transform(t),d=kr.transform(r);e[i.array]=`${c} ${d}`}function NT(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:c=0,...d},l,o,p){if(R_(e,d,o),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:m}=e;y.transform&&(m.transform=y.transform,delete y.transform),(m.transform||y.transformOrigin)&&(m.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),m.transform&&(m.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),r!==void 0&&(y.y=r),n!==void 0&&(y.scale=n),s!==void 0&&C7(y,s,i,c,!1)}const AT=()=>({...k_(),attrs:{}}),OT=e=>typeof e=="string"&&e.toLowerCase()==="svg";function T7(e,t,r,n){const s=A.useMemo(()=>{const i=AT();return NT(i,t,OT(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};PT(i,e.style,e),s.style={...i,...s.style}}return s}const P7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C_(e){return typeof e!="string"||e.includes("-")?!1:!!(P7.indexOf(e)>-1||/[A-Z]/u.test(e))}function N7(e,t,r,{latestValues:n},s,i=!1){const d=(C_(e)?T7:E7)(t,n,s,e),l=m7(t,typeof e=="string",i),o=e!==A.Fragment?{...l,...d,ref:r}:{},{children:p}=t,y=A.useMemo(()=>hi(p)?p.get():p,[p]);return A.createElement(e,{...o,children:y})}function TS(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function T_(e,t,r,n){if(typeof t=="function"){const[s,i]=TS(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=TS(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function xm(e){return hi(e)?e.get():e}function A7({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:O7(r,n,s,e),renderState:t()}}function O7(e,t,r,n){const s={},i=n(e,{});for(const m in i)s[m]=xm(i[m]);let{initial:c,animate:d}=e;const l=av(e),o=CT(e);t&&o&&!l&&e.inherit!==!1&&(c===void 0&&(c=t.initial),d===void 0&&(d=t.animate));let p=r?r.initial===!1:!1;p=p||c===!1;const y=p?d:c;if(y&&typeof y!="boolean"&&!iv(y)){const m=Array.isArray(y)?y:[y];for(let u=0;u<m.length;u++){const b=T_(e,m[u]);if(b){const{transitionEnd:f,transition:_,...g}=b;for(const v in g){let w=g[v];if(Array.isArray(w)){const S=p?w.length-1:0;w=w[S]}w!==null&&(s[v]=w)}for(const v in f)s[v]=f[v]}}}return s}const jT=e=>(t,r)=>{const n=A.useContext(sv),s=A.useContext(nv),i=()=>A7(e,t,n,s);return r?i():Zw(i)};function P_(e,t,r){var i;const{style:n}=e,s={};for(const c in n)(hi(n[c])||t.style&&hi(t.style[c])||TT(c,e)||((i=r==null?void 0:r.getValue(c))==null?void 0:i.liveStyle)!==void 0)&&(s[c]=n[c]);return s}const j7=jT({scrapeMotionValuesFromProps:P_,createRenderState:k_});function DT(e,t,r){const n=P_(e,t,r);for(const s in e)if(hi(e[s])||hi(t[s])){const i=Mu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const D7=jT({scrapeMotionValuesFromProps:DT,createRenderState:AT}),I7=Symbol.for("motionComponentSymbol");function Xd(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function M7(e,t,r){return A.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Xd(r)&&(r.current=n))},[t])}const N_=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),L7="framerAppearId",IT="data-"+N_(L7),MT=A.createContext({});function F7(e,t,r,n,s){var f,_;const{visualElement:i}=A.useContext(sv),c=A.useContext(RT),d=A.useContext(nv),l=A.useContext(x_).reducedMotion,o=A.useRef(null);n=n||c.renderer,!o.current&&n&&(o.current=n(e,{visualState:t,parent:i,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:l}));const p=o.current,y=A.useContext(MT);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&B7(o.current,r,s,y);const m=A.useRef(!1);A.useInsertionEffect(()=>{p&&m.current&&p.update(r,d)});const u=r[IT],b=A.useRef(!!u&&!((f=window.MotionHandoffIsComplete)!=null&&f.call(window,u))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,u)));return jC(()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),b.current&&p.animationState&&p.animationState.animateChanges())}),A.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,u)}),b.current=!1),p.enteringChildren=void 0)}),p}function B7(e,t,r,n){const{layoutId:s,layout:i,drag:c,dragConstraints:d,layoutScroll:l,layoutRoot:o,layoutCrossfade:p}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:LT(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!c||d&&Xd(d),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:l,layoutRoot:o})}function LT(e){if(e)return e.options.allowProjection!==!1?e.projection:LT(e.parent)}function c0(e,{forwardMotionProps:t=!1}={},r,n){r&&p7(r);const s=C_(e)?D7:j7;function i(d,l){let o;const p={...A.useContext(x_),...d,layoutId:U7(d)},{isStatic:y}=p,m=v7(d),u=s(d,y);if(!y&&e_){V7();const b=$7(p);o=b.MeasureLayout,m.visualElement=F7(e,u,p,n,b.ProjectionNode)}return a.jsxs(sv.Provider,{value:m,children:[o&&m.visualElement?a.jsx(o,{visualElement:m.visualElement,...p}):null,N7(e,d,M7(u,m.visualElement,l),u,y,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=A.forwardRef(i);return c[I7]=e,c}function U7({layoutId:e}){const t=A.useContext(Xw).id;return t&&e!==void 0?t+"-"+e:e}function V7(e,t){A.useContext(RT).strict}function $7(e){const{drag:t,layout:r}=Eu;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function W7(e,t){if(typeof Proxy>"u")return c0;const r=new Map,n=(i,c)=>c0(i,c,e,t),s=(i,c)=>n(i,c);return new Proxy(s,{get:(i,c)=>c==="create"?n:(r.has(c)||r.set(c,c0(c,void 0,e,t)),r.get(c))})}function FT({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function z7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function H7(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function l0(e){return e===void 0||e===1}function cb({scale:e,scaleX:t,scaleY:r}){return!l0(e)||!l0(t)||!l0(r)}function Il(e){return cb(e)||BT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function BT(e){return PS(e.x)||PS(e.y)}function PS(e){return e&&e!=="0%"}function fg(e,t,r){const n=e-r,s=t*n;return r+s}function NS(e,t,r,n,s){return s!==void 0&&(e=fg(e,s,n)),fg(e,r,n)+t}function lb(e,t=0,r=1,n,s){e.min=NS(e.min,t,r,n,s),e.max=NS(e.max,t,r,n,s)}function UT(e,{x:t,y:r}){lb(e.x,t.translate,t.scale,t.originPoint),lb(e.y,r.translate,r.scale,r.originPoint)}const AS=.999999999999,OS=1.0000000000001;function q7(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,c;for(let d=0;d<s;d++){i=r[d],c=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&eu(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,UT(e,c)),n&&Il(i.latestValues)&&eu(e,i.latestValues))}t.x<OS&&t.x>AS&&(t.x=1),t.y<OS&&t.y>AS&&(t.y=1)}function Zd(e,t){e.min=e.min+t,e.max=e.max+t}function jS(e,t,r,n,s=.5){const i=us(e.min,e.max,s);lb(e,t,r,i,n)}function eu(e,t){jS(e.x,t.x,t.scaleX,t.scale,t.originX),jS(e.y,t.y,t.scaleY,t.scale,t.originY)}function VT(e,t){return FT(H7(e.getBoundingClientRect(),t))}function K7(e,t,r){const n=VT(e,r),{scroll:s}=t;return s&&(Zd(n.x,s.offset.x),Zd(n.y,s.offset.y)),n}const DS=()=>({translate:0,scale:1,origin:0,originPoint:0}),tu=()=>({x:DS(),y:DS()}),IS=()=>({min:0,max:0}),Es=()=>({x:IS(),y:IS()}),db={current:null},$T={current:!1};function G7(){if($T.current=!0,!!e_)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>db.current=e.matches;e.addEventListener("change",t),t()}else db.current=!1}const Y7=new WeakMap;function J7(e,t,r){for(const n in t){const s=t[n],i=r[n];if(hi(s))e.addValue(n,s);else if(hi(i))e.addValue(n,Su(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const c=e.getValue(n);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=e.getStaticValue(n);e.addValue(n,Su(c!==void 0?c:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const MS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Q7{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=v_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Mi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ns.render(this.render,!1,!0))};const{latestValues:l,renderState:o}=c;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=o,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!i,this.isControllingVariants=av(r),this.isVariantNode=CT(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in y){const u=y[m];l[m]!==void 0&&hi(u)&&u.set(l[m])}}mount(t){var r;this.current=t,Y7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),$T.current||G7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:db.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Wc(this.notifyUpdate),Wc(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Lu.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&ns.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Eu){const r=Eu[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Es()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<MS.length;n++){const s=MS[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,c=t[i];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=J7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Su(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(DC(n)||MC(n))?n=parseFloat(n):!a7(n)&&zc.test(r)&&(n=vT(t,r)),this.setBaseTarget(t,hi(n)?n.get():n)),hi(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const c=T_(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);c&&(n=c[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!hi(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new i_),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){w_.render(this.render)}}class WT extends Q7{constructor(){super(...arguments),this.KeyframeResolver=G8}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hi(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function zT(e,{style:t,vars:r},n,s){const i=e.style;let c;for(c in t)i[c]=t[c];s==null||s.applyProjectionStyles(i,n);for(c in r)i.setProperty(c,r[c])}function X7(e){return window.getComputedStyle(e)}class Z7 extends WT{constructor(){super(...arguments),this.type="html",this.renderInstance=zT}readValueFromInstance(t,r){var n;if(Lu.has(r))return(n=this.projection)!=null&&n.isProjecting?tb(r):h8(t,r);{const s=X7(t),i=(c_(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return VT(t,r)}build(t,r,n){R_(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return P_(t,r,n)}}const HT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function e9(e,t,r,n){zT(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(HT.has(s)?s:N_(s),t.attrs[s])}class t9 extends WT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Es}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Lu.has(r)){const n=gT(r);return n&&n.default||0}return r=HT.has(r)?r:N_(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return DT(t,r,n)}build(t,r,n){NT(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){e9(t,r,n,s)}mount(t){this.isSVGTag=OT(t.tagName),super.mount(t)}}const r9=(e,t)=>C_(e)?new t9(t):new Z7(t,{allowProjection:e!==A.Fragment});function lu(e,t,r){const n=e.getProps();return T_(n,t,r!==void 0?r:n.custom,e)}const ub=e=>Array.isArray(e);function n9(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Su(r))}function s9(e){return ub(e)?e[e.length-1]||0:e}function i9(e,t){const r=lu(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const c in i){const d=s9(i[c]);n9(e,c,d)}}function a9(e){return!!(hi(e)&&e.add)}function pb(e,t){const r=e.getValue("willChange");if(a9(r))return r.add(t);if(!r&&Do.WillChange){const n=new Do.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function qT(e){return e.props[IT]}const o9=e=>e!==null;function c9(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(o9),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}const l9={type:"spring",stiffness:500,damping:25,restSpeed:10},d9=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),u9={type:"keyframes",duration:.8},p9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h9=(e,{keyframes:t})=>t.length>2?u9:Lu.has(e)?e.startsWith("scale")?d9(t[1]):l9:p9;function f9({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:c,repeatDelay:d,from:l,elapsed:o,...p}){return!!Object.keys(p).length}const A_=(e,t,r,n={},s,i)=>c=>{const d=y_(n,e)||{},l=d.delay||n.delay||0;let{elapsed:o=0}=n;o=o-to(l);const p={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-o,onUpdate:m=>{t.set(m),d.onUpdate&&d.onUpdate(m)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:e,motionValue:t,element:i?void 0:s};f9(d)||Object.assign(p,h9(e,p)),p.duration&&(p.duration=to(p.duration)),p.repeatDelay&&(p.repeatDelay=to(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(ab(p),p.delay===0&&(y=!0)),(Do.instantAnimations||Do.skipAnimations)&&(y=!0,ab(p),p.delay=0),p.allowFlatten=!d.type&&!d.ease,y&&!i&&t.get()!==void 0){const m=c9(p.keyframes,d);if(m!==void 0){ns.update(()=>{p.onUpdate(m),p.onComplete()});return}}return d.isSync?new g_(p):new M8(p)};function m9({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function KT(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:c,...d}=t;n&&(i=n);const l=[],o=s&&e.animationState&&e.animationState.getState()[s];for(const p in d){const y=e.getValue(p,e.latestValues[p]??null),m=d[p];if(m===void 0||o&&m9(o,p))continue;const u={delay:r,...y_(i||{},p)},b=y.get();if(b!==void 0&&!y.isAnimating&&!Array.isArray(m)&&m===b&&!u.velocity)continue;let f=!1;if(window.MotionHandoffAnimation){const g=qT(e);if(g){const v=window.MotionHandoffAnimation(g,p,ns);v!==null&&(u.startTime=v,f=!0)}}pb(e,p),y.start(A_(p,y,m,e.shouldReduceMotion&&hT.has(p)?{type:!1}:u,e,f));const _=y.animation;_&&l.push(_)}return c&&Promise.all(l).then(()=>{ns.update(()=>{c&&i9(e,c)})}),l}function GT(e,t,r,n=0,s=1){const i=Array.from(e).sort((o,p)=>o.sortNodePosition(p)).indexOf(t),c=e.size,d=(c-1)*n;return typeof r=="function"?r(i,c):s===1?i*n:d-i*n}function hb(e,t,r={}){var l;const n=lu(e,t,r.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(KT(e,n,r)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(o=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:m}=s;return g9(e,t,o,p,y,m,r)}:()=>Promise.resolve(),{when:d}=s;if(d){const[o,p]=d==="beforeChildren"?[i,c]:[c,i];return o().then(()=>p())}else return Promise.all([i(),c(r.delay)])}function g9(e,t,r=0,n=0,s=0,i=1,c){const d=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),d.push(hb(l,t,{...c,delay:r+(typeof n=="function"?0:n)+GT(e.variantChildren,l,n,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(d)}function v9(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>hb(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=hb(e,t,r);else{const s=typeof t=="function"?lu(e,t,r.custom):t;n=Promise.all(KT(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function YT(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const y9=E_.length;function JT(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?JT(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<y9;r++){const n=E_[r],s=e.props[n];(yh(s)||s===!1)&&(t[n]=s)}return t}const b9=[...S_].reverse(),w9=S_.length;function _9(e){return t=>Promise.all(t.map(({animation:r,options:n})=>v9(e,r,n)))}function x9(e){let t=_9(e),r=LS(),n=!0;const s=l=>(o,p)=>{var m;const y=lu(e,p,l==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(y){const{transition:u,transitionEnd:b,...f}=y;o={...o,...f,...b}}return o};function i(l){t=l(e)}function c(l){const{props:o}=e,p=JT(e.parent)||{},y=[],m=new Set;let u={},b=1/0;for(let _=0;_<w9;_++){const g=b9[_],v=r[g],w=o[g]!==void 0?o[g]:p[g],S=yh(w),E=g===l?v.isActive:null;E===!1&&(b=_);let O=w===p[g]&&w!==o[g]&&S;if(O&&n&&e.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...u},!v.isActive&&E===null||!w&&!v.prevProp||iv(w)||typeof w=="boolean")continue;const C=S9(v.prevProp,w);let k=C||g===l&&v.isActive&&!O&&S||_>b&&S,T=!1;const h=Array.isArray(w)?w:[w];let x=h.reduce(s(g),{});E===!1&&(x={});const{prevResolvedValues:R={}}=v,P={...R,...x},N=L=>{k=!0,m.has(L)&&(T=!0,m.delete(L)),v.needsAnimating[L]=!0;const M=e.getValue(L);M&&(M.liveStyle=!1)};for(const L in P){const M=x[L],I=R[L];if(u.hasOwnProperty(L))continue;let G=!1;ub(M)&&ub(I)?G=!YT(M,I):G=M!==I,G?M!=null?N(L):m.add(L):M!==void 0&&m.has(L)?N(L):v.protectedKeys[L]=!0}v.prevProp=w,v.prevResolvedValues=x,v.isActive&&(u={...u,...x}),n&&e.blockInitialAnimation&&(k=!1);const j=O&&C;k&&(!j||T)&&y.push(...h.map(L=>{const M={type:g};if(typeof L=="string"&&n&&!j&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,G=lu(I,L);if(I.enteringChildren&&G){const{delayChildren:de}=G.transition||{};M.delay=GT(I.enteringChildren,e,de)}}return{animation:L,options:M}}))}if(m.size){const _={};if(typeof o.initial!="boolean"){const g=lu(e,Array.isArray(o.initial)?o.initial[0]:o.initial);g&&g.transition&&(_.transition=g.transition)}m.forEach(g=>{const v=e.getBaseTarget(g),w=e.getValue(g);w&&(w.liveStyle=!0),_[g]=v??null}),y.push({animation:_})}let f=!!y.length;return n&&(o.initial===!1||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(y):Promise.resolve()}function d(l,o){var y;if(r[l].isActive===o)return Promise.resolve();(y=e.variantChildren)==null||y.forEach(m=>{var u;return(u=m.animationState)==null?void 0:u.setActive(l,o)}),r[l].isActive=o;const p=c(l);for(const m in r)r[m].protectedKeys={};return p}return{animateChanges:c,setActive:d,setAnimateFunction:i,getState:()=>r,reset:()=>{r=LS(),n=!0}}}function S9(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!YT(t,e):!1}function Ol(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function LS(){return{animate:Ol(!0),whileInView:Ol(),whileHover:Ol(),whileTap:Ol(),whileDrag:Ol(),whileFocus:Ol(),exit:Ol()}}class Zc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class E9 extends Zc{constructor(t){super(t),t.animationState||(t.animationState=x9(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();iv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let R9=0;class k9 extends Zc{constructor(){super(...arguments),this.id=R9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const C9={animation:{Feature:E9},exit:{Feature:k9}};function wh(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function $h(e){return{point:{x:e.pageX,y:e.pageY}}}const T9=e=>t=>__(t)&&e(t,$h(t));function qp(e,t,r,n){return wh(e,t,T9(r),n)}const QT=1e-4,P9=1-QT,N9=1+QT,XT=.01,A9=0-XT,O9=0+XT;function _i(e){return e.max-e.min}function j9(e,t,r){return Math.abs(e-t)<=r}function FS(e,t,r,n=.5){e.origin=n,e.originPoint=us(t.min,t.max,e.origin),e.scale=_i(r)/_i(t),e.translate=us(r.min,r.max,e.origin)-e.originPoint,(e.scale>=P9&&e.scale<=N9||isNaN(e.scale))&&(e.scale=1),(e.translate>=A9&&e.translate<=O9||isNaN(e.translate))&&(e.translate=0)}function Kp(e,t,r,n){FS(e.x,t.x,r.x,n?n.originX:void 0),FS(e.y,t.y,r.y,n?n.originY:void 0)}function BS(e,t,r){e.min=r.min+t.min,e.max=e.min+_i(t)}function D9(e,t,r){BS(e.x,t.x,r.x),BS(e.y,t.y,r.y)}function US(e,t,r){e.min=t.min-r.min,e.max=e.min+_i(t)}function Gp(e,t,r){US(e.x,t.x,r.x),US(e.y,t.y,r.y)}function da(e){return[e("x"),e("y")]}const ZT=({current:e})=>e?e.ownerDocument.defaultView:null,VS=(e,t)=>Math.abs(e-t);function I9(e,t){const r=VS(e.x,t.x),n=VS(e.y,t.y);return Math.sqrt(r**2+n**2)}class eP{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=u0(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,b=I9(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!u&&!b)return;const{point:f}=m,{timestamp:_}=ei;this.history.push({...f,timestamp:_});const{onStart:g,onMove:v}=this.handlers;u||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,m)},this.handlePointerMove=(m,u)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=d0(u,this.transformPagePoint),ns.update(this.updatePoint,!0)},this.handlePointerUp=(m,u)=>{this.end();const{onEnd:b,onSessionEnd:f,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=u0(m.type==="pointercancel"?this.lastMoveEventInfo:d0(u,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,g),f&&f(m,g)},!__(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=c,this.contextWindow=s||window;const d=$h(t),l=d0(d,this.transformPagePoint),{point:o}=l,{timestamp:p}=ei;this.history=[{...o,timestamp:p}];const{onSessionStart:y}=r;y&&y(t,u0(l,this.history)),this.removeListeners=Bh(qp(this.contextWindow,"pointermove",this.handlePointerMove),qp(this.contextWindow,"pointerup",this.handlePointerUp),qp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Wc(this.updatePoint)}}function d0(e,t){return t?{point:t(e.point)}:e}function $S(e,t){return{x:e.x-t.x,y:e.y-t.y}}function u0({point:e},t){return{point:e,delta:$S(e,tP(t)),offset:$S(e,M9(t)),velocity:L9(t,.1)}}function M9(e){return e[0]}function tP(e){return e[e.length-1]}function L9(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=tP(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>to(t)));)r--;if(!n)return{x:0,y:0};const i=ro(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const c={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function F9(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?us(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?us(r,e,n.max):Math.min(e,r)),e}function WS(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function B9(e,{top:t,left:r,bottom:n,right:s}){return{x:WS(e.x,r,s),y:WS(e.y,t,n)}}function zS(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function U9(e,t){return{x:zS(e.x,t.x),y:zS(e.y,t.y)}}function V9(e,t){let r=.5;const n=_i(e),s=_i(t);return s>n?r=mh(t.min,t.max-n,e.min):n>s&&(r=mh(e.min,e.max-s,t.min)),jo(0,1,r)}function $9(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const fb=.35;function W9(e=fb){return e===!1?e=0:e===!0&&(e=fb),{x:HS(e,"left","right"),y:HS(e,"top","bottom")}}function HS(e,t,r){return{min:qS(e,t),max:qS(e,r)}}function qS(e,t){return typeof e=="number"?e:e[t]||0}const z9=new WeakMap;class H9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Es(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=y=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor($h(y).point)},c=(y,m)=>{const{drag:u,dragPropagation:b,onDragStart:f}=this.getProps();if(u&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=X8(u),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),da(g=>{let v=this.getAxisMotionValue(g).get()||0;if(no.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[g];S&&(v=_i(S)*(parseFloat(v)/100))}}this.originPoint[g]=v}),f&&ns.postRender(()=>f(y,m)),pb(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},d=(y,m)=>{this.latestPointerEvent=y,this.latestPanInfo=m;const{dragPropagation:u,dragDirectionLock:b,onDirectionLock:f,onDrag:_}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:g}=m;if(b&&this.currentDirection===null){this.currentDirection=q9(g),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),_&&_(y,m)},l=(y,m)=>{this.latestPointerEvent=y,this.latestPanInfo=m,this.stop(y,m),this.latestPointerEvent=null,this.latestPanInfo=null},o=()=>da(y=>{var m;return this.getAnimationState(y)==="paused"&&((m=this.getAxisMotionValue(y).animation)==null?void 0:m.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new eP(t,{onSessionStart:i,onStart:c,onMove:d,onSessionEnd:l,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:ZT(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&ns.postRender(()=>d(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!qf(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let c=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(c=F9(c,this.constraints[t],this.elastic[t])),i.set(c)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&Xd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=B9(n.layoutBox,t):this.constraints=!1,this.elastic=W9(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&da(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=$9(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Xd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=K7(n,s.root,this.visualElement.getTransformPagePoint());let c=U9(s.layout.layoutBox,i);if(r){const d=r(z7(c));this.hasMutatedConstraints=!!d,d&&(c=FT(d))}return c}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),l=this.constraints||{},o=da(p=>{if(!qf(p,r,this.currentDirection))return;let y=l&&l[p]||{};c&&(y={min:0,max:0});const m=s?200:1e6,u=s?40:1e7,b={type:"inertia",velocity:n?t[p]:0,bounceStiffness:m,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...y};return this.startAxisValueAnimation(p,b)});return Promise.all(o).then(d)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return pb(this.visualElement,t),n.start(A_(t,n,0,r,this.visualElement,!1))}stopAnimation(){da(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){da(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){da(r=>{const{drag:n}=this.getProps();if(!qf(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:c,max:d}=s.layout.layoutBox[r];i.set(t[r]-us(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Xd(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};da(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const l=d.get();s[c]=V9({min:l,max:l},this.constraints[c])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),da(c=>{if(!qf(c,t,null))return;const d=this.getAxisMotionValue(c),{min:l,max:o}=this.constraints[c];d.set(us(l,o,s[c]))})}addListeners(){if(!this.visualElement.current)return;z9.set(this.visualElement,this);const t=this.visualElement.current,r=qp(t,"pointerdown",l=>{const{drag:o,dragListener:p=!0}=this.getProps();o&&p&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Xd(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ns.read(n);const c=wh(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:o})=>{this.isDragging&&o&&(da(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=l[p].translate,y.set(y.get()+l[p].translate))}),this.visualElement.render())});return()=>{c(),r(),i(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:c=fb,dragMomentum:d=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:c,dragMomentum:d}}}function qf(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function q9(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class K9 extends Zc{constructor(t){super(t),this.removeGroupControls=ga,this.removeListeners=ga,this.controls=new H9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ga}unmount(){this.removeGroupControls(),this.removeListeners()}}const KS=e=>(t,r)=>{e&&ns.postRender(()=>e(t,r))};class G9 extends Zc{constructor(){super(...arguments),this.removePointerDownListener=ga}onPointerDown(t){this.session=new eP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:KS(t),onStart:KS(r),onMove:n,onEnd:(i,c)=>{delete this.session,s&&ns.postRender(()=>s(i,c))}}}mount(){this.removePointerDownListener=qp(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ep={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(kr.test(e))e=parseFloat(e);else return e;const r=GS(e,t.target.x),n=GS(e,t.target.y);return`${r}% ${n}%`}},Y9={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=zc.parse(e);if(s.length>5)return n;const i=zc.createTransformer(e),c=typeof s[0]!="number"?1:0,d=r.x.scale*t.x,l=r.y.scale*t.y;s[0+c]/=d,s[1+c]/=l;const o=us(d,l,.5);return typeof s[2+c]=="number"&&(s[2+c]/=o),typeof s[3+c]=="number"&&(s[3+c]/=o),i(s)}};let p0=!1;class J9 extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;y7(Q9),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),p0&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Sm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:c}=n;return c&&(c.isPresent=i,p0=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?c.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?c.promote():c.relegate()||ns.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),w_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;p0=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rP(e){const[t,r]=ET(),n=A.useContext(Xw);return a.jsx(J9,{...e,layoutGroup:n,switchLayoutGroup:A.useContext(MT),isPresent:t,safeToRemove:r})}const Q9={borderRadius:{...Ep,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ep,borderTopRightRadius:Ep,borderBottomLeftRadius:Ep,borderBottomRightRadius:Ep,boxShadow:Y9};function X9(e,t,r){const n=hi(e)?e:Su(e);return n.start(A_("",n,t,r)),n.animation}const Z9=(e,t)=>e.depth-t.depth;class e5{constructor(){this.children=[],this.isDirty=!1}add(t){t_(this.children,t),this.isDirty=!0}remove(t){r_(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Z9),this.isDirty=!1,this.children.forEach(t)}}function t5(e,t){const r=Mi.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(Wc(n),e(i-t))};return ns.setup(n,!0),()=>Wc(n)}const nP=["TopLeft","TopRight","BottomLeft","BottomRight"],r5=nP.length,YS=e=>typeof e=="string"?parseFloat(e):e,JS=e=>typeof e=="number"||kr.test(e);function n5(e,t,r,n,s,i){s?(e.opacity=us(0,r.opacity??1,s5(n)),e.opacityExit=us(t.opacity??1,0,i5(n))):i&&(e.opacity=us(t.opacity??1,r.opacity??1,n));for(let c=0;c<r5;c++){const d=`border${nP[c]}Radius`;let l=QS(t,d),o=QS(r,d);if(l===void 0&&o===void 0)continue;l||(l=0),o||(o=0),l===0||o===0||JS(l)===JS(o)?(e[d]=Math.max(us(YS(l),YS(o),n),0),(no.test(o)||no.test(l))&&(e[d]+="%")):e[d]=o}(t.rotate||r.rotate)&&(e.rotate=us(t.rotate||0,r.rotate||0,n))}function QS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const s5=sP(0,.5,zC),i5=sP(.5,.95,ga);function sP(e,t,r){return n=>n<e?0:n>t?1:r(mh(e,t,n))}function XS(e,t){e.min=t.min,e.max=t.max}function la(e,t){XS(e.x,t.x),XS(e.y,t.y)}function ZS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function e2(e,t,r,n,s){return e-=t,e=fg(e,1/r,n),s!==void 0&&(e=fg(e,1/s,n)),e}function a5(e,t=0,r=1,n=.5,s,i=e,c=e){if(no.test(t)&&(t=parseFloat(t),t=us(c.min,c.max,t/100)-c.min),typeof t!="number")return;let d=us(i.min,i.max,n);e===i&&(d-=t),e.min=e2(e.min,t,r,d,s),e.max=e2(e.max,t,r,d,s)}function t2(e,t,[r,n,s],i,c){a5(e,t[r],t[n],t[s],t.scale,i,c)}const o5=["x","scaleX","originX"],c5=["y","scaleY","originY"];function r2(e,t,r,n){t2(e.x,t,o5,r?r.x:void 0,n?n.x:void 0),t2(e.y,t,c5,r?r.y:void 0,n?n.y:void 0)}function n2(e){return e.translate===0&&e.scale===1}function iP(e){return n2(e.x)&&n2(e.y)}function s2(e,t){return e.min===t.min&&e.max===t.max}function l5(e,t){return s2(e.x,t.x)&&s2(e.y,t.y)}function i2(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function aP(e,t){return i2(e.x,t.x)&&i2(e.y,t.y)}function a2(e){return _i(e.x)/_i(e.y)}function o2(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class d5{constructor(){this.members=[]}add(t){t_(this.members,t),t.scheduleRender()}remove(t){if(r_(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function u5(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,c=(r==null?void 0:r.z)||0;if((s||i||c)&&(n=`translate3d(${s}px, ${i}px, ${c}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:o,rotate:p,rotateX:y,rotateY:m,skewX:u,skewY:b}=r;o&&(n=`perspective(${o}px) ${n}`),p&&(n+=`rotate(${p}deg) `),y&&(n+=`rotateX(${y}deg) `),m&&(n+=`rotateY(${m}deg) `),u&&(n+=`skewX(${u}deg) `),b&&(n+=`skewY(${b}deg) `)}const d=e.x.scale*t.x,l=e.y.scale*t.y;return(d!==1||l!==1)&&(n+=`scale(${d}, ${l})`),n||"none"}const h0=["","X","Y","Z"],p5=1e3;let h5=0;function f0(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function oP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=qT(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ns,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&oP(n)}function cP({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(c={},d=t==null?void 0:t()){this.id=h5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(g5),this.nodes.forEach(w5),this.nodes.forEach(_5),this.nodes.forEach(v5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new e5)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new i_),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const l=this.eventHandlers.get(c);l&&l.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=ST(c)&&!s7(c),this.instance=c;const{layoutId:d,layout:l,visualElement:o}=this.options;if(o&&!o.current&&o.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||d)&&(this.isLayoutDirty=!0),e){let p,y=0;const m=()=>this.root.updateBlockedByResize=!1;ns.read(()=>{y=window.innerWidth}),e(c,()=>{const u=window.innerWidth;u!==y&&(y=u,this.root.updateBlockedByResize=!0,p&&p(),p=t5(m,250),Sm.hasAnimatedSinceResize&&(Sm.hasAnimatedSinceResize=!1,this.nodes.forEach(d2)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&o&&(d||l)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:m,layout:u})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||o.getDefaultTransition()||k5,{onLayoutAnimationStart:f,onLayoutAnimationComplete:_}=o.getProps(),g=!this.targetLayout||!aP(this.targetLayout,u),v=!y&&m;if(this.options.layoutRoot||this.resumeFrom||v||y&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...y_(b,"layout"),onPlay:f,onComplete:_};(o.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(p,v)}else y||d2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=u})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Wc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(x5),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:l}=this.options;if(d===void 0&&!l)return;const o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(l2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(b5),this.nodes.forEach(f5),this.nodes.forEach(m5)):this.nodes.forEach(l2),this.clearAllSnapshots();const d=Mi.now();ei.delta=jo(0,1e3/60,d-ei.timestamp),ei.timestamp=d,ei.isProcessing=!0,n0.update.process(ei),n0.preRender.process(ei),n0.render.process(ei),ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,w_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y5),this.sharedNodes.forEach(S5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ns.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ns.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_i(this.snapshot.measuredBox.x)&&!_i(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Es(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!iP(this.projectionDelta),l=this.getTransformTemplate(),o=l?l(this.latestValues,""):void 0,p=o!==this.prevTransformTemplateValue;c&&this.instance&&(d||Il(this.latestValues)||p)&&(s(this.instance,o),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let l=this.removeElementScroll(d);return c&&(l=this.removeTransform(l)),C5(l),{animationId:this.root.animationId,measuredBox:d,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:c}=this.options;if(!c)return Es();const d=c.measureViewportBox();if(!(((o=this.scroll)==null?void 0:o.wasRoot)||this.path.some(T5))){const{scroll:p}=this.root;p&&(Zd(d.x,p.offset.x),Zd(d.y,p.offset.y))}return d}removeElementScroll(c){var l;const d=Es();if(la(d,c),(l=this.scroll)!=null&&l.wasRoot)return d;for(let o=0;o<this.path.length;o++){const p=this.path[o],{scroll:y,options:m}=p;p!==this.root&&y&&m.layoutScroll&&(y.wasRoot&&la(d,c),Zd(d.x,y.offset.x),Zd(d.y,y.offset.y))}return d}applyTransform(c,d=!1){const l=Es();la(l,c);for(let o=0;o<this.path.length;o++){const p=this.path[o];!d&&p.options.layoutScroll&&p.scroll&&p!==p.root&&eu(l,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Il(p.latestValues)&&eu(l,p.latestValues)}return Il(this.latestValues)&&eu(l,this.latestValues),l}removeTransform(c){const d=Es();la(d,c);for(let l=0;l<this.path.length;l++){const o=this.path[l];if(!o.instance||!Il(o.latestValues))continue;cb(o.latestValues)&&o.updateSnapshot();const p=Es(),y=o.measurePageBox();la(p,y),r2(d,o.latestValues,o.snapshot?o.snapshot.layoutBox:void 0,p)}return Il(this.latestValues)&&r2(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var m;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==d;if(!(c||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=ei.timestamp,!this.targetDelta&&!this.relativeTarget){const u=this.getClosestProjectingParent();u&&u.layout&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Es(),this.relativeTargetOrigin=Es(),Gp(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),la(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Es(),this.targetWithTransforms=Es()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):la(this.target,this.layout.layoutBox),UT(this.target,this.targetDelta)):la(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const u=this.getClosestProjectingParent();u&&!!u.resumingFrom==!!this.resumingFrom&&!u.options.layoutScroll&&u.target&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Es(),this.relativeTargetOrigin=Es(),Gp(this.relativeTargetOrigin,this.target,u.target),la(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||cb(this.parent.latestValues)||BT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let l=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(l=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ei.timestamp&&(l=!1),l)return;const{layout:o,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(o||p))return;la(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,m=this.treeScale.y;q7(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Es());const{target:u}=c;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ZS(this.prevProjectionDelta.x,this.projectionDelta.x),ZS(this.prevProjectionDelta.y,this.projectionDelta.y)),Kp(this.projectionDelta,this.layoutCorrected,u,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==m||!o2(this.projectionDelta.x,this.prevProjectionDelta.x)||!o2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tu(),this.projectionDelta=tu(),this.projectionDeltaWithTransform=tu()}setAnimationOrigin(c,d=!1){const l=this.snapshot,o=l?l.latestValues:{},p={...this.latestValues},y=tu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const m=Es(),u=l?l.source:void 0,b=this.layout?this.layout.source:void 0,f=u!==b,_=this.getStack(),g=!_||_.members.length<=1,v=!!(f&&!g&&this.options.crossfade===!0&&!this.path.some(R5));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const E=S/1e3;u2(y.x,c.x,E),u2(y.y,c.y,E),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gp(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E5(this.relativeTarget,this.relativeTargetOrigin,m,E),w&&l5(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Es()),la(w,this.relativeTarget)),f&&(this.animationValues=p,n5(p,o,this.latestValues,E,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var d,l,o;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(o=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||o.stop(),this.pendingAnimation&&(Wc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ns.update(()=>{Sm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Su(0)),this.currentAnimation=X9(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(p5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:l,layout:o,latestValues:p}=c;if(!(!d||!l||!o)){if(this!==c&&this.layout&&o&&lP(this.options.animationType,this.layout.layoutBox,o.layoutBox)){l=this.target||Es();const y=_i(this.layout.layoutBox.x);l.x.min=c.target.x.min,l.x.max=l.x.min+y;const m=_i(this.layout.layoutBox.y);l.y.min=c.target.y.min,l.y.max=l.y.min+m}la(d,l),eu(d,p),Kp(this.projectionDeltaWithTransform,this.layoutCorrected,d,p)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new d5),this.sharedNodes.get(c).add(d);const o=d.options.initialPromotionConfig;d.promote({transition:o?o.transition:void 0,preserveFollowOpacity:o&&o.shouldPreserveFollowOpacity?o.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var d;const{layoutId:c}=this.options;return c?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:c}=this.options;return c?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:l}={}){const o=this.getStack();o&&o.promote(this,l),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:l}=c;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(d=!0),!d)return;const o={};l.z&&f0("z",c,o,this.animationValues);for(let p=0;p<h0.length;p++)f0(`rotate${h0[p]}`,c,o,this.animationValues),f0(`skew${h0[p]}`,c,o,this.animationValues);c.render();for(const p in o)c.setStaticValue(p,o[p]),this.animationValues&&(this.animationValues[p]=o[p]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=xm(d==null?void 0:d.pointerEvents)||"",c.transform=l?l(this.latestValues,""):"none";return}const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=xm(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Il(this.latestValues)&&(c.transform=l?l({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=o.animationValues||o.latestValues;this.applyTransformsToTarget();let y=u5(this.projectionDeltaWithTransform,this.treeScale,p);l&&(y=l(p,y)),c.transform=y;const{x:m,y:u}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${u.origin*100}% 0`,o.animationValues?c.opacity=o===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=o===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in bh){if(p[b]===void 0)continue;const{correct:f,applyTo:_,isCSSVariable:g}=bh[b],v=y==="none"?p[b]:f(p[b],o);if(_){const w=_.length;for(let S=0;S<w;S++)c[_[S]]=v}else g?this.options.visualElement.renderState.vars[b]=v:c[b]=v}this.options.layoutId&&(c.pointerEvents=o===this?xm(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(c2),this.root.sharedNodes.clear()}}}function f5(e){e.updateLayout()}function m5(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,c=t.source!==e.layout.source;i==="size"?da(y=>{const m=c?t.measuredBox[y]:t.layoutBox[y],u=_i(m);m.min=n[y].min,m.max=m.min+u}):lP(i,t.layoutBox,n)&&da(y=>{const m=c?t.measuredBox[y]:t.layoutBox[y],u=_i(n[y]);m.max=m.min+u,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+u)});const d=tu();Kp(d,n,t.layoutBox);const l=tu();c?Kp(l,e.applyTransform(s,!0),t.measuredBox):Kp(l,n,t.layoutBox);const o=!iP(d);let p=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:m,layout:u}=y;if(m&&u){const b=Es();Gp(b,t.layoutBox,m.layoutBox);const f=Es();Gp(f,n,u.layoutBox),aP(b,f)||(p=!0),y.options.layoutRoot&&(e.relativeTarget=f,e.relativeTargetOrigin=b,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:d,hasLayoutChanged:o,hasRelativeLayoutChanged:p})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function g5(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function v5(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function y5(e){e.clearSnapshot()}function c2(e){e.clearMeasurements()}function l2(e){e.isLayoutDirty=!1}function b5(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function d2(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function w5(e){e.resolveTargetDelta()}function _5(e){e.calcProjection()}function x5(e){e.resetSkewAndRotation()}function S5(e){e.removeLeadSnapshot()}function u2(e,t,r){e.translate=us(t.translate,0,r),e.scale=us(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function p2(e,t,r,n){e.min=us(t.min,r.min,n),e.max=us(t.max,r.max,n)}function E5(e,t,r,n){p2(e.x,t.x,r.x,n),p2(e.y,t.y,r.y,n)}function R5(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const k5={duration:.45,ease:[.4,0,.1,1]},h2=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),f2=h2("applewebkit/")&&!h2("chrome/")?Math.round:ga;function m2(e){e.min=f2(e.min),e.max=f2(e.max)}function C5(e){m2(e.x),m2(e.y)}function lP(e,t,r){return e==="position"||e==="preserve-aspect"&&!j9(a2(t),a2(r),.2)}function T5(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const P5=cP({attachResizeListener:(e,t)=>wh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),m0={current:void 0},dP=cP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!m0.current){const e=new P5({});e.mount(window),e.setOptions({layoutScroll:!0}),m0.current=e}return m0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),N5={pan:{Feature:G9},drag:{Feature:K9,ProjectionNode:dP,MeasureLayout:rP}};function g2(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&ns.postRender(()=>i(t,$h(t)))}class A5 extends Zc{mount(){const{current:t}=this.node;t&&(this.unmount=Z8(t,(r,n)=>(g2(this.node,n,"Start"),s=>g2(this.node,s,"End"))))}unmount(){}}class O5 extends Zc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bh(wh(this.node.current,"focus",()=>this.onFocus()),wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function v2(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&ns.postRender(()=>i(t,$h(t)))}class j5 extends Zc{mount(){const{current:t}=this.node;t&&(this.unmount=n7(t,(r,n)=>(v2(this.node,n,"Start"),(s,{success:i})=>v2(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mb=new WeakMap,g0=new WeakMap,D5=e=>{const t=mb.get(e.target);t&&t(e)},I5=e=>{e.forEach(D5)};function M5({root:e,...t}){const r=e||document;g0.has(r)||g0.set(r,{});const n=g0.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(I5,{root:e,...t})),n[s]}function L5(e,t,r){const n=M5(t);return mb.set(e,r),n.observe(e),()=>{mb.delete(e),n.unobserve(e)}}const F5={some:0,all:1};class B5 extends Zc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,c={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:F5[s]},d=l=>{const{isIntersecting:o}=l;if(this.isInView===o||(this.isInView=o,i&&!o&&this.hasEnteredView))return;o&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",o);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),m=o?p:y;m&&m(l)};return L5(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(U5(t,r))&&this.startObserver()}unmount(){}}function U5({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const V5={inView:{Feature:B5},tap:{Feature:j5},focus:{Feature:O5},hover:{Feature:A5}},$5={layout:{ProjectionNode:dP,MeasureLayout:rP}},W5={...C9,...V5,...N5,...$5},Qr=W7(W5,r9);function uP({isOpen:e,onToggle:t}){const r=Wn(l=>l.user),[n,s]=A.useState(0),i=A.useRef(null);A.useEffect(()=>{if(r){const l=async()=>{try{const o=await Mt.get("undefined/api/user/notifications/unread-count",{withCredentials:!0});o.data.success&&s(o.data.data.unreadCount)}catch(o){console.error("Error fetching unread count:",o)}};return l(),i.current=setInterval(l,1e4),()=>{i.current&&(clearInterval(i.current),i.current=null)}}},[r]);const d=r?r.role==="DOCTOR"?[{href:"/dashboard/doctor",label:"Home",icon:z1},{href:"/doctor/appointments",label:"Appointment Requests",icon:ps},{href:"/doctor/appointment-history",label:"Appointment History",icon:ni},{href:"/chat",label:"Chat",icon:$c},{href:"/notifications",label:"Notifications",icon:ig,badge:n},{href:"/profile",label:"Profile",icon:Oo}]:[{href:"/dashboard/patient",label:"Home",icon:z1},{href:"/appointments",label:"Appointments",icon:ps},{href:"/doctors",label:"Find Doctor",icon:Ih},{href:"/chat",label:"Chat",icon:$c},{href:"/upload-report",label:"Analyze Report",icon:Ma},{href:"/prescriptions",label:"Prescriptions",icon:ag},{href:"/notifications",label:"Notifications",icon:ig,badge:n},{href:"/pharmacy",label:"Pharmacy Near Me",icon:io},{href:"/appointment-history",label:"Appointment History",icon:ni},{href:"/profile",label:"Profile",icon:Oo}]:[];return r?a.jsxs(a.Fragment,{children:[a.jsx(u7,{children:e&&a.jsx(Qr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:t})}),a.jsx("aside",{className:"hidden md:flex w-64 h-screen bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm border-r border-slate-200/60 dark:border-zinc-700/60 flex-col shadow-lg fixed left-0 top-16 z-40",children:a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:d.map(l=>{const o=l.icon;return a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs(I1,{to:l.href,className:({isActive:p})=>`flex items-center justify-between px-4 py-3 rounded-xl transition-colors ${p?"bg-blue-100/70 dark:bg-blue-400/10 text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-300 hover:bg-slate-100/80 dark:hover:bg-zinc-800/70"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(o,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:l.label})]}),l.badge&&l.badge>0&&a.jsx($r,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:l.badge>99?"99+":l.badge})]})},l.href)})})}),a.jsxs(Qr.aside,{initial:!1,animate:{x:e?0:"-100%",transition:{type:"spring",damping:25,stiffness:200}},className:"md:hidden fixed top-16 left-0 h-full w-64 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm border-r border-slate-200/60 dark:border-zinc-700/60 z-50 flex flex-col shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-end p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx(rr,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(og,{className:"h-5 w-5"})})}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:d.map(l=>{const o=l.icon;return a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs(I1,{to:l.href,className:({isActive:p})=>`flex items-center justify-between px-4 py-3 rounded-xl transition-colors ${p?"bg-blue-100/70 dark:bg-blue-400/10 text-blue-700 dark:text-blue-300":"text-slate-700 dark:text-slate-300 hover:bg-slate-100/80 dark:hover:bg-zinc-800/70"}`,onClick:()=>{window.innerWidth<768&&t()},children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(o,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:l.label})]}),l.badge&&l.badge>0&&a.jsx($r,{variant:"destructive",className:"h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:l.badge>99?"99+":l.badge})]})},l.href)})})]})]}):null}function y2({children:e}){const[t,r]=A.useState(!1),n=Xc(),s=Wn(d=>d.user),c=s&&["/dashboard/patient","/dashboard/doctor","/admin","/profile","/appointments","/doctors","/book-appointment","/chat"].some(d=>n.pathname.startsWith(d));return console.log("Layout Debug:",{user:s,location:n.pathname,shouldShowSidebar:c}),s?c?a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-zinc-900 flex",children:[a.jsx(uP,{isOpen:t,onToggle:()=>r(!t)}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-200/60 dark:border-zinc-700/60 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm",children:[a.jsx(rr,{variant:"ghost",size:"sm",onClick:()=>r(!0),children:a.jsx(qw,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:a.jsx(ed,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CareXpert"})]}),a.jsx("div",{className:"w-8"})," "]}),a.jsx("main",{className:"flex-1",children:e||a.jsx(Wp,{})})]})]}):a.jsx("div",{className:"min-h-screen font-sans",children:e||a.jsx(Wp,{})}):a.jsx("div",{className:"min-h-screen font-sans",children:e||a.jsx(Wp,{})})}function z5(e,t=[]){let r=[];function n(i,c){const d=A.createContext(c),l=r.length;r=[...r,c];const o=y=>{var g;const{scope:m,children:u,...b}=y,f=((g=m==null?void 0:m[e])==null?void 0:g[l])||d,_=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:_,children:u})};o.displayName=i+"Provider";function p(y,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[l])||d,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(d){const l=(d==null?void 0:d[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...d,[e]:l}}),[d,l])}};return s.scopeName=e,[n,H5(s,...t)]}function H5(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((d,{useScope:l,scopeName:o})=>{const y=l(i)[`__scope${o}`];return{...d,...y}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function Wi(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var zn=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function b2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function q5(...e){return t=>{let r=!1;const n=e.map(s=>{const i=b2(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():b2(e[s],null)}}}}function K5(e){const t=G5(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,d=A.Children.toArray(i),l=d.find(J5);if(l){const o=l.props.children,p=d.map(y=>y===l?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:y);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function G5(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=X5(s),d=Q5(i,s.props);return s.type!==A.Fragment&&(d.ref=n?q5(n,c):c),A.cloneElement(s,d)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y5=Symbol("radix.slottable");function J5(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y5}function Q5(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...d)=>{const l=i(...d);return s(...d),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function X5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Z5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],O_=Z5.reduce((e,t)=>{const r=K5(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...d}=s,l=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...d,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),pP={exports:{}},hP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=A;function eF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tF=typeof Object.is=="function"?Object.is:eF,rF=Ru.useState,nF=Ru.useEffect,sF=Ru.useLayoutEffect,iF=Ru.useDebugValue;function aF(e,t){var r=t(),n=rF({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return sF(function(){s.value=r,s.getSnapshot=t,v0(s)&&i({inst:s})},[e,r,t]),nF(function(){return v0(s)&&i({inst:s}),e(function(){v0(s)&&i({inst:s})})},[e]),iF(r),r}function v0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tF(e,r)}catch{return!0}}function oF(e,t){return t()}var cF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?oF:aF;hP.useSyncExternalStore=Ru.useSyncExternalStore!==void 0?Ru.useSyncExternalStore:cF;pP.exports=hP;var lF=pP.exports;function dF(){return lF.useSyncExternalStore(uF,()=>!0,()=>!1)}function uF(){return()=>{}}var j_="Avatar",[pF,KK]=z5(j_),[hF,fP]=pF(j_),mP=A.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=A.useState("idle");return a.jsx(hF,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(O_.span,{...n,ref:t})})});mP.displayName=j_;var gP="AvatarImage",vP=A.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,c=fP(gP,r),d=fF(n,i),l=Wi(o=>{s(o),c.onImageLoadingStatusChange(o)});return zn(()=>{d!=="idle"&&l(d)},[d,l]),d==="loaded"?a.jsx(O_.img,{...i,ref:t,src:n}):null});vP.displayName=gP;var yP="AvatarFallback",bP=A.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=fP(yP,r),[c,d]=A.useState(n===void 0);return A.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(l)}},[n]),c&&i.imageLoadingStatus!=="loaded"?a.jsx(O_.span,{...s,ref:t}):null});bP.displayName=yP;function w2(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function fF(e,{referrerPolicy:t,crossOrigin:r}){const n=dF(),s=A.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[c,d]=A.useState(()=>w2(i,e));return zn(()=>{d(w2(i,e))},[i,e]),zn(()=>{const l=y=>()=>{d(y)};if(!i)return;const o=l("loaded"),p=l("error");return i.addEventListener("load",o),i.addEventListener("error",p),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",o),i.removeEventListener("error",p)}},[i,r,t]),c}var wP=mP,_P=vP,xP=bP;const ws=A.forwardRef(({className:e,...t},r)=>a.jsx(wP,{ref:r,className:Ur("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ws.displayName=wP.displayName;const ks=A.forwardRef(({className:e,...t},r)=>a.jsx(_P,{ref:r,className:Ur("aspect-square h-full w-full",e),...t}));ks.displayName=_P.displayName;const _s=A.forwardRef(({className:e,...t},r)=>a.jsx(xP,{ref:r,className:Ur("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));_s.displayName=xP.displayName;function ln(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Wh(e,t=[]){let r=[];function n(i,c){const d=A.createContext(c),l=r.length;r=[...r,c];const o=y=>{var g;const{scope:m,children:u,...b}=y,f=((g=m==null?void 0:m[e])==null?void 0:g[l])||d,_=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:_,children:u})};o.displayName=i+"Provider";function p(y,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[l])||d,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(d){const l=(d==null?void 0:d[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...d,[e]:l}}),[d,l])}};return s.scopeName=e,[n,mF(s,...t)]}function mF(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((d,{useScope:l,scopeName:o})=>{const y=l(i)[`__scope${o}`];return{...d,...y}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function SP(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function EP({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=gF({defaultProp:t,onChange:r}),i=e!==void 0,c=i?e:n,d=SP(r),l=A.useCallback(o=>{if(i){const y=typeof o=="function"?o(e):o;y!==e&&d(y)}else s(o)},[i,e,s,d]);return[c,l]}function gF({defaultProp:e,onChange:t}){const r=A.useState(e),[n]=r,s=A.useRef(n),i=SP(t);return A.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var vF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ri=vF.reduce((e,t)=>{const r=A.forwardRef((n,s)=>{const{asChild:i,...c}=n,d=i?xu:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(d,{...c,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function RP(e,t){e&&Qc.flushSync(()=>e.dispatchEvent(t))}function kP(e){const t=e+"CollectionProvider",[r,n]=Wh(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=u=>{const{scope:b,children:f}=u,_=pt.useRef(null),g=pt.useRef(new Map).current;return a.jsx(s,{scope:b,itemMap:g,collectionRef:_,children:f})};c.displayName=t;const d=e+"CollectionSlot",l=pt.forwardRef((u,b)=>{const{scope:f,children:_}=u,g=i(d,f),v=$i(b,g.collectionRef);return a.jsx(xu,{ref:v,children:_})});l.displayName=d;const o=e+"CollectionItemSlot",p="data-radix-collection-item",y=pt.forwardRef((u,b)=>{const{scope:f,children:_,...g}=u,v=pt.useRef(null),w=$i(b,v),S=i(o,f);return pt.useEffect(()=>(S.itemMap.set(v,{ref:v,...g}),()=>void S.itemMap.delete(v))),a.jsx(xu,{[p]:"",ref:w,children:_})});y.displayName=o;function m(u){const b=i(e+"CollectionConsumer",u);return pt.useCallback(()=>{const _=b.collectionRef.current;if(!_)return[];const g=Array.from(_.querySelectorAll(`[${p}]`));return Array.from(b.itemMap.values()).sort((S,E)=>g.indexOf(S.ref.current)-g.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:l,ItemSlot:y},m,n]}var yF=A.createContext(void 0);function CP(e){const t=A.useContext(yF);return e||t||"ltr"}function TP(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function bF(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function wF(e,t=globalThis==null?void 0:globalThis.document){const r=bF(e);A.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var _F="DismissableLayer",gb="dismissableLayer.update",xF="dismissableLayer.pointerDownOutside",SF="dismissableLayer.focusOutside",_2,PP=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),NP=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:d,...l}=e,o=A.useContext(PP),[p,y]=A.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=A.useState({}),b=$i(t,C=>y(C)),f=Array.from(o.layers),[_]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(_),v=p?f.indexOf(p):-1,w=o.layersWithOutsidePointerEventsDisabled.size>0,S=v>=g,E=kF(C=>{const k=C.target,T=[...o.branches].some(h=>h.contains(k));!S||T||(s==null||s(C),c==null||c(C),C.defaultPrevented||d==null||d())},m),O=CF(C=>{const k=C.target;[...o.branches].some(h=>h.contains(k))||(i==null||i(C),c==null||c(C),C.defaultPrevented||d==null||d())},m);return wF(C=>{v===o.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&d&&(C.preventDefault(),d()))},m),A.useEffect(()=>{if(p)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(_2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(p)),o.layers.add(p),x2(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=_2)}},[p,m,r,o]),A.useEffect(()=>()=>{p&&(o.layers.delete(p),o.layersWithOutsidePointerEventsDisabled.delete(p),x2())},[p,o]),A.useEffect(()=>{const C=()=>u({});return document.addEventListener(gb,C),()=>document.removeEventListener(gb,C)},[]),a.jsx(Ri.div,{...l,ref:b,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:ln(e.onFocusCapture,O.onFocusCapture),onBlurCapture:ln(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ln(e.onPointerDownCapture,E.onPointerDownCapture)})});NP.displayName=_F;var EF="DismissableLayerBranch",RF=A.forwardRef((e,t)=>{const r=A.useContext(PP),n=A.useRef(null),s=$i(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(Ri.div,{...e,ref:s})});RF.displayName=EF;function kF(e,t=globalThis==null?void 0:globalThis.document){const r=TP(e),n=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=d=>{if(d.target&&!n.current){let l=function(){AP(xF,r,o,{discrete:!0})};const o={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function CF(e,t=globalThis==null?void 0:globalThis.document){const r=TP(e),n=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!n.current&&AP(SF,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function x2(){const e=new CustomEvent(gb);document.dispatchEvent(e)}function AP(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?RP(s,i):s.dispatchEvent(i)}var y0=0;function TF(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??S2()),document.body.insertAdjacentElement("beforeend",e[1]??S2()),y0++,()=>{y0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),y0--}},[])}function S2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}function E2(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var b0="focusScope.autoFocusOnMount",w0="focusScope.autoFocusOnUnmount",R2={bubbles:!1,cancelable:!0},PF="FocusScope",OP=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=e,[d,l]=A.useState(null),o=E2(s),p=E2(i),y=A.useRef(null),m=$i(t,f=>l(f)),u=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let f=function(w){if(u.paused||!d)return;const S=w.target;d.contains(S)?y.current=S:yc(y.current,{select:!0})},_=function(w){if(u.paused||!d)return;const S=w.relatedTarget;S!==null&&(d.contains(S)||yc(y.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const E of w)E.removedNodes.length>0&&yc(d)};document.addEventListener("focusin",f),document.addEventListener("focusout",_);const v=new MutationObserver(g);return d&&v.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",_),v.disconnect()}}},[n,d,u.paused]),A.useEffect(()=>{if(d){C2.add(u);const f=document.activeElement;if(!d.contains(f)){const g=new CustomEvent(b0,R2);d.addEventListener(b0,o),d.dispatchEvent(g),g.defaultPrevented||(NF(IF(jP(d)),{select:!0}),document.activeElement===f&&yc(d))}return()=>{d.removeEventListener(b0,o),setTimeout(()=>{const g=new CustomEvent(w0,R2);d.addEventListener(w0,p),d.dispatchEvent(g),g.defaultPrevented||yc(f??document.body,{select:!0}),d.removeEventListener(w0,p),C2.remove(u)},0)}}},[d,o,p,u]);const b=A.useCallback(f=>{if(!r&&!n||u.paused)return;const _=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(_&&g){const v=f.currentTarget,[w,S]=AF(v);w&&S?!f.shiftKey&&g===S?(f.preventDefault(),r&&yc(w,{select:!0})):f.shiftKey&&g===w&&(f.preventDefault(),r&&yc(S,{select:!0})):g===v&&f.preventDefault()}},[r,n,u.paused]);return a.jsx(Ri.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});OP.displayName=PF;function NF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(yc(n,{select:t}),document.activeElement!==r)return}function AF(e){const t=jP(e),r=k2(t,e),n=k2(t.reverse(),e);return[r,n]}function jP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function k2(e,t){for(const r of e)if(!OF(r,{upTo:t}))return r}function OF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function jF(e){return e instanceof HTMLInputElement&&"select"in e}function yc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&jF(e)&&t&&e.select()}}var C2=DF();function DF(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=T2(e,t),e.unshift(t)},remove(t){var r;e=T2(e,t),(r=e[0])==null||r.resume()}}}function T2(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function IF(e){return e.filter(t=>t.tagName!=="A")}var MF=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},LF=Kc.useId||(()=>{}),FF=0;function vb(e){const[t,r]=A.useState(LF());return MF(()=>{r(n=>n??String(FF++))},[e]),t?`radix-${t}`:""}const BF=["top","right","bottom","left"],Hc=Math.min,Yi=Math.max,mg=Math.round,Kf=Math.floor,so=e=>({x:e,y:e}),UF={left:"right",right:"left",bottom:"top",top:"bottom"},VF={start:"end",end:"start"};function yb(e,t,r){return Yi(e,Hc(t,r))}function Io(e,t){return typeof e=="function"?e(t):e}function Mo(e){return e.split("-")[0]}function Fu(e){return e.split("-")[1]}function D_(e){return e==="x"?"y":"x"}function I_(e){return e==="y"?"height":"width"}function Ja(e){return["top","bottom"].includes(Mo(e))?"y":"x"}function M_(e){return D_(Ja(e))}function $F(e,t,r){r===void 0&&(r=!1);const n=Fu(e),s=M_(e),i=I_(s);let c=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(c=gg(c)),[c,gg(c)]}function WF(e){const t=gg(e);return[bb(e),t,bb(t)]}function bb(e){return e.replace(/start|end/g,t=>VF[t])}function zF(e,t,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?i:c;default:return[]}}function HF(e,t,r,n){const s=Fu(e);let i=zF(Mo(e),r==="start",n);return s&&(i=i.map(c=>c+"-"+s),t&&(i=i.concat(i.map(bb)))),i}function gg(e){return e.replace(/left|right|bottom|top/g,t=>UF[t])}function qF(e){return{top:0,right:0,bottom:0,left:0,...e}}function DP(e){return typeof e!="number"?qF(e):{top:e,right:e,bottom:e,left:e}}function vg(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function P2(e,t,r){let{reference:n,floating:s}=e;const i=Ja(t),c=M_(t),d=I_(c),l=Mo(t),o=i==="y",p=n.x+n.width/2-s.width/2,y=n.y+n.height/2-s.height/2,m=n[d]/2-s[d]/2;let u;switch(l){case"top":u={x:p,y:n.y-s.height};break;case"bottom":u={x:p,y:n.y+n.height};break;case"right":u={x:n.x+n.width,y};break;case"left":u={x:n.x-s.width,y};break;default:u={x:n.x,y:n.y}}switch(Fu(t)){case"start":u[c]-=m*(r&&o?-1:1);break;case"end":u[c]+=m*(r&&o?-1:1);break}return u}const KF=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:c}=r,d=i.filter(Boolean),l=await(c.isRTL==null?void 0:c.isRTL(t));let o=await c.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y}=P2(o,n,l),m=n,u={},b=0;for(let f=0;f<d.length;f++){const{name:_,fn:g}=d[f],{x:v,y:w,data:S,reset:E}=await g({x:p,y,initialPlacement:n,placement:m,strategy:s,middlewareData:u,rects:o,platform:c,elements:{reference:e,floating:t}});p=v??p,y=w??y,u={...u,[_]:{...u[_],...S}},E&&b<=50&&(b++,typeof E=="object"&&(E.placement&&(m=E.placement),E.rects&&(o=E.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:s}):E.rects),{x:p,y}=P2(o,m,l)),f=-1)}return{x:p,y,placement:m,strategy:s,middlewareData:u}};async function _h(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:c,elements:d,strategy:l}=e,{boundary:o="clippingAncestors",rootBoundary:p="viewport",elementContext:y="floating",altBoundary:m=!1,padding:u=0}=Io(t,e),b=DP(u),_=d[m?y==="floating"?"reference":"floating":y],g=vg(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(_)))==null||r?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(d.floating)),boundary:o,rootBoundary:p,strategy:l})),v=y==="floating"?{x:n,y:s,width:c.floating.width,height:c.floating.height}:c.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},E=vg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:v,offsetParent:w,strategy:l}):v);return{top:(g.top-E.top+b.top)/S.y,bottom:(E.bottom-g.bottom+b.bottom)/S.y,left:(g.left-E.left+b.left)/S.x,right:(E.right-g.right+b.right)/S.x}}const GF=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:c,elements:d,middlewareData:l}=t,{element:o,padding:p=0}=Io(e,t)||{};if(o==null)return{};const y=DP(p),m={x:r,y:n},u=M_(s),b=I_(u),f=await c.getDimensions(o),_=u==="y",g=_?"top":"left",v=_?"bottom":"right",w=_?"clientHeight":"clientWidth",S=i.reference[b]+i.reference[u]-m[u]-i.floating[b],E=m[u]-i.reference[u],O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(o));let C=O?O[w]:0;(!C||!await(c.isElement==null?void 0:c.isElement(O)))&&(C=d.floating[w]||i.floating[b]);const k=S/2-E/2,T=C/2-f[b]/2-1,h=Hc(y[g],T),x=Hc(y[v],T),R=h,P=C-f[b]-x,N=C/2-f[b]/2+k,j=yb(R,N,P),D=!l.arrow&&Fu(s)!=null&&N!==j&&i.reference[b]/2-(N<R?h:x)-f[b]/2<0,L=D?N<R?N-R:N-P:0;return{[u]:m[u]+L,data:{[u]:j,centerOffset:N-j-L,...D&&{alignmentOffset:L}},reset:D}}}),YF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:c,initialPlacement:d,platform:l,elements:o}=t,{mainAxis:p=!0,crossAxis:y=!0,fallbackPlacements:m,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:f=!0,..._}=Io(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const g=Mo(s),v=Ja(d),w=Mo(d)===d,S=await(l.isRTL==null?void 0:l.isRTL(o.floating)),E=m||(w||!f?[gg(d)]:WF(d)),O=b!=="none";!m&&O&&E.push(...HF(d,f,b,S));const C=[d,...E],k=await _h(t,_),T=[];let h=((n=i.flip)==null?void 0:n.overflows)||[];if(p&&T.push(k[g]),y){const N=$F(s,c,S);T.push(k[N[0]],k[N[1]])}if(h=[...h,{placement:s,overflows:T}],!T.every(N=>N<=0)){var x,R;const N=(((x=i.flip)==null?void 0:x.index)||0)+1,j=C[N];if(j&&(!(y==="alignment"?v!==Ja(j):!1)||h.every(M=>M.overflows[0]>0&&Ja(M.placement)===v)))return{data:{index:N,overflows:h},reset:{placement:j}};let D=(R=h.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:R.placement;if(!D)switch(u){case"bestFit":{var P;const L=(P=h.filter(M=>{if(O){const I=Ja(M.placement);return I===v||I==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(I=>I>0).reduce((I,G)=>I+G,0)]).sort((M,I)=>M[1]-I[1])[0])==null?void 0:P[0];L&&(D=L);break}case"initialPlacement":D=d;break}if(s!==D)return{reset:{placement:D}}}return{}}}};function N2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function A2(e){return BF.some(t=>e[t]>=0)}const JF=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Io(e,t);switch(n){case"referenceHidden":{const i=await _h(t,{...s,elementContext:"reference"}),c=N2(i,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:A2(c)}}}case"escaped":{const i=await _h(t,{...s,altBoundary:!0}),c=N2(i,r.floating);return{data:{escapedOffsets:c,escaped:A2(c)}}}default:return{}}}}};async function QF(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),c=Mo(r),d=Fu(r),l=Ja(r)==="y",o=["left","top"].includes(c)?-1:1,p=i&&l?-1:1,y=Io(t,e);let{mainAxis:m,crossAxis:u,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return d&&typeof b=="number"&&(u=d==="end"?b*-1:b),l?{x:u*p,y:m*o}:{x:m*o,y:u*p}}const XF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:c,middlewareData:d}=t,l=await QF(t,e);return c===((r=d.offset)==null?void 0:r.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:c}}}}},ZF=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:d={fn:_=>{let{x:g,y:v}=_;return{x:g,y:v}}},...l}=Io(e,t),o={x:r,y:n},p=await _h(t,l),y=Ja(Mo(s)),m=D_(y);let u=o[m],b=o[y];if(i){const _=m==="y"?"top":"left",g=m==="y"?"bottom":"right",v=u+p[_],w=u-p[g];u=yb(v,u,w)}if(c){const _=y==="y"?"top":"left",g=y==="y"?"bottom":"right",v=b+p[_],w=b-p[g];b=yb(v,b,w)}const f=d.fn({...t,[m]:u,[y]:b});return{...f,data:{x:f.x-r,y:f.y-n,enabled:{[m]:i,[y]:c}}}}}},eB=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:c}=t,{offset:d=0,mainAxis:l=!0,crossAxis:o=!0}=Io(e,t),p={x:r,y:n},y=Ja(s),m=D_(y);let u=p[m],b=p[y];const f=Io(d,t),_=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const w=m==="y"?"height":"width",S=i.reference[m]-i.floating[w]+_.mainAxis,E=i.reference[m]+i.reference[w]-_.mainAxis;u<S?u=S:u>E&&(u=E)}if(o){var g,v;const w=m==="y"?"width":"height",S=["top","left"].includes(Mo(s)),E=i.reference[y]-i.floating[w]+(S&&((g=c.offset)==null?void 0:g[y])||0)+(S?0:_.crossAxis),O=i.reference[y]+i.reference[w]+(S?0:((v=c.offset)==null?void 0:v[y])||0)-(S?_.crossAxis:0);b<E?b=E:b>O&&(b=O)}return{[m]:u,[y]:b}}}},tB=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:c,elements:d}=t,{apply:l=()=>{},...o}=Io(e,t),p=await _h(t,o),y=Mo(s),m=Fu(s),u=Ja(s)==="y",{width:b,height:f}=i.floating;let _,g;y==="top"||y==="bottom"?(_=y,g=m===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(g=y,_=m==="end"?"top":"bottom");const v=f-p.top-p.bottom,w=b-p.left-p.right,S=Hc(f-p[_],v),E=Hc(b-p[g],w),O=!t.middlewareData.shift;let C=S,k=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=v),O&&!m){const h=Yi(p.left,0),x=Yi(p.right,0),R=Yi(p.top,0),P=Yi(p.bottom,0);u?k=b-2*(h!==0||x!==0?h+x:Yi(p.left,p.right)):C=f-2*(R!==0||P!==0?R+P:Yi(p.top,p.bottom))}await l({...t,availableWidth:k,availableHeight:C});const T=await c.getDimensions(d.floating);return b!==T.width||f!==T.height?{reset:{rects:!0}}:{}}}};function ov(){return typeof window<"u"}function Bu(e){return IP(e)?(e.nodeName||"").toLowerCase():"#document"}function Xi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function lo(e){var t;return(t=(IP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function IP(e){return ov()?e instanceof Node||e instanceof Xi(e).Node:!1}function La(e){return ov()?e instanceof Element||e instanceof Xi(e).Element:!1}function ao(e){return ov()?e instanceof HTMLElement||e instanceof Xi(e).HTMLElement:!1}function O2(e){return!ov()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xi(e).ShadowRoot}function zh(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Fa(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function rB(e){return["table","td","th"].includes(Bu(e))}function cv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function L_(e){const t=F_(),r=La(e)?Fa(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function nB(e){let t=qc(e);for(;ao(t)&&!ku(t);){if(L_(t))return t;if(cv(t))return null;t=qc(t)}return null}function F_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ku(e){return["html","body","#document"].includes(Bu(e))}function Fa(e){return Xi(e).getComputedStyle(e)}function lv(e){return La(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qc(e){if(Bu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||O2(e)&&e.host||lo(e);return O2(t)?t.host:t}function MP(e){const t=qc(e);return ku(t)?e.ownerDocument?e.ownerDocument.body:e.body:ao(t)&&zh(t)?t:MP(t)}function xh(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=MP(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),c=Xi(s);if(i){const d=wb(c);return t.concat(c,c.visualViewport||[],zh(s)?s:[],d&&r?xh(d):[])}return t.concat(s,xh(s,[],r))}function wb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function LP(e){const t=Fa(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=ao(e),i=s?e.offsetWidth:r,c=s?e.offsetHeight:n,d=mg(r)!==i||mg(n)!==c;return d&&(r=i,n=c),{width:r,height:n,$:d}}function B_(e){return La(e)?e:e.contextElement}function du(e){const t=B_(e);if(!ao(t))return so(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=LP(t);let c=(i?mg(r.width):r.width)/n,d=(i?mg(r.height):r.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const sB=so(0);function FP(e){const t=Xi(e);return!F_()||!t.visualViewport?sB:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function iB(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Xi(e)?!1:t}function rd(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=B_(e);let c=so(1);t&&(n?La(n)&&(c=du(n)):c=du(e));const d=iB(i,r,n)?FP(i):so(0);let l=(s.left+d.x)/c.x,o=(s.top+d.y)/c.y,p=s.width/c.x,y=s.height/c.y;if(i){const m=Xi(i),u=n&&La(n)?Xi(n):n;let b=m,f=wb(b);for(;f&&n&&u!==b;){const _=du(f),g=f.getBoundingClientRect(),v=Fa(f),w=g.left+(f.clientLeft+parseFloat(v.paddingLeft))*_.x,S=g.top+(f.clientTop+parseFloat(v.paddingTop))*_.y;l*=_.x,o*=_.y,p*=_.x,y*=_.y,l+=w,o+=S,b=Xi(f),f=wb(b)}}return vg({width:p,height:y,x:l,y:o})}function U_(e,t){const r=lv(e).scrollLeft;return t?t.left+r:rd(lo(e)).left+r}function BP(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:U_(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function aB(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",c=lo(n),d=t?cv(t.floating):!1;if(n===c||d&&i)return r;let l={scrollLeft:0,scrollTop:0},o=so(1);const p=so(0),y=ao(n);if((y||!y&&!i)&&((Bu(n)!=="body"||zh(c))&&(l=lv(n)),ao(n))){const u=rd(n);o=du(n),p.x=u.x+n.clientLeft,p.y=u.y+n.clientTop}const m=c&&!y&&!i?BP(c,l,!0):so(0);return{width:r.width*o.x,height:r.height*o.y,x:r.x*o.x-l.scrollLeft*o.x+p.x+m.x,y:r.y*o.y-l.scrollTop*o.y+p.y+m.y}}function oB(e){return Array.from(e.getClientRects())}function cB(e){const t=lo(e),r=lv(e),n=e.ownerDocument.body,s=Yi(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Yi(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let c=-r.scrollLeft+U_(e);const d=-r.scrollTop;return Fa(n).direction==="rtl"&&(c+=Yi(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:c,y:d}}function lB(e,t){const r=Xi(e),n=lo(e),s=r.visualViewport;let i=n.clientWidth,c=n.clientHeight,d=0,l=0;if(s){i=s.width,c=s.height;const o=F_();(!o||o&&t==="fixed")&&(d=s.offsetLeft,l=s.offsetTop)}return{width:i,height:c,x:d,y:l}}function dB(e,t){const r=rd(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=ao(e)?du(e):so(1),c=e.clientWidth*i.x,d=e.clientHeight*i.y,l=s*i.x,o=n*i.y;return{width:c,height:d,x:l,y:o}}function j2(e,t,r){let n;if(t==="viewport")n=lB(e,r);else if(t==="document")n=cB(lo(e));else if(La(t))n=dB(t,r);else{const s=FP(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return vg(n)}function UP(e,t){const r=qc(e);return r===t||!La(r)||ku(r)?!1:Fa(r).position==="fixed"||UP(r,t)}function uB(e,t){const r=t.get(e);if(r)return r;let n=xh(e,[],!1).filter(d=>La(d)&&Bu(d)!=="body"),s=null;const i=Fa(e).position==="fixed";let c=i?qc(e):e;for(;La(c)&&!ku(c);){const d=Fa(c),l=L_(c);!l&&d.position==="fixed"&&(s=null),(i?!l&&!s:!l&&d.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||zh(c)&&!l&&UP(e,c))?n=n.filter(p=>p!==c):s=d,c=qc(c)}return t.set(e,n),n}function pB(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const c=[...r==="clippingAncestors"?cv(t)?[]:uB(t,this._c):[].concat(r),n],d=c[0],l=c.reduce((o,p)=>{const y=j2(t,p,s);return o.top=Yi(y.top,o.top),o.right=Hc(y.right,o.right),o.bottom=Hc(y.bottom,o.bottom),o.left=Yi(y.left,o.left),o},j2(t,d,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function hB(e){const{width:t,height:r}=LP(e);return{width:t,height:r}}function fB(e,t,r){const n=ao(t),s=lo(t),i=r==="fixed",c=rd(e,!0,i,t);let d={scrollLeft:0,scrollTop:0};const l=so(0);function o(){l.x=U_(s)}if(n||!n&&!i)if((Bu(t)!=="body"||zh(s))&&(d=lv(t)),n){const u=rd(t,!0,i,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else s&&o();i&&!n&&s&&o();const p=s&&!n&&!i?BP(s,d):so(0),y=c.left+d.scrollLeft-l.x-p.x,m=c.top+d.scrollTop-l.y-p.y;return{x:y,y:m,width:c.width,height:c.height}}function _0(e){return Fa(e).position==="static"}function D2(e,t){if(!ao(e)||Fa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return lo(e)===r&&(r=r.ownerDocument.body),r}function VP(e,t){const r=Xi(e);if(cv(e))return r;if(!ao(e)){let s=qc(e);for(;s&&!ku(s);){if(La(s)&&!_0(s))return s;s=qc(s)}return r}let n=D2(e,t);for(;n&&rB(n)&&_0(n);)n=D2(n,t);return n&&ku(n)&&_0(n)&&!L_(n)?r:n||nB(e)||r}const mB=async function(e){const t=this.getOffsetParent||VP,r=this.getDimensions,n=await r(e.floating);return{reference:fB(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function gB(e){return Fa(e).direction==="rtl"}const vB={convertOffsetParentRelativeRectToViewportRelativeRect:aB,getDocumentElement:lo,getClippingRect:pB,getOffsetParent:VP,getElementRects:mB,getClientRects:oB,getDimensions:hB,getScale:du,isElement:La,isRTL:gB};function $P(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yB(e,t){let r=null,n;const s=lo(e);function i(){var d;clearTimeout(n),(d=r)==null||d.disconnect(),r=null}function c(d,l){d===void 0&&(d=!1),l===void 0&&(l=1),i();const o=e.getBoundingClientRect(),{left:p,top:y,width:m,height:u}=o;if(d||t(),!m||!u)return;const b=Kf(y),f=Kf(s.clientWidth-(p+m)),_=Kf(s.clientHeight-(y+u)),g=Kf(p),w={rootMargin:-b+"px "+-f+"px "+-_+"px "+-g+"px",threshold:Yi(0,Hc(1,l))||1};let S=!0;function E(O){const C=O[0].intersectionRatio;if(C!==l){if(!S)return c();C?c(!1,C):n=setTimeout(()=>{c(!1,1e-7)},1e3)}C===1&&!$P(o,e.getBoundingClientRect())&&c(),S=!1}try{r=new IntersectionObserver(E,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(E,w)}r.observe(e)}return c(!0),i}function WP(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,o=B_(e),p=s||i?[...o?xh(o):[],...xh(t)]:[];p.forEach(g=>{s&&g.addEventListener("scroll",r,{passive:!0}),i&&g.addEventListener("resize",r)});const y=o&&d?yB(o,r):null;let m=-1,u=null;c&&(u=new ResizeObserver(g=>{let[v]=g;v&&v.target===o&&u&&(u.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=u)==null||w.observe(t)})),r()}),o&&!l&&u.observe(o),u.observe(t));let b,f=l?rd(e):null;l&&_();function _(){const g=rd(e);f&&!$P(f,g)&&r(),f=g,b=requestAnimationFrame(_)}return r(),()=>{var g;p.forEach(v=>{s&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),y==null||y(),(g=u)==null||g.disconnect(),u=null,l&&cancelAnimationFrame(b)}}const bB=XF,wB=ZF,_B=YF,xB=tB,SB=JF,I2=GF,EB=eB,RB=(e,t,r)=>{const n=new Map,s={platform:vB,...r},i={...s.platform,_c:n};return KF(e,t,{...s,platform:i})};var kB=typeof document<"u",CB=function(){},Em=kB?A.useLayoutEffect:CB;function yg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!yg(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!yg(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function zP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function M2(e,t){const r=zP(e);return Math.round(t*r)/r}function x0(e){const t=A.useRef(e);return Em(()=>{t.current=e}),t}function HP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:c}={},transform:d=!0,whileElementsMounted:l,open:o}=e,[p,y]=A.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,u]=A.useState(n);yg(m,n)||u(n);const[b,f]=A.useState(null),[_,g]=A.useState(null),v=A.useCallback(M=>{M!==O.current&&(O.current=M,f(M))},[]),w=A.useCallback(M=>{M!==C.current&&(C.current=M,g(M))},[]),S=i||b,E=c||_,O=A.useRef(null),C=A.useRef(null),k=A.useRef(p),T=l!=null,h=x0(l),x=x0(s),R=x0(o),P=A.useCallback(()=>{if(!O.current||!C.current)return;const M={placement:t,strategy:r,middleware:m};x.current&&(M.platform=x.current),RB(O.current,C.current,M).then(I=>{const G={...I,isPositioned:R.current!==!1};N.current&&!yg(k.current,G)&&(k.current=G,Qc.flushSync(()=>{y(G)}))})},[m,t,r,x,R]);Em(()=>{o===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,y(M=>({...M,isPositioned:!1})))},[o]);const N=A.useRef(!1);Em(()=>(N.current=!0,()=>{N.current=!1}),[]),Em(()=>{if(S&&(O.current=S),E&&(C.current=E),S&&E){if(h.current)return h.current(S,E,P);P()}},[S,E,P,h,T]);const j=A.useMemo(()=>({reference:O,floating:C,setReference:v,setFloating:w}),[v,w]),D=A.useMemo(()=>({reference:S,floating:E}),[S,E]),L=A.useMemo(()=>{const M={position:r,left:0,top:0};if(!D.floating)return M;const I=M2(D.floating,p.x),G=M2(D.floating,p.y);return d?{...M,transform:"translate("+I+"px, "+G+"px)",...zP(D.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:I,top:G}},[r,d,D.floating,p.x,p.y]);return A.useMemo(()=>({...p,update:P,refs:j,elements:D,floatingStyles:L}),[p,P,j,D,L])}const TB=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?I2({element:n.current,padding:s}).fn(r):{}:n?I2({element:n,padding:s}).fn(r):{}}}},qP=(e,t)=>({...bB(e),options:[e,t]}),KP=(e,t)=>({...wB(e),options:[e,t]}),GP=(e,t)=>({...EB(e),options:[e,t]}),YP=(e,t)=>({..._B(e),options:[e,t]}),JP=(e,t)=>({...xB(e),options:[e,t]}),QP=(e,t)=>({...SB(e),options:[e,t]}),XP=(e,t)=>({...TB(e),options:[e,t]});var PB="Arrow",ZP=A.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(Ri.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});ZP.displayName=PB;var NB=ZP;function AB(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var L2=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},OB=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function jB(e){const[t,r]=A.useState(void 0);return OB(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let c,d;if("borderBoxSize"in i){const l=i.borderBoxSize,o=Array.isArray(l)?l[0]:l;c=o.inlineSize,d=o.blockSize}else c=e.offsetWidth,d=e.offsetHeight;r({width:c,height:d})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var V_="Popper",[eN,tN]=Wh(V_),[DB,rN]=eN(V_),nN=e=>{const{__scopePopper:t,children:r}=e,[n,s]=A.useState(null);return a.jsx(DB,{scope:t,anchor:n,onAnchorChange:s,children:r})};nN.displayName=V_;var sN="PopperAnchor",iN=A.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=rN(sN,r),c=A.useRef(null),d=$i(t,c);return A.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||c.current)}),n?null:a.jsx(Ri.div,{...s,ref:d})});iN.displayName=sN;var $_="PopperContent",[IB,MB]=eN($_),aN=A.forwardRef((e,t)=>{var ie,$e,je,se,ue,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:l=!0,collisionBoundary:o=[],collisionPadding:p=0,sticky:y="partial",hideWhenDetached:m=!1,updatePositionStrategy:u="optimized",onPlaced:b,...f}=e,_=rN($_,r),[g,v]=A.useState(null),w=$i(t,He=>v(He)),[S,E]=A.useState(null),O=jB(S),C=(O==null?void 0:O.width)??0,k=(O==null?void 0:O.height)??0,T=n+(i!=="center"?"-"+i:""),h=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},x=Array.isArray(o)?o:[o],R=x.length>0,P={padding:h,boundary:x.filter(FB),altBoundary:R},{refs:N,floatingStyles:j,placement:D,isPositioned:L,middlewareData:M}=HP({strategy:"fixed",placement:T,whileElementsMounted:(...He)=>WP(...He,{animationFrame:u==="always"}),elements:{reference:_.anchor},middleware:[qP({mainAxis:s+k,alignmentAxis:c}),l&&KP({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?GP():void 0,...P}),l&&YP({...P}),JP({...P,apply:({elements:He,rects:$t,availableWidth:nr,availableHeight:Ct})=>{const{width:cr,height:br}=$t.reference,jt=He.floating.style;jt.setProperty("--radix-popper-available-width",`${nr}px`),jt.setProperty("--radix-popper-available-height",`${Ct}px`),jt.setProperty("--radix-popper-anchor-width",`${cr}px`),jt.setProperty("--radix-popper-anchor-height",`${br}px`)}}),S&&XP({element:S,padding:d}),BB({arrowWidth:C,arrowHeight:k}),m&&QP({strategy:"referenceHidden",...P})]}),[I,G]=lN(D),de=AB(b);L2(()=>{L&&(de==null||de())},[L,de]);const ee=(ie=M.arrow)==null?void 0:ie.x,Q=($e=M.arrow)==null?void 0:$e.y,ae=((je=M.arrow)==null?void 0:je.centerOffset)!==0,[_e,Se]=A.useState();return L2(()=>{g&&Se(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:L?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(se=M.transformOrigin)==null?void 0:se.x,(ue=M.transformOrigin)==null?void 0:ue.y].join(" "),...((Ce=M.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(IB,{scope:r,placedSide:I,onArrowChange:E,arrowX:ee,arrowY:Q,shouldHideArrow:ae,children:a.jsx(Ri.div,{"data-side":I,"data-align":G,...f,ref:w,style:{...f.style,animation:L?void 0:"none"}})})})});aN.displayName=$_;var oN="PopperArrow",LB={top:"bottom",right:"left",bottom:"top",left:"right"},cN=A.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=MB(oN,n),c=LB[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(NB,{...s,ref:r,style:{...s.style,display:"block"}})})});cN.displayName=oN;function FB(e){return e!==null}var BB=e=>({name:"transformOrigin",options:e,fn(t){var _,g,v;const{placement:r,rects:n,middlewareData:s}=t,c=((_=s.arrow)==null?void 0:_.centerOffset)!==0,d=c?0:e.arrowWidth,l=c?0:e.arrowHeight,[o,p]=lN(r),y={start:"0%",center:"50%",end:"100%"}[p],m=(((g=s.arrow)==null?void 0:g.x)??0)+d/2,u=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let b="",f="";return o==="bottom"?(b=c?y:`${m}px`,f=`${-l}px`):o==="top"?(b=c?y:`${m}px`,f=`${n.floating.height+l}px`):o==="right"?(b=`${-l}px`,f=c?y:`${u}px`):o==="left"&&(b=`${n.floating.width+l}px`,f=c?y:`${u}px`),{data:{x:b,y:f}}}});function lN(e){const[t,r="center"]=e.split("-");return[t,r]}var UB=nN,VB=iN,$B=aN,WB=cN,zB=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},HB="Portal",dN=A.forwardRef((e,t)=>{var d;const{container:r,...n}=e,[s,i]=A.useState(!1);zB(()=>i(!0),[]);const c=r||s&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?zg.createPortal(a.jsx(Ri.div,{...n,ref:t}),c):null});dN.displayName=HB;var F2=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function qB(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var Hh=e=>{const{present:t,children:r}=e,n=KB(t),s=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=$i(n.ref,GB(s));return typeof r=="function"||n.isPresent?A.cloneElement(s,{ref:i}):null};Hh.displayName="Presence";function KB(e){const[t,r]=A.useState(),n=A.useRef({}),s=A.useRef(e),i=A.useRef("none"),c=e?"mounted":"unmounted",[d,l]=qB(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const o=Gf(n.current);i.current=d==="mounted"?o:"none"},[d]),F2(()=>{const o=n.current,p=s.current;if(p!==e){const m=i.current,u=Gf(o);e?l("MOUNT"):u==="none"||(o==null?void 0:o.display)==="none"?l("UNMOUNT"):l(p&&m!==u?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),F2(()=>{if(t){let o;const p=t.ownerDocument.defaultView??window,y=u=>{const f=Gf(n.current).includes(u.animationName);if(u.target===t&&f&&(l("ANIMATION_END"),!s.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",o=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=u=>{u.target===t&&(i.current=Gf(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{p.clearTimeout(o),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:A.useCallback(o=>{o&&(n.current=getComputedStyle(o)),r(o)},[])}}function Gf(e){return(e==null?void 0:e.animationName)||"none"}function GB(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function YB(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var S0="rovingFocusGroup.onEntryFocus",JB={bubbles:!1,cancelable:!0},dv="RovingFocusGroup",[_b,uN,QB]=kP(dv),[XB,pN]=Wh(dv,[QB]),[ZB,eU]=XB(dv),hN=A.forwardRef((e,t)=>a.jsx(_b.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(_b.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(tU,{...e,ref:t})})}));hN.displayName=dv;var tU=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:l,onEntryFocus:o,preventScrollOnEntryFocus:p=!1,...y}=e,m=A.useRef(null),u=$i(t,m),b=CP(i),[f=null,_]=EP({prop:c,defaultProp:d,onChange:l}),[g,v]=A.useState(!1),w=YB(o),S=uN(r),E=A.useRef(!1),[O,C]=A.useState(0);return A.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(S0,w),()=>k.removeEventListener(S0,w)},[w]),a.jsx(ZB,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:f,onItemFocus:A.useCallback(k=>_(k),[_]),onItemShiftTab:A.useCallback(()=>v(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:A.useCallback(()=>C(k=>k-1),[]),children:a.jsx(Ri.div,{tabIndex:g||O===0?-1:0,"data-orientation":n,...y,ref:u,style:{outline:"none",...e.style},onMouseDown:ln(e.onMouseDown,()=>{E.current=!0}),onFocus:ln(e.onFocus,k=>{const T=!E.current;if(k.target===k.currentTarget&&T&&!g){const h=new CustomEvent(S0,JB);if(k.currentTarget.dispatchEvent(h),!h.defaultPrevented){const x=S().filter(D=>D.focusable),R=x.find(D=>D.active),P=x.find(D=>D.id===f),j=[R,P,...x].filter(Boolean).map(D=>D.ref.current);gN(j,p)}}E.current=!1}),onBlur:ln(e.onBlur,()=>v(!1))})})}),fN="RovingFocusGroupItem",mN=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...c}=e,d=vb(),l=i||d,o=eU(fN,r),p=o.currentTabStopId===l,y=uN(r),{onFocusableItemAdd:m,onFocusableItemRemove:u}=o;return A.useEffect(()=>{if(n)return m(),()=>u()},[n,m,u]),a.jsx(_b.ItemSlot,{scope:r,id:l,focusable:n,active:s,children:a.jsx(Ri.span,{tabIndex:p?0:-1,"data-orientation":o.orientation,...c,ref:t,onMouseDown:ln(e.onMouseDown,b=>{n?o.onItemFocus(l):b.preventDefault()}),onFocus:ln(e.onFocus,()=>o.onItemFocus(l)),onKeyDown:ln(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){o.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const f=sU(b,o.orientation,o.dir);if(f!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let g=y().filter(v=>v.focusable).map(v=>v.ref.current);if(f==="last")g.reverse();else if(f==="prev"||f==="next"){f==="prev"&&g.reverse();const v=g.indexOf(b.currentTarget);g=o.loop?iU(g,v+1):g.slice(v+1)}setTimeout(()=>gN(g))}})})})});mN.displayName=fN;var rU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nU(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function sU(e,t,r){const n=nU(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return rU[n]}function gN(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function iU(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var aU=hN,oU=mN;function vN(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var cU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Md=new WeakMap,Yf=new WeakMap,Jf={},E0=0,yN=function(e){return e&&(e.host||yN(e.parentNode))},lU=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=yN(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},dU=function(e,t,r,n){var s=lU(t,Array.isArray(e)?e:[e]);Jf[r]||(Jf[r]=new WeakMap);var i=Jf[r],c=[],d=new Set,l=new Set(s),o=function(y){!y||d.has(y)||(d.add(y),o(y.parentNode))};s.forEach(o);var p=function(y){!y||l.has(y)||Array.prototype.forEach.call(y.children,function(m){if(d.has(m))p(m);else try{var u=m.getAttribute(n),b=u!==null&&u!=="false",f=(Md.get(m)||0)+1,_=(i.get(m)||0)+1;Md.set(m,f),i.set(m,_),c.push(m),f===1&&b&&Yf.set(m,!0),_===1&&m.setAttribute(r,"true"),b||m.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return p(t),d.clear(),E0++,function(){c.forEach(function(y){var m=Md.get(y)-1,u=i.get(y)-1;Md.set(y,m),i.set(y,u),m||(Yf.has(y)||y.removeAttribute(n),Yf.delete(y)),u||y.removeAttribute(r)}),E0--,E0||(Md=new WeakMap,Md=new WeakMap,Yf=new WeakMap,Jf={})}},W_=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=cU(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),dU(n,s,r,"aria-hidden")):function(){return null}},Ya=function(){return Ya=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ya.apply(this,arguments)};function bN(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function uU(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Rm="right-scroll-bar-position",km="width-before-scroll-bar",pU="with-scroll-bars-hidden",hU="--removed-body-scroll-bar-size";function R0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function fU(e,t){var r=A.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var mU=typeof window<"u"?A.useLayoutEffect:A.useEffect,B2=new WeakMap;function gU(e,t){var r=fU(null,function(n){return e.forEach(function(s){return R0(s,n)})});return mU(function(){var n=B2.get(r);if(n){var s=new Set(n),i=new Set(e),c=r.current;s.forEach(function(d){i.has(d)||R0(d,null)}),i.forEach(function(d){s.has(d)||R0(d,c)})}B2.set(r,e)},[e]),r}function vU(e){return e}function yU(e,t){t===void 0&&(t=vU);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var c=t(i,n);return r.push(c),function(){r=r.filter(function(d){return d!==c})}},assignSyncMedium:function(i){for(n=!0;r.length;){var c=r;r=[],c.forEach(i)}r={push:function(d){return i(d)},filter:function(){return r}}},assignMedium:function(i){n=!0;var c=[];if(r.length){var d=r;r=[],d.forEach(i),c=r}var l=function(){var p=c;c=[],p.forEach(i)},o=function(){return Promise.resolve().then(l)};o(),r={push:function(p){c.push(p),o()},filter:function(p){return c=c.filter(p),r}}}};return s}function bU(e){e===void 0&&(e={});var t=yU(null);return t.options=Ya({async:!0,ssr:!1},e),t}var wN=function(e){var t=e.sideCar,r=bN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return A.createElement(n,Ya({},r))};wN.isSideCarExport=!0;function wU(e,t){return e.useMedium(t),wN}var _N=bU(),k0=function(){},uv=A.forwardRef(function(e,t){var r=A.useRef(null),n=A.useState({onScrollCapture:k0,onWheelCapture:k0,onTouchMoveCapture:k0}),s=n[0],i=n[1],c=e.forwardProps,d=e.children,l=e.className,o=e.removeScrollBar,p=e.enabled,y=e.shards,m=e.sideCar,u=e.noRelative,b=e.noIsolation,f=e.inert,_=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,w=e.gapMode,S=bN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,O=gU([r,t]),C=Ya(Ya({},S),s);return A.createElement(A.Fragment,null,p&&A.createElement(E,{sideCar:_N,removeScrollBar:o,shards:y,noRelative:u,noIsolation:b,inert:f,setCallbacks:i,allowPinchZoom:!!_,lockRef:r,gapMode:w}),c?A.cloneElement(A.Children.only(d),Ya(Ya({},C),{ref:O})):A.createElement(v,Ya({},C,{className:l,ref:O}),d))});uv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};uv.classNames={fullWidth:km,zeroRight:Rm};var _U=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=_U();return t&&e.setAttribute("nonce",t),e}function SU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function EU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var RU=function(){var e=0,t=null;return{add:function(r){e==0&&(t=xU())&&(SU(t,r),EU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kU=function(){var e=RU();return function(t,r){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},xN=function(){var e=kU(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},CU={left:0,top:0,right:0,gap:0},C0=function(e){return parseInt(e||"",10)||0},TU=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[C0(r),C0(n),C0(s)]},PU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return CU;var t=TU(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},NU=xN(),uu="data-scroll-locked",AU=function(e,t,r,n){var s=e.left,i=e.top,c=e.right,d=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(pU,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(d,"px ").concat(n,`;
  }
  body[`).concat(uu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(d,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rm,` {
    right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(km,` {
    margin-right: `).concat(d,"px ").concat(n,`;
  }
  
  .`).concat(Rm," .").concat(Rm,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(km," .").concat(km,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(uu,`] {
    `).concat(hU,": ").concat(d,`px;
  }
`)},U2=function(){var e=parseInt(document.body.getAttribute(uu)||"0",10);return isFinite(e)?e:0},OU=function(){A.useEffect(function(){return document.body.setAttribute(uu,(U2()+1).toString()),function(){var e=U2()-1;e<=0?document.body.removeAttribute(uu):document.body.setAttribute(uu,e.toString())}},[])},jU=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;OU();var i=A.useMemo(function(){return PU(s)},[s]);return A.createElement(NU,{styles:AU(i,!t,s,r?"":"!important")})},xb=!1;if(typeof window<"u")try{var Qf=Object.defineProperty({},"passive",{get:function(){return xb=!0,!0}});window.addEventListener("test",Qf,Qf),window.removeEventListener("test",Qf,Qf)}catch{xb=!1}var Ld=xb?{passive:!1}:!1,DU=function(e){return e.tagName==="TEXTAREA"},SN=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!DU(e)&&r[t]==="visible")},IU=function(e){return SN(e,"overflowY")},MU=function(e){return SN(e,"overflowX")},V2=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=EN(e,n);if(s){var i=RN(e,n),c=i[1],d=i[2];if(c>d)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},LU=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},FU=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},EN=function(e,t){return e==="v"?IU(t):MU(t)},RN=function(e,t){return e==="v"?LU(t):FU(t)},BU=function(e,t){return e==="h"&&t==="rtl"?-1:1},UU=function(e,t,r,n,s){var i=BU(e,window.getComputedStyle(t).direction),c=i*n,d=r.target,l=t.contains(d),o=!1,p=c>0,y=0,m=0;do{if(!d)break;var u=RN(e,d),b=u[0],f=u[1],_=u[2],g=f-_-i*b;(b||g)&&EN(e,d)&&(y+=g,m+=b);var v=d.parentNode;d=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&d!==document.body||l&&(t.contains(d)||t===d));return(p&&Math.abs(y)<1||!p&&Math.abs(m)<1)&&(o=!0),o},Xf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$2=function(e){return[e.deltaX,e.deltaY]},W2=function(e){return e&&"current"in e?e.current:e},VU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$U=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},WU=0,Fd=[];function zU(e){var t=A.useRef([]),r=A.useRef([0,0]),n=A.useRef(),s=A.useState(WU++)[0],i=A.useState(xN)[0],c=A.useRef(e);A.useEffect(function(){c.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var f=uU([e.lockRef.current],(e.shards||[]).map(W2),!0).filter(Boolean);return f.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),f.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var d=A.useCallback(function(f,_){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!c.current.allowPinchZoom;var g=Xf(f),v=r.current,w="deltaX"in f?f.deltaX:v[0]-g[0],S="deltaY"in f?f.deltaY:v[1]-g[1],E,O=f.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in f&&C==="h"&&O.type==="range")return!1;var k=V2(C,O);if(!k)return!0;if(k?E=C:(E=C==="v"?"h":"v",k=V2(C,O)),!k)return!1;if(!n.current&&"changedTouches"in f&&(w||S)&&(n.current=E),!E)return!0;var T=n.current||E;return UU(T,_,f,T==="h"?w:S)},[]),l=A.useCallback(function(f){var _=f;if(!(!Fd.length||Fd[Fd.length-1]!==i)){var g="deltaY"in _?$2(_):Xf(_),v=t.current.filter(function(E){return E.name===_.type&&(E.target===_.target||_.target===E.shadowParent)&&VU(E.delta,g)})[0];if(v&&v.should){_.cancelable&&_.preventDefault();return}if(!v){var w=(c.current.shards||[]).map(W2).filter(Boolean).filter(function(E){return E.contains(_.target)}),S=w.length>0?d(_,w[0]):!c.current.noIsolation;S&&_.cancelable&&_.preventDefault()}}},[]),o=A.useCallback(function(f,_,g,v){var w={name:f,delta:_,target:g,should:v,shadowParent:HU(g)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),p=A.useCallback(function(f){r.current=Xf(f),n.current=void 0},[]),y=A.useCallback(function(f){o(f.type,$2(f),f.target,d(f,e.lockRef.current))},[]),m=A.useCallback(function(f){o(f.type,Xf(f),f.target,d(f,e.lockRef.current))},[]);A.useEffect(function(){return Fd.push(i),e.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Ld),document.addEventListener("touchmove",l,Ld),document.addEventListener("touchstart",p,Ld),function(){Fd=Fd.filter(function(f){return f!==i}),document.removeEventListener("wheel",l,Ld),document.removeEventListener("touchmove",l,Ld),document.removeEventListener("touchstart",p,Ld)}},[]);var u=e.removeScrollBar,b=e.inert;return A.createElement(A.Fragment,null,b?A.createElement(i,{styles:$U(s)}):null,u?A.createElement(jU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function HU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const qU=wU(_N,zU);var pv=A.forwardRef(function(e,t){return A.createElement(uv,Ya({},e,{ref:t,sideCar:qU}))});pv.classNames=uv.classNames;var Sb=["Enter"," "],KU=["ArrowDown","PageUp","Home"],kN=["ArrowUp","PageDown","End"],GU=[...KU,...kN],YU={ltr:[...Sb,"ArrowRight"],rtl:[...Sb,"ArrowLeft"]},JU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qh="Menu",[Sh,QU,XU]=kP(qh),[ld,CN]=Wh(qh,[XU,tN,pN]),hv=tN(),TN=pN(),[ZU,dd]=ld(qh),[eV,Kh]=ld(qh),PN=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:i,modal:c=!0}=e,d=hv(t),[l,o]=A.useState(null),p=A.useRef(!1),y=vN(i),m=CP(s);return A.useEffect(()=>{const u=()=>{p.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>p.current=!1;return document.addEventListener("keydown",u,{capture:!0}),()=>{document.removeEventListener("keydown",u,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),a.jsx(UB,{...d,children:a.jsx(ZU,{scope:t,open:r,onOpenChange:y,content:l,onContentChange:o,children:a.jsx(eV,{scope:t,onClose:A.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:p,dir:m,modal:c,children:n})})})};PN.displayName=qh;var tV="MenuAnchor",z_=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=hv(r);return a.jsx(VB,{...s,...n,ref:t})});z_.displayName=tV;var H_="MenuPortal",[rV,NN]=ld(H_,{forceMount:void 0}),AN=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,i=dd(H_,t);return a.jsx(rV,{scope:t,forceMount:r,children:a.jsx(Hh,{present:r||i.open,children:a.jsx(dN,{asChild:!0,container:s,children:n})})})};AN.displayName=H_;var va="MenuContent",[nV,q_]=ld(va),ON=A.forwardRef((e,t)=>{const r=NN(va,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=dd(va,e.__scopeMenu),c=Kh(va,e.__scopeMenu);return a.jsx(Sh.Provider,{scope:e.__scopeMenu,children:a.jsx(Hh,{present:n||i.open,children:a.jsx(Sh.Slot,{scope:e.__scopeMenu,children:c.modal?a.jsx(sV,{...s,ref:t}):a.jsx(iV,{...s,ref:t})})})})}),sV=A.forwardRef((e,t)=>{const r=dd(va,e.__scopeMenu),n=A.useRef(null),s=$i(t,n);return A.useEffect(()=>{const i=n.current;if(i)return W_(i)},[]),a.jsx(K_,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ln(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),iV=A.forwardRef((e,t)=>{const r=dd(va,e.__scopeMenu);return a.jsx(K_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),K_=A.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:d,onEntryFocus:l,onEscapeKeyDown:o,onPointerDownOutside:p,onFocusOutside:y,onInteractOutside:m,onDismiss:u,disableOutsideScroll:b,...f}=e,_=dd(va,r),g=Kh(va,r),v=hv(r),w=TN(r),S=QU(r),[E,O]=A.useState(null),C=A.useRef(null),k=$i(t,C,_.onContentChange),T=A.useRef(0),h=A.useRef(""),x=A.useRef(0),R=A.useRef(null),P=A.useRef("right"),N=A.useRef(0),j=b?pv:A.Fragment,D=b?{as:xu,allowPinchZoom:!0}:void 0,L=I=>{var ie,$e;const G=h.current+I,de=S().filter(je=>!je.disabled),ee=document.activeElement,Q=(ie=de.find(je=>je.ref.current===ee))==null?void 0:ie.textValue,ae=de.map(je=>je.textValue),_e=vV(ae,G,Q),Se=($e=de.find(je=>je.textValue===_e))==null?void 0:$e.ref.current;(function je(se){h.current=se,window.clearTimeout(T.current),se!==""&&(T.current=window.setTimeout(()=>je(""),1e3))})(G),Se&&setTimeout(()=>Se.focus())};A.useEffect(()=>()=>window.clearTimeout(T.current),[]),TF();const M=A.useCallback(I=>{var de,ee;return P.current===((de=R.current)==null?void 0:de.side)&&bV(I,(ee=R.current)==null?void 0:ee.area)},[]);return a.jsx(nV,{scope:r,searchRef:h,onItemEnter:A.useCallback(I=>{M(I)&&I.preventDefault()},[M]),onItemLeave:A.useCallback(I=>{var G;M(I)||((G=C.current)==null||G.focus(),O(null))},[M]),onTriggerLeave:A.useCallback(I=>{M(I)&&I.preventDefault()},[M]),pointerGraceTimerRef:x,onPointerGraceIntentChange:A.useCallback(I=>{R.current=I},[]),children:a.jsx(j,{...D,children:a.jsx(OP,{asChild:!0,trapped:s,onMountAutoFocus:ln(i,I=>{var G;I.preventDefault(),(G=C.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:a.jsx(NP,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:o,onPointerDownOutside:p,onFocusOutside:y,onInteractOutside:m,onDismiss:u,children:a.jsx(aU,{asChild:!0,...w,dir:g.dir,orientation:"vertical",loop:n,currentTabStopId:E,onCurrentTabStopIdChange:O,onEntryFocus:ln(l,I=>{g.isUsingKeyboardRef.current||I.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx($B,{role:"menu","aria-orientation":"vertical","data-state":GN(_.open),"data-radix-menu-content":"",dir:g.dir,...v,...f,ref:k,style:{outline:"none",...f.style},onKeyDown:ln(f.onKeyDown,I=>{const de=I.target.closest("[data-radix-menu-content]")===I.currentTarget,ee=I.ctrlKey||I.altKey||I.metaKey,Q=I.key.length===1;de&&(I.key==="Tab"&&I.preventDefault(),!ee&&Q&&L(I.key));const ae=C.current;if(I.target!==ae||!GU.includes(I.key))return;I.preventDefault();const Se=S().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);kN.includes(I.key)&&Se.reverse(),mV(Se)}),onBlur:ln(e.onBlur,I=>{I.currentTarget.contains(I.target)||(window.clearTimeout(T.current),h.current="")}),onPointerMove:ln(e.onPointerMove,Eh(I=>{const G=I.target,de=N.current!==I.clientX;if(I.currentTarget.contains(G)&&de){const ee=I.clientX>N.current?"right":"left";P.current=ee,N.current=I.clientX}}))})})})})})})});ON.displayName=va;var aV="MenuGroup",G_=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(Ri.div,{role:"group",...n,ref:t})});G_.displayName=aV;var oV="MenuLabel",jN=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(Ri.div,{...n,ref:t})});jN.displayName=oV;var bg="MenuItem",z2="menu.itemSelect",fv=A.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,i=A.useRef(null),c=Kh(bg,e.__scopeMenu),d=q_(bg,e.__scopeMenu),l=$i(t,i),o=A.useRef(!1),p=()=>{const y=i.current;if(!r&&y){const m=new CustomEvent(z2,{bubbles:!0,cancelable:!0});y.addEventListener(z2,u=>n==null?void 0:n(u),{once:!0}),RP(y,m),m.defaultPrevented?o.current=!1:c.onClose()}};return a.jsx(DN,{...s,ref:l,disabled:r,onClick:ln(e.onClick,p),onPointerDown:y=>{var m;(m=e.onPointerDown)==null||m.call(e,y),o.current=!0},onPointerUp:ln(e.onPointerUp,y=>{var m;o.current||(m=y.currentTarget)==null||m.click()}),onKeyDown:ln(e.onKeyDown,y=>{const m=d.searchRef.current!=="";r||m&&y.key===" "||Sb.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});fv.displayName=bg;var DN=A.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=e,c=q_(bg,r),d=TN(r),l=A.useRef(null),o=$i(t,l),[p,y]=A.useState(!1),[m,u]=A.useState("");return A.useEffect(()=>{const b=l.current;b&&u((b.textContent??"").trim())},[i.children]),a.jsx(Sh.ItemSlot,{scope:r,disabled:n,textValue:s??m,children:a.jsx(oU,{asChild:!0,...d,focusable:!n,children:a.jsx(Ri.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:o,onPointerMove:ln(e.onPointerMove,Eh(b=>{n?c.onItemLeave(b):(c.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ln(e.onPointerLeave,Eh(b=>c.onItemLeave(b))),onFocus:ln(e.onFocus,()=>y(!0)),onBlur:ln(e.onBlur,()=>y(!1))})})})}),cV="MenuCheckboxItem",IN=A.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return a.jsx(UN,{scope:e.__scopeMenu,checked:r,children:a.jsx(fv,{role:"menuitemcheckbox","aria-checked":wg(r)?"mixed":r,...s,ref:t,"data-state":J_(r),onSelect:ln(s.onSelect,()=>n==null?void 0:n(wg(r)?!0:!r),{checkForDefaultPrevented:!1})})})});IN.displayName=cV;var MN="MenuRadioGroup",[lV,dV]=ld(MN,{value:void 0,onValueChange:()=>{}}),LN=A.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,i=vN(n);return a.jsx(lV,{scope:e.__scopeMenu,value:r,onValueChange:i,children:a.jsx(G_,{...s,ref:t})})});LN.displayName=MN;var FN="MenuRadioItem",BN=A.forwardRef((e,t)=>{const{value:r,...n}=e,s=dV(FN,e.__scopeMenu),i=r===s.value;return a.jsx(UN,{scope:e.__scopeMenu,checked:i,children:a.jsx(fv,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":J_(i),onSelect:ln(n.onSelect,()=>{var c;return(c=s.onValueChange)==null?void 0:c.call(s,r)},{checkForDefaultPrevented:!1})})})});BN.displayName=FN;var Y_="MenuItemIndicator",[UN,uV]=ld(Y_,{checked:!1}),VN=A.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,i=uV(Y_,r);return a.jsx(Hh,{present:n||wg(i.checked)||i.checked===!0,children:a.jsx(Ri.span,{...s,ref:t,"data-state":J_(i.checked)})})});VN.displayName=Y_;var pV="MenuSeparator",$N=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(Ri.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});$N.displayName=pV;var hV="MenuArrow",WN=A.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=hv(r);return a.jsx(WB,{...s,...n,ref:t})});WN.displayName=hV;var fV="MenuSub",[GK,zN]=ld(fV),Ap="MenuSubTrigger",HN=A.forwardRef((e,t)=>{const r=dd(Ap,e.__scopeMenu),n=Kh(Ap,e.__scopeMenu),s=zN(Ap,e.__scopeMenu),i=q_(Ap,e.__scopeMenu),c=A.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:l}=i,o={__scopeMenu:e.__scopeMenu},p=A.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return A.useEffect(()=>p,[p]),A.useEffect(()=>{const y=d.current;return()=>{window.clearTimeout(y),l(null)}},[d,l]),a.jsx(z_,{asChild:!0,...o,children:a.jsx(DN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":GN(r.open),...e,ref:Gg(t,s.onTriggerChange),onClick:y=>{var m;(m=e.onClick)==null||m.call(e,y),!(e.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ln(e.onPointerMove,Eh(y=>{i.onItemEnter(y),!y.defaultPrevented&&!e.disabled&&!r.open&&!c.current&&(i.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:ln(e.onPointerLeave,Eh(y=>{var u,b;p();const m=(u=r.content)==null?void 0:u.getBoundingClientRect();if(m){const f=(b=r.content)==null?void 0:b.dataset.side,_=f==="right",g=_?-5:5,v=m[_?"left":"right"],w=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:y.clientX+g,y:y.clientY},{x:v,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:v,y:m.bottom}],side:f}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(y),y.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ln(e.onKeyDown,y=>{var u;const m=i.searchRef.current!=="";e.disabled||m&&y.key===" "||YU[n.dir].includes(y.key)&&(r.onOpenChange(!0),(u=r.content)==null||u.focus(),y.preventDefault())})})})});HN.displayName=Ap;var qN="MenuSubContent",KN=A.forwardRef((e,t)=>{const r=NN(va,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=dd(va,e.__scopeMenu),c=Kh(va,e.__scopeMenu),d=zN(qN,e.__scopeMenu),l=A.useRef(null),o=$i(t,l);return a.jsx(Sh.Provider,{scope:e.__scopeMenu,children:a.jsx(Hh,{present:n||i.open,children:a.jsx(Sh.Slot,{scope:e.__scopeMenu,children:a.jsx(K_,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:o,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var y;c.isUsingKeyboardRef.current&&((y=l.current)==null||y.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:ln(e.onFocusOutside,p=>{p.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ln(e.onEscapeKeyDown,p=>{c.onClose(),p.preventDefault()}),onKeyDown:ln(e.onKeyDown,p=>{var u;const y=p.currentTarget.contains(p.target),m=JU[c.dir].includes(p.key);y&&m&&(i.onOpenChange(!1),(u=d.trigger)==null||u.focus(),p.preventDefault())})})})})})});KN.displayName=qN;function GN(e){return e?"open":"closed"}function wg(e){return e==="indeterminate"}function J_(e){return wg(e)?"indeterminate":e?"checked":"unchecked"}function mV(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function gV(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function vV(e,t,r){const s=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let c=gV(e,Math.max(i,0));s.length===1&&(c=c.filter(o=>o!==r));const l=c.find(o=>o.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function yV(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const d=t[i].x,l=t[i].y,o=t[c].x,p=t[c].y;l>n!=p>n&&r<(o-d)*(n-l)/(p-l)+d&&(s=!s)}return s}function bV(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return yV(r,t)}function Eh(e){return t=>t.pointerType==="mouse"?e(t):void 0}var wV=PN,_V=z_,xV=AN,SV=ON,EV=G_,RV=jN,kV=fv,CV=IN,TV=LN,PV=BN,NV=VN,AV=$N,OV=WN,jV=HN,DV=KN,Q_="DropdownMenu",[IV,YK]=Wh(Q_,[CN]),ki=CN(),[MV,YN]=IV(Q_),JN=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:c,modal:d=!0}=e,l=ki(t),o=A.useRef(null),[p=!1,y]=EP({prop:s,defaultProp:i,onChange:c});return a.jsx(MV,{scope:t,triggerId:vb(),triggerRef:o,contentId:vb(),open:p,onOpenChange:y,onOpenToggle:A.useCallback(()=>y(m=>!m),[y]),modal:d,children:a.jsx(wV,{...l,open:p,onOpenChange:y,dir:n,modal:d,children:r})})};JN.displayName=Q_;var QN="DropdownMenuTrigger",XN=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,i=YN(QN,r),c=ki(r);return a.jsx(_V,{asChild:!0,...c,children:a.jsx(Ri.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Gg(t,i.triggerRef),onPointerDown:ln(e.onPointerDown,d=>{!n&&d.button===0&&d.ctrlKey===!1&&(i.onOpenToggle(),i.open||d.preventDefault())}),onKeyDown:ln(e.onKeyDown,d=>{n||(["Enter"," "].includes(d.key)&&i.onOpenToggle(),d.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});XN.displayName=QN;var LV="DropdownMenuPortal",ZN=e=>{const{__scopeDropdownMenu:t,...r}=e,n=ki(t);return a.jsx(xV,{...n,...r})};ZN.displayName=LV;var e4="DropdownMenuContent",t4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=YN(e4,r),i=ki(r),c=A.useRef(!1);return a.jsx(SV,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:t,onCloseAutoFocus:ln(e.onCloseAutoFocus,d=>{var l;c.current||(l=s.triggerRef.current)==null||l.focus(),c.current=!1,d.preventDefault()}),onInteractOutside:ln(e.onInteractOutside,d=>{const l=d.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0,p=l.button===2||o;(!s.modal||p)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});t4.displayName=e4;var FV="DropdownMenuGroup",BV=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(EV,{...s,...n,ref:t})});BV.displayName=FV;var UV="DropdownMenuLabel",r4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(RV,{...s,...n,ref:t})});r4.displayName=UV;var VV="DropdownMenuItem",n4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(kV,{...s,...n,ref:t})});n4.displayName=VV;var $V="DropdownMenuCheckboxItem",s4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(CV,{...s,...n,ref:t})});s4.displayName=$V;var WV="DropdownMenuRadioGroup",zV=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(TV,{...s,...n,ref:t})});zV.displayName=WV;var HV="DropdownMenuRadioItem",i4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(PV,{...s,...n,ref:t})});i4.displayName=HV;var qV="DropdownMenuItemIndicator",a4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(NV,{...s,...n,ref:t})});a4.displayName=qV;var KV="DropdownMenuSeparator",o4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(AV,{...s,...n,ref:t})});o4.displayName=KV;var GV="DropdownMenuArrow",YV=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(OV,{...s,...n,ref:t})});YV.displayName=GV;var JV="DropdownMenuSubTrigger",c4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(jV,{...s,...n,ref:t})});c4.displayName=JV;var QV="DropdownMenuSubContent",l4=A.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=ki(r);return a.jsx(DV,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});l4.displayName=QV;var XV=JN,ZV=XN,e$=ZN,d4=t4,u4=r4,p4=n4,h4=s4,f4=i4,m4=a4,g4=o4,v4=c4,y4=l4;const t$=XV,r$=ZV,n$=A.forwardRef(({className:e,inset:t,children:r,...n},s)=>a.jsxs(v4,{ref:s,className:Ur("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,a.jsx(pI,{className:"ml-auto h-4 w-4"})]}));n$.displayName=v4.displayName;const s$=A.forwardRef(({className:e,...t},r)=>a.jsx(y4,{ref:r,className:Ur("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));s$.displayName=y4.displayName;const b4=A.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(e$,{children:a.jsx(d4,{ref:n,sideOffset:t,className:Ur("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));b4.displayName=d4.displayName;const Eb=A.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(p4,{ref:n,className:Ur("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Eb.displayName=p4.displayName;const i$=A.forwardRef(({className:e,children:t,checked:r,...n},s)=>a.jsxs(h4,{ref:s,className:Ur("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(m4,{children:a.jsx($w,{className:"h-4 w-4"})})}),t]}));i$.displayName=h4.displayName;const a$=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(f4,{ref:n,className:Ur("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(m4,{children:a.jsx(hI,{className:"h-2 w-2 fill-current"})})}),t]}));a$.displayName=f4.displayName;const o$=A.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(u4,{ref:n,className:Ur("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));o$.displayName=u4.displayName;const Rb=A.forwardRef(({className:e,...t},r)=>a.jsx(g4,{ref:r,className:Ur("-mx-1 my-1 h-px bg-muted",e),...t}));Rb.displayName=g4.displayName;function Lc(){var c,d;const e=Wn(l=>l.user),t=Wn(l=>l.logout),r=Ba(),{theme:n,toggleTheme:s}=w3(),i=async()=>{t(),localStorage.removeItem("auth-storage"),r("/")};return a.jsx("nav",{className:"fixed top-0 w-full bg-white/70 dark:bg-zinc-900/40 backdrop-blur-md border-b border-slate-200/60 dark:border-zinc-700/60 z-50",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs(bs,{to:e?e.role==="DOCTOR"?"/dashboard/doctor":"/dashboard/patient":"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:a.jsx(Mh,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CareXpert"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rr,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:s,className:"rounded-full",children:n==="dark"?a.jsx(xI,{className:"h-5 w-5 text-yellow-400"}):a.jsx(bI,{className:"h-5 w-5 text-gray-700"})}),e?a.jsxs(t$,{children:[a.jsx(r$,{asChild:!0,children:a.jsxs(rr,{variant:"ghost",className:"flex items-center space-x-2 p-2",children:[a.jsxs(ws,{className:"h-8 w-8",children:[a.jsx(ks,{src:e.profilePicture}),a.jsx(_s,{className:"bg-blue-600 text-white text-sm",children:((c=e.name)==null?void 0:c.charAt(0))||"U"})]}),a.jsxs("div",{className:"hidden sm:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.role||"Patient"})]})]})}),a.jsxs(b4,{align:"end",className:"w-56",children:[a.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[a.jsxs(ws,{className:"h-8 w-8",children:[a.jsx(ks,{src:e.profilePicture}),a.jsx(_s,{className:"bg-blue-600 text-white text-sm",children:((d=e.name)==null?void 0:d.charAt(0))||"U"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:e.name||"User"}),a.jsx("p",{className:"text-xs text-gray-500",children:e.email})]})]}),a.jsx(Rb,{}),a.jsx(Eb,{asChild:!0,children:a.jsxs(bs,{to:"/profile",className:"flex items-center",children:[a.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Profile"]})}),a.jsx(Rb,{}),a.jsxs(Eb,{onClick:i,className:"text-red-600 focus:text-red-600",children:[a.jsx(vI,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(bs,{to:"/auth/login",children:a.jsx(rr,{variant:"ghost",size:"sm",children:"Login"})}),a.jsx(bs,{to:"/auth/patient/signup",children:a.jsx(rr,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Sign Up"})})]})]})]})})})}function zs(){const[e,t]=A.useState(!1),r=Wn(n=>n.user);return a.jsxs("div",{className:"h-screen bg-slate-50 dark:bg-zinc-900 flex flex-col overflow-hidden",children:[a.jsx(Lc,{}),a.jsx(uP,{isOpen:e,onToggle:()=>t(!e)}),a.jsxs("div",{className:"flex-1 flex pt-16 md:ml-64 overflow-hidden",children:[r&&a.jsx("div",{className:"md:hidden fixed top-16 left-4 z-30",children:a.jsx(rr,{variant:"ghost",size:"sm",onClick:()=>t(!0),className:"bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm border border-slate-200/60 dark:border-zinc-700/60 shadow-md rounded-xl",children:a.jsx(qw,{className:"h-5 w-5"})})}),a.jsx("main",{className:"flex-1 overflow-y-auto scrollbar-hide",children:a.jsx(Wp,{})})]})]})}function c$(){const e=Wn(n=>n.user),t=Wn(n=>n.isLoading),r=Xc();return t?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(rC,{className:"h-8 w-8 animate-spin text-blue-600"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e?a.jsx(Wp,{}):a.jsx(n3,{to:"/auth/login",state:{from:r},replace:!0})}const Nt=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Ur("rounded-2xl border border-slate-200/60 dark:border-zinc-700/60 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-sm text-card-foreground shadow-lg",e),...t}));Nt.displayName="Card";const En=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Ur("flex flex-col space-y-1.5 p-6",e),...t}));En.displayName="CardHeader";const _n=A.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:Ur("font-semibold leading-none tracking-tight",e),...t}));_n.displayName="CardTitle";const Vn=A.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:Ur("text-sm text-muted-foreground",e),...t}));Vn.displayName="CardDescription";const Ot=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Ur("p-6 pt-0",e),...t}));Ot.displayName="CardContent";const l$=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Ur("flex items-center p-6 pt-0",e),...t}));l$.displayName="CardFooter";function Gl(){return a.jsx("footer",{className:"bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs(bs,{to:"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(ed,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"careXpert"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Modern healthcare platform connecting patients with doctors."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(bs,{to:"/doctors",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Find Doctors"})}),a.jsx("li",{children:a.jsx(bs,{to:"/about",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"About Us"})}),a.jsx("li",{children:a.jsx(bs,{to:"/chat",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Chat"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Services"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(bs,{to:"/auth/patient/signup",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Patient Portal"})}),a.jsx("li",{children:a.jsx(bs,{to:"/auth/doctor/signup",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"Doctor Portal"})}),a.jsx("li",{children:a.jsx(bs,{to:"/chat",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400",children:"AI Consultation"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contact"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Email: support@carexpert.com"}),a.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Phone: +1 (555) 123-4567"}),a.jsx("li",{className:"text-gray-600 dark:text-gray-300",children:"Address: 123 Healthcare St, Medical City"})]})]})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[" ",new Date().getFullYear()," careXpert. All rights reserved."]})})]})})}var d$=e=>{switch(e){case"success":return h$;case"info":return m$;case"warning":return f$;case"error":return g$;default:return null}},u$=Array(12).fill(0),p$=({visible:e,className:t})=>pt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},pt.createElement("div",{className:"sonner-spinner"},u$.map((r,n)=>pt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),h$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),f$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),m$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),g$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),v$=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),y$=()=>{let[e,t]=pt.useState(document.hidden);return pt.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},kb=1,b$=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:kb++,i=this.toasts.find(d=>d.id===s),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(d=>d.id===s?(this.publish({...d,...e,id:s,title:r}),{...d,...e,id:s,dismissible:c,title:r}):d):this.addToast({title:r,...n,dismissible:c,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,i,c=n.then(async l=>{if(i=["resolve",l],pt.isValidElement(l))s=!1,this.create({id:r,type:"default",message:l});else if(_$(l)&&!l.ok){s=!1;let o=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,p=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:r,type:"error",message:o,description:p})}else if(t.success!==void 0){s=!1;let o=typeof t.success=="function"?await t.success(l):t.success,p=typeof t.description=="function"?await t.description(l):t.description;this.create({id:r,type:"success",message:o,description:p})}}).catch(async l=>{if(i=["reject",l],t.error!==void 0){s=!1;let o=typeof t.error=="function"?await t.error(l):t.error,p=typeof t.description=="function"?await t.description(l):t.description;this.create({id:r,type:"error",message:o,description:p})}}).finally(()=>{var l;s&&(this.dismiss(r),r=void 0),(l=t.finally)==null||l.call(t)}),d=()=>new Promise((l,o)=>c.then(()=>i[0]==="reject"?o(i[1]):l(i[1])).catch(o));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||kb++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ji=new b$,w$=(e,t)=>{let r=(t==null?void 0:t.id)||kb++;return ji.addToast({title:e,...t,id:r}),r},_$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",x$=w$,S$=()=>ji.toasts,E$=()=>ji.getActiveToasts(),qt=Object.assign(x$,{success:ji.success,info:ji.info,warning:ji.warning,error:ji.error,custom:ji.custom,message:ji.message,promise:ji.promise,dismiss:ji.dismiss,loading:ji.loading},{getHistory:S$,getToasts:E$});function R$(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}R$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zf(e){return e.label!==void 0}var k$=3,C$="32px",T$="16px",H2=4e3,P$=356,N$=14,A$=20,O$=200;function Sa(...e){return e.filter(Boolean).join(" ")}function j$(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var D$=e=>{var t,r,n,s,i,c,d,l,o,p,y;let{invert:m,toast:u,unstyled:b,interacting:f,setHeights:_,visibleToasts:g,heights:v,index:w,toasts:S,expanded:E,removeToast:O,defaultRichColors:C,closeButton:k,style:T,cancelButtonStyle:h,actionButtonStyle:x,className:R="",descriptionClassName:P="",duration:N,position:j,gap:D,loadingIcon:L,expandByDefault:M,classNames:I,icons:G,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:ee}=e,[Q,ae]=pt.useState(null),[_e,Se]=pt.useState(null),[ie,$e]=pt.useState(!1),[je,se]=pt.useState(!1),[ue,Ce]=pt.useState(!1),[He,$t]=pt.useState(!1),[nr,Ct]=pt.useState(!1),[cr,br]=pt.useState(0),[jt,nn]=pt.useState(0),Dt=pt.useRef(u.duration||N||H2),Xt=pt.useRef(null),Gr=pt.useRef(null),dn=w===0,Mr=w+1<=g,Yr=u.type,un=u.dismissible!==!1,Lt=u.className||"",pn=u.descriptionClassName||"",sn=pt.useMemo(()=>v.findIndex(Me=>Me.toastId===u.id)||0,[v,u.id]),zr=pt.useMemo(()=>{var Me;return(Me=u.closeButton)!=null?Me:k},[u.closeButton,k]),Lr=pt.useMemo(()=>u.duration||N||H2,[u.duration,N]),xn=pt.useRef(0),Xr=pt.useRef(0),Pn=pt.useRef(0),Sn=pt.useRef(null),[In,Nn]=j.split("-"),Wt=pt.useMemo(()=>v.reduce((Me,ot,Le)=>Le>=sn?Me:Me+ot.height,0),[v,sn]),Mn=y$(),ss=u.invert||m,hn=Yr==="loading";Xr.current=pt.useMemo(()=>sn*D+Wt,[sn,Wt]),pt.useEffect(()=>{Dt.current=Lr},[Lr]),pt.useEffect(()=>{$e(!0)},[]),pt.useEffect(()=>{let Me=Gr.current;if(Me){let ot=Me.getBoundingClientRect().height;return nn(ot),_(Le=>[{toastId:u.id,height:ot,position:u.position},...Le]),()=>_(Le=>Le.filter(lt=>lt.toastId!==u.id))}},[_,u.id]),pt.useLayoutEffect(()=>{if(!ie)return;let Me=Gr.current,ot=Me.style.height;Me.style.height="auto";let Le=Me.getBoundingClientRect().height;Me.style.height=ot,nn(Le),_(lt=>lt.find(lr=>lr.toastId===u.id)?lt.map(lr=>lr.toastId===u.id?{...lr,height:Le}:lr):[{toastId:u.id,height:Le,position:u.position},...lt])},[ie,u.title,u.description,_,u.id]);let or=pt.useCallback(()=>{se(!0),br(Xr.current),_(Me=>Me.filter(ot=>ot.toastId!==u.id)),setTimeout(()=>{O(u)},O$)},[u,O,_,Xr]);pt.useEffect(()=>{if(u.promise&&Yr==="loading"||u.duration===1/0||u.type==="loading")return;let Me;return E||f||ee&&Mn?(()=>{if(Pn.current<xn.current){let ot=new Date().getTime()-xn.current;Dt.current=Dt.current-ot}Pn.current=new Date().getTime()})():Dt.current!==1/0&&(xn.current=new Date().getTime(),Me=setTimeout(()=>{var ot;(ot=u.onAutoClose)==null||ot.call(u,u),or()},Dt.current)),()=>clearTimeout(Me)},[E,f,u,Yr,ee,Mn,or]),pt.useEffect(()=>{u.delete&&or()},[or,u.delete]);function Ye(){var Me,ot,Le;return G!=null&&G.loading?pt.createElement("div",{className:Sa(I==null?void 0:I.loader,(Me=u==null?void 0:u.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":Yr==="loading"},G.loading):L?pt.createElement("div",{className:Sa(I==null?void 0:I.loader,(ot=u==null?void 0:u.classNames)==null?void 0:ot.loader,"sonner-loader"),"data-visible":Yr==="loading"},L):pt.createElement(p$,{className:Sa(I==null?void 0:I.loader,(Le=u==null?void 0:u.classNames)==null?void 0:Le.loader),visible:Yr==="loading"})}return pt.createElement("li",{tabIndex:0,ref:Gr,className:Sa(R,Lt,I==null?void 0:I.toast,(t=u==null?void 0:u.classNames)==null?void 0:t.toast,I==null?void 0:I.default,I==null?void 0:I[Yr],(r=u==null?void 0:u.classNames)==null?void 0:r[Yr]),"data-sonner-toast":"","data-rich-colors":(n=u.richColors)!=null?n:C,"data-styled":!(u.jsx||u.unstyled||b),"data-mounted":ie,"data-promise":!!u.promise,"data-swiped":nr,"data-removed":je,"data-visible":Mr,"data-y-position":In,"data-x-position":Nn,"data-index":w,"data-front":dn,"data-swiping":ue,"data-dismissible":un,"data-type":Yr,"data-invert":ss,"data-swipe-out":He,"data-swipe-direction":_e,"data-expanded":!!(E||M&&ie),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${je?cr:Xr.current}px`,"--initial-height":M?"auto":`${jt}px`,...T,...u.style},onDragEnd:()=>{Ce(!1),ae(null),Sn.current=null},onPointerDown:Me=>{hn||!un||(Xt.current=new Date,br(Xr.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Ce(!0),Sn.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,ot,Le,lt;if(He||!un)return;Sn.current=null;let lr=Number(((Me=Gr.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),De=Number(((ot=Gr.current)==null?void 0:ot.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Zt=new Date().getTime()-((Le=Xt.current)==null?void 0:Le.getTime()),Vt=Q==="x"?lr:De,_r=Math.abs(Vt)/Zt;if(Math.abs(Vt)>=A$||_r>.11){br(Xr.current),(lt=u.onDismiss)==null||lt.call(u,u),Se(Q==="x"?lr>0?"right":"left":De>0?"down":"up"),or(),$t(!0),Ct(!1);return}Ce(!1),ae(null)},onPointerMove:Me=>{var ot,Le,lt,lr;if(!Sn.current||!un||((ot=window.getSelection())==null?void 0:ot.toString().length)>0)return;let De=Me.clientY-Sn.current.y,Zt=Me.clientX-Sn.current.x,Vt=(Le=e.swipeDirections)!=null?Le:j$(j);!Q&&(Math.abs(Zt)>1||Math.abs(De)>1)&&ae(Math.abs(Zt)>Math.abs(De)?"x":"y");let _r={x:0,y:0};Q==="y"?(Vt.includes("top")||Vt.includes("bottom"))&&(Vt.includes("top")&&De<0||Vt.includes("bottom")&&De>0)&&(_r.y=De):Q==="x"&&(Vt.includes("left")||Vt.includes("right"))&&(Vt.includes("left")&&Zt<0||Vt.includes("right")&&Zt>0)&&(_r.x=Zt),(Math.abs(_r.x)>0||Math.abs(_r.y)>0)&&Ct(!0),(lt=Gr.current)==null||lt.style.setProperty("--swipe-amount-x",`${_r.x}px`),(lr=Gr.current)==null||lr.style.setProperty("--swipe-amount-y",`${_r.y}px`)}},zr&&!u.jsx?pt.createElement("button",{"aria-label":de,"data-disabled":hn,"data-close-button":!0,onClick:hn||!un?()=>{}:()=>{var Me;or(),(Me=u.onDismiss)==null||Me.call(u,u)},className:Sa(I==null?void 0:I.closeButton,(s=u==null?void 0:u.classNames)==null?void 0:s.closeButton)},(i=G==null?void 0:G.close)!=null?i:v$):null,u.jsx||A.isValidElement(u.title)?u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title:pt.createElement(pt.Fragment,null,Yr||u.icon||u.promise?pt.createElement("div",{"data-icon":"",className:Sa(I==null?void 0:I.icon,(c=u==null?void 0:u.classNames)==null?void 0:c.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||Ye():null,u.type!=="loading"?u.icon||(G==null?void 0:G[Yr])||d$(Yr):null):null,pt.createElement("div",{"data-content":"",className:Sa(I==null?void 0:I.content,(d=u==null?void 0:u.classNames)==null?void 0:d.content)},pt.createElement("div",{"data-title":"",className:Sa(I==null?void 0:I.title,(l=u==null?void 0:u.classNames)==null?void 0:l.title)},typeof u.title=="function"?u.title():u.title),u.description?pt.createElement("div",{"data-description":"",className:Sa(P,pn,I==null?void 0:I.description,(o=u==null?void 0:u.classNames)==null?void 0:o.description)},typeof u.description=="function"?u.description():u.description):null),A.isValidElement(u.cancel)?u.cancel:u.cancel&&Zf(u.cancel)?pt.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||h,onClick:Me=>{var ot,Le;Zf(u.cancel)&&un&&((Le=(ot=u.cancel).onClick)==null||Le.call(ot,Me),or())},className:Sa(I==null?void 0:I.cancelButton,(p=u==null?void 0:u.classNames)==null?void 0:p.cancelButton)},u.cancel.label):null,A.isValidElement(u.action)?u.action:u.action&&Zf(u.action)?pt.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||x,onClick:Me=>{var ot,Le;Zf(u.action)&&((Le=(ot=u.action).onClick)==null||Le.call(ot,Me),!Me.defaultPrevented&&or())},className:Sa(I==null?void 0:I.actionButton,(y=u==null?void 0:u.classNames)==null?void 0:y.actionButton)},u.action.label):null))};function q2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function I$(e,t){let r={};return[e,t].forEach((n,s)=>{let i=s===1,c=i?"--mobile-offset":"--offset",d=i?T$:C$;function l(o){["top","right","bottom","left"].forEach(p=>{r[`${c}-${p}`]=typeof o=="number"?`${o}px`:o})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(o=>{n[o]===void 0?r[`${c}-${o}`]=d:r[`${c}-${o}`]=typeof n[o]=="number"?`${n[o]}px`:n[o]}):l(d)}),r}var M$=A.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:c,className:d,offset:l,mobileOffset:o,theme:p="light",richColors:y,duration:m,style:u,visibleToasts:b=k$,toastOptions:f,dir:_=q2(),gap:g=N$,loadingIcon:v,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:E}=e,[O,C]=pt.useState([]),k=pt.useMemo(()=>Array.from(new Set([n].concat(O.filter(ee=>ee.position).map(ee=>ee.position)))),[O,n]),[T,h]=pt.useState([]),[x,R]=pt.useState(!1),[P,N]=pt.useState(!1),[j,D]=pt.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=pt.useRef(null),M=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=pt.useRef(null),G=pt.useRef(!1),de=pt.useCallback(ee=>{C(Q=>{var ae;return(ae=Q.find(_e=>_e.id===ee.id))!=null&&ae.delete||ji.dismiss(ee.id),Q.filter(({id:_e})=>_e!==ee.id)})},[]);return pt.useEffect(()=>ji.subscribe(ee=>{if(ee.dismiss){C(Q=>Q.map(ae=>ae.id===ee.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{zg.flushSync(()=>{C(Q=>{let ae=Q.findIndex(_e=>_e.id===ee.id);return ae!==-1?[...Q.slice(0,ae),{...Q[ae],...ee},...Q.slice(ae+1)]:[ee,...Q]})})})}),[]),pt.useEffect(()=>{if(p!=="system"){D(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:Q})=>{D(Q?"dark":"light")})}catch{ee.addListener(({matches:ae})=>{try{D(ae?"dark":"light")}catch(_e){console.error(_e)}})}},[p]),pt.useEffect(()=>{O.length<=1&&R(!1)},[O]),pt.useEffect(()=>{let ee=Q=>{var ae,_e;s.every(Se=>Q[Se]||Q.code===Se)&&(R(!0),(ae=L.current)==null||ae.focus()),Q.code==="Escape"&&(document.activeElement===L.current||(_e=L.current)!=null&&_e.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[s]),pt.useEffect(()=>{if(L.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,G.current=!1)}},[L.current]),pt.createElement("section",{ref:t,"aria-label":`${S} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((ee,Q)=>{var ae;let[_e,Se]=ee.split("-");return O.length?pt.createElement("ol",{key:ee,dir:_==="auto"?q2():_,tabIndex:-1,ref:L,className:d,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":_e,"data-lifted":x&&O.length>1&&!i,"data-x-position":Se,style:{"--front-toast-height":`${((ae=T[0])==null?void 0:ae.height)||0}px`,"--width":`${P$}px`,"--gap":`${g}px`,...u,...I$(l,o)},onBlur:ie=>{G.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(G.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||G.current||(G.current=!0,I.current=ie.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{P||R(!1)},onDragEnd:()=>R(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},O.filter(ie=>!ie.position&&Q===0||ie.position===ee).map((ie,$e)=>{var je,se;return pt.createElement(D$,{key:ie.id,icons:w,index:$e,toast:ie,defaultRichColors:y,duration:(je=f==null?void 0:f.duration)!=null?je:m,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:r,visibleToasts:b,closeButton:(se=f==null?void 0:f.closeButton)!=null?se:c,interacting:P,position:ee,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:de,toasts:O.filter(ue=>ue.position==ie.position),heights:T.filter(ue=>ue.position==ie.position),setHeights:h,expandByDefault:i,gap:g,loadingIcon:v,expanded:x,pauseWhenPageIsHidden:E,swipeDirections:e.swipeDirections})})):null}))});function L$(){const[e,t]=A.useState(""),[r,n]=A.useState([{type:"ai",content:"Hello! I'm your AI health assistant. How can I help you today?"}]),s=c=>{c.preventDefault(),e.trim()&&(n(d=>[...d,{type:"user",content:e}]),setTimeout(()=>{n(d=>[...d,{type:"ai",content:"I'm a demo AI assistant. In the full version, I'll be able to help you with health-related questions!"}])},1e3),t(""))},i=async()=>{try{n([{type:"ai",content:"Chat cleared. How can I assist you now?"}]),await Mt.delete("undefined/api/ai-chat/history",{withCredentials:!0}),qt.success("Chat history cleared")}catch{qt.error("Failed to clear chat")}};return a.jsxs("div",{className:"flex flex-col h-[400px]",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"AI Assistant"}),a.jsxs(rr,{variant:"outline",size:"sm",onClick:i,children:[a.jsx(aC,{className:"h-4 w-4 mr-2"}),"Clear chat"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.map((c,d)=>a.jsx("div",{className:`flex ${c.type==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${c.type==="user"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"}`,children:c.content})},d))}),a.jsx("form",{onSubmit:s,className:"p-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:e,onChange:c=>t(c.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx(rr,{type:"submit",size:"icon",children:a.jsx(sC,{className:"h-4 w-4"})})]})})]})}function F$(){const[e]=A.useState(!0);return e?a.jsx("div",{}):null}function B$(){return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[a.jsx(Lc,{}),a.jsxs("section",{className:"container mx-auto px-4 pt-20 pb-16",children:[a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Your Health, Our",a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ","Priority"]})]}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Connect with certified doctors, get AI-powered consultations, and manage your health journey with careXpert - the modern healthcare platform."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx(bs,{to:"/auth/patient/signup",children:a.jsxs(rr,{size:"lg",className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl",children:[a.jsx(ed,{className:"mr-2 h-5 w-5"}),"Book Appointment"]})}),a.jsx(bs,{to:"/auth/doctor/signup",children:a.jsx(rr,{size:"lg",variant:"secondary",className:"w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-xl",children:"Join as Doctor"})})]})]}),a.jsx("div",{children:a.jsxs(Nt,{className:"border-0 shadow-2xl bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:[a.jsxs(En,{className:"text-center pb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx(ed,{className:"h-6 w-6 text-white"})}),a.jsx(_n,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Try CareXpert AI"}),a.jsx(Vn,{className:"text-gray-600 dark:text-gray-300",children:"Get instant health guidance from our AI assistant"})]}),a.jsx(Ot,{children:a.jsx(L$,{})})]})})]}),a.jsx(F$,{})]}),a.jsxs("section",{className:"container mx-auto px-4 py-16",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Why Choose careXpert?"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Experience healthcare like never before with our cutting-edge platform designed for modern patients and doctors."})]}),a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Nt,{className:"group p-6 text-center border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm transition-all duration-300 ease-in-out transform hover:-translate-y-2 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/20 cursor-pointer",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(Na,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Expert Doctors"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Connect with certified healthcare professionals"})]})}),a.jsx(Nt,{className:"group p-6 text-center border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm transition-all duration-300 ease-in-out transform hover:-translate-y-2 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/20 cursor-pointer",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(ni,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"24/7 Available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Round-the-clock healthcare support"})]})}),a.jsx(Nt,{className:"group p-6 text-center border-0 bg-purple-100 dark:bg-purple-900/30 backdrop-blur-sm transition-all duration-300 ease-in-out transform hover:-translate-y-2 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20 cursor-pointer",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(Kw,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Secure & Private"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Your health data is protected and encrypted"})]})}),a.jsx(Nt,{className:"group p-6 text-center border-0 bg-orange-100 dark:bg-orange-900/30 backdrop-blur-sm transition-all duration-300 ease-in-out transform hover:-translate-y-2 hover:scale-105 hover:shadow-2xl hover:shadow-orange-500/20 cursor-pointer",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(Gw,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"AI Powered"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Smart consultations with AI assistance"})]})})]})]}),a.jsx(Gl,{})]})}function U$(){const e=[{icon:Na,label:"Active Users",value:"10,000+"},{icon:ed,label:"Doctors",value:"500+"},{icon:ni,label:"Consultations",value:"50,000+"},{icon:gI,label:"Cities",value:"25+"}],t=[{icon:ed,title:"Expert Healthcare",description:"Connect with certified doctors and healthcare professionals"},{icon:Kw,title:"Secure & Private",description:"Your health data is protected with enterprise-grade security"},{icon:ni,title:"24/7 Available",description:"Access healthcare support anytime, anywhere"},{icon:lI,title:"Quality Assured",description:"All doctors are verified and maintain high standards"}],r=[{name:"Dr. Sarah Mitchell",role:"Chief Medical Officer",image:"/placeholder.svg",bio:"15+ years in digital healthcare innovation"},{name:"John Anderson",role:"CEO & Founder",image:"/placeholder.svg",bio:"Healthcare technology entrepreneur"},{name:"Dr. Michael Rodriguez",role:"Head of AI Development",image:"/placeholder.svg",bio:"AI researcher specializing in medical applications"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Lc,{}),a.jsxs("div",{className:"container mx-auto px-4 pt-20 pb-12",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h1",{className:"text-5xl font-bold text-gray-900 dark:text-white mb-6",children:"About careXpert"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"We're revolutionizing healthcare by making quality medical care accessible to everyone, anywhere, anytime through cutting-edge technology and compassionate care."})]}),a.jsx("div",{className:"grid md:grid-cols-4 gap-6 mb-16",children:e.map((n,s)=>a.jsx(Nt,{className:"text-center p-6",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",children:a.jsx(n.icon,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n.value}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.label})]})},s))}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-16",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Our Mission"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:"At careXpert, we believe that quality healthcare should be accessible to everyone. Our platform bridges the gap between patients and healthcare providers through innovative technology, making medical consultations more convenient, affordable, and effective."}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"We combine the expertise of certified medical professionals with the power of AI to provide comprehensive healthcare solutions that adapt to your needs."})]}),a.jsx("div",{className:"relative",children:a.jsx("img",{src:"/image.png",alt:"Healthcare team",className:"rounded-2xl shadow-xl"})})]}),a.jsxs("div",{className:"mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Why Choose careXpert?"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,s)=>a.jsx(Nt,{className:"text-center p-6 hover:shadow-lg transition-shadow",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx(n.icon,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:n.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.description})]})},s))})]}),a.jsxs("div",{className:"mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center mb-12",children:"Meet Our Team"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map((n,s)=>a.jsx(Nt,{className:"text-center p-6",children:a.jsxs(Ot,{className:"p-0",children:[a.jsx("img",{src:n.image||"/placeholder.svg",alt:n.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:n.name}),a.jsx($r,{className:"mb-3",children:n.role}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.bio})]})},s))})]}),a.jsx(Nt,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:a.jsxs(Ot,{className:"p-12 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Our Values"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Compassion"}),a.jsx("p",{className:"opacity-90",children:"We put patients first and treat everyone with empathy and respect"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Innovation"}),a.jsx("p",{className:"opacity-90",children:"We continuously improve our platform with cutting-edge technology"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Trust"}),a.jsx("p",{className:"opacity-90",children:"We maintain the highest standards of security and privacy"})]})]})]})})]}),a.jsx(Gl,{})]})}const ls=A.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:Ur("flex h-10 w-full rounded-xl border border-slate-200/60 dark:border-zinc-700/60 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-sm px-3 py-2 text-sm shadow-sm transition-colors placeholder:text-slate-400 dark:placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/30 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ls.displayName="Input";function K2(e,[t,r]){return Math.min(r,Math.max(t,e))}function js(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function X_(e,t=[]){let r=[];function n(i,c){const d=A.createContext(c),l=r.length;r=[...r,c];const o=y=>{var g;const{scope:m,children:u,...b}=y,f=((g=m==null?void 0:m[e])==null?void 0:g[l])||d,_=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:_,children:u})};o.displayName=i+"Provider";function p(y,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[l])||d,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(d){const l=(d==null?void 0:d[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...d,[e]:l}}),[d,l])}};return s.scopeName=e,[n,V$(s,...t)]}function V$(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((d,{useScope:l,scopeName:o})=>{const y=l(i)[`__scope${o}`];return{...d,...y}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function G2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function w4(...e){return t=>{let r=!1;const n=e.map(s=>{const i=G2(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():G2(e[s],null)}}}}function si(...e){return A.useCallback(w4(...e),e)}function _g(e){const t=$$(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,d=A.Children.toArray(i),l=d.find(z$);if(l){const o=l.props.children,p=d.map(y=>y===l?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:y);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function $$(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=q$(s),d=H$(i,s.props);return s.type!==A.Fragment&&(d.ref=n?w4(n,c):c),A.cloneElement(s,d)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var W$=Symbol("radix.slottable");function z$(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===W$}function H$(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...d)=>{const l=i(...d);return s(...d),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function q$(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function K$(e){const t=e+"CollectionProvider",[r,n]=X_(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=f=>{const{scope:_,children:g}=f,v=pt.useRef(null),w=pt.useRef(new Map).current;return a.jsx(s,{scope:_,itemMap:w,collectionRef:v,children:g})};c.displayName=t;const d=e+"CollectionSlot",l=_g(d),o=pt.forwardRef((f,_)=>{const{scope:g,children:v}=f,w=i(d,g),S=si(_,w.collectionRef);return a.jsx(l,{ref:S,children:v})});o.displayName=d;const p=e+"CollectionItemSlot",y="data-radix-collection-item",m=_g(p),u=pt.forwardRef((f,_)=>{const{scope:g,children:v,...w}=f,S=pt.useRef(null),E=si(_,S),O=i(p,g);return pt.useEffect(()=>(O.itemMap.set(S,{ref:S,...w}),()=>void O.itemMap.delete(S))),a.jsx(m,{[y]:"",ref:E,children:v})});u.displayName=p;function b(f){const _=i(e+"CollectionConsumer",f);return pt.useCallback(()=>{const v=_.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${y}]`));return Array.from(_.itemMap.values()).sort((O,C)=>w.indexOf(O.ref.current)-w.indexOf(C.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:c,Slot:o,ItemSlot:u},b,n]}var G$=A.createContext(void 0);function Y$(e){const t=A.useContext(G$);return e||t||"ltr"}var J$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cs=J$.reduce((e,t)=>{const r=_g(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...d}=s,l=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...d,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Q$(e,t){e&&Qc.flushSync(()=>e.dispatchEvent(t))}function X$(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e);A.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Z$="DismissableLayer",Cb="dismissableLayer.update",eW="dismissableLayer.pointerDownOutside",tW="dismissableLayer.focusOutside",Y2,_4=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),x4=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:d,...l}=e,o=A.useContext(_4),[p,y]=A.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=A.useState({}),b=si(t,C=>y(C)),f=Array.from(o.layers),[_]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(_),v=p?f.indexOf(p):-1,w=o.layersWithOutsidePointerEventsDisabled.size>0,S=v>=g,E=sW(C=>{const k=C.target,T=[...o.branches].some(h=>h.contains(k));!S||T||(s==null||s(C),c==null||c(C),C.defaultPrevented||d==null||d())},m),O=iW(C=>{const k=C.target;[...o.branches].some(h=>h.contains(k))||(i==null||i(C),c==null||c(C),C.defaultPrevented||d==null||d())},m);return X$(C=>{v===o.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&d&&(C.preventDefault(),d()))},m),A.useEffect(()=>{if(p)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(Y2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(p)),o.layers.add(p),J2(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Y2)}},[p,m,r,o]),A.useEffect(()=>()=>{p&&(o.layers.delete(p),o.layersWithOutsidePointerEventsDisabled.delete(p),J2())},[p,o]),A.useEffect(()=>{const C=()=>u({});return document.addEventListener(Cb,C),()=>document.removeEventListener(Cb,C)},[]),a.jsx(Cs.div,{...l,ref:b,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:js(e.onFocusCapture,O.onFocusCapture),onBlurCapture:js(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:js(e.onPointerDownCapture,E.onPointerDownCapture)})});x4.displayName=Z$;var rW="DismissableLayerBranch",nW=A.forwardRef((e,t)=>{const r=A.useContext(_4),n=A.useRef(null),s=si(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(Cs.div,{...e,ref:s})});nW.displayName=rW;function sW(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=d=>{if(d.target&&!n.current){let l=function(){S4(eW,r,o,{discrete:!0})};const o={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function iW(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!n.current&&S4(tW,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function J2(){const e=new CustomEvent(Cb);document.dispatchEvent(e)}function S4(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Q$(s,i):s.dispatchEvent(i)}var T0=0;function aW(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Q2()),document.body.insertAdjacentElement("beforeend",e[1]??Q2()),T0++,()=>{T0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),T0--}},[])}function Q2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var P0="focusScope.autoFocusOnMount",N0="focusScope.autoFocusOnUnmount",X2={bubbles:!1,cancelable:!0},oW="FocusScope",E4=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=e,[d,l]=A.useState(null),o=Wi(s),p=Wi(i),y=A.useRef(null),m=si(t,f=>l(f)),u=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let f=function(w){if(u.paused||!d)return;const S=w.target;d.contains(S)?y.current=S:bc(y.current,{select:!0})},_=function(w){if(u.paused||!d)return;const S=w.relatedTarget;S!==null&&(d.contains(S)||bc(y.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const E of w)E.removedNodes.length>0&&bc(d)};document.addEventListener("focusin",f),document.addEventListener("focusout",_);const v=new MutationObserver(g);return d&&v.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",_),v.disconnect()}}},[n,d,u.paused]),A.useEffect(()=>{if(d){eE.add(u);const f=document.activeElement;if(!d.contains(f)){const g=new CustomEvent(P0,X2);d.addEventListener(P0,o),d.dispatchEvent(g),g.defaultPrevented||(cW(hW(R4(d)),{select:!0}),document.activeElement===f&&bc(d))}return()=>{d.removeEventListener(P0,o),setTimeout(()=>{const g=new CustomEvent(N0,X2);d.addEventListener(N0,p),d.dispatchEvent(g),g.defaultPrevented||bc(f??document.body,{select:!0}),d.removeEventListener(N0,p),eE.remove(u)},0)}}},[d,o,p,u]);const b=A.useCallback(f=>{if(!r&&!n||u.paused)return;const _=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(_&&g){const v=f.currentTarget,[w,S]=lW(v);w&&S?!f.shiftKey&&g===S?(f.preventDefault(),r&&bc(w,{select:!0})):f.shiftKey&&g===w&&(f.preventDefault(),r&&bc(S,{select:!0})):g===v&&f.preventDefault()}},[r,n,u.paused]);return a.jsx(Cs.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});E4.displayName=oW;function cW(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(bc(n,{select:t}),document.activeElement!==r)return}function lW(e){const t=R4(e),r=Z2(t,e),n=Z2(t.reverse(),e);return[r,n]}function R4(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Z2(e,t){for(const r of e)if(!dW(r,{upTo:t}))return r}function dW(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uW(e){return e instanceof HTMLInputElement&&"select"in e}function bc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&uW(e)&&t&&e.select()}}var eE=pW();function pW(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=tE(e,t),e.unshift(t)},remove(t){var r;e=tE(e,t),(r=e[0])==null||r.resume()}}}function tE(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function hW(e){return e.filter(t=>t.tagName!=="A")}var fW=Kc[" useId ".trim().toString()]||(()=>{}),mW=0;function Z_(e){const[t,r]=A.useState(fW());return zn(()=>{r(n=>n??String(mW++))},[e]),t?`radix-${t}`:""}var gW="Arrow",k4=A.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(Cs.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});k4.displayName=gW;var vW=k4;function yW(e){const[t,r]=A.useState(void 0);return zn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let c,d;if("borderBoxSize"in i){const l=i.borderBoxSize,o=Array.isArray(l)?l[0]:l;c=o.inlineSize,d=o.blockSize}else c=e.offsetWidth,d=e.offsetHeight;r({width:c,height:d})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var ex="Popper",[C4,T4]=X_(ex),[bW,P4]=C4(ex),N4=e=>{const{__scopePopper:t,children:r}=e,[n,s]=A.useState(null);return a.jsx(bW,{scope:t,anchor:n,onAnchorChange:s,children:r})};N4.displayName=ex;var A4="PopperAnchor",O4=A.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=P4(A4,r),c=A.useRef(null),d=si(t,c);return A.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||c.current)}),n?null:a.jsx(Cs.div,{...s,ref:d})});O4.displayName=A4;var tx="PopperContent",[wW,_W]=C4(tx),j4=A.forwardRef((e,t)=>{var ie,$e,je,se,ue,Ce;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:l=!0,collisionBoundary:o=[],collisionPadding:p=0,sticky:y="partial",hideWhenDetached:m=!1,updatePositionStrategy:u="optimized",onPlaced:b,...f}=e,_=P4(tx,r),[g,v]=A.useState(null),w=si(t,He=>v(He)),[S,E]=A.useState(null),O=yW(S),C=(O==null?void 0:O.width)??0,k=(O==null?void 0:O.height)??0,T=n+(i!=="center"?"-"+i:""),h=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},x=Array.isArray(o)?o:[o],R=x.length>0,P={padding:h,boundary:x.filter(SW),altBoundary:R},{refs:N,floatingStyles:j,placement:D,isPositioned:L,middlewareData:M}=HP({strategy:"fixed",placement:T,whileElementsMounted:(...He)=>WP(...He,{animationFrame:u==="always"}),elements:{reference:_.anchor},middleware:[qP({mainAxis:s+k,alignmentAxis:c}),l&&KP({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?GP():void 0,...P}),l&&YP({...P}),JP({...P,apply:({elements:He,rects:$t,availableWidth:nr,availableHeight:Ct})=>{const{width:cr,height:br}=$t.reference,jt=He.floating.style;jt.setProperty("--radix-popper-available-width",`${nr}px`),jt.setProperty("--radix-popper-available-height",`${Ct}px`),jt.setProperty("--radix-popper-anchor-width",`${cr}px`),jt.setProperty("--radix-popper-anchor-height",`${br}px`)}}),S&&XP({element:S,padding:d}),EW({arrowWidth:C,arrowHeight:k}),m&&QP({strategy:"referenceHidden",...P})]}),[I,G]=M4(D),de=Wi(b);zn(()=>{L&&(de==null||de())},[L,de]);const ee=(ie=M.arrow)==null?void 0:ie.x,Q=($e=M.arrow)==null?void 0:$e.y,ae=((je=M.arrow)==null?void 0:je.centerOffset)!==0,[_e,Se]=A.useState();return zn(()=>{g&&Se(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:L?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(se=M.transformOrigin)==null?void 0:se.x,(ue=M.transformOrigin)==null?void 0:ue.y].join(" "),...((Ce=M.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(wW,{scope:r,placedSide:I,onArrowChange:E,arrowX:ee,arrowY:Q,shouldHideArrow:ae,children:a.jsx(Cs.div,{"data-side":I,"data-align":G,...f,ref:w,style:{...f.style,animation:L?void 0:"none"}})})})});j4.displayName=tx;var D4="PopperArrow",xW={top:"bottom",right:"left",bottom:"top",left:"right"},I4=A.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=_W(D4,n),c=xW[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(vW,{...s,ref:r,style:{...s.style,display:"block"}})})});I4.displayName=D4;function SW(e){return e!==null}var EW=e=>({name:"transformOrigin",options:e,fn(t){var _,g,v;const{placement:r,rects:n,middlewareData:s}=t,c=((_=s.arrow)==null?void 0:_.centerOffset)!==0,d=c?0:e.arrowWidth,l=c?0:e.arrowHeight,[o,p]=M4(r),y={start:"0%",center:"50%",end:"100%"}[p],m=(((g=s.arrow)==null?void 0:g.x)??0)+d/2,u=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let b="",f="";return o==="bottom"?(b=c?y:`${m}px`,f=`${-l}px`):o==="top"?(b=c?y:`${m}px`,f=`${n.floating.height+l}px`):o==="right"?(b=`${-l}px`,f=c?y:`${u}px`):o==="left"&&(b=`${n.floating.width+l}px`,f=c?y:`${u}px`),{data:{x:b,y:f}}}});function M4(e){const[t,r="center"]=e.split("-");return[t,r]}var RW=N4,kW=O4,CW=j4,TW=I4,PW="Portal",L4=A.forwardRef((e,t)=>{var d;const{container:r,...n}=e,[s,i]=A.useState(!1);zn(()=>i(!0),[]);const c=r||s&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?zg.createPortal(a.jsx(Cs.div,{...n,ref:t}),c):null});L4.displayName=PW;var NW=Kc[" useInsertionEffect ".trim().toString()]||zn;function rE({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,c]=AW({defaultProp:t,onChange:r}),d=e!==void 0,l=d?e:s;{const p=A.useRef(e!==void 0);A.useEffect(()=>{const y=p.current;y!==d&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,n])}const o=A.useCallback(p=>{var y;if(d){const m=OW(p)?p(e):p;m!==e&&((y=c.current)==null||y.call(c,m))}else i(p)},[d,e,i,c]);return[l,o]}function AW({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),s=A.useRef(r),i=A.useRef(t);return NW(()=>{i.current=t},[t]),A.useEffect(()=>{var c;s.current!==r&&((c=i.current)==null||c.call(i,r),s.current=r)},[r,s]),[r,n,i]}function OW(e){return typeof e=="function"}function jW(e){const t=A.useRef({value:e,previous:e});return A.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var F4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),DW="VisuallyHidden",IW=A.forwardRef((e,t)=>a.jsx(Cs.span,{...e,ref:t,style:{...F4,...e.style}}));IW.displayName=DW;var MW=[" ","Enter","ArrowUp","ArrowDown"],LW=[" ","Enter"],nd="Select",[mv,gv,FW]=K$(nd),[Uu,JK]=X_(nd,[FW,T4]),vv=T4(),[BW,el]=Uu(nd),[UW,VW]=Uu(nd),B4=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:c,defaultValue:d,onValueChange:l,dir:o,name:p,autoComplete:y,disabled:m,required:u,form:b}=e,f=vv(t),[_,g]=A.useState(null),[v,w]=A.useState(null),[S,E]=A.useState(!1),O=Y$(o),[C,k]=rE({prop:n,defaultProp:s??!1,onChange:i,caller:nd}),[T,h]=rE({prop:c,defaultProp:d,onChange:l,caller:nd}),x=A.useRef(null),R=_?b||!!_.closest("form"):!0,[P,N]=A.useState(new Set),j=Array.from(P).map(D=>D.props.value).join(";");return a.jsx(RW,{...f,children:a.jsxs(BW,{required:u,scope:t,trigger:_,onTriggerChange:g,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:E,contentId:Z_(),value:T,onValueChange:h,open:C,onOpenChange:k,dir:O,triggerPointerDownPosRef:x,disabled:m,children:[a.jsx(mv.Provider,{scope:t,children:a.jsx(UW,{scope:e.__scopeSelect,onNativeOptionAdd:A.useCallback(D=>{N(L=>new Set(L).add(D))},[]),onNativeOptionRemove:A.useCallback(D=>{N(L=>{const M=new Set(L);return M.delete(D),M})},[]),children:r})}),R?a.jsxs(oA,{"aria-hidden":!0,required:u,tabIndex:-1,name:p,autoComplete:y,value:T,onChange:D=>h(D.target.value),disabled:m,form:b,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(P)]},j):null]})})};B4.displayName=nd;var U4="SelectTrigger",V4=A.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=vv(r),c=el(U4,r),d=c.disabled||n,l=si(t,c.onTriggerChange),o=gv(r),p=A.useRef("touch"),[y,m,u]=lA(f=>{const _=o().filter(w=>!w.disabled),g=_.find(w=>w.value===c.value),v=dA(_,f,g);v!==void 0&&c.onValueChange(v.value)}),b=f=>{d||(c.onOpenChange(!0),u()),f&&(c.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return a.jsx(kW,{asChild:!0,...i,children:a.jsx(Cs.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":cA(c.value)?"":void 0,...s,ref:l,onClick:js(s.onClick,f=>{f.currentTarget.focus(),p.current!=="mouse"&&b(f)}),onPointerDown:js(s.onPointerDown,f=>{p.current=f.pointerType;const _=f.target;_.hasPointerCapture(f.pointerId)&&_.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(b(f),f.preventDefault())}),onKeyDown:js(s.onKeyDown,f=>{const _=y.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&m(f.key),!(_&&f.key===" ")&&MW.includes(f.key)&&(b(),f.preventDefault())})})})});V4.displayName=U4;var $4="SelectValue",W4=A.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:c="",...d}=e,l=el($4,r),{onValueNodeHasChildrenChange:o}=l,p=i!==void 0,y=si(t,l.onValueNodeChange);return zn(()=>{o(p)},[o,p]),a.jsx(Cs.span,{...d,ref:y,style:{pointerEvents:"none"},children:cA(l.value)?a.jsx(a.Fragment,{children:c}):i})});W4.displayName=$4;var $W="SelectIcon",z4=A.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return a.jsx(Cs.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});z4.displayName=$W;var WW="SelectPortal",H4=e=>a.jsx(L4,{asChild:!0,...e});H4.displayName=WW;var sd="SelectContent",q4=A.forwardRef((e,t)=>{const r=el(sd,e.__scopeSelect),[n,s]=A.useState();if(zn(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Qc.createPortal(a.jsx(K4,{scope:e.__scopeSelect,children:a.jsx(mv.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(G4,{...e,ref:t})});q4.displayName=sd;var Ra=10,[K4,tl]=Uu(sd),zW="SelectContentImpl",HW=_g("SelectContent.RemoveScroll"),G4=A.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:c,side:d,sideOffset:l,align:o,alignOffset:p,arrowPadding:y,collisionBoundary:m,collisionPadding:u,sticky:b,hideWhenDetached:f,avoidCollisions:_,...g}=e,v=el(sd,r),[w,S]=A.useState(null),[E,O]=A.useState(null),C=si(t,ie=>S(ie)),[k,T]=A.useState(null),[h,x]=A.useState(null),R=gv(r),[P,N]=A.useState(!1),j=A.useRef(!1);A.useEffect(()=>{if(w)return W_(w)},[w]),aW();const D=A.useCallback(ie=>{const[$e,...je]=R().map(Ce=>Ce.ref.current),[se]=je.slice(-1),ue=document.activeElement;for(const Ce of ie)if(Ce===ue||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===$e&&E&&(E.scrollTop=0),Ce===se&&E&&(E.scrollTop=E.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==ue))return},[R,E]),L=A.useCallback(()=>D([k,w]),[D,k,w]);A.useEffect(()=>{P&&L()},[P,L]);const{onOpenChange:M,triggerPointerDownPosRef:I}=v;A.useEffect(()=>{if(w){let ie={x:0,y:0};const $e=se=>{var ue,Ce;ie={x:Math.abs(Math.round(se.pageX)-(((ue=I.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(se.pageY)-(((Ce=I.current)==null?void 0:Ce.y)??0))}},je=se=>{ie.x<=10&&ie.y<=10?se.preventDefault():w.contains(se.target)||M(!1),document.removeEventListener("pointermove",$e),I.current=null};return I.current!==null&&(document.addEventListener("pointermove",$e),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$e),document.removeEventListener("pointerup",je,{capture:!0})}}},[w,M,I]),A.useEffect(()=>{const ie=()=>M(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[M]);const[G,de]=lA(ie=>{const $e=R().filter(ue=>!ue.disabled),je=$e.find(ue=>ue.ref.current===document.activeElement),se=dA($e,ie,je);se&&setTimeout(()=>se.ref.current.focus())}),ee=A.useCallback((ie,$e,je)=>{const se=!j.current&&!je;(v.value!==void 0&&v.value===$e||se)&&(T(ie),se&&(j.current=!0))},[v.value]),Q=A.useCallback(()=>w==null?void 0:w.focus(),[w]),ae=A.useCallback((ie,$e,je)=>{const se=!j.current&&!je;(v.value!==void 0&&v.value===$e||se)&&x(ie)},[v.value]),_e=n==="popper"?Tb:Y4,Se=_e===Tb?{side:d,sideOffset:l,align:o,alignOffset:p,arrowPadding:y,collisionBoundary:m,collisionPadding:u,sticky:b,hideWhenDetached:f,avoidCollisions:_}:{};return a.jsx(K4,{scope:r,content:w,viewport:E,onViewportChange:O,itemRefCallback:ee,selectedItem:k,onItemLeave:Q,itemTextRefCallback:ae,focusSelectedItem:L,selectedItemText:h,position:n,isPositioned:P,searchRef:G,children:a.jsx(pv,{as:HW,allowPinchZoom:!0,children:a.jsx(E4,{asChild:!0,trapped:v.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:js(s,ie=>{var $e;($e=v.trigger)==null||$e.focus({preventScroll:!0}),ie.preventDefault()}),children:a.jsx(x4,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(_e,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:ie=>ie.preventDefault(),...g,...Se,onPlaced:()=>N(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:js(g.onKeyDown,ie=>{const $e=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!$e&&ie.key.length===1&&de(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let se=R().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const ue=ie.target,Ce=se.indexOf(ue);se=se.slice(Ce+1)}setTimeout(()=>D(se)),ie.preventDefault()}})})})})})})});G4.displayName=zW;var qW="SelectItemAlignedPosition",Y4=A.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=el(sd,r),c=tl(sd,r),[d,l]=A.useState(null),[o,p]=A.useState(null),y=si(t,C=>p(C)),m=gv(r),u=A.useRef(!1),b=A.useRef(!0),{viewport:f,selectedItem:_,selectedItemText:g,focusSelectedItem:v}=c,w=A.useCallback(()=>{if(i.trigger&&i.valueNode&&d&&o&&f&&_&&g){const C=i.trigger.getBoundingClientRect(),k=o.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),h=g.getBoundingClientRect();if(i.dir!=="rtl"){const ue=h.left-k.left,Ce=T.left-ue,He=C.left-Ce,$t=C.width+He,nr=Math.max($t,k.width),Ct=window.innerWidth-Ra,cr=K2(Ce,[Ra,Math.max(Ra,Ct-nr)]);d.style.minWidth=$t+"px",d.style.left=cr+"px"}else{const ue=k.right-h.right,Ce=window.innerWidth-T.right-ue,He=window.innerWidth-C.right-Ce,$t=C.width+He,nr=Math.max($t,k.width),Ct=window.innerWidth-Ra,cr=K2(Ce,[Ra,Math.max(Ra,Ct-nr)]);d.style.minWidth=$t+"px",d.style.right=cr+"px"}const x=m(),R=window.innerHeight-Ra*2,P=f.scrollHeight,N=window.getComputedStyle(o),j=parseInt(N.borderTopWidth,10),D=parseInt(N.paddingTop,10),L=parseInt(N.borderBottomWidth,10),M=parseInt(N.paddingBottom,10),I=j+D+P+M+L,G=Math.min(_.offsetHeight*5,I),de=window.getComputedStyle(f),ee=parseInt(de.paddingTop,10),Q=parseInt(de.paddingBottom,10),ae=C.top+C.height/2-Ra,_e=R-ae,Se=_.offsetHeight/2,ie=_.offsetTop+Se,$e=j+D+ie,je=I-$e;if($e<=ae){const ue=x.length>0&&_===x[x.length-1].ref.current;d.style.bottom="0px";const Ce=o.clientHeight-f.offsetTop-f.offsetHeight,He=Math.max(_e,Se+(ue?Q:0)+Ce+L),$t=$e+He;d.style.height=$t+"px"}else{const ue=x.length>0&&_===x[0].ref.current;d.style.top="0px";const He=Math.max(ae,j+f.offsetTop+(ue?ee:0)+Se)+je;d.style.height=He+"px",f.scrollTop=$e-ae+f.offsetTop}d.style.margin=`${Ra}px 0`,d.style.minHeight=G+"px",d.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>u.current=!0)}},[m,i.trigger,i.valueNode,d,o,f,_,g,i.dir,n]);zn(()=>w(),[w]);const[S,E]=A.useState();zn(()=>{o&&E(window.getComputedStyle(o).zIndex)},[o]);const O=A.useCallback(C=>{C&&b.current===!0&&(w(),v==null||v(),b.current=!1)},[w,v]);return a.jsx(GW,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:u,onScrollButtonChange:O,children:a.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:a.jsx(Cs.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Y4.displayName=qW;var KW="SelectPopperPosition",Tb=A.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Ra,...i}=e,c=vv(r);return a.jsx(CW,{...c,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Tb.displayName=KW;var[GW,rx]=Uu(sd,{}),Pb="SelectViewport",J4=A.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=tl(Pb,r),c=rx(Pb,r),d=si(t,i.onViewportChange),l=A.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(mv.Slot,{scope:r,children:a.jsx(Cs.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:d,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:js(s.onScroll,o=>{const p=o.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:m}=c;if(m!=null&&m.current&&y){const u=Math.abs(l.current-p.scrollTop);if(u>0){const b=window.innerHeight-Ra*2,f=parseFloat(y.style.minHeight),_=parseFloat(y.style.height),g=Math.max(f,_);if(g<b){const v=g+u,w=Math.min(b,v),S=v-w;y.style.height=w+"px",y.style.bottom==="0px"&&(p.scrollTop=S>0?S:0,y.style.justifyContent="flex-end")}}}l.current=p.scrollTop})})})]})});J4.displayName=Pb;var Q4="SelectGroup",[YW,JW]=Uu(Q4),QW=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Z_();return a.jsx(YW,{scope:r,id:s,children:a.jsx(Cs.div,{role:"group","aria-labelledby":s,...n,ref:t})})});QW.displayName=Q4;var X4="SelectLabel",Z4=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=JW(X4,r);return a.jsx(Cs.div,{id:s.id,...n,ref:t})});Z4.displayName=X4;var xg="SelectItem",[XW,eA]=Uu(xg),tA=A.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...c}=e,d=el(xg,r),l=tl(xg,r),o=d.value===n,[p,y]=A.useState(i??""),[m,u]=A.useState(!1),b=si(t,v=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,v,n,s)}),f=Z_(),_=A.useRef("touch"),g=()=>{s||(d.onValueChange(n),d.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(XW,{scope:r,value:n,disabled:s,textId:f,isSelected:o,onItemTextChange:A.useCallback(v=>{y(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(mv.ItemSlot,{scope:r,value:n,disabled:s,textValue:p,children:a.jsx(Cs.div,{role:"option","aria-labelledby":f,"data-highlighted":m?"":void 0,"aria-selected":o&&m,"data-state":o?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:b,onFocus:js(c.onFocus,()=>u(!0)),onBlur:js(c.onBlur,()=>u(!1)),onClick:js(c.onClick,()=>{_.current!=="mouse"&&g()}),onPointerUp:js(c.onPointerUp,()=>{_.current==="mouse"&&g()}),onPointerDown:js(c.onPointerDown,v=>{_.current=v.pointerType}),onPointerMove:js(c.onPointerMove,v=>{var w;_.current=v.pointerType,s?(w=l.onItemLeave)==null||w.call(l):_.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:js(c.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:js(c.onKeyDown,v=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(LW.includes(v.key)&&g(),v.key===" "&&v.preventDefault())})})})})});tA.displayName=xg;var Op="SelectItemText",rA=A.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,c=el(Op,r),d=tl(Op,r),l=eA(Op,r),o=VW(Op,r),[p,y]=A.useState(null),m=si(t,g=>y(g),l.onItemTextChange,g=>{var v;return(v=d.itemTextRefCallback)==null?void 0:v.call(d,g,l.value,l.disabled)}),u=p==null?void 0:p.textContent,b=A.useMemo(()=>a.jsx("option",{value:l.value,disabled:l.disabled,children:u},l.value),[l.disabled,l.value,u]),{onNativeOptionAdd:f,onNativeOptionRemove:_}=o;return zn(()=>(f(b),()=>_(b)),[f,_,b]),a.jsxs(a.Fragment,{children:[a.jsx(Cs.span,{id:l.textId,...i,ref:m}),l.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Qc.createPortal(i.children,c.valueNode):null]})});rA.displayName=Op;var nA="SelectItemIndicator",sA=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return eA(nA,r).isSelected?a.jsx(Cs.span,{"aria-hidden":!0,...n,ref:t}):null});sA.displayName=nA;var Nb="SelectScrollUpButton",ZW=A.forwardRef((e,t)=>{const r=tl(Nb,e.__scopeSelect),n=rx(Nb,e.__scopeSelect),[s,i]=A.useState(!1),c=si(t,n.onScrollButtonChange);return zn(()=>{if(r.viewport&&r.isPositioned){let d=function(){const o=l.scrollTop>0;i(o)};const l=r.viewport;return d(),l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),s?a.jsx(iA,{...e,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:l}=r;d&&l&&(d.scrollTop=d.scrollTop-l.offsetHeight)}}):null});ZW.displayName=Nb;var Ab="SelectScrollDownButton",ez=A.forwardRef((e,t)=>{const r=tl(Ab,e.__scopeSelect),n=rx(Ab,e.__scopeSelect),[s,i]=A.useState(!1),c=si(t,n.onScrollButtonChange);return zn(()=>{if(r.viewport&&r.isPositioned){let d=function(){const o=l.scrollHeight-l.clientHeight,p=Math.ceil(l.scrollTop)<o;i(p)};const l=r.viewport;return d(),l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[r.viewport,r.isPositioned]),s?a.jsx(iA,{...e,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:l}=r;d&&l&&(d.scrollTop=d.scrollTop+l.offsetHeight)}}):null});ez.displayName=Ab;var iA=A.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=tl("SelectScrollButton",r),c=A.useRef(null),d=gv(r),l=A.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return A.useEffect(()=>()=>l(),[l]),zn(()=>{var p;const o=d().find(y=>y.ref.current===document.activeElement);(p=o==null?void 0:o.ref.current)==null||p.scrollIntoView({block:"nearest"})},[d]),a.jsx(Cs.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:js(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(n,50))}),onPointerMove:js(s.onPointerMove,()=>{var o;(o=i.onItemLeave)==null||o.call(i),c.current===null&&(c.current=window.setInterval(n,50))}),onPointerLeave:js(s.onPointerLeave,()=>{l()})})}),tz="SelectSeparator",aA=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx(Cs.div,{"aria-hidden":!0,...n,ref:t})});aA.displayName=tz;var Ob="SelectArrow",rz=A.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=vv(r),i=el(Ob,r),c=tl(Ob,r);return i.open&&c.position==="popper"?a.jsx(TW,{...s,...n,ref:t}):null});rz.displayName=Ob;var nz="SelectBubbleInput",oA=A.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=A.useRef(null),i=si(n,s),c=jW(t);return A.useEffect(()=>{const d=s.current;if(!d)return;const l=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(l,"value").set;if(c!==t&&p){const y=new Event("change",{bubbles:!0});p.call(d,t),d.dispatchEvent(y)}},[c,t]),a.jsx(Cs.select,{...r,style:{...F4,...r.style},ref:i,defaultValue:t})});oA.displayName=nz;function cA(e){return e===""||e===void 0}function lA(e){const t=Wi(e),r=A.useRef(""),n=A.useRef(0),s=A.useCallback(c=>{const d=r.current+c;t(d),function l(o){r.current=o,window.clearTimeout(n.current),o!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(d)},[t]),i=A.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function dA(e,t,r){const s=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let c=sz(e,Math.max(i,0));s.length===1&&(c=c.filter(o=>o!==r));const l=c.find(o=>o.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function sz(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var iz=B4,uA=V4,az=W4,oz=z4,cz=H4,pA=q4,lz=J4,hA=Z4,fA=tA,dz=rA,uz=sA,mA=aA;const Qa=iz,Xa=az,Aa=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(uA,{ref:n,className:Ur("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,a.jsx(oz,{asChild:!0,children:a.jsx(uI,{className:"h-4 w-4 opacity-50"})})]}));Aa.displayName=uA.displayName;const Oa=A.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>a.jsx(cz,{children:a.jsx(pA,{ref:s,className:Ur("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:a.jsx(lz,{className:Ur("p-1 max-h-60 overflow-y-auto",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));Oa.displayName=pA.displayName;const pz=A.forwardRef(({className:e,...t},r)=>a.jsx(hA,{ref:r,className:Ur("px-2 py-1.5 text-sm font-semibold",e),...t}));pz.displayName=hA.displayName;const qr=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(fA,{ref:n,className:Ur("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(uz,{children:a.jsx($w,{className:"h-4 w-4"})})}),a.jsx(dz,{children:t})]}));qr.displayName=fA.displayName;const hz=A.forwardRef(({className:e,...t},r)=>a.jsx(mA,{ref:r,className:Ur("-mx-1 my-1 h-px bg-muted",e),...t}));hz.displayName=mA.displayName;const id=A.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:Ur("flex min-h-[80px] w-full rounded-xl border border-slate-200/60 dark:border-zinc-700/60 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-sm px-3 py-2 text-base placeholder:text-slate-400 dark:placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/30 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));id.displayName="Textarea";const fz=Yg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gn=A.forwardRef(({className:e,...t},r)=>a.jsx("label",{ref:r,className:Ur(fz(),e),...t}));gn.displayName="Label";function Fc(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function nE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gA(...e){return t=>{let r=!1;const n=e.map(s=>{const i=nE(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():nE(e[s],null)}}}}function ud(...e){return A.useCallback(gA(...e),e)}function mz(e,t){const r=A.createContext(t),n=i=>{const{children:c,...d}=i,l=A.useMemo(()=>d,Object.values(d));return a.jsx(r.Provider,{value:l,children:c})};n.displayName=e+"Provider";function s(i){const c=A.useContext(r);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function gz(e,t=[]){let r=[];function n(i,c){const d=A.createContext(c),l=r.length;r=[...r,c];const o=y=>{var g;const{scope:m,children:u,...b}=y,f=((g=m==null?void 0:m[e])==null?void 0:g[l])||d,_=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:_,children:u})};o.displayName=i+"Provider";function p(y,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[l])||d,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(d){const l=(d==null?void 0:d[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...d,[e]:l}}),[d,l])}};return s.scopeName=e,[n,vz(s,...t)]}function vz(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((d,{useScope:l,scopeName:o})=>{const y=l(i)[`__scope${o}`];return{...d,...y}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}var yz=Kc[" useId ".trim().toString()]||(()=>{}),bz=0;function A0(e){const[t,r]=A.useState(yz());return zn(()=>{r(n=>n??String(bz++))},[e]),e||(t?`radix-${t}`:"")}var wz=Kc[" useInsertionEffect ".trim().toString()]||zn;function _z({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,c]=xz({defaultProp:t,onChange:r}),d=e!==void 0,l=d?e:s;{const p=A.useRef(e!==void 0);A.useEffect(()=>{const y=p.current;y!==d&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,n])}const o=A.useCallback(p=>{var y;if(d){const m=Sz(p)?p(e):p;m!==e&&((y=c.current)==null||y.call(c,m))}else i(p)},[d,e,i,c]);return[l,o]}function xz({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),s=A.useRef(r),i=A.useRef(t);return wz(()=>{i.current=t},[t]),A.useEffect(()=>{var c;s.current!==r&&((c=i.current)==null||c.call(i,r),s.current=r)},[r,s]),[r,n,i]}function Sz(e){return typeof e=="function"}function vA(e){const t=Ez(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,d=A.Children.toArray(i),l=d.find(kz);if(l){const o=l.props.children,p=d.map(y=>y===l?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:y);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function Ez(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=Tz(s),d=Cz(i,s.props);return s.type!==A.Fragment&&(d.ref=n?gA(n,c):c),A.cloneElement(s,d)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rz=Symbol("radix.slottable");function kz(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rz}function Cz(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...d)=>{const l=i(...d);return s(...d),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function Tz(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Pz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bo=Pz.reduce((e,t)=>{const r=vA(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...d}=s,l=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...d,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Nz(e,t){e&&Qc.flushSync(()=>e.dispatchEvent(t))}function Az(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e);A.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Oz="DismissableLayer",jb="dismissableLayer.update",jz="dismissableLayer.pointerDownOutside",Dz="dismissableLayer.focusOutside",sE,yA=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bA=A.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:d,...l}=e,o=A.useContext(yA),[p,y]=A.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=A.useState({}),b=ud(t,C=>y(C)),f=Array.from(o.layers),[_]=[...o.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(_),v=p?f.indexOf(p):-1,w=o.layersWithOutsidePointerEventsDisabled.size>0,S=v>=g,E=Lz(C=>{const k=C.target,T=[...o.branches].some(h=>h.contains(k));!S||T||(s==null||s(C),c==null||c(C),C.defaultPrevented||d==null||d())},m),O=Fz(C=>{const k=C.target;[...o.branches].some(h=>h.contains(k))||(i==null||i(C),c==null||c(C),C.defaultPrevented||d==null||d())},m);return Az(C=>{v===o.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&d&&(C.preventDefault(),d()))},m),A.useEffect(()=>{if(p)return r&&(o.layersWithOutsidePointerEventsDisabled.size===0&&(sE=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),o.layersWithOutsidePointerEventsDisabled.add(p)),o.layers.add(p),iE(),()=>{r&&o.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=sE)}},[p,m,r,o]),A.useEffect(()=>()=>{p&&(o.layers.delete(p),o.layersWithOutsidePointerEventsDisabled.delete(p),iE())},[p,o]),A.useEffect(()=>{const C=()=>u({});return document.addEventListener(jb,C),()=>document.removeEventListener(jb,C)},[]),a.jsx(Bo.div,{...l,ref:b,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Fc(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Fc(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Fc(e.onPointerDownCapture,E.onPointerDownCapture)})});bA.displayName=Oz;var Iz="DismissableLayerBranch",Mz=A.forwardRef((e,t)=>{const r=A.useContext(yA),n=A.useRef(null),s=ud(t,n);return A.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(Bo.div,{...e,ref:s})});Mz.displayName=Iz;function Lz(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=d=>{if(d.target&&!n.current){let l=function(){wA(jz,r,o,{discrete:!0})};const o={originalEvent:d};d.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Fz(e,t=globalThis==null?void 0:globalThis.document){const r=Wi(e),n=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!n.current&&wA(Dz,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function iE(){const e=new CustomEvent(jb);document.dispatchEvent(e)}function wA(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Nz(s,i):s.dispatchEvent(i)}var O0="focusScope.autoFocusOnMount",j0="focusScope.autoFocusOnUnmount",aE={bubbles:!1,cancelable:!0},Bz="FocusScope",_A=A.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=e,[d,l]=A.useState(null),o=Wi(s),p=Wi(i),y=A.useRef(null),m=ud(t,f=>l(f)),u=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let f=function(w){if(u.paused||!d)return;const S=w.target;d.contains(S)?y.current=S:wc(y.current,{select:!0})},_=function(w){if(u.paused||!d)return;const S=w.relatedTarget;S!==null&&(d.contains(S)||wc(y.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const E of w)E.removedNodes.length>0&&wc(d)};document.addEventListener("focusin",f),document.addEventListener("focusout",_);const v=new MutationObserver(g);return d&&v.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",_),v.disconnect()}}},[n,d,u.paused]),A.useEffect(()=>{if(d){cE.add(u);const f=document.activeElement;if(!d.contains(f)){const g=new CustomEvent(O0,aE);d.addEventListener(O0,o),d.dispatchEvent(g),g.defaultPrevented||(Uz(Hz(xA(d)),{select:!0}),document.activeElement===f&&wc(d))}return()=>{d.removeEventListener(O0,o),setTimeout(()=>{const g=new CustomEvent(j0,aE);d.addEventListener(j0,p),d.dispatchEvent(g),g.defaultPrevented||wc(f??document.body,{select:!0}),d.removeEventListener(j0,p),cE.remove(u)},0)}}},[d,o,p,u]);const b=A.useCallback(f=>{if(!r&&!n||u.paused)return;const _=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(_&&g){const v=f.currentTarget,[w,S]=Vz(v);w&&S?!f.shiftKey&&g===S?(f.preventDefault(),r&&wc(w,{select:!0})):f.shiftKey&&g===w&&(f.preventDefault(),r&&wc(S,{select:!0})):g===v&&f.preventDefault()}},[r,n,u.paused]);return a.jsx(Bo.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});_A.displayName=Bz;function Uz(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(wc(n,{select:t}),document.activeElement!==r)return}function Vz(e){const t=xA(e),r=oE(t,e),n=oE(t.reverse(),e);return[r,n]}function xA(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function oE(e,t){for(const r of e)if(!$z(r,{upTo:t}))return r}function $z(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Wz(e){return e instanceof HTMLInputElement&&"select"in e}function wc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Wz(e)&&t&&e.select()}}var cE=zz();function zz(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=lE(e,t),e.unshift(t)},remove(t){var r;e=lE(e,t),(r=e[0])==null||r.resume()}}}function lE(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Hz(e){return e.filter(t=>t.tagName!=="A")}var qz="Portal",SA=A.forwardRef((e,t)=>{var d;const{container:r,...n}=e,[s,i]=A.useState(!1);zn(()=>i(!0),[]);const c=r||s&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?zg.createPortal(a.jsx(Bo.div,{...n,ref:t}),c):null});SA.displayName=qz;function Kz(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var yv=e=>{const{present:t,children:r}=e,n=Gz(t),s=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=ud(n.ref,Yz(s));return typeof r=="function"||n.isPresent?A.cloneElement(s,{ref:i}):null};yv.displayName="Presence";function Gz(e){const[t,r]=A.useState(),n=A.useRef(null),s=A.useRef(e),i=A.useRef("none"),c=e?"mounted":"unmounted",[d,l]=Kz(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const o=em(n.current);i.current=d==="mounted"?o:"none"},[d]),zn(()=>{const o=n.current,p=s.current;if(p!==e){const m=i.current,u=em(o);e?l("MOUNT"):u==="none"||(o==null?void 0:o.display)==="none"?l("UNMOUNT"):l(p&&m!==u?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),zn(()=>{if(t){let o;const p=t.ownerDocument.defaultView??window,y=u=>{const f=em(n.current).includes(CSS.escape(u.animationName));if(u.target===t&&f&&(l("ANIMATION_END"),!s.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",o=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=u=>{u.target===t&&(i.current=em(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{p.clearTimeout(o),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:A.useCallback(o=>{n.current=o?getComputedStyle(o):null,r(o)},[])}}function em(e){return(e==null?void 0:e.animationName)||"none"}function Yz(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var D0=0;function Jz(){A.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dE()),document.body.insertAdjacentElement("beforeend",e[1]??dE()),D0++,()=>{D0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),D0--}},[])}function dE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bv="Dialog",[EA,QK]=gz(bv),[Qz,Va]=EA(bv),RA=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:c=!0}=e,d=A.useRef(null),l=A.useRef(null),[o,p]=_z({prop:n,defaultProp:s??!1,onChange:i,caller:bv});return a.jsx(Qz,{scope:t,triggerRef:d,contentRef:l,contentId:A0(),titleId:A0(),descriptionId:A0(),open:o,onOpenChange:p,onOpenToggle:A.useCallback(()=>p(y=>!y),[p]),modal:c,children:r})};RA.displayName=bv;var kA="DialogTrigger",CA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Va(kA,r),i=ud(t,s.triggerRef);return a.jsx(Bo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ix(s.open),...n,ref:i,onClick:Fc(e.onClick,s.onOpenToggle)})});CA.displayName=kA;var nx="DialogPortal",[Xz,TA]=EA(nx,{forceMount:void 0}),PA=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=Va(nx,t);return a.jsx(Xz,{scope:t,forceMount:r,children:A.Children.map(n,c=>a.jsx(yv,{present:r||i.open,children:a.jsx(SA,{asChild:!0,container:s,children:c})}))})};PA.displayName=nx;var Sg="DialogOverlay",NA=A.forwardRef((e,t)=>{const r=TA(Sg,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Va(Sg,e.__scopeDialog);return i.modal?a.jsx(yv,{present:n||i.open,children:a.jsx(eH,{...s,ref:t})}):null});NA.displayName=Sg;var Zz=vA("DialogOverlay.RemoveScroll"),eH=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Va(Sg,r);return a.jsx(pv,{as:Zz,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Bo.div,{"data-state":ix(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ad="DialogContent",AA=A.forwardRef((e,t)=>{const r=TA(ad,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Va(ad,e.__scopeDialog);return a.jsx(yv,{present:n||i.open,children:i.modal?a.jsx(tH,{...s,ref:t}):a.jsx(rH,{...s,ref:t})})});AA.displayName=ad;var tH=A.forwardRef((e,t)=>{const r=Va(ad,e.__scopeDialog),n=A.useRef(null),s=ud(t,r.contentRef,n);return A.useEffect(()=>{const i=n.current;if(i)return W_(i)},[]),a.jsx(OA,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fc(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Fc(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0;(c.button===2||d)&&i.preventDefault()}),onFocusOutside:Fc(e.onFocusOutside,i=>i.preventDefault())})}),rH=A.forwardRef((e,t)=>{const r=Va(ad,e.__scopeDialog),n=A.useRef(!1),s=A.useRef(!1);return a.jsx(OA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,d;(c=e.onCloseAutoFocus)==null||c.call(e,i),i.defaultPrevented||(n.current||(d=r.triggerRef.current)==null||d.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var l,o;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=i.target;((o=r.triggerRef.current)==null?void 0:o.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),OA=A.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...c}=e,d=Va(ad,r),l=A.useRef(null),o=ud(t,l);return Jz(),a.jsxs(a.Fragment,{children:[a.jsx(_A,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(bA,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":ix(d.open),...c,ref:o,onDismiss:()=>d.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(nH,{titleId:d.titleId}),a.jsx(iH,{contentRef:l,descriptionId:d.descriptionId})]})]})}),sx="DialogTitle",jA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Va(sx,r);return a.jsx(Bo.h2,{id:s.titleId,...n,ref:t})});jA.displayName=sx;var DA="DialogDescription",IA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Va(DA,r);return a.jsx(Bo.p,{id:s.descriptionId,...n,ref:t})});IA.displayName=DA;var MA="DialogClose",LA=A.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Va(MA,r);return a.jsx(Bo.button,{type:"button",...n,ref:t,onClick:Fc(e.onClick,()=>s.onOpenChange(!1))})});LA.displayName=MA;function ix(e){return e?"open":"closed"}var FA="DialogTitleWarning",[XK,BA]=mz(FA,{contentName:ad,titleName:sx,docsSlug:"dialog"}),nH=({titleId:e})=>{const t=BA(FA),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return A.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},sH="DialogDescriptionWarning",iH=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BA(sH).contentName}}.`;return A.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},aH=RA,oH=CA,cH=PA,UA=NA,VA=AA,$A=jA,WA=IA,lH=LA;const Eg=aH,dH=oH,uH=cH,zA=A.forwardRef(({className:e,...t},r)=>a.jsx(UA,{ref:r,className:Ur("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));zA.displayName=UA.displayName;const Rh=A.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(uH,{children:[a.jsx(zA,{}),a.jsxs(VA,{ref:n,className:Ur("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200/60 dark:border-zinc-700/60 bg-white/70 dark:bg-zinc-900/40 backdrop-blur-md p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",e),...r,children:[t,a.jsxs(lH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(og,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rh.displayName=VA.displayName;const kh=({className:e,...t})=>a.jsx("div",{className:Ur("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});kh.displayName="DialogHeader";const Ch=({className:e,...t})=>a.jsx("div",{className:Ur("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ch.displayName="DialogFooter";const Th=A.forwardRef(({className:e,...t},r)=>a.jsx($A,{ref:r,className:Ur("text-lg font-semibold leading-none tracking-tight",e),...t}));Th.displayName=$A.displayName;const Rg=A.forwardRef(({className:e,...t},r)=>a.jsx(WA,{ref:r,className:Ur("text-sm text-muted-foreground",e),...t}));Rg.displayName=WA.displayName;function pH(){const[e,t]=A.useState(""),[r,n]=A.useState(""),[s,i]=A.useState(!1),[c,d]=A.useState("all"),[l,o]=A.useState("all"),[p,y]=A.useState([]),[m,u]=A.useState(!1),[b,f]=A.useState(null),[_,g]=A.useState({doctorId:"",date:"",time:"",appointmentType:"OFFLINE",notes:""}),[v,w]=A.useState(!1),S="undefined/api/patient";A.useEffect(()=>{i(!0);const x=setTimeout(()=>{n(e)},400);return()=>clearTimeout(x)},[e]),A.useEffect(()=>{(async()=>{var R;try{const P=await Mt.get(`${S}/fetchAllDoctors`,{params:{search:r},withCredentials:!0});P.data.success&&y(P.data.data)}catch(P){Mt.isAxiosError(P)&&P.response?qt.error(((R=P.response.data)==null?void 0:R.message)||"Something went wrong"):qt.error("An unexpected error occurred.")}finally{i(!1)}})()},[r]);const E=["Cardiology","Dermatology","General Medicine","Neurology","Pediatrics","Psychiatry","Orthopedics","Gynecology"],O=["New York, NY","Los Angeles, CA","Chicago, IL","Boston, MA","Miami, FL","Seattle, WA"],C=p.filter(x=>{const R=x.user.name.toLowerCase().includes(r.toLowerCase())||x.specialty.toLowerCase().includes(r.toLowerCase()),P=c==="all"||x.specialty===c,N=l==="all"||x.clinicLocation===l;return R&&P&&N}),k=()=>{u(!1),f(null),g({doctorId:"",date:"",time:"",appointmentType:"OFFLINE",notes:""})},T=async x=>{var R;if(x.preventDefault(),!_.date||!_.time){qt.error("Please select both date and time");return}w(!0);try{(await Mt.post(`${S}/book-direct-appointment`,_,{withCredentials:!0})).data.success&&(qt.success("Appointment booked successfully!"),k())}catch(P){Mt.isAxiosError(P)&&P.response?qt.error(((R=P.response.data)==null?void 0:R.message)||"Failed to book an appointment"):qt.error("An unexpected error occurred")}finally{w(!1)}},h=()=>{const x=[];for(let R=9;R<=17;R++)for(let P=0;P<60;P+=30){const N=`${R.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`;x.push(N)}return x};return a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Find Your Doctor"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Connect with certified healthcare professionals and book appointments with ease"})]}),a.jsx(Nt,{className:"mb-8",children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ih,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ls,{placeholder:"Search doctors or specialties...",value:e,onChange:x=>t(x.target.value),className:"pl-10 pr-10"}),s&&a.jsx(rC,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 animate-spin"})]}),a.jsxs(Qa,{value:c,onValueChange:d,children:[a.jsx(Aa,{children:a.jsx(Xa,{placeholder:"All Specialties"})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"all",children:"All Specialties"}),E.map(x=>a.jsx(qr,{value:x,children:x},x))]})]}),a.jsxs(Qa,{value:l,onValueChange:o,children:[a.jsx(Aa,{children:a.jsx(Xa,{placeholder:"All Locations"})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"all",children:"All Locations"}),O.map(x=>a.jsx(qr,{value:x,children:x},x))]})]}),a.jsxs(rr,{className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(mI,{className:"h-4 w-4 mr-2"}),"Apply Filters"]})]})})}),a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Showing ",C.length," doctors"]}),s&&a.jsx("span",{className:"text-sm text-blue-600",children:"Searching..."})]}),C.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[a.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No doctors found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Try adjusting filters or modifying your search."})]}):a.jsx("div",{className:"grid gap-6",children:C.map(x=>a.jsx(Nt,{className:"overflow-hidden hover:shadow-lg transition-shadow"},x.id))})]}),a.jsx(Eg,{open:m,onOpenChange:u,children:a.jsxs(Rh,{className:"sm:max-w-[425px]",children:[a.jsx(kh,{children:a.jsx(Th,{children:"Book Appointment"})}),b&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs(ws,{className:"h-12 w-12",children:[a.jsx(ks,{src:b.user.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:b.user.name.split(" ").map(x=>x[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:b.user.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:b.specialty}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["$",b.consultationFee," consultation fee"]})]})]}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"date",children:"Date"}),a.jsx(ls,{id:"date",type:"date",value:_.date,onChange:x=>g(R=>({...R,date:x.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"time",children:"Time"}),a.jsxs(Qa,{value:_.time,onValueChange:x=>g(R=>({...R,time:x})),children:[a.jsx(Aa,{children:a.jsx(Xa,{placeholder:"Select time"})}),a.jsx(Oa,{children:h().map(x=>a.jsx(qr,{value:x,children:x},x))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"appointmentType",children:"Appointment Type"}),a.jsxs(Qa,{value:_.appointmentType,onValueChange:x=>g(R=>({...R,appointmentType:x})),children:[a.jsx(Aa,{children:a.jsx(Xa,{})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"OFFLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oo,{className:"h-4 w-4"}),"In-Person"]})}),a.jsx(qr,{value:"ONLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oC,{className:"h-4 w-4"}),"Video Call"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx(id,{id:"notes",placeholder:"Any specific concerns or symptoms you'd like to discuss...",value:_.notes,onChange:x=>g(R=>({...R,notes:x.target.value})),rows:3})]}),a.jsxs(Ch,{children:[a.jsx(rr,{type:"button",variant:"outline",onClick:k,children:"Cancel"}),a.jsx(rr,{type:"submit",disabled:v,children:v?"Booking...":"Book Appointment"})]})]})]})]})})]})}function hH(){const{id:e}=Vk();return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Lc,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Doctor Profile"}),a.jsxs("p",{children:["Doctor ID: ",e]})]}),a.jsx(Gl,{})]})}function fH(){const{id:e}=Vk(),t=Ba(),r=Wn(f=>f.user),[n,s]=A.useState(null),[i,c]=A.useState(!0),[d,l]=A.useState(!1),[o,p]=A.useState({doctorId:e||"",date:"",time:"",appointmentType:"OFFLINE",notes:""}),y="undefined/api/patient";A.useEffect(()=>{if(!r||r.role!=="PATIENT"){t("/auth/login");return}e&&(async()=>{var _;try{const g=await Mt.get(`${y}/fetchAllDoctors`,{withCredentials:!0});if(g.data.success){const v=g.data.data;v&&v.id===e?s(v):(qt.error("Doctor not found"),t("/doctors"))}}catch(g){Mt.isAxiosError(g)&&g.response?qt.error(((_=g.response.data)==null?void 0:_.message)||"Failed to fetch doctor details"):qt.error("An unexpected error occurred"),t("/doctors")}finally{c(!1)}})()},[e,r,t,y]);const m=(f,_)=>{p(g=>({...g,[f]:_}))},u=async f=>{var _;if(f.preventDefault(),!o.date||!o.time){qt.error("Please select both date and time");return}l(!0);try{(await Mt.post(`${y}/book-direct-appointment`,o,{withCredentials:!0})).data.success&&(qt.success("Appointment request sent successfully! You will be notified once the doctor responds."),t("/dashboard/patient"))}catch(g){Mt.isAxiosError(g)&&g.response?qt.error(((_=g.response.data)==null?void 0:_.message)||"Failed to book appointment"):qt.error("An unexpected error occurred")}finally{l(!1)}},b=()=>{const f=[];for(let _=9;_<=17;_++)for(let g=0;g<60;g+=30){const v=`${_.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`;f.push(v)}return f};return i?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Lc,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-lg",children:"Loading doctor details..."})})}),a.jsx(Gl,{})]}):n?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Lc,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Book an Appointment"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Schedule your consultation with ",n.user.name]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(Nt,{children:[a.jsx(En,{children:a.jsxs(_n,{className:"flex items-center gap-3",children:[a.jsxs(ws,{className:"h-12 w-12",children:[a.jsx(ks,{src:n.user.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:n.user.name.split(" ").map(f=>f[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:n.user.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:n.specialty})]})]})}),a.jsxs(Ot,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(io,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{children:n.clinicLocation})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ni,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{children:[n.experience," experience"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Gw,{className:"h-4 w-4 text-gray-500"}),a.jsxs("span",{children:["$",n.consultationFee," consultation fee"]})]}),n.education&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-1",children:"Education:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.education})]}),n.bio&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-1",children:"About:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n.bio})]}),n.languages.length>0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium mb-2",children:"Languages:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:n.languages.map(f=>a.jsx($r,{variant:"outline",className:"text-xs",children:f},f))})]})]})]})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(_n,{children:"Appointment Details"}),a.jsx(Vn,{children:"Fill in the details to send an appointment request to the doctor"})]}),a.jsx(Ot,{children:a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"date",children:"Date"}),a.jsx(ls,{id:"date",type:"date",value:o.date,onChange:f=>m("date",f.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"time",children:"Time"}),a.jsxs(Qa,{value:o.time,onValueChange:f=>m("time",f),children:[a.jsx(Aa,{children:a.jsx(Xa,{placeholder:"Select time"})}),a.jsx(Oa,{children:b().map(f=>a.jsx(qr,{value:f,children:f},f))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"appointmentType",children:"Appointment Type"}),a.jsxs(Qa,{value:o.appointmentType,onValueChange:f=>m("appointmentType",f),children:[a.jsx(Aa,{children:a.jsx(Xa,{})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"OFFLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oo,{className:"h-4 w-4"}),"In-Person"]})}),a.jsx(qr,{value:"ONLINE",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oC,{className:"h-4 w-4"}),"Video Call"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"notes",children:"Notes (Optional)"}),a.jsx(id,{id:"notes",placeholder:"Any specific concerns or symptoms you'd like to discuss...",value:o.notes,onChange:f=>m("notes",f.target.value),rows:4})]}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx(rr,{type:"button",variant:"outline",onClick:()=>t("/doctors"),className:"flex-1",children:"Cancel"}),a.jsx(rr,{type:"submit",disabled:d,className:"flex-1",children:d?"Sending Request...":"Send Appointment Request"})]})]})})]})})]})]})}),a.jsx(Gl,{})]}):a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Lc,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"text-lg text-red-600",children:"Doctor not found"})})}),a.jsx(Gl,{})]})}function mH(){const e=Wn(g=>g.user),[t,r]=A.useState(!1),[n,s]=A.useState({name:(e==null?void 0:e.name)||"John Doe",email:(e==null?void 0:e.email)||"john.doe@example.com",phone:"+1 (555) 123-4567",age:"28",address:"123 Main Street, City, State 12345"}),[i,c]=A.useState(null),[d,l]=A.useState(null),o=Wn(g=>g.setUser),p="undefined/api/user",[y,m]=A.useState(!1),u=(g,v)=>{s(w=>({...w,[g]:v}))},b=()=>{(async()=>{var v,w,S,E,O,C;try{m(!0);const k=new FormData;n.name&&n.name!==(e==null?void 0:e.name)&&k.append("name",n.name),i&&k.append("profilePicture",i);const T=(e==null?void 0:e.role)==="DOCTOR"?`${p}/update-doctor`:`${p}/update-patient`,h=await Mt.put(T,k,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(!((v=h.data)!=null&&v.success))throw new Error(((w=h.data)==null?void 0:w.message)||"Failed to update profile");const x=await Mt.get(`${p}/authenticated-profile`,{withCredentials:!0});if((S=x.data)!=null&&S.success&&((O=(E=x.data)==null?void 0:E.data)!=null&&O.user)){const R=x.data.data.user;o(R),s(P=>({...P,name:R.name||P.name,email:R.email||P.email}))}qt.success("Profile updated successfully"),r(!1),c(null),l(null)}catch(k){Mt.isAxiosError(k)&&k.response?qt.error(((C=k.response.data)==null?void 0:C.message)||"Failed to update profile"):qt.error("Failed to update profile")}finally{m(!1)}})()},f=()=>{s({name:(e==null?void 0:e.name)||"John Doe",email:(e==null?void 0:e.email)||"john.doe@example.com",phone:"+1 (555) 123-4567",age:"28",address:"123 Main Street, City, State 12345"}),r(!1),c(null),l(null)},_=g=>{var w;const v=((w=g.target.files)==null?void 0:w[0])||null;if(c(v),v){const S=new FileReader;S.onload=()=>l(S.result),S.readAsDataURL(v)}else l(null)};return a.jsxs("div",{className:"p-6 md:p-8 max-w-4xl mx-auto",children:[a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Profile"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your personal information and account settings"})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsx(Qr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"lg:col-span-1",children:a.jsxs(Nt,{className:"sticky top-8",children:[a.jsxs(En,{className:"text-center",children:[a.jsxs("div",{className:"flex flex-col items-center mb-4",children:[a.jsxs(ws,{className:"w-24 h-24",children:[a.jsx(ks,{src:d||(e==null?void 0:e.profilePicture)||"/placeholder-user.jpg",alt:"Profile Picture"}),a.jsx(_s,{className:"text-2xl",children:n.name.split(" ").map(g=>g[0]).join("")})]}),t&&a.jsx("div",{className:"mt-3",children:a.jsx(ls,{type:"file",accept:"image/*",onChange:_})})]}),a.jsx(_n,{className:"text-xl",children:n.name}),a.jsx(Vn,{className:"text-base",children:(e==null?void 0:e.role)||"Patient"})]}),a.jsxs(Ot,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(Hw,{className:"h-4 w-4"}),a.jsx("span",{children:n.email})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(nC,{className:"h-4 w-4"}),a.jsx("span",{children:n.phone})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(ps,{className:"h-4 w-4"}),a.jsxs("span",{children:["Age: ",n.age]})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(io,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:n.address})]})]})]})}),a.jsxs(Qr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"lg:col-span-2",children:[a.jsxs(Nt,{children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(_n,{className:"text-2xl",children:"Personal Information"}),a.jsx(Vn,{children:"Update your personal details and contact information"})]}),a.jsxs(rr,{variant:t?"outline":"default",onClick:()=>r(!t),className:"flex items-center space-x-2",children:[a.jsx(_I,{className:"h-4 w-4"}),a.jsx("span",{children:t?"Cancel":"Edit Profile"})]})]})}),a.jsxs(Ot,{className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"name",children:"Full Name"}),a.jsx(ls,{id:"name",value:n.name,onChange:g=>u("name",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"email",children:"Email Address"}),a.jsx(ls,{id:"email",type:"email",value:n.email,onChange:g=>u("email",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"phone",children:"Phone Number"}),a.jsx(ls,{id:"phone",value:n.phone,onChange:g=>u("phone",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"age",children:"Age"}),a.jsx(ls,{id:"age",value:n.age,onChange:g=>u("age",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{htmlFor:"address",children:"Address"}),a.jsx(ls,{id:"address",value:n.address,onChange:g=>u("address",g.target.value),disabled:!t,className:t?"bg-white":"bg-gray-50"})]}),t&&a.jsxs(Qr.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex space-x-4 pt-4",children:[a.jsx(rr,{onClick:b,disabled:y,className:"bg-blue-600 hover:bg-blue-700",children:y?"Saving...":"Save Changes"}),a.jsx(rr,{variant:"outline",onClick:f,children:"Cancel"})]})]})]}),a.jsxs(Nt,{className:"mt-6",children:[a.jsxs(En,{children:[a.jsx(_n,{className:"text-xl",children:"Account Information"}),a.jsx(Vn,{children:"Your account details and preferences"})]}),a.jsx(Ot,{className:"space-y-4",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Account Type"}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:(e==null?void 0:e.role)||"Patient"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Member Since"}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"January 2024"})})]})]})})]})]})]})]})}function gH(){const e=Ba(),t=Wn(o=>o.user),[r,n]=A.useState([]),[s,i]=A.useState([]),[c,d]=A.useState(!0),l="undefined/api/patient";return A.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,e]),A.useEffect(()=>{async function o(){try{d(!0);const p=await Mt.get(`${l}/all-appointments`,{withCredentials:!0});if(p.data.success){let y=function(_,g){return _.includes("T")?new Date(_):new Date(`${_}T${g}`)};const m=p.data.data,u=new Date,b=m.filter(_=>y(_.date,_.time)>=u),f=m.filter(_=>y(_.date,_.time)<u);n(b),i(f)}}catch(p){Mt.isAxiosError(p)&&p.response?qt.error(p.response.data.message):qt.error("Unknown error occurred..")}finally{d(!1)}}o()},[l]),A.useEffect(()=>{console.log(r)},[r]),c?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Appointments"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your upcoming and past appointments"})]}),a.jsxs(rr,{onClick:()=>e("/doctors"),className:"bg-blue-600 hover:bg-blue-700 dark:text-white ",children:[a.jsx(Vy,{className:"h-4 w-4 mr-2"}),"Book New Appointment"]})]})}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[a.jsx(Qr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(ni,{className:"h-5 w-5 text-blue-600"}),"Upcoming Appointments",a.jsx($r,{variant:"secondary",className:"ml-2",children:r.length})]}),a.jsx(Vn,{children:"Your scheduled appointments"})]}),a.jsx(Ot,{className:"space-y-4",children:r.length>0?r.map(o=>a.jsxs(Qr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{children:[a.jsx(ks,{src:o.doctor.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:o.doctor.name.split(" ").map(p=>p[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:o.doctor.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o.doctor.specialty}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(o.date).toLocaleDateString("en-US")," at ",o.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx($r,{variant:o.appointmentType==="ONLINE"?"secondary":"default",children:o.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx($r,{variant:o.status==="PENDING"?"outline":o.status==="CONFIRMED"?"default":o.status==="COMPLETED"?"secondary":o.status==="REJECTED"?"destructive":"secondary",children:o.status==="PENDING"?"Request Sent":o.status})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[o.appointmentType==="ONLINE"&&o.status==="CONFIRMED"&&a.jsxs(rr,{size:"sm",variant:"outline",children:[a.jsx($c,{className:"h-4 w-4 mr-1"}),"Join Call"]}),a.jsxs(rr,{size:"sm",variant:"outline",children:[a.jsx(Ma,{className:"h-4 w-4 mr-1"}),"Details"]})]})]},o.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ps,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No upcoming appointments"}),a.jsxs(rr,{onClick:()=>e("/doctors"),variant:"outline",children:[a.jsx(Vy,{className:"h-4 w-4 mr-2"}),"Book an Appointment"]})]})})]})}),a.jsx(Qr.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(ps,{className:"h-5 w-5 text-gray-600"}),"Past Appointments",a.jsx($r,{variant:"secondary",className:"ml-2",children:s.length})]}),a.jsx(Vn,{children:"Your completed appointments"})]}),a.jsx(Ot,{className:"space-y-4",children:s.length>0?s.map(o=>a.jsxs(Qr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{children:[a.jsx(ks,{src:o.doctor.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:o.doctor.name.split(" ").map(p=>p[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:o.doctor.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o.doctor.specialty}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(o.date).toLocaleDateString("en-US")," at ",o.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx($r,{variant:o.appointmentType==="ONLINE"?"secondary":"default",children:o.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx($r,{variant:o.status==="PENDING"?"outline":o.status==="CONFIRMED"?"default":o.status==="COMPLETED"?"secondary":o.status==="REJECTED"?"destructive":"secondary",children:o.status==="PENDING"?"Request Sent":o.status})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(rr,{size:"sm",variant:"outline",children:[a.jsx(Ma,{className:"h-4 w-4 mr-1"}),"View Report"]}),a.jsxs(rr,{size:"sm",variant:"outline",children:[a.jsx($c,{className:"h-4 w-4 mr-1"}),"Feedback"]})]})]},o.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ps,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No past appointments"})]})})]})})]})]})}function vH(){const[e,t]=A.useState([]),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,d]=A.useState("requests"),[l,o]=A.useState(!1),[p,y]=A.useState(null),[m,u]=A.useState(""),[b,f]=A.useState(!1),[_,g]=A.useState(!1),[v,w]=A.useState(""),[S,E]=A.useState(null),[O,C]=A.useState(!1),k=Wn(I=>I.user),T="undefined/api";A.useEffect(()=>{(k==null?void 0:k.role)==="DOCTOR"&&h()},[k]);const h=async()=>{var I;try{i(!0);const G=await Mt.get(`${T}/doctor/pending-requests`,{withCredentials:!0}),de=await Mt.get(`${T}/doctor/all-appointments`,{withCredentials:!0});G.data.success&&n(G.data.data),de.data.success&&t(de.data.data)}catch(G){console.error("Error fetching appointments:",G),Mt.isAxiosError(G)&&G.response?qt.error(((I=G.response.data)==null?void 0:I.message)||"Failed to fetch appointments"):qt.error("Failed to fetch appointments")}finally{i(!1)}},x=async I=>{var G;try{f(!0),(await Mt.patch(`${T}/doctor/appointment-requests/${I}/respond`,{action:"accept"},{withCredentials:!0})).data.success&&(qt.success("Appointment accepted successfully!"),h())}catch(de){console.error("Error accepting appointment:",de),Mt.isAxiosError(de)&&de.response?qt.error(((G=de.response.data)==null?void 0:G.message)||"Failed to accept appointment"):qt.error("Failed to accept appointment")}finally{f(!1)}},R=async()=>{var I,G;if(!S||!v.trim()){qt.error("Please enter prescription");return}try{if(f(!0),(await Mt.post(`${T}/doctor/appointments/${S}/prescription`,{prescriptionText:v.trim()},{withCredentials:!0})).data.success){if(qt.success("Prescription saved"),O&&S)try{(await Mt.patch(`${T}/doctor/appointments/${S}/complete`,{},{withCredentials:!0})).data.success&&qt.success("Appointment marked as completed")}catch(ee){Mt.isAxiosError(ee)&&ee.response?qt.error(((I=ee.response.data)==null?void 0:I.message)||"Failed to mark as completed"):qt.error("Failed to mark as completed")}C(!1),g(!1),w(""),E(null),h()}}catch(de){Mt.isAxiosError(de)&&de.response?qt.error(((G=de.response.data)==null?void 0:G.message)||"Failed to save prescription"):qt.error("Failed to save prescription")}finally{f(!1)}},P=I=>{if(I.appointmentType!=="OFFLINE"||I.status!=="CONFIRMED")return!1;try{const G=new Date(I.date),[de,ee]=I.time.split(":");return G.setHours(parseInt(de,10),parseInt(ee,10),0,0),G.getTime()<=Date.now()}catch{return!0}},N=async I=>{E(I),C(!0),g(!0)},j=async()=>{var I;if(!p||!m.trim()){qt.error("Please provide a reason for rejection");return}try{f(!0),(await Mt.patch(`${T}/doctor/appointment-requests/${p.id}/respond`,{action:"reject",rejectionReason:m.trim()},{withCredentials:!0})).data.success&&(qt.success("Appointment request rejected"),o(!1),u(""),y(null),h())}catch(G){console.error("Error rejecting appointment:",G),Mt.isAxiosError(G)&&G.response?qt.error(((I=G.response.data)==null?void 0:I.message)||"Failed to reject appointment"):qt.error("Failed to reject appointment")}finally{f(!1)}},D=I=>{const G="backdrop-blur-sm rounded-full px-2.5 py-1 border shadow-sm text-xs font-medium",de={PENDING:{label:"Pending",cls:"bg-gradient-to-r from-amber-400/15 to-yellow-500/15 text-amber-700 dark:text-amber-200 border-amber-400/30"},CONFIRMED:{label:"Confirmed",cls:"bg-gradient-to-r from-emerald-400/15 to-teal-500/15 text-emerald-700 dark:text-emerald-200 border-emerald-400/30"},COMPLETED:{label:"Completed",cls:"bg-gradient-to-r from-sky-400/15 to-indigo-500/15 text-sky-700 dark:text-sky-200 border-sky-400/30"},CANCELLED:{label:"Cancelled",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"},REJECTED:{label:"Rejected",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"}},ee=de[I]||de.PENDING;return a.jsx($r,{variant:"outline",className:`${G} ${ee.cls}`,children:ee.label})},L=I=>new Date(I).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),M=I=>new Date(`2000-01-01T${I}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointment Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your appointment requests and view all appointments"})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:[a.jsxs("button",{onClick:()=>d("requests"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="requests"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Pending Requests (",r.length,")"]}),a.jsxs("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="all"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["All Appointments (",e.length,")"]})]})}),c==="requests"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Pending Appointment Requests"}),a.jsxs($r,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[r.length," requests"]})]}),r.length===0?a.jsx(Nt,{children:a.jsxs(Ot,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(ps,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No pending requests"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"You don't have any pending appointment requests at the moment."})]})}):a.jsx("div",{className:"grid gap-6",children:r.map(I=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsxs(Nt,{className:"border-l-4 border-l-yellow-500",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ws,{className:"h-12 w-12",children:[a.jsx(ks,{src:I.patient.profilePicture}),a.jsx(_s,{children:I.patient.name.charAt(0)})]}),a.jsxs("div",{children:[a.jsx(_n,{className:"text-lg",children:I.patient.name}),a.jsxs(Vn,{className:"flex items-center space-x-2",children:[a.jsx(Hw,{className:"h-4 w-4"}),a.jsx("span",{children:I.patient.email})]})]})]}),D(I.status)]})}),a.jsxs(Ot,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:L(I.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ni,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:M(I.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ma,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.appointmentType})]}),I.consultationFee&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",I.consultationFee]})})]}),I.notes&&a.jsxs("div",{className:"mb-4",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Patient Notes:"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:I.notes})]}),I.patient.medicalHistory&&a.jsxs("div",{className:"mb-4",children:[a.jsx(gn,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Medical History:"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:I.patient.medicalHistory})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(rr,{onClick:()=>x(I.id),disabled:b,className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(Ww,{className:"h-4 w-4 mr-2"}),"Accept"]}),a.jsxs(Eg,{open:l,onOpenChange:o,children:[a.jsx(dH,{asChild:!0,children:a.jsxs(rr,{variant:"destructive",onClick:()=>y(I),disabled:b,children:[a.jsx(zw,{className:"h-4 w-4 mr-2"}),"Reject"]})}),a.jsxs(Rh,{children:[a.jsxs(kh,{children:[a.jsx(Th,{children:"Reject Appointment Request"}),a.jsx(Rg,{children:"Please provide a reason for rejecting this appointment request. The patient will be notified with your feedback."})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"rejection-reason",children:"Reason for rejection"}),a.jsx(id,{id:"rejection-reason",placeholder:"e.g., Time slot not available, suggest alternative time...",value:m,onChange:G=>u(G.target.value),className:"mt-1"})]})}),a.jsxs(Ch,{children:[a.jsx(rr,{variant:"outline",onClick:()=>{o(!1),u(""),y(null)},children:"Cancel"}),a.jsx(rr,{variant:"destructive",onClick:j,disabled:b||!m.trim(),children:b?"Rejecting...":"Reject Request"})]})]})]})]})]})]})},I.id))})]}),c==="all"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"All Appointments"}),a.jsxs($r,{variant:"secondary",children:[e.length," total"]})]}),e.length===0?a.jsx(Nt,{children:a.jsxs(Ot,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(ps,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"You don't have any appointments scheduled yet."})]})}):a.jsx("div",{className:"grid gap-4",children:e.map(I=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(Nt,{children:a.jsxs(Ot,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ws,{className:"h-10 w-10",children:[a.jsx(ks,{src:I.patient.profilePicture}),a.jsx(_s,{children:I.patient.name.charAt(0)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:I.patient.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.patient.email})]})]}),D(I.status)]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:L(I.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ni,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:M(I.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ma,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:I.appointmentType})]}),I.consultationFee&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["",I.consultationFee]})})]}),I.notes&&a.jsx("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Notes:"})," ",I.notes]})}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[I.status==="CONFIRMED"&&a.jsx(rr,{variant:"outline",onClick:()=>{E(I.id),g(!0)},disabled:b,children:"Upload Prescription"}),I.prescriptionId&&a.jsx(rr,{variant:"secondary",onClick:()=>window.open(`${T}/patient/prescription-pdf/${I.prescriptionId}`,"_blank"),children:"View Prescription"}),P(I)&&a.jsx(rr,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>N(I.id),disabled:b,children:"Mark as Completed"})]})]})})},I.id))})]}),a.jsx(Eg,{open:_,onOpenChange:g,children:a.jsxs(Rh,{children:[a.jsxs(kh,{children:[a.jsx(Th,{children:"Upload Prescription"}),a.jsx(Rg,{children:"Add prescription details for this appointment. Patients will be able to view it as a PDF."})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"prescription-text",children:"Prescription"}),a.jsx(id,{id:"prescription-text",placeholder:"Medication, dosage, instructions...",value:v,onChange:I=>w(I.target.value),className:"mt-1",rows:8})]})}),a.jsxs(Ch,{children:[a.jsx(rr,{variant:"outline",onClick:()=>{g(!1),w(""),E(null)},children:"Cancel"}),a.jsx(rr,{onClick:R,disabled:b||!v.trim(),children:b?"Saving...":"Save Prescription"})]})]})})]})}function yH(){const[e,t]=A.useState([]),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,d]=A.useState(""),[l,o]=A.useState("all"),[p,y]=A.useState("all"),m=Wn(E=>E.user),u="undefined/api";A.useEffect(()=>{(m==null?void 0:m.role)==="DOCTOR"&&b()},[m]),A.useEffect(()=>{f()},[e,c,l,p]);const b=async()=>{var E;try{i(!0);const O=await Mt.get(`${u}/doctor/all-appointments`,{withCredentials:!0});O.data.success&&t(O.data.data)}catch(O){console.error("Error fetching appointment history:",O),Mt.isAxiosError(O)&&O.response?qt.error(((E=O.response.data)==null?void 0:E.message)||"Failed to fetch appointment history"):qt.error("Failed to fetch appointment history")}finally{i(!1)}},f=()=>{let E=[...e];if(c&&(E=E.filter(O=>O.patient.name.toLowerCase().includes(c.toLowerCase())||O.patient.email.toLowerCase().includes(c.toLowerCase()))),l!=="all"&&(E=E.filter(O=>O.status===l)),p!=="all"){const O=new Date,C=new Date(O.getFullYear(),O.getMonth(),O.getDate());E=E.filter(k=>{const T=new Date(k.date);switch(p){case"today":return T.toDateString()===C.toDateString();case"thisWeek":const h=new Date(C);h.setDate(C.getDate()-C.getDay());const x=new Date(h);return x.setDate(h.getDate()+6),T>=h&&T<=x;case"thisMonth":return T.getMonth()===O.getMonth()&&T.getFullYear()===O.getFullYear();case"past":return T<C;case"upcoming":return T>=C;default:return!0}})}E.sort((O,C)=>new Date(C.createdAt).getTime()-new Date(O.createdAt).getTime()),n(E)},_=E=>{const O={PENDING:{variant:"secondary",label:"Pending",color:"text-yellow-600"},CONFIRMED:{variant:"default",label:"Confirmed",color:"text-green-600"},COMPLETED:{variant:"default",label:"Completed",color:"text-blue-600"},CANCELLED:{variant:"destructive",label:"Cancelled",color:"text-red-600"},REJECTED:{variant:"destructive",label:"Rejected",color:"text-red-600"}},C=O[E]||O.PENDING;return a.jsx($r,{variant:C.variant,className:C.color,children:C.label})},g=E=>new Date(E).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),v=E=>new Date(`2000-01-01T${E}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),S={total:e.length,pending:e.filter(O=>O.status==="PENDING").length,confirmed:e.filter(O=>O.status==="CONFIRMED").length,completed:e.filter(O=>O.status==="COMPLETED").length,cancelled:e.filter(O=>O.status==="CANCELLED").length,rejected:e.filter(O=>O.status==="REJECTED").length};return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointment History"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View and manage your appointment history"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8",children:[a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S.total}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:S.pending}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:S.confirmed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confirmed"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:S.completed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:S.cancelled}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cancelled"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:S.rejected}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected"})]})})})]}),a.jsx(Nt,{className:"mb-6",children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ih,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ls,{placeholder:"Search by patient name or email...",value:c,onChange:E=>d(E.target.value),className:"pl-10"})]})}),a.jsxs(Qa,{value:l,onValueChange:o,children:[a.jsx(Aa,{className:"w-full md:w-48",children:a.jsx(Xa,{placeholder:"Filter by status"})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"all",children:"All Statuses"}),a.jsx(qr,{value:"PENDING",children:"Pending"}),a.jsx(qr,{value:"CONFIRMED",children:"Confirmed"}),a.jsx(qr,{value:"COMPLETED",children:"Completed"}),a.jsx(qr,{value:"CANCELLED",children:"Cancelled"}),a.jsx(qr,{value:"REJECTED",children:"Rejected"})]})]}),a.jsxs(Qa,{value:p,onValueChange:y,children:[a.jsx(Aa,{className:"w-full md:w-48",children:a.jsx(Xa,{placeholder:"Filter by date"})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"all",children:"All Dates"}),a.jsx(qr,{value:"today",children:"Today"}),a.jsx(qr,{value:"thisWeek",children:"This Week"}),a.jsx(qr,{value:"thisMonth",children:"This Month"}),a.jsx(qr,{value:"past",children:"Past"}),a.jsx(qr,{value:"upcoming",children:"Upcoming"})]})]})]})})}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsx(Nt,{children:a.jsxs(Ot,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(ps,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:e.length===0?"You don't have any appointments yet.":"No appointments match your current filters."})]})}):r.map(E=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(Nt,{children:a.jsxs(Ot,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ws,{className:"h-12 w-12",children:[a.jsx(ks,{src:E.patient.profilePicture}),a.jsx(_s,{children:E.patient.name.charAt(0)})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:E.patient.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(Hw,{className:"h-4 w-4"}),a.jsx("span",{children:E.patient.email})]})]})]}),a.jsxs("div",{className:"text-right",children:[_(E.status),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",g(E.createdAt)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:g(E.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ni,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:v(E.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ma,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.appointmentType})]}),E.consultationFee&&a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",E.consultationFee]})})]}),E.notes&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Notes:"})," ",E.notes]})}),E.patient.medicalHistory&&a.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Medical History:"})," ",E.patient.medicalHistory]})})]})})},E.id))})]})}function bH(){const e=Ba(),t=Wn(d=>d.user),[r,n]=A.useState([]),[s,i]=A.useState(!0),c="undefined/api/patient";return A.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,e]),A.useEffect(()=>{async function d(){var l;try{i(!0);const o=await Mt.get(`${c}/view-prescriptions`,{withCredentials:!0});o.data.success&&n(o.data.data)}catch(o){Mt.isAxiosError(o)&&o.response?qt.error(((l=o.response.data)==null?void 0:l.message)||"Something went wrong"):qt.error("Unknown error occurred")}finally{i(!1)}}d()},[c]),s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Prescriptions"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"View and download your medical prescriptions"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs($r,{variant:"secondary",className:"text-sm",children:[r.length," Prescriptions"]})})]})}),a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:r.length>0?a.jsx("div",{className:"space-y-6",children:r.map((d,l)=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},children:a.jsxs(Nt,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx(ag,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsxs(_n,{className:"text-lg",children:["Prescription #",d.id.slice(-8)]}),a.jsxs(Vn,{children:["Prescribed by Dr. ",d.doctorName]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($r,{variant:"outline",className:"text-xs",children:d.speciality}),a.jsxs(rr,{size:"sm",variant:"outline",onClick:()=>window.open(`${c}/prescription-pdf/${d.id}`,"_blank"),children:[a.jsx(fI,{className:"h-4 w-4 mr-1"}),"Download PDF"]})]})]})}),a.jsxs(Ot,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx(ws,{className:"w-10 h-10",children:a.jsx(_s,{children:a.jsx(Oo,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Dr. ",d.doctorName]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:d.speciality}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(io,{className:"h-3 w-3"}),d.clinicLocation]})]})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(ps,{className:"h-4 w-4"}),a.jsxs("span",{children:["Prescribed: ",Ki(d.date)]})]})}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[a.jsx(Ma,{className:"h-4 w-4"}),"Prescription Instructions"]}),a.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:d.prescriptionText})})]})]})]})},d.id))}):a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(ag,{className:"h-12 w-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Prescriptions Found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 max-w-md mx-auto",children:"You don't have any prescriptions yet. Your prescriptions will appear here after your appointments."}),a.jsx(rr,{onClick:()=>e("/doctors"),className:"bg-blue-600 hover:bg-blue-700",children:"Book an Appointment"})]})})]})}function uE(){const[e,t]=A.useState([]),[r,n]=A.useState(!0),[s,i]=A.useState(null);A.useEffect(()=>{c()},[]);const c=async()=>{try{const m=await Mt.get("undefined/api/user/notifications",{withCredentials:!0});m.data.success&&t(m.data.data.notifications)}catch(m){console.error("Error fetching notifications:",m),qt.error("Failed to fetch notifications")}finally{n(!1)}},d=async m=>{i(m);try{await Mt.put(`undefined/api/user/notifications/${m}/read`,{},{withCredentials:!0}),t(u=>u.map(b=>b.id===m?{...b,isRead:!0}:b)),qt.success("Notification marked as read")}catch(u){console.error("Error marking notification as read:",u),qt.error("Failed to mark notification as read")}finally{i(null)}},l=async()=>{try{await Mt.put("undefined/api/user/notifications/mark-all-read",{},{withCredentials:!0}),t(m=>m.map(u=>({...u,isRead:!0}))),qt.success("All notifications marked as read")}catch(m){console.error("Error marking all notifications as read:",m),qt.error("Failed to mark all notifications as read")}},o=m=>{switch(m){case"APPOINTMENT_ACCEPTED":case"APPOINTMENT_REJECTED":case"APPOINTMENT_REMINDER":return a.jsx(ps,{className:"h-5 w-5"});case"DOCTOR_MESSAGE":return a.jsx(Mh,{className:"h-5 w-5"});default:return a.jsx(ig,{className:"h-5 w-5"})}},p=m=>{switch(m){case"APPOINTMENT_ACCEPTED":return"text-green-600 bg-green-100 dark:bg-green-900/30";case"APPOINTMENT_REJECTED":return"text-red-600 bg-red-100 dark:bg-red-900/30";case"APPOINTMENT_REMINDER":return"text-blue-600 bg-blue-100 dark:bg-blue-900/30";case"DOCTOR_MESSAGE":return"text-purple-600 bg-purple-100 dark:bg-purple-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}},y=e.filter(m=>!m.isRead).length;return r?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Stay updated with your health appointments and messages"})]}),y>0&&a.jsxs(rr,{onClick:l,variant:"outline",className:"flex items-center gap-2",children:[a.jsx(dI,{className:"h-4 w-4"}),"Mark All as Read"]})]})}),a.jsx("div",{className:"space-y-4",children:e.length===0?a.jsx(Nt,{children:a.jsxs(Ot,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(ig,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No notifications yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"You'll receive notifications about appointments, messages, and important updates here."})]})}):e.map(m=>a.jsx(Nt,{className:`transition-all duration-200 ${m.isRead?"opacity-75":"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10"}`,children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:`p-2 rounded-full ${p(m.type)}`,children:o(m.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m.title}),!m.isRead&&a.jsx($r,{variant:"destructive",className:"text-xs",children:"New"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:m.message}),a.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:a.jsx("span",{children:Ki(m.createdAt)})})]})]}),!m.isRead&&a.jsx(rr,{variant:"ghost",size:"sm",onClick:()=>d(m.id),disabled:s===m.id,className:"ml-4",children:s===m.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):a.jsx($w,{className:"h-4 w-4"})})]})})},m.id))})]})}function wH(){const e=Ba(),t=Wn(O=>O.user),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,d]=A.useState(null),[l,o]=A.useState(!1),[p,y]=A.useState(null),[m,u]=A.useState(""),[b,f]=A.useState(""),[_,g]=A.useState(!1),v="undefined/api/doctor";A.useEffect(()=>{(!t||t.role!=="DOCTOR")&&e("/auth/login")},[t,e]),A.useEffect(()=>{w()},[]);const w=async()=>{var O;try{i(!0);const C=await Mt.get(`${v}/pending-requests`,{withCredentials:!0});C.data.success&&n(C.data.data)}catch(C){Mt.isAxiosError(C)&&C.response?qt.error(((O=C.response.data)==null?void 0:O.message)||"Failed to fetch pending requests"):qt.error("Unknown error occurred")}finally{i(!1)}},S=(O,C)=>{d(O),y(C),o(!0)},E=async()=>{var O;if(!(!c||!p))try{g(!0);const C={action:p};p==="reject"&&(C.rejectionReason=m,b.trim()&&(C.alternativeSlots=b.split(",").map(T=>T.trim()))),(await Mt.patch(`${v}/appointment-requests/${c.id}/respond`,C,{withCredentials:!0})).data.success&&(qt.success(`Appointment request ${p}ed successfully`),await w(),o(!1),d(null),y(null),u(""),f(""))}catch(C){Mt.isAxiosError(C)&&C.response?qt.error(((O=C.response.data)==null?void 0:O.message)||"Failed to process request"):qt.error("Unknown error occurred")}finally{g(!1)}};return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Pending Appointment Requests"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Review and respond to patient appointment requests"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs($r,{variant:"secondary",className:"text-sm",children:[r.length," Pending"]})})]})}),a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:r.length>0?a.jsx("div",{className:"space-y-6",children:r.map((O,C)=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:C*.1},children:a.jsxs(Nt,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{className:"w-12 h-12",children:[a.jsx(ks,{src:O.patient.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:O.patient.name.split(" ").map(k=>k[0]).join("")})]}),a.jsxs("div",{children:[a.jsx(_n,{className:"text-lg",children:O.patient.name}),a.jsx(Vn,{children:O.patient.email})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($r,{variant:"outline",className:"text-xs",children:O.appointmentType}),a.jsx($r,{variant:"secondary",className:"text-xs",children:Ki(O.createdAt)})]})]})}),a.jsxs(Ot,{className:"space-y-4",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(ps,{className:"h-4 w-4"}),a.jsxs("span",{children:["Date: ",new Date(O.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(ni,{className:"h-4 w-4"}),a.jsxs("span",{children:["Time: ",O.time]})]}),O.consultationFee&&a.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:a.jsxs("span",{children:["Fee: ",O.consultationFee]})})]}),a.jsx("div",{className:"space-y-2",children:O.patient.medicalHistory&&a.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1",children:"Medical History"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:O.patient.medicalHistory})]})})]}),O.notes&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[a.jsx(yI,{className:"h-4 w-4"}),"Patient Notes"]}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:O.notes})})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsxs(rr,{onClick:()=>S(O,"accept"),className:"bg-green-600 hover:bg-green-700 flex items-center gap-2",children:[a.jsx(Ww,{className:"h-4 w-4"}),"Accept Request"]}),a.jsxs(rr,{onClick:()=>S(O,"reject"),variant:"destructive",className:"flex items-center gap-2",children:[a.jsx(zw,{className:"h-4 w-4"}),"Reject Request"]})]})]})]})},O.id))}):a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(By,{className:"h-12 w-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Pending Requests"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-md mx-auto",children:"You don't have any pending appointment requests at the moment. New requests will appear here when patients book appointments."})]})}),a.jsx(Eg,{open:l,onOpenChange:o,children:a.jsxs(Rh,{className:"sm:max-w-[425px]",children:[a.jsxs(kh,{children:[a.jsx(Th,{children:p==="accept"?"Accept Appointment Request":"Reject Appointment Request"}),a.jsx(Rg,{children:p==="accept"?"Are you sure you want to accept this appointment request? The patient will be notified.":"Please provide a reason for rejecting this appointment request. You can also suggest alternative time slots."})]}),c&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.patient.name}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[new Date(c.date).toLocaleDateString()," at ",c.time]})]}),p==="reject"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"rejectionReason",children:"Reason for rejection (optional)"}),a.jsx(id,{id:"rejectionReason",placeholder:"e.g., Time slot not available, schedule conflict...",value:m,onChange:O=>u(O.target.value),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"alternativeSlots",children:"Alternative time slots (optional)"}),a.jsx(id,{id:"alternativeSlots",placeholder:"e.g., Tomorrow 2:00 PM, Friday 10:00 AM",value:b,onChange:O=>f(O.target.value),className:"mt-1"})]})]})]}),a.jsxs(Ch,{children:[a.jsx(rr,{variant:"outline",onClick:()=>o(!1),disabled:_,children:"Cancel"}),a.jsx(rr,{onClick:E,disabled:_,className:p==="accept"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:_?"Processing...":p==="accept"?"Accept":"Reject"})]})]})})]})}function Co(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ax(e,t=[]){let r=[];function n(i,c){const d=A.createContext(c),l=r.length;r=[...r,c];const o=y=>{var g;const{scope:m,children:u,...b}=y,f=((g=m==null?void 0:m[e])==null?void 0:g[l])||d,_=A.useMemo(()=>b,Object.values(b));return a.jsx(f.Provider,{value:_,children:u})};o.displayName=i+"Provider";function p(y,m){var f;const u=((f=m==null?void 0:m[e])==null?void 0:f[l])||d,b=A.useContext(u);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${i}\``)}return[o,p]}const s=()=>{const i=r.map(c=>A.createContext(c));return function(d){const l=(d==null?void 0:d[e])||i;return A.useMemo(()=>({[`__scope${e}`]:{...d,[e]:l}}),[d,l])}};return s.scopeName=e,[n,_H(s,...t)]}function _H(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=n.reduce((d,{useScope:l,scopeName:o})=>{const y=l(i)[`__scope${o}`];return{...d,...y}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}function pE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function HA(...e){return t=>{let r=!1;const n=e.map(s=>{const i=pE(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():pE(e[s],null)}}}}function kg(...e){return A.useCallback(HA(...e),e)}function Db(e){const t=xH(e),r=A.forwardRef((n,s)=>{const{children:i,...c}=n,d=A.Children.toArray(i),l=d.find(EH);if(l){const o=l.props.children,p=d.map(y=>y===l?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:y);return a.jsx(t,{...c,ref:s,children:A.isValidElement(o)?A.cloneElement(o,void 0,p):null})}return a.jsx(t,{...c,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}function xH(e){const t=A.forwardRef((r,n)=>{const{children:s,...i}=r;if(A.isValidElement(s)){const c=kH(s),d=RH(i,s.props);return s.type!==A.Fragment&&(d.ref=n?HA(n,c):c),A.cloneElement(s,d)}return A.Children.count(s)>1?A.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var SH=Symbol("radix.slottable");function EH(e){return A.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===SH}function RH(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...d)=>{const l=i(...d);return s(...d),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function kH(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function CH(e){const t=e+"CollectionProvider",[r,n]=ax(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=f=>{const{scope:_,children:g}=f,v=pt.useRef(null),w=pt.useRef(new Map).current;return a.jsx(s,{scope:_,itemMap:w,collectionRef:v,children:g})};c.displayName=t;const d=e+"CollectionSlot",l=Db(d),o=pt.forwardRef((f,_)=>{const{scope:g,children:v}=f,w=i(d,g),S=kg(_,w.collectionRef);return a.jsx(l,{ref:S,children:v})});o.displayName=d;const p=e+"CollectionItemSlot",y="data-radix-collection-item",m=Db(p),u=pt.forwardRef((f,_)=>{const{scope:g,children:v,...w}=f,S=pt.useRef(null),E=kg(_,S),O=i(p,g);return pt.useEffect(()=>(O.itemMap.set(S,{ref:S,...w}),()=>void O.itemMap.delete(S))),a.jsx(m,{[y]:"",ref:E,children:v})});u.displayName=p;function b(f){const _=i(e+"CollectionConsumer",f);return pt.useCallback(()=>{const v=_.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${y}]`));return Array.from(_.itemMap.values()).sort((O,C)=>w.indexOf(O.ref.current)-w.indexOf(C.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:c,Slot:o,ItemSlot:u},b,n]}var TH=Kc[" useId ".trim().toString()]||(()=>{}),PH=0;function qA(e){const[t,r]=A.useState(TH());return zn(()=>{r(n=>n??String(PH++))},[e]),t?`radix-${t}`:""}var NH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vu=NH.reduce((e,t)=>{const r=Db(`Primitive.${t}`),n=A.forwardRef((s,i)=>{const{asChild:c,...d}=s,l=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...d,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),AH=Kc[" useInsertionEffect ".trim().toString()]||zn;function KA({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,c]=OH({defaultProp:t,onChange:r}),d=e!==void 0,l=d?e:s;{const p=A.useRef(e!==void 0);A.useEffect(()=>{const y=p.current;y!==d&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=d},[d,n])}const o=A.useCallback(p=>{var y;if(d){const m=jH(p)?p(e):p;m!==e&&((y=c.current)==null||y.call(c,m))}else i(p)},[d,e,i,c]);return[l,o]}function OH({defaultProp:e,onChange:t}){const[r,n]=A.useState(e),s=A.useRef(r),i=A.useRef(t);return AH(()=>{i.current=t},[t]),A.useEffect(()=>{var c;s.current!==r&&((c=i.current)==null||c.call(i,r),s.current=r)},[r,s]),[r,n,i]}function jH(e){return typeof e=="function"}var DH=A.createContext(void 0);function GA(e){const t=A.useContext(DH);return e||t||"ltr"}var I0="rovingFocusGroup.onEntryFocus",IH={bubbles:!1,cancelable:!0},Gh="RovingFocusGroup",[Ib,YA,MH]=CH(Gh),[LH,JA]=ax(Gh,[MH]),[FH,BH]=LH(Gh),QA=A.forwardRef((e,t)=>a.jsx(Ib.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Ib.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(UH,{...e,ref:t})})}));QA.displayName=Gh;var UH=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:l,onEntryFocus:o,preventScrollOnEntryFocus:p=!1,...y}=e,m=A.useRef(null),u=kg(t,m),b=GA(i),[f,_]=KA({prop:c,defaultProp:d??null,onChange:l,caller:Gh}),[g,v]=A.useState(!1),w=Wi(o),S=YA(r),E=A.useRef(!1),[O,C]=A.useState(0);return A.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(I0,w),()=>k.removeEventListener(I0,w)},[w]),a.jsx(FH,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:f,onItemFocus:A.useCallback(k=>_(k),[_]),onItemShiftTab:A.useCallback(()=>v(!0),[]),onFocusableItemAdd:A.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:A.useCallback(()=>C(k=>k-1),[]),children:a.jsx(Vu.div,{tabIndex:g||O===0?-1:0,"data-orientation":n,...y,ref:u,style:{outline:"none",...e.style},onMouseDown:Co(e.onMouseDown,()=>{E.current=!0}),onFocus:Co(e.onFocus,k=>{const T=!E.current;if(k.target===k.currentTarget&&T&&!g){const h=new CustomEvent(I0,IH);if(k.currentTarget.dispatchEvent(h),!h.defaultPrevented){const x=S().filter(D=>D.focusable),R=x.find(D=>D.active),P=x.find(D=>D.id===f),j=[R,P,...x].filter(Boolean).map(D=>D.ref.current);e6(j,p)}}E.current=!1}),onBlur:Co(e.onBlur,()=>v(!1))})})}),XA="RovingFocusGroupItem",ZA=A.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:c,...d}=e,l=qA(),o=i||l,p=BH(XA,r),y=p.currentTabStopId===o,m=YA(r),{onFocusableItemAdd:u,onFocusableItemRemove:b,currentTabStopId:f}=p;return A.useEffect(()=>{if(n)return u(),()=>b()},[n,u,b]),a.jsx(Ib.ItemSlot,{scope:r,id:o,focusable:n,active:s,children:a.jsx(Vu.span,{tabIndex:y?0:-1,"data-orientation":p.orientation,...d,ref:t,onMouseDown:Co(e.onMouseDown,_=>{n?p.onItemFocus(o):_.preventDefault()}),onFocus:Co(e.onFocus,()=>p.onItemFocus(o)),onKeyDown:Co(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){p.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const g=WH(_,p.orientation,p.dir);if(g!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let w=m().filter(S=>S.focusable).map(S=>S.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const S=w.indexOf(_.currentTarget);w=p.loop?zH(w,S+1):w.slice(S+1)}setTimeout(()=>e6(w))}}),children:typeof c=="function"?c({isCurrentTabStop:y,hasTabStop:f!=null}):c})})});ZA.displayName=XA;var VH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $H(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function WH(e,t,r){const n=$H(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return VH[n]}function e6(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function zH(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var HH=QA,qH=ZA;function KH(e,t){return A.useReducer((r,n)=>t[r][n]??r,e)}var t6=e=>{const{present:t,children:r}=e,n=GH(t),s=typeof r=="function"?r({present:n.isPresent}):A.Children.only(r),i=kg(n.ref,YH(s));return typeof r=="function"||n.isPresent?A.cloneElement(s,{ref:i}):null};t6.displayName="Presence";function GH(e){const[t,r]=A.useState(),n=A.useRef(null),s=A.useRef(e),i=A.useRef("none"),c=e?"mounted":"unmounted",[d,l]=KH(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const o=tm(n.current);i.current=d==="mounted"?o:"none"},[d]),zn(()=>{const o=n.current,p=s.current;if(p!==e){const m=i.current,u=tm(o);e?l("MOUNT"):u==="none"||(o==null?void 0:o.display)==="none"?l("UNMOUNT"):l(p&&m!==u?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),zn(()=>{if(t){let o;const p=t.ownerDocument.defaultView??window,y=u=>{const f=tm(n.current).includes(u.animationName);if(u.target===t&&f&&(l("ANIMATION_END"),!s.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",o=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=u=>{u.target===t&&(i.current=tm(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{p.clearTimeout(o),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:A.useCallback(o=>{n.current=o?getComputedStyle(o):null,r(o)},[])}}function tm(e){return(e==null?void 0:e.animationName)||"none"}function YH(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var wv="Tabs",[JH,ZK]=ax(wv,[JA]),r6=JA(),[QH,ox]=JH(wv),n6=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:c="horizontal",dir:d,activationMode:l="automatic",...o}=e,p=GA(d),[y,m]=KA({prop:n,onChange:s,defaultProp:i??"",caller:wv});return a.jsx(QH,{scope:r,baseId:qA(),value:y,onValueChange:m,orientation:c,dir:p,activationMode:l,children:a.jsx(Vu.div,{dir:p,"data-orientation":c,...o,ref:t})})});n6.displayName=wv;var s6="TabsList",i6=A.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=ox(s6,r),c=r6(r);return a.jsx(HH,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(Vu.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});i6.displayName=s6;var a6="TabsTrigger",o6=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,c=ox(a6,r),d=r6(r),l=d6(c.baseId,n),o=u6(c.baseId,n),p=n===c.value;return a.jsx(qH,{asChild:!0,...d,focusable:!s,active:p,children:a.jsx(Vu.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":o,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:Co(e.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(n):y.preventDefault()}),onKeyDown:Co(e.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(n)}),onFocus:Co(e.onFocus,()=>{const y=c.activationMode!=="manual";!p&&!s&&y&&c.onValueChange(n)})})})});o6.displayName=a6;var c6="TabsContent",l6=A.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...c}=e,d=ox(c6,r),l=d6(d.baseId,n),o=u6(d.baseId,n),p=n===d.value,y=A.useRef(p);return A.useEffect(()=>{const m=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(t6,{present:s||p,children:({present:m})=>a.jsx(Vu.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:o,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:y.current?"0s":void 0},children:m&&i})})});l6.displayName=c6;function d6(e,t){return`${e}-trigger-${t}`}function u6(e,t){return`${e}-content-${t}`}var XH=n6,p6=i6,h6=o6,f6=l6;const Ph=XH,Yh=A.forwardRef(({className:e,...t},r)=>a.jsx(p6,{ref:r,className:Ur("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Yh.displayName=p6.displayName;const bi=A.forwardRef(({className:e,...t},r)=>a.jsx(h6,{ref:r,className:Ur("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));bi.displayName=h6.displayName;const wi=A.forwardRef(({className:e,...t},r)=>a.jsx(f6,{ref:r,className:Ur("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));wi.displayName=f6.displayName;function ZH(){const e=Ba(),t=Wn(u=>u.user),r=Wn(u=>u.isLoading),[n,s]=A.useState(""),[i,c]=A.useState("all");A.useEffect(()=>{!r&&(!t||t.role!=="ADMIN")&&e("/auth/login")},[t,r,e]);const d={totalUsers:1247,totalDoctors:89,totalAppointments:2456,activeChats:156,pendingRequests:12,monthlyGrowth:15.3,revenue:45600,satisfaction:4.8},l={appointmentsThisMonth:[{month:"Jan",appointments:180},{month:"Feb",appointments:220},{month:"Mar",appointments:280},{month:"Apr",appointments:320},{month:"May",appointments:380},{month:"Jun",appointments:420}],topSpecialties:[{specialty:"General Medicine",count:45,percentage:35},{specialty:"Cardiology",count:32,percentage:25},{specialty:"Dermatology",count:28,percentage:22},{specialty:"Neurology",count:23,percentage:18}]},o=[{id:1,name:"Dr. James Wilson",email:"j.wilson@email.com",specialty:"Cardiology",experience:"8 years",licenseNumber:"MD789012",location:"Boston, MA",education:"Harvard Medical School",submittedDate:"2024-01-14",status:"Pending",documents:["License","Degree","CV"],avatar:"/placeholder.svg"},{id:2,name:"Dr. Lisa Chen",email:"l.chen@email.com",specialty:"Pediatrics",experience:"6 years",licenseNumber:"MD345678",location:"San Francisco, CA",education:"UCSF School of Medicine",submittedDate:"2024-01-13",status:"Under Review",documents:["License","Degree","CV","References"],avatar:"/placeholder.svg"},{id:3,name:"Dr. Robert Kim",email:"r.kim@email.com",specialty:"Orthopedics",experience:"12 years",licenseNumber:"MD901234",location:"Seattle, WA",education:"Johns Hopkins University",submittedDate:"2024-01-12",status:"Approved",documents:["License","Degree","CV","References","Background Check"],avatar:"/placeholder.svg"}],p=[{id:1,patient:"John Smith",doctor:"Dr. Sarah Johnson",date:"2024-01-15",time:"10:00 AM",status:"Completed",type:"Video Call",revenue:150},{id:2,patient:"Emily Davis",doctor:"Dr. Michael Chen",date:"2024-01-15",time:"2:30 PM",status:"Confirmed",type:"In-person",revenue:120},{id:3,patient:"Robert Wilson",doctor:"Dr. Lisa Park",date:"2024-01-15",time:"4:00 PM",status:"Cancelled",type:"Video Call",revenue:0}],y=u=>{console.log("Approving doctor:",u),alert("Doctor approved successfully!")},m=u=>{console.log("Rejecting doctor:",u),alert("Doctor application rejected.")};return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Kw,{className:"h-8 w-8 text-red-600"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Admin Dashboard"})]}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome, ",(t==null?void 0:t.name)||"Admin","! Comprehensive platform management and analytics"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.totalUsers}),a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["+",d.monthlyGrowth,"% this month"]})]}),a.jsx(Na,{className:"h-8 w-8 text-blue-600"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Active Doctors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.totalDoctors}),a.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:[d.pendingRequests," pending"]})]}),a.jsx(RI,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Appointments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.totalAppointments}),a.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[d.activeChats," active chats"]})]}),a.jsx(ps,{className:"h-8 w-8 text-purple-600"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Monthly Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",d.revenue.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Rating: ",d.satisfaction,"/5.0"]})]}),a.jsx(SI,{className:"h-8 w-8 text-orange-600"})]})})})]}),a.jsxs(Ph,{defaultValue:"analytics",className:"space-y-6",children:[a.jsxs(Yh,{className:"grid w-full grid-cols-5 lg:w-auto lg:grid-cols-5",children:[a.jsxs(bi,{value:"analytics",className:"flex items-center gap-2",children:[a.jsx($1,{className:"h-4 w-4"}),"Analytics"]}),a.jsxs(bi,{value:"doctor-requests",className:"flex items-center gap-2",children:[a.jsx(ni,{className:"h-4 w-4"}),"Doctor Requests"]}),a.jsxs(bi,{value:"appointments",className:"flex items-center gap-2",children:[a.jsx(ps,{className:"h-4 w-4"}),"Appointments"]}),a.jsxs(bi,{value:"users",className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4"}),"Users"]}),a.jsxs(bi,{value:"settings",className:"flex items-center gap-2",children:[a.jsx(iC,{className:"h-4 w-4"}),"Settings"]})]}),a.jsxs(wi,{value:"analytics",className:"space-y-6",children:[a.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(cI,{className:"h-5 w-5 text-blue-600"}),"Appointment Trends"]}),a.jsx(Vn,{children:"Monthly appointment statistics"})]}),a.jsx(Ot,{children:a.jsx("div",{className:"space-y-4",children:l.appointmentsThisMonth.map((u,b)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:u.month}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${u.appointments/500*100}%`}})}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 w-12",children:u.appointments})]})]},b))})})]}),a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx($1,{className:"h-5 w-5 text-green-600"}),"Popular Specialties"]}),a.jsx(Vn,{children:"Most requested medical specialties"})]}),a.jsx(Ot,{children:a.jsx("div",{className:"space-y-4",children:l.topSpecialties.map((u,b)=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:u.specialty}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[u.count," doctors"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${u.percentage}%`}})})]},b))})})]})]}),a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(_n,{children:"Recent Appointments"}),a.jsx(Vn,{children:"Latest appointment activity and revenue"})]}),a.jsx(Ot,{children:a.jsx("div",{className:"space-y-4",children:p.map(u=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[u.patient,"  ",u.doctor]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[u.date," at ",u.time," "," ",u.type]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["$",u.revenue]}),a.jsx($r,{variant:u.status==="Completed"?"default":u.status==="Confirmed"?"secondary":"destructive",children:u.status})]})]},u.id))})})]})]}),a.jsx(wi,{value:"doctor-requests",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(ni,{className:"h-5 w-5 text-orange-600"}),"Doctor Applications"]}),a.jsx(Vn,{children:"Review and approve new doctor registrations"})]}),a.jsx(Ot,{children:a.jsx("div",{className:"space-y-6",children:o.map(u=>a.jsx(Nt,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsxs(ws,{className:"h-16 w-16",children:[a.jsx(ks,{src:u.avatar||"/placeholder.svg"}),a.jsx(_s,{children:u.name.split(" ").map(b=>b[0]).join("")})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:u.name}),a.jsx($r,{variant:u.status==="Approved"?"default":u.status==="Under Review"?"secondary":"outline",children:u.status})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-300",children:[a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",u.email]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Specialty:"})," ",u.specialty]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Experience:"})," ",u.experience]})]}),a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"License:"})," ",u.licenseNumber]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Location:"})," ",u.location]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Education:"})," ",u.education]})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[a.jsx("strong",{children:"Submitted:"})," ",u.submittedDate]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.documents.map(b=>a.jsx($r,{variant:"outline",className:"text-xs",children:b},b))})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 lg:w-48",children:[a.jsxs(rr,{variant:"outline",size:"sm",className:"w-full",children:[a.jsx(Uy,{className:"h-4 w-4 mr-2"}),"View Details"]}),u.status==="Pending"&&a.jsxs(a.Fragment,{children:[a.jsxs(rr,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>y(u.id),children:[a.jsx(Ww,{className:"h-4 w-4 mr-2"}),"Approve"]}),a.jsxs(rr,{variant:"destructive",size:"sm",className:"w-full",onClick:()=>m(u.id),children:[a.jsx(zw,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]})},u.id))})})]})}),a.jsx(wi,{value:"appointments",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(_n,{children:"Appointment Management"}),a.jsx(Vn,{children:"Monitor and manage all appointments"})]}),a.jsx(Ot,{children:a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Appointment management interface..."})})]})}),a.jsx(wi,{value:"users",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(_n,{children:"User Management"}),a.jsx(Vn,{children:"Manage all platform users"})]}),a.jsx(Ot,{children:a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"User management interface..."})})]})}),a.jsx(wi,{value:"settings",className:"space-y-6",children:a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(_n,{children:"Platform Settings"}),a.jsx(Vn,{children:"Configure platform-wide settings"})]}),a.jsx(Ot,{children:a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Settings interface..."})})]})})]})]})}const oo=Object.create(null);oo.open="0";oo.close="1";oo.ping="2";oo.pong="3";oo.message="4";oo.upgrade="5";oo.noop="6";const Cm=Object.create(null);Object.keys(oo).forEach(e=>{Cm[oo[e]]=e});const Mb={type:"error",data:"parser error"},m6=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",g6=typeof ArrayBuffer=="function",v6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,cx=({type:e,data:t},r,n)=>m6&&t instanceof Blob?r?n(t):hE(t,n):g6&&(t instanceof ArrayBuffer||v6(t))?r?n(t):hE(new Blob([t]),n):n(oo[e]+(t||"")),hE=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function fE(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let M0;function eq(e,t){if(m6&&e.data instanceof Blob)return e.data.arrayBuffer().then(fE).then(t);if(g6&&(e.data instanceof ArrayBuffer||v6(e.data)))return t(fE(e.data));cx(e,!1,r=>{M0||(M0=new TextEncoder),t(M0.encode(r))})}const mE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<mE.length;e++)jp[mE.charCodeAt(e)]=e;const tq=e=>{let t=e.length*.75,r=e.length,n,s=0,i,c,d,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const o=new ArrayBuffer(t),p=new Uint8Array(o);for(n=0;n<r;n+=4)i=jp[e.charCodeAt(n)],c=jp[e.charCodeAt(n+1)],d=jp[e.charCodeAt(n+2)],l=jp[e.charCodeAt(n+3)],p[s++]=i<<2|c>>4,p[s++]=(c&15)<<4|d>>2,p[s++]=(d&3)<<6|l&63;return o},rq=typeof ArrayBuffer=="function",lx=(e,t)=>{if(typeof e!="string")return{type:"message",data:y6(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:nq(e.substring(1),t)}:Cm[r]?e.length>1?{type:Cm[r],data:e.substring(1)}:{type:Cm[r]}:Mb},nq=(e,t)=>{if(rq){const r=tq(e);return y6(r,t)}else return{base64:!0,data:e}},y6=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},b6="",sq=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((i,c)=>{cx(i,!1,d=>{n[c]=d,++s===r&&t(n.join(b6))})})},iq=(e,t)=>{const r=e.split(b6),n=[];for(let s=0;s<r.length;s++){const i=lx(r[s],t);if(n.push(i),i.type==="error")break}return n};function aq(){return new TransformStream({transform(e,t){eq(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let L0;function rm(e){return e.reduce((t,r)=>t+r.length,0)}function nm(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function oq(e,t){L0||(L0=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(c,d){for(r.push(c);;){if(n===0){if(rm(r)<1)break;const l=nm(r,1);i=(l[0]&128)===128,s=l[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(rm(r)<2)break;const l=nm(r,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(rm(r)<8)break;const l=nm(r,8),o=new DataView(l.buffer,l.byteOffset,l.length),p=o.getUint32(0);if(p>Math.pow(2,21)-1){d.enqueue(Mb);break}s=p*Math.pow(2,32)+o.getUint32(4),n=3}else{if(rm(r)<s)break;const l=nm(r,s);d.enqueue(lx(i?l:L0.decode(l),t)),n=0}if(s===0||s>e){d.enqueue(Mb);break}}}})}const w6=4;function Is(e){if(e)return cq(e)}function cq(e){for(var t in Is.prototype)e[t]=Is.prototype[t];return e}Is.prototype.on=Is.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Is.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Is.prototype.off=Is.prototype.removeListener=Is.prototype.removeAllListeners=Is.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Is.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};Is.prototype.emitReserved=Is.prototype.emit;Is.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Is.prototype.hasListeners=function(e){return!!this.listeners(e).length};const _v=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),ha=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lq="arraybuffer";function _6(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const dq=ha.setTimeout,uq=ha.clearTimeout;function xv(e,t){t.useNativeTimers?(e.setTimeoutFn=dq.bind(ha),e.clearTimeoutFn=uq.bind(ha)):(e.setTimeoutFn=ha.setTimeout.bind(ha),e.clearTimeoutFn=ha.clearTimeout.bind(ha))}const pq=1.33;function hq(e){return typeof e=="string"?fq(e):Math.ceil((e.byteLength||e.size)*pq)}function fq(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function x6(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mq(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function gq(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class vq extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class dx extends Is{constructor(t){super(),this.writable=!1,xv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new vq(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=lx(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=mq(t);return r.length?"?"+r:""}}class yq extends dx{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};iq(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,sq(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=x6()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let S6=!1;try{S6=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bq=S6;function wq(){}class _q extends yq{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let pu=class Tm extends Is{constructor(t,r,n){super(),this.createRequest=t,xv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=_6(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Tm.requestsCount++,Tm.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wq,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Tm.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};pu.requestsCount=0;pu.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",gE);else if(typeof addEventListener=="function"){const e="onpagehide"in ha?"pagehide":"unload";addEventListener(e,gE,!1)}}function gE(){for(let e in pu.requests)pu.requests.hasOwnProperty(e)&&pu.requests[e].abort()}const xq=function(){const e=E6({xdomain:!1});return e&&e.responseType!==null}();class Sq extends _q{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=xq&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new pu(E6,this.uri(),t)}}function E6(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||bq))return new XMLHttpRequest}catch{}if(!t)try{return new ha[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const R6=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Eq extends dx{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=R6?{}:_6(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;cx(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&_v(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=x6()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const F0=ha.WebSocket||ha.MozWebSocket;class Rq extends Eq{createSocket(t,r,n){return R6?new F0(t,r,n):r?new F0(t,r):new F0(t)}doWrite(t,r){this.ws.send(r)}}class kq extends dx{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=oq(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=aq();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:d,value:l})=>{d||(this.onPacket(l),i())}).catch(d=>{})};i();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&_v(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Cq={websocket:Rq,webtransport:kq,polling:Sq},Tq=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Pq=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lb(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=Tq.exec(e||""),i={},c=14;for(;c--;)i[Pq[c]]=s[c]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Nq(i,i.path),i.queryKey=Aq(i,i.query),i}function Nq(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Aq(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const Fb=typeof addEventListener=="function"&&typeof removeEventListener=="function",Pm=[];Fb&&addEventListener("offline",()=>{Pm.forEach(e=>e())},!1);class Bc extends Is{constructor(t,r){if(super(),this.binaryType=lq,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Lb(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Lb(r.host).host);xv(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=gq(this.opts.query)),Fb&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Pm.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=w6,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Bc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Bc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=hq(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,_v(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Bc.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fb&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Pm.indexOf(this._offlineEventListener);n!==-1&&Pm.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Bc.protocol=w6;class Oq extends Bc{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Bc.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",y=>{if(!n)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Bc.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(p(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function i(){n||(n=!0,p(),r.close(),r=null)}const c=y=>{const m=new Error("probe error: "+y);m.transport=r.name,i(),this.emitReserved("upgradeError",m)};function d(){c("transport closed")}function l(){c("socket closed")}function o(y){r&&y.name!==r.name&&i()}const p=()=>{r.removeListener("open",s),r.removeListener("error",c),r.removeListener("close",d),this.off("close",l),this.off("upgrading",o)};r.once("open",s),r.once("error",c),r.once("close",d),this.once("close",l),this.once("upgrading",o),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let jq=class extends Oq{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>Cq[s]).filter(s=>!!s)),super(t,n)}};function Dq(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Lb(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const Iq=typeof ArrayBuffer=="function",Mq=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,k6=Object.prototype.toString,Lq=typeof Blob=="function"||typeof Blob<"u"&&k6.call(Blob)==="[object BlobConstructor]",Fq=typeof File=="function"||typeof File<"u"&&k6.call(File)==="[object FileConstructor]";function ux(e){return Iq&&(e instanceof ArrayBuffer||Mq(e))||Lq&&e instanceof Blob||Fq&&e instanceof File}function Nm(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Nm(e[r]))return!0;return!1}if(ux(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Nm(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Nm(e[r]))return!0;return!1}function Bq(e){const t=[],r=e.data,n=e;return n.data=Bb(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Bb(e,t){if(!e)return e;if(ux(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Bb(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Bb(e[n],t));return r}return e}function Uq(e,t){return e.data=Ub(e.data,t),delete e.attachments,e}function Ub(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Ub(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Ub(e[r],t));return e}const Vq=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$q=5;var rn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(rn||(rn={}));class Wq{constructor(t){this.replacer=t}encode(t){return(t.type===rn.EVENT||t.type===rn.ACK)&&Nm(t)?this.encodeAsBinary({type:t.type===rn.EVENT?rn.BINARY_EVENT:rn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===rn.BINARY_EVENT||t.type===rn.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Bq(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function vE(e){return Object.prototype.toString.call(e)==="[object Object]"}class px extends Is{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===rn.BINARY_EVENT;n||r.type===rn.BINARY_ACK?(r.type=n?rn.EVENT:rn.ACK,this.reconstructor=new zq(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(ux(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(rn[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===rn.BINARY_EVENT||n.type===rn.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const c=t.substring(i,r);if(c!=Number(c)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const c=t.charAt(r);if(c==null||Number(c)!=c){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(px.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case rn.CONNECT:return vE(r);case rn.DISCONNECT:return r===void 0;case rn.CONNECT_ERROR:return typeof r=="string"||vE(r);case rn.EVENT:case rn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Vq.indexOf(r[0])===-1);case rn.ACK:case rn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class zq{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Uq(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Hq=Object.freeze(Object.defineProperty({__proto__:null,Decoder:px,Encoder:Wq,get PacketType(){return rn},protocol:$q},Symbol.toStringTag,{value:"Module"}));function Ta(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const qq=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class C6 extends Is{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ta(t,"open",this.onopen.bind(this)),Ta(t,"packet",this.onpacket.bind(this)),Ta(t,"error",this.onerror.bind(this)),Ta(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,i;if(qq.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const c={type:rn.EVENT,data:r};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const p=this.ids++,y=r.pop();this._registerAckCallback(p,y),c.id=p}const d=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!d||(l?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);r.call(this,new Error("operation has timed out"))},s),c=(...d)=>{this.io.clearTimeoutFn(i),r.apply(this,d)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...r){return new Promise((n,s)=>{const i=(c,d)=>c?s(c):n(d);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:rn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case rn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rn.EVENT:case rn.BINARY_EVENT:this.onevent(t);break;case rn.ACK:case rn.BINARY_ACK:this.onack(t);break;case rn.DISCONNECT:this.ondisconnect();break;case rn.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:rn.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function $u(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}$u.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};$u.prototype.reset=function(){this.attempts=0};$u.prototype.setMin=function(e){this.ms=e};$u.prototype.setMax=function(e){this.max=e};$u.prototype.setJitter=function(e){this.jitter=e};class Vb extends Is{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,xv(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new $u({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||Hq;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new jq(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Ta(r,"open",function(){n.onopen(),t&&t()}),i=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},c=Ta(r,"error",i);if(this._timeout!==!1){const d=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},d);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ta(t,"ping",this.onping.bind(this)),Ta(t,"data",this.ondata.bind(this)),Ta(t,"error",this.onerror.bind(this)),Ta(t,"close",this.onclose.bind(this)),Ta(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){_v(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new C6(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Rp={};function Am(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Dq(e,t.path||"/socket.io"),n=r.source,s=r.id,i=r.path,c=Rp[s]&&i in Rp[s].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let l;return d?l=new Vb(n,t):(Rp[s]||(Rp[s]=new Vb(n,t)),l=Rp[s]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(Am,{Manager:Vb,Socket:C6,io:Am,connect:Am});const Kq=void 0,T6=void 0,Wu=Am(Kq,{withCredentials:!0}),yE=e=>{Wu.emit("joinDmRoom",e)},Gq=(e,t,r)=>{Wu.emit("joinRoom",{event:"joinRoom",data:{roomId:e,userId:t,username:r}})},Yq=e=>{Wu.emit("dmMessage",{event:"dmMessage",data:e})},Jq=e=>{Wu.on("message",t=>{e(t)})},Qq=()=>{Wu.off("message")},Xq=e=>{Wu.emit("roomMessage",{event:"roomMessage",data:e})},bE=async(e,t=1,r=50)=>{try{return(await Mt.get(`${T6}/api/chat/one-on-one/${e}`,{params:{page:t,limit:r},withCredentials:!0})).data}catch(n){throw console.error("Error loading 1-on-1 chat history:",n),n}},Zq=async(e,t=1,r=50)=>{try{return(await Mt.get(`${T6}/api/chat/city/${encodeURIComponent(e)}`,{params:{page:t,limit:r},withCredentials:!0})).data}catch(n){throw console.error("Error loading city chat history:",n),n}};function eK(){const[e,t]=A.useState(""),[r,n]=A.useState([]),[s,i]=A.useState("ai"),[c,d]=A.useState([]),[l,o]=A.useState([]),[p,y]=A.useState(!1),[m,u]=A.useState(!0),[b,f]=A.useState([]),[_,g]=A.useState(null),[v,w]=A.useState(!1),[S,E]=A.useState([]),[O,C]=A.useState(null),k=A.useRef(null),T="undefined/api",h=Wn(se=>se.user);A.useEffect(()=>{async function se(){var ue;try{const Ce=await Mt.get(`${T}/patient/fetchAllDoctors`,{withCredentials:!0});Ce.data.success&&n(Ce.data.data)}catch(Ce){Mt.isAxiosError(Ce)&&Ce.response?qt.error(((ue=Ce.response.data)==null?void 0:ue.message)||"Something went wrong"):qt.error("Unknown error occurred")}}se()},[T]),A.useEffect(()=>{async function se(){var ue;if(h)try{const Ce=h.role==="DOCTOR"?`${T}/doctor/city-rooms`:`${T}/patient/city-rooms`,He=await Mt.get(Ce,{withCredentials:!0});if(He.data.success){const $t=He.data.data;o(Array.isArray($t)?$t:[$t])}}catch(Ce){Mt.isAxiosError(Ce)&&Ce.response?qt.error(((ue=Ce.response.data)==null?void 0:ue.message)||"Something went wrong"):qt.error("Unknown error ocurred")}}se()},[h]);const[x,R]=A.useState([]),[P,N]=A.useState(!1),[j,D]=A.useState(()=>localStorage.getItem("ai-chat-language")||"en"),L=[{code:"en",name:"English",flag:""},{code:"hi",name:"",flag:""},{code:"gu",name:"",flag:""},{code:"pa",name:"",flag:""},{code:"mr",name:"",flag:""},{code:"bn",name:"",flag:""},{code:"ta",name:"",flag:""},{code:"te",name:"",flag:""},{code:"kn",name:"",flag:""},{code:"ml",name:"",flag:""},{code:"or",name:"",flag:""}],M=se=>{D(se),localStorage.setItem("ai-chat-language",se)},I=se=>{const ue=se.toLowerCase();return ue.includes("severe")||ue.includes("grave")||ue.includes("severo")||ue.includes("svre")?"severe":ue.includes("moderate")||ue.includes("moderado")||ue.includes("modr")||ue.includes("moderato")?"moderate":"mild"};A.useEffect(()=>{(h==null?void 0:h.role)==="DOCTOR"&&_e()},[h]),A.useEffect(()=>{var se;if(m){u(!1);return}(c.length>0||x.length>0)&&k.current&&((se=k.current)==null||se.scrollIntoView({behavior:"smooth"}))},[c,x,m]),A.useEffect(()=>{s==="ai"&&G()},[s]);const G=async()=>{try{const se=await Mt.get(`${T}/ai-chat/history`,{withCredentials:!0});if(se.data.success){const ue=se.data.data.chats||[];if(ue.length===0)R([{id:"welcome",type:"ai",message:"Hello! I'm CareXpert AI, your health assistant. Describe your symptoms and I'll help analyze them for you.",time:"Just now"}]);else{const Ce=ue.map(He=>[{id:`${He.id}-user`,type:"user",message:He.userMessage,time:Ki(He.createdAt)},{id:`${He.id}-ai`,type:"ai",message:de(He),time:Ki(He.createdAt),aiData:He}]).flat();R(Ce)}}}catch(se){console.error("Error loading AI chat history:",se),R([{id:"welcome",type:"ai",message:"Hello! I'm CareXpert AI, your health assistant. Describe your symptoms and I'll help analyze them for you.",time:"Just now"}])}},de=se=>{const ue=se.probable_causes||se.probableCauses||[],{severity:Ce,recommendation:He,disclaimer:$t}=se;let nr=`**Probable Causes:**
${ue.map(Ct=>` ${Ct}`).join(`
`)}

`;return nr+=`**Recommendation:**
${He}

`,nr+=`**Disclaimer:**
${$t}`,nr},ee=async()=>{try{await Mt.delete(`${T}/ai-chat/history`,{withCredentials:!0}),R([{id:"welcome",type:"ai",message:"Chat cleared. Hello! I'm CareXpert AI. Describe your symptoms and I'll help analyze them for you.",time:Ki(new Date)}]),qt.success("AI chat cleared")}catch{qt.error("Failed to clear AI chat")}},Q=async se=>{try{N(!0);const ue={id:`user-${Date.now()}`,type:"user",message:se,time:Ki(new Date)};R(He=>[...He,ue]),t("");const Ce=await Mt.post(`${T}/ai-chat/process`,{symptoms:se,language:j},{withCredentials:!0,timeout:15e3});if(Ce.data.success){const He=Ce.data.data,$t={id:`ai-${Date.now()}`,type:"ai",message:de(He),time:Ki(new Date),aiData:He};R(nr=>[...nr,$t])}}catch(ue){console.error("Error sending AI message:",ue),qt.error("Failed to get AI response. Please try again.");const Ce={id:`error-${Date.now()}`,type:"ai",message:"Sorry, I'm having trouble processing your request. Please try again.",time:Ki(new Date)};R(He=>[...He,Ce])}finally{N(!1)}};function ae(se,ue){return[se,ue].sort().join("_")}const _e=async()=>{try{const se=await Mt.get(`${T}/chat/doctor/conversations`,{withCredentials:!0});se.data.success&&E(se.data.data.conversations)}catch(se){console.error("Error fetching DM conversations:",se)}},Se=async se=>{C(se),i({type:"doctor",data:{id:se.otherUser.id,userId:se.otherUser.id,specialty:"Patient",clinicLocation:"",user:{name:se.otherUser.name,profilePicture:se.otherUser.profilePicture}}}),d([]);const ue=ae((h==null?void 0:h.id)||"",se.otherUser.id);yE(ue),await ie(se.otherUser.id)},ie=async se=>{try{const ue=await bE(se);if(ue.success){const Ce=ue.data.messages.map(He=>({roomId:ae((h==null?void 0:h.id)||"",se),senderId:He.senderId,receiverId:He.receiverId,username:He.sender.name,text:He.message,time:Ki(He.timestamp),messageType:He.messageType,imageUrl:He.imageUrl}));d(Ce)}}catch(ue){console.error("Error loading conversation history:",ue)}},$e=async se=>{try{const ue=await Mt.get(`undefined/api/user/communities/${se}/members`,{withCredentials:!0});ue.data.success&&f(ue.data.data.members)}catch(ue){console.error("Error fetching community members:",ue)}};A.useEffect(()=>{let se=!0;return(async()=>{var Ce,He;if(h)try{if(typeof s=="object"&&s.type==="doctor"){const $t=ae(h.id,s.data.userId);yE($t);const nr=await bE(s.data.userId);if(se&&nr.success){const Ct=nr.data.messages.map(cr=>({roomId:$t,senderId:cr.senderId,receiverId:cr.receiverId,username:cr.sender.name,text:cr.message,time:new Date(cr.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:cr.messageType,imageUrl:cr.imageUrl}));d(Ct)}}else if(typeof s=="object"&&s.type==="room"){const $t=await Zq(s.name);if(se&&$t.success){const nr=((He=(Ce=$t.data)==null?void 0:Ce.room)==null?void 0:He.id)||s.id;g(nr),h&&Gq(nr,h.id,h.name);const Ct=$t.data.messages.map(cr=>({roomId:nr,senderId:cr.senderId,receiverId:null,username:cr.sender.name,text:cr.message,time:new Date(cr.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),messageType:cr.messageType,imageUrl:cr.imageUrl}));d(Ct),await $e(s.id)}}else s==="ai"&&d([])}catch($t){se&&(console.error("Error loading chat history:",$t),d([]))}})(),()=>{se=!1}},[s,h]);const je=async()=>{if(!(!e.trim()||!s||!h)){if(typeof s=="object"&&s.type==="doctor"){const ue={roomId:ae(h.id,s.data.userId),senderId:h.id,receiverId:s.data.userId,username:h.name,text:e.trim(),messageType:"TEXT",time:Ki(new Date)};Yq(ue),d(Ce=>[...Ce,{...ue,type:"user"}]),t("")}else if(s==="ai")await Q(e.trim());else if(typeof s=="object"&&s.type==="room"){if(!_){qt.error("Connecting to room... please try again in a moment");return}const se={roomId:_,senderId:h.id,username:h.name,text:e.trim(),messageType:"TEXT",time:Ki(new Date)};Xq(se),d(ue=>[...ue,{...se,type:"user"}]),t("")}}};return A.useEffect(()=>(Jq(ue=>{ue.senderId!==(h==null?void 0:h.id)&&(typeof s=="object"&&s.type==="doctor"&&ae((h==null?void 0:h.id)||"",s.data.userId)===ue.roomId?d(Ce=>[...Ce,ue]):typeof s=="object"&&s.type==="room"&&s.id===ue.roomId&&d(Ce=>[...Ce,ue]))}),()=>{Qq()}),[s,h]),a.jsxs("div",{className:"h-[calc(100%-1rem)] overflow-hidden flex flex-col mt-4",children:[a.jsx("div",{className:"lg:hidden p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Chat"}),a.jsx(rr,{variant:"outline",size:"sm",onClick:()=>y(!p),children:p?a.jsx(og,{className:"h-4 w-4"}):a.jsx(qw,{className:"h-4 w-4"})})]})}),a.jsxs("div",{className:"flex-1 flex overflow-hidden h-full",children:[p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>y(!1)}),a.jsxs("div",{className:`${p?"block":"hidden"} lg:block w-80 flex-shrink-0 lg:mr-6 lg:relative fixed lg:top-0 top-0 left-0 h-full z-50 lg:z-auto bg-white dark:bg-gray-900 lg:bg-transparent`,children:[a.jsx("div",{className:"lg:hidden flex justify-end p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx(rr,{variant:"ghost",size:"sm",onClick:()=>y(!1),children:a.jsx(og,{className:"h-4 w-4"})})}),a.jsxs(Ph,{defaultValue:"ai",className:"space-y-4 flex flex-col h-full",children:[a.jsxs(Yh,{className:`grid w-full ${(h==null?void 0:h.role)==="DOCTOR"?"grid-cols-4":"grid-cols-3"}`,children:[a.jsx(bi,{value:"ai",className:"text-xs",children:"AI"}),a.jsx(bi,{value:"doctors",className:"text-xs",children:"Doctors"}),(h==null?void 0:h.role)==="DOCTOR"&&a.jsx(bi,{value:"patients",className:"text-xs",children:"Patients"}),a.jsx(bi,{value:"community",className:"text-xs",children:"Community"})]}),a.jsx(wi,{value:"ai",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsx(En,{className:"pb-3",children:a.jsxs(_n,{className:"flex items-center gap-2 text-lg",children:[a.jsx(gm,{className:"h-5 w-5 text-purple-600"}),"CareXpert AI"]})}),a.jsx(Ot,{className:"flex-1 overflow-y-auto scrollbar-hide",children:a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${s==="ai"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{i("ai"),y(!1)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:a.jsx(gm,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"AI Assistant"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Always available"})]})]})})})]})}),a.jsx(wi,{value:"doctors",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsx(En,{className:"pb-3",children:a.jsxs(_n,{className:"flex items-center gap-2 text-lg",children:[a.jsx($c,{className:"h-5 w-5 text-blue-600"}),"Doctor Chats"]})}),a.jsx(Ot,{className:"space-y-3 flex-1 overflow-y-auto scrollbar-hide",children:r.length>0?r.map(se=>a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${typeof s=="object"&&s.type==="doctor"&&s.data.id===se.id?"bg-blue-100 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{i({type:"doctor",data:se}),y(!1)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"relative",children:a.jsxs(ws,{className:"h-10 w-10",children:[a.jsx(ks,{src:se.user.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:se.user.name.split(" ").map(ue=>ue[0]).join("")})]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:se.user.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:se.specialty})]})]})},se.id)):a.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No doctors found."})})]})}),(h==null?void 0:h.role)==="DOCTOR"&&a.jsx(wi,{value:"patients",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsxs(En,{className:"pb-3",children:[a.jsxs(_n,{className:"flex items-center gap-2 text-lg",children:[a.jsx(Na,{className:"h-5 w-5 text-green-600"}),"Patient Messages"]}),a.jsx(Vn,{children:"Chat with your patients"})]}),a.jsx(Ot,{className:"p-0",children:a.jsx("div",{className:"h-[500px] overflow-y-auto scrollbar-hide",children:S.length>0?S.map(se=>a.jsx("div",{className:`p-4 border-b cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${(O==null?void 0:O.otherUser.id)===se.otherUser.id?"bg-green-50 dark:bg-green-900/20 border-l-4 border-l-green-500":""}`,onClick:()=>{Se(se),y(!1)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{className:"h-10 w-10",children:[a.jsx(ks,{src:se.otherUser.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:se.otherUser.name.split(" ").map(ue=>ue[0]).join("")})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:se.otherUser.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:se.lastMessage.message}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:Ki(se.lastMessage.timestamp)})]}),se.unreadCount>0&&a.jsx($r,{variant:"destructive",className:"text-xs",children:se.unreadCount})]})},se.otherUser.id)):a.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[a.jsx(Na,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No conversations yet"}),a.jsx("p",{className:"text-sm",children:"Patients will appear here when they message you"})]})})})]})}),a.jsx(wi,{value:"community",className:"flex-1 overflow-hidden",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsx(En,{className:"pb-3",children:a.jsxs(_n,{className:"flex items-center justify-between text-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-5 w-5 text-green-600"}),"City Rooms"]}),a.jsx("div",{children:a.jsx(Vy,{className:"bg-gray-200 dark:bg-gray-700 rounded-full h-8 w-8 p-1"})})]})}),a.jsx(Ot,{className:"space-y-3 flex-1 overflow-y-auto scrollbar-hide",children:l.length>0?l.map(se=>a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${typeof s=="object"&&s.type==="room"&&s.name===se.name?"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-700":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>{i({type:"room",...se}),y(!1)},children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:se.name}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(io,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:se.name})]}),a.jsxs($r,{variant:"secondary",className:"text-xs",children:[se.members.length," members"]})]})},se.id)):a.jsx("p",{children:"Loading city rooms..."})})]})})]})]}),a.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:a.jsxs(Nt,{className:"h-full flex flex-col",children:[a.jsxs(En,{className:"border-b",children:[s==="ai"&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center",children:a.jsx(gm,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx(_n,{className:"text-lg",children:"CareXpert AI Assistant"}),a.jsx(Vn,{children:"Your personal health companion"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(rr,{variant:"outline",size:"sm",onClick:ee,children:[a.jsx(aC,{className:"h-4 w-4 mr-2"}),"Clear Chat"]}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Language:"}),a.jsx("select",{value:j,onChange:se=>M(se.target.value),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:L.map(se=>a.jsxs("option",{value:se.code,children:[se.flag," ",se.name]},se.code))})]})]}),typeof s=="object"&&s.type==="doctor"&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{className:"h-10 w-10",children:[a.jsx(ks,{src:s.data.user.profilePicture}),a.jsx(_s,{children:s.data.user.name.split(" ").map(se=>se[0]).join("")})]}),a.jsxs("div",{children:[a.jsx(_n,{className:"text-lg",children:s.data.user.name}),a.jsxs(Vn,{children:[s.data.specialty,"  Online"]})]})]}),typeof s=="object"&&s.type==="room"&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:a.jsx(Na,{className:"h-5 w-5 text-white"})}),a.jsxs("div",{children:[a.jsx(_n,{className:"text-lg",children:s.name}),a.jsxs(Vn,{children:[s.members.length," members "," ",s.name]})]})]}),a.jsxs(rr,{variant:"outline",size:"sm",onClick:()=>w(!v),className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4"}),v?"Hide Members":"Show Members"]})]})]}),a.jsx(Ot,{className:"flex-1 p-4 overflow-y-auto scrollbar-hide",children:a.jsxs("div",{className:"h-full",children:[s==="ai"&&a.jsxs(a.Fragment,{children:[x.map(se=>a.jsx("div",{className:`flex mb-4 ${se.type==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${se.type==="user"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[se.type==="ai"?a.jsxs("div",{className:"text-sm",children:[se.aiData&&a.jsx("div",{className:"mb-3",children:a.jsxs($r,{variant:I(se.aiData.severity)==="severe"?"destructive":I(se.aiData.severity)==="moderate"?"default":"secondary",className:"mb-2",children:[se.aiData.severity.charAt(0).toUpperCase()+se.aiData.severity.slice(1)," ","Severity"]})}),se.message.split(`
`).map((ue,Ce)=>ue.startsWith("**")&&ue.endsWith("**")?a.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-2",children:ue.replace(/\*\*/g,"")},Ce):ue.startsWith("")?a.jsx("div",{className:"ml-4 mb-1",children:ue},Ce):ue.trim()===""?a.jsx("br",{},Ce):a.jsx("div",{className:"mb-2",children:ue},Ce))]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:se.message}),a.jsx("p",{className:`text-xs mt-1 ${se.type==="user"?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:se.time})]})},se.id)),P&&a.jsx("div",{className:"flex justify-start mb-4",children:a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white p-3 rounded-lg max-w-[80%]",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-bounce delay-100"}),a.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-bounce delay-200"})]}),a.jsx("span",{className:"text-sm",children:"AI is analyzing..."})]})})})]}),typeof s=="object"&&(s.type==="doctor"||s.type==="room")&&(c.length>0?c.filter(se=>s.type==="room"?!se.roomId||se.roomId===(_||s.id):!0).map((se,ue)=>{var Ce,He;return a.jsxs("div",{className:`flex mb-2 ${se.type==="user"||se.senderId===(h==null?void 0:h.id)?"justify-end":"justify-start"}`,children:[s.type==="room"&&!(se.type==="user"||se.senderId===(h==null?void 0:h.id))&&a.jsx("div",{className:"mr-2 mt-[2px]",children:a.jsxs(ws,{className:"h-6 w-6",children:[a.jsx(ks,{src:"/placeholder-user.jpg"}),a.jsx(_s,{className:"text-[10px]",children:((Ce=se.username)==null?void 0:Ce.charAt(0))||"U"})]})}),a.jsxs("div",{className:`max-w-[80%] py-2 px-[10px] rounded-lg ${se.type==="user"||se.senderId===(h==null?void 0:h.id)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white"}`,children:[se.messageType==="IMAGE"&&se.imageUrl?a.jsx("img",{src:se.imageUrl,alt:"sent-img",className:"rounded mb-1 max-w-full h-auto"}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:se.text}),a.jsx("p",{className:"text-xs mt-1 text-right text-gray-400",children:se.time})]}),s.type==="room"&&(se.type==="user"||se.senderId===(h==null?void 0:h.id))&&a.jsx("div",{className:"ml-2 mt-[2px]",children:a.jsxs(ws,{className:"h-6 w-6",children:[a.jsx(ks,{src:h==null?void 0:h.profilePicture}),a.jsx(_s,{className:"text-[10px]",children:((He=h==null?void 0:h.name)==null?void 0:He.charAt(0))||"U"})]})})]},ue)}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s.type==="doctor"?"Start a conversation with your doctor":"Join the community discussion"})})),a.jsx("div",{ref:k})," "]})}),typeof s=="object"&&s.type==="room"&&v&&a.jsxs("div",{className:"border-t p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Community Members (",b.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-48 overflow-y-auto scrollbar-hide",children:b.map(se=>{var ue;return a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsxs(ws,{className:"h-8 w-8",children:[a.jsx(ks,{src:se.profilePicture}),a.jsx(_s,{className:"bg-blue-600 text-white text-sm",children:((ue=se.name)==null?void 0:ue.charAt(0))||"U"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:se.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($r,{variant:se.role==="DOCTOR"?"default":"secondary",className:"text-xs",children:se.role==="DOCTOR"?a.jsxs(a.Fragment,{children:[a.jsx(Mh,{className:"h-3 w-3 mr-1"}),"Doctor"]}):a.jsxs(a.Fragment,{children:[a.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Patient"]})}),se.specialty&&a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:se.specialty})]}),se.location&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[" ",se.location]})]})]},se.id)})})]}),a.jsx("div",{className:"border-t p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ls,{placeholder:"Type your message...",value:e,disabled:s==="ai"&&P,onChange:se=>t(se.target.value),onKeyDown:se=>{se.key==="Enter"&&!P&&(se.preventDefault(),je())},className:"flex-1"}),a.jsx(rr,{onClick:je,className:"px-6",disabled:!e.trim()||s==="ai"&&P,children:a.jsx(sC,{className:"h-4 w-4"})})]})})]})})]})]})}function B0(){const[e,t]=A.useState(!0),[r,n]=A.useState(!1),[s,i]=A.useState(!1),[c,d]=A.useState(null),[l,o]=A.useState({data:"",password:""}),[p,y]=A.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",specialty:"",clinicLocation:"",location:""}),m=Ba(),{login:u}=Wn(),b=Wn(v=>v.isLoading),f=async v=>{v.preventDefault();try{await u(l.data,l.password),qt.success("Login successful!");const w=Wn.getState().user;w&&(w.role==="DOCTOR"?m("/dashboard/doctor"):w.role==="PATIENT"?m("/dashboard/patient"):w.role==="ADMIN"&&m("/admin"))}catch(w){qt.error(w.message||"Login failed")}},_=async v=>{var w,S;if(v.preventDefault(),p.password!==p.confirmPassword){qt.error("Passwords do not match");return}if(!c){qt.error("Please select a role");return}i(!0);try{const E={firstName:p.firstName,lastName:p.lastName,email:p.email,password:p.password,role:c,...c==="DOCTOR"&&{specialty:p.specialty,clinicLocation:p.clinicLocation},...c==="PATIENT"&&{location:p.location}};(await Mt.post("undefined/api/user/signup",E)).data.success&&(qt.success("Signup successful! Please login."),t(!0),y({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"",specialty:"",clinicLocation:"",location:""}),d(null))}catch(E){qt.error(((S=(w=E.response)==null?void 0:w.data)==null?void 0:S.message)||"Signup failed")}finally{i(!1)}},g=v=>{d(v),y(w=>({...w,role:v}))};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center",children:a.jsx(ed,{className:"h-8 w-8 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome to CareXpert"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Your health companion for better care"})]}),a.jsxs(Nt,{className:"shadow-xl",children:[a.jsx(En,{children:a.jsx(Ph,{value:e?"login":"signup",onValueChange:v=>t(v==="login"),children:a.jsxs(Yh,{className:"grid w-full grid-cols-2",children:[a.jsx(bi,{value:"login",children:"Login"}),a.jsx(bi,{value:"signup",children:"Sign Up"})]})})}),a.jsx(Ot,{children:a.jsxs(Ph,{value:e?"login":"signup",children:[a.jsx(wi,{value:"login",children:a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"login-data",children:"Email or Username"}),a.jsx(ls,{id:"login-data",type:"text",value:l.data,onChange:v=>o(w=>({...w,data:v.target.value})),placeholder:"Enter your email or username",required:!0})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"login-password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(ls,{id:"login-password",type:r?"text":"password",value:l.password,onChange:v=>o(w=>({...w,password:v.target.value})),placeholder:"Enter your password",required:!0}),a.jsx(rr,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!r),children:r?a.jsx(W1,{className:"h-4 w-4"}):a.jsx(Uy,{className:"h-4 w-4"})})]})]}),a.jsx(rr,{type:"submit",className:"w-full",disabled:b,children:b?"Signing in...":"Sign In"})]})}),a.jsx(wi,{value:"signup",children:a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(gn,{children:"I want to join as:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[a.jsxs(rr,{type:"button",variant:c==="PATIENT"?"default":"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",onClick:()=>g("PATIENT"),children:[a.jsx(Oo,{className:"h-6 w-6"}),a.jsx("span",{children:"Patient"})]}),a.jsxs(rr,{type:"button",variant:c==="DOCTOR"?"default":"outline",className:"h-20 flex flex-col items-center justify-center space-y-2",onClick:()=>g("DOCTOR"),children:[a.jsx(Mh,{className:"h-6 w-6"}),a.jsx("span",{children:"Doctor"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"firstName",children:"First Name"}),a.jsx(ls,{id:"firstName",value:p.firstName,onChange:v=>y(w=>({...w,firstName:v.target.value})),placeholder:"John",required:!0})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"lastName",children:"Last Name"}),a.jsx(ls,{id:"lastName",value:p.lastName,onChange:v=>y(w=>({...w,lastName:v.target.value})),placeholder:"Doe",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"email",children:"Email"}),a.jsx(ls,{id:"email",type:"email",value:p.email,onChange:v=>y(w=>({...w,email:v.target.value})),placeholder:"john@example.com",required:!0})]}),c==="DOCTOR"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"specialty",children:"Specialty"}),a.jsxs(Qa,{value:p.specialty,onValueChange:v=>y(w=>({...w,specialty:v})),children:[a.jsx(Aa,{children:a.jsx(Xa,{placeholder:"Select your specialty"})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"Cardiology",children:"Cardiology"}),a.jsx(qr,{value:"Dermatology",children:"Dermatology"}),a.jsx(qr,{value:"Neurology",children:"Neurology"}),a.jsx(qr,{value:"Orthopedics",children:"Orthopedics"}),a.jsx(qr,{value:"Pediatrics",children:"Pediatrics"}),a.jsx(qr,{value:"Psychiatry",children:"Psychiatry"}),a.jsx(qr,{value:"General Medicine",children:"General Medicine"}),a.jsx(qr,{value:"Other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"clinicLocation",children:"Clinic Location"}),a.jsxs("div",{className:"relative",children:[a.jsx(io,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(ls,{id:"clinicLocation",value:p.clinicLocation,onChange:v=>y(w=>({...w,clinicLocation:v.target.value})),placeholder:"City, State, Country",className:"pl-10",required:!0})]})]})]}),c==="PATIENT"&&a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"location",children:"Location"}),a.jsxs("div",{className:"relative",children:[a.jsx(io,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(ls,{id:"location",value:p.location,onChange:v=>y(w=>({...w,location:v.target.value})),placeholder:"City, State, Country",className:"pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(ls,{id:"password",type:r?"text":"password",value:p.password,onChange:v=>y(w=>({...w,password:v.target.value})),placeholder:"Create a password",required:!0}),a.jsx(rr,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!r),children:r?a.jsx(W1,{className:"h-4 w-4"}):a.jsx(Uy,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsx(gn,{htmlFor:"confirmPassword",children:"Confirm Password"}),a.jsx(ls,{id:"confirmPassword",type:"password",value:p.confirmPassword,onChange:v=>y(w=>({...w,confirmPassword:v.target.value})),placeholder:"Confirm your password",required:!0})]}),a.jsx(rr,{type:"submit",className:"w-full",disabled:s||!c,children:s?"Creating account...":"Create Account"})]})})]})})]}),a.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:a.jsx("p",{children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})})}function tK(){return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(Lc,{}),a.jsx("div",{className:"container mx-auto px-4 py-8 pt-16",children:a.jsxs(Hk,{children:[a.jsx(Cr,{path:"login",element:a.jsx(B0,{})}),a.jsx(Cr,{path:"patient/signup",element:a.jsx(B0,{})}),a.jsx(Cr,{path:"doctor/signup",element:a.jsx(B0,{})})]})}),a.jsx(Gl,{})]})}function rK(){const e=Ba(),t=Wn(n=>n.user);return A.useEffect(()=>{(!t||t.role!=="PATIENT")&&e("/auth/login")},[t,!1,e]),a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[a.jsxs("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome, ",a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:(t==null?void 0:t.name)||"Patient"}),"!"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your health journey with CareXpert"})]}),a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid md:grid-cols-2 gap-6 mb-8",children:[a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsx(bs,{to:"/chat",children:a.jsx(Nt,{className:"bg-gradient-to-r from-blue-600 to-blue-700 border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",children:a.jsx(Ot,{className:"p-8 text-white",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(gm,{className:"h-8 w-8"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Start ChatBot"}),a.jsx("p",{className:"text-blue-100",children:"Get instant answers to your health questions"})]})]})})})})}),a.jsx(Qr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsx(bs,{to:"/upload-report",children:a.jsx(Nt,{className:"bg-gradient-to-r from-green-600 to-green-700 border-0 shadow-lg hover:shadow-xl transition-shadow cursor-pointer",children:a.jsx(Ot,{className:"p-8 text-white",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Mh,{className:"h-8 w-8"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Analyze Report"}),a.jsx("p",{className:"text-green-100",children:"Schedule your next consultation"})]})]})})})})})]}),a.jsxs(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(bs,{to:"/prescriptions",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(Ot,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(ag,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"View Prescriptions"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Access all your medical prescriptions"})]})})})}),a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(bs,{to:"/appointments",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(Ot,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(ps,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"View Appointments"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Check your upcoming and past appointments"})]})})})}),a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(bs,{to:"/chat",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(Ot,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx($c,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Chat with Bot"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Get quick answers to your health queries"})]})})})}),a.jsx(Qr.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(bs,{to:"/doctors",children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:a.jsxs(Ot,{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(kI,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Book Appointment"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Schedule a consultation with a doctor"})]})})})})]}),a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8",children:a.jsx(Nt,{className:"bg-gray-50 dark:bg-gray-800 border-0",children:a.jsx(Ot,{className:"p-8 text-center",children:a.jsx("blockquote",{className:"text-lg text-gray-700 dark:text-gray-300 italic",children:'"The greatest wealth is health. Taking care of your health today gives you better hope for tomorrow."'})})})}),a.jsx(Qr.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},className:"fixed bottom-6 right-6 z-40",children:a.jsx(bs,{to:"/chat",children:a.jsx(rr,{size:"lg",className:"shadow-lg hover:shadow-xl transition-shadow bg-blue-600 hover:bg-blue-700 flex items-center justify-center",style:{borderRadius:"9999px",width:56,height:56,padding:0,minWidth:0},children:a.jsx($c,{className:"h-5 w-5"})})})})]})}function nK(){const e=Ba(),t=Wn(m=>m.user),r=Wn(m=>m.isLoading),[n,s]=A.useState(""),[i,c]=A.useState(""),[d,l]=A.useState([]),[o,p]=A.useState([]),y="undefined/api/doctor";return A.useEffect(()=>{!r&&(!t||t.role!=="DOCTOR")&&e("/auth/login")},[t,r,e]),A.useEffect(()=>{async function m(){var u;try{const b=await Mt.get(`${y}/all-appointments`,{withCredentials:!0});if(b.data.success){const f=b.data.data,_=new Date,g=new Date;g.setHours(0,0,0,0);const v=new Date(g);v.setDate(v.getDate()+1);const w=f.filter(E=>{const O=new Date(E.date);return O>=g&&O<v}),S=f.filter(E=>new Date(`${E.date}T${E.time}`)>=_);l(w),p(S)}}catch(b){Mt.isAxiosError(b)&&b.response?qt.error(((u=b.response.data)==null?void 0:u.message)||"Something went wrong"):qt.error("Unknown error occured")}}m()},[]),a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:["Welcome back, ",(t==null?void 0:t.name)||"Doctor","!"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your practice and help your patients"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Today's Appointments"}),a.jsx("p",{className:"text-2xl font-bold dark:text-white",children:d==null?void 0:d.length})]}),a.jsx(ps,{className:"h-8 w-8 text-blue-600"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total Patients"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"247"})]}),a.jsx(Na,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Unread Messages"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"3"})]}),a.jsx($c,{className:"h-8 w-8 text-purple-600"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"This Month"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"89"})]}),a.jsx(Ma,{className:"h-8 w-8 text-orange-600"})]})})})]}),a.jsxs(Ph,{defaultValue:"appointments",className:"space-y-6",children:[a.jsxs(Yh,{className:"grid w-full grid-cols-3 lg:w-auto lg:grid-cols-3",children:[a.jsxs(bi,{value:"appointments",className:"flex items-center gap-2",children:[a.jsx(ps,{className:"h-4 w-4"}),"Appointments"]}),a.jsxs(bi,{value:"availability",className:"flex items-center gap-2",children:[a.jsx(ni,{className:"h-4 w-4"}),"Availability"]}),a.jsxs(bi,{value:"patients",className:"flex items-center gap-2",children:[a.jsx(Na,{className:"h-4 w-4"}),"Patients"]})]}),a.jsx(wi,{value:"appointments",className:"space-y-6",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(ps,{className:"h-5 w-5 text-blue-600"}),"Today's Appointments"]}),a.jsx(Vn,{children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsx(Ot,{className:"space-y-4",children:d.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{children:[a.jsx(ks,{src:m.patient.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:m.patient.name.split(" ").map(u=>u[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:m.patient.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(m.date).toLocaleDateString("en-US")," at ",m.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx($r,{variant:m.appointmentType==="ONLINE"?"secondary":"default",children:m.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx($r,{variant:m.status==="PENDING"?"outline":m.status==="CONFIRMED"?"default":m.status==="COMPLETED"?"secondary":"destructive",children:m.status})]}),m.notes&&a.jsx($r,{className:"bg-gray-200 text-black dark:bg-gray-600 dark:text-white/90",children:m.notes})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx($r,{variant:m.status==="COMPLETED"?"default":m.status==="PENDING"?"secondary":m.status==="CANCELLED"?"destructive":"outline",children:m.status}),a.jsxs(rr,{variant:"outline",size:"sm",children:[a.jsx(iC,{className:"h-4 w-4 mr-2"})," Manage"]})]})]},m.id))})]}),a.jsxs(Nt,{children:[a.jsx(En,{children:a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(ni,{className:"h-5 w-5 text-green-600"}),"Upcoming Appointments"]})}),a.jsx(Ot,{className:"space-y-4",children:o==null?void 0:o.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ws,{children:[a.jsx(ks,{src:m.patient.profilePicture||"/placeholder.svg"}),a.jsx(_s,{children:m.patient.name.split(" ").map(u=>u[0]).join("")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:m.patient.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[new Date(m.date).toLocaleDateString("en-US")," at ",m.time]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx($r,{variant:m.appointmentType==="ONLINE"?"secondary":"default",children:m.appointmentType==="ONLINE"?"Video Call":"In-Person"}),a.jsx($r,{variant:m.status==="PENDING"?"outline":m.status==="CONFIRMED"?"default":m.status==="COMPLETED"?"secondary":"destructive",children:m.status})]}),m.notes&&a.jsx($r,{className:"bg-gray-200 text-black dark:bg-gray-600 dark:text-white/90",children:m.notes})]})]}),a.jsx($r,{variant:m.status==="CONFIRMED"?"default":"secondary",children:m.status})]},m.id))})]})]})}),a.jsx(wi,{value:"availability",children:a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsx("p",{children:"Availability tab content placeholder"})})})}),a.jsx(wi,{value:"patients",children:a.jsx(Nt,{children:a.jsx(Ot,{className:"p-6",children:a.jsx("p",{children:"Patients tab content placeholder"})})})})]})]})}var hx={exports:{}},hu=typeof Reflect=="object"?Reflect:null,wE=hu&&typeof hu.apply=="function"?hu.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Om;hu&&typeof hu.ownKeys=="function"?Om=hu.ownKeys:Object.getOwnPropertySymbols?Om=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Om=function(t){return Object.getOwnPropertyNames(t)};function sK(e){console&&console.warn&&console.warn(e)}var P6=Number.isNaN||function(t){return t!==t};function Dn(){Dn.init.call(this)}hx.exports=Dn;hx.exports.once=cK;Dn.EventEmitter=Dn;Dn.prototype._events=void 0;Dn.prototype._eventsCount=0;Dn.prototype._maxListeners=void 0;var _E=10;function Sv(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Dn,"defaultMaxListeners",{enumerable:!0,get:function(){return _E},set:function(e){if(typeof e!="number"||e<0||P6(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_E=e}});Dn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||P6(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function N6(e){return e._maxListeners===void 0?Dn.defaultMaxListeners:e._maxListeners}Dn.prototype.getMaxListeners=function(){return N6(this)};Dn.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var d=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw d.context=c,d}var l=i[t];if(l===void 0)return!1;if(typeof l=="function")wE(l,this,r);else for(var o=l.length,p=I6(l,o),n=0;n<o;++n)wE(p[n],this,r);return!0};function A6(e,t,r,n){var s,i,c;if(Sv(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),c=i[t]),c===void 0)c=i[t]=r,++e._eventsCount;else if(typeof c=="function"?c=i[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),s=N6(e),s>0&&c.length>s&&!c.warned){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=c.length,sK(d)}return e}Dn.prototype.addListener=function(t,r){return A6(this,t,r,!1)};Dn.prototype.on=Dn.prototype.addListener;Dn.prototype.prependListener=function(t,r){return A6(this,t,r,!0)};function iK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O6(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=iK.bind(n);return s.listener=r,n.wrapFn=s,s}Dn.prototype.once=function(t,r){return Sv(r),this.on(t,O6(this,t,r)),this};Dn.prototype.prependOnceListener=function(t,r){return Sv(r),this.prependListener(t,O6(this,t,r)),this};Dn.prototype.removeListener=function(t,r){var n,s,i,c,d;if(Sv(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){d=n[c].listener,i=c;break}if(i<0)return this;i===0?n.shift():aK(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,d||r)}return this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),c;for(s=0;s<i.length;++s)c=i[s],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function j6(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?oK(s):I6(s,s.length)}Dn.prototype.listeners=function(t){return j6(this,t,!0)};Dn.prototype.rawListeners=function(t){return j6(this,t,!1)};Dn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):D6.call(e,t)};Dn.prototype.listenerCount=D6;function D6(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Dn.prototype.eventNames=function(){return this._eventsCount>0?Om(this._events):[]};function I6(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function aK(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function oK(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function cK(e,t){return new Promise(function(r,n){function s(c){e.removeListener(t,i),n(c)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}M6(e,t,i,{once:!0}),t!=="error"&&lK(e,s,{once:!0})})}function lK(e,t,r){typeof e.on=="function"&&M6(e,"error",t,r)}function M6(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var dK=hx.exports;const uK=zb(dK);var L6={exports:{}};(function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(n,s){e.exports=s()})(self,()=>(()=>{var n={11:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Chrome74=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),_=o(4256),g=o(4893),v=o(521),w=o(1305),S=o(3303),E=new y.Logger("Chrome74"),O={OS:1024,MIS:1024};class C extends v.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new C}get name(){return"Chrome74"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{h.addTransceiver("audio"),h.addTransceiver("video");const x=await h.createOffer();try{h.close()}catch{}const R=p.parse(x.sdp),P=b.extractRtpCapabilities({sdpObject:R});return _.addNackSupportForOpus(P),P}catch(x){try{h.close()}catch{}throw x}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:h,iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N,iceServers:j,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){E.debug("run()"),this._direction=h,this._remoteSdp=new w.RemoteSdp({iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const x=this._pc.getConfiguration();x.iceServers=h,this._pc.setConfiguration(x)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:x,codecOptions:R,codec:P}){this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),x&&x.length>1&&x.forEach((_e,Se)=>{_e.rid=`r${Se}`});const N=m.clone(this._sendingRtpParametersByKind[h.kind]);N.codecs=u.reduceCodecs(N.codecs,P);const j=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);j.codecs=u.reduceCodecs(j.codecs,P);const D=this._remoteSdp.getNextMediaSectionIdx(),L=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:x});let M,I=await this._pc.createOffer(),G=p.parse(I.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G});let de=!1;const ee=(0,S.parse)((x??[{}])[0].scalabilityMode);x&&x.length===1&&ee.spatialLayers>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(E.debug("send() | enabling legacy simulcast for VP9 SVC"),de=!0,G=p.parse(I.sdp),M=G.media[D.idx],f.addLegacySimulcast({offerMediaObject:M,numStreams:ee.spatialLayers}),I={type:"offer",sdp:p.write(G)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const Q=L.mid;if(N.mid=Q,G=p.parse(this._pc.localDescription.sdp),M=G.media[D.idx],N.rtcp.cname=b.getCname({offerMediaObject:M}),x)if(x.length===1){let _e=f.getRtpEncodings({offerMediaObject:M});Object.assign(_e[0],x[0]),de&&(_e=[_e[0]]),N.encodings=_e}else N.encodings=x;else N.encodings=f.getRtpEncodings({offerMediaObject:M});if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _e of N.encodings)_e.scalabilityMode?_e.scalabilityMode=`L1T${ee.temporalLayers}`:_e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:M,reuseMid:D.reuseMid,offerRtpParameters:N,answerRtpParameters:j,codecOptions:R});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._mapMidTransceiver.set(Q,L),{localId:Q,rtpParameters:N,rtpSender:L.sender}}async stopSending(h){if(this.assertSendDirection(),E.debug("stopSending() [localId:%s]",h),this._closed)return;const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");if(x.sender.replaceTrack(null),this._pc.removeTrack(x.sender),this._remoteSdp.closeMediaSection(x.mid))try{x.stop()}catch{}const R=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(h);const R=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(this._remoteSdp.resumeSendingMediaSection(h),!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="sendonly";const R=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,x){this.assertNotClosed(),this.assertSendDirection(),x?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,x.id):E.debug("replaceTrack() [localId:%s, no track]",h);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(x)}async setMaxSpatialLayer(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=x}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...x}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:x,maxRetransmits:R,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:x,maxRetransmits:R,protocol:N};E.debug("sendDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(P,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const x=[],R=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);let N=await this._pc.createAnswer();const j=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=R.get(L),G=j.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=R.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),x.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return x}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:x,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D,protocol:R};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(x,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:x}){x||(x=p.parse(this._pc.localDescription.sdp));const R=b.extractDtlsParameters({sdpObject:x});R.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:R},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Chrome74=C},19:function(d,l,o){var p,y,m,u,b,f,_,g,v;d.exports=(v=o(9021),o(3009),o(1025),y=(p=v).lib,m=y.Base,u=y.WordArray,b=p.algo,f=b.SHA256,_=b.HMAC,g=b.PBKDF2=m.extend({cfg:m.extend({keySize:4,hasher:f,iterations:25e4}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,S){for(var E=this.cfg,O=_.create(E.hasher,w),C=u.create(),k=u.create([1]),T=C.words,h=k.words,x=E.keySize,R=E.iterations;T.length<x;){var P=O.update(S).finalize(k);O.reset();for(var N=P.words,j=N.length,D=P,L=1;L<R;L++){D=O.finalize(D),O.reset();for(var M=D.words,I=0;I<j;I++)N[I]^=M[I]}C.concat(P),h[0]++}return C.sigBytes=4*x,C}}),p.PBKDF2=function(w,S,E){return g.create(E).compute(w,S)},v.PBKDF2)},25:function(d,l,o){var p,y,m,u;d.exports=(u=o(9021),o(7165),y=(p=u).lib.CipherParams,m=p.enc.Hex,p.format.Hex={stringify:function(b){return b.ciphertext.toString(m)},parse:function(b){var f=m.parse(b);return y.create({ciphertext:f})}},u.format.Hex)},76:(d,l,o)=>{l.s$=l.pF=void 0,o(7833).default,o(8057);var p=o(6004);Object.defineProperty(l,"pF",{enumerable:!0,get:function(){return p.Device}});var y=o(3303);Object.defineProperty(l,"s$",{enumerable:!0,get:function(){return y.parse}}),o(8046),o(2731),o(5248)},182:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.version=l.validate=l.v7=l.v6ToV1=l.v6=l.v5=l.v4=l.v3=l.v1ToV6=l.v1=l.stringify=l.parse=l.NIL=l.MAX=void 0;var p=o(2196);Object.defineProperty(l,"MAX",{enumerable:!0,get:function(){return p.default}});var y=o(3465);Object.defineProperty(l,"NIL",{enumerable:!0,get:function(){return y.default}});var m=o(1797);Object.defineProperty(l,"parse",{enumerable:!0,get:function(){return m.default}});var u=o(6011);Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return u.default}});var b=o(1425);Object.defineProperty(l,"v1",{enumerable:!0,get:function(){return b.default}});var f=o(6568);Object.defineProperty(l,"v1ToV6",{enumerable:!0,get:function(){return f.default}});var _=o(591);Object.defineProperty(l,"v3",{enumerable:!0,get:function(){return _.default}});var g=o(8286);Object.defineProperty(l,"v4",{enumerable:!0,get:function(){return g.default}});var v=o(4557);Object.defineProperty(l,"v5",{enumerable:!0,get:function(){return v.default}});var w=o(6356);Object.defineProperty(l,"v6",{enumerable:!0,get:function(){return w.default}});var S=o(268);Object.defineProperty(l,"v6ToV1",{enumerable:!0,get:function(){return S.default}});var E=o(4299);Object.defineProperty(l,"v7",{enumerable:!0,get:function(){return E.default}});var O=o(9746);Object.defineProperty(l,"validate",{enumerable:!0,get:function(){return O.default}});var C=o(2770);Object.defineProperty(l,"version",{enumerable:!0,get:function(){return C.default}})},268:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(1797),y=o(6011);l.default=function(m){const u=function(b){return Uint8Array.of((15&b[3])<<4|b[4]>>4&15,(15&b[4])<<4|(240&b[5])>>4,(15&b[5])<<4|15&b[6],b[7],(15&b[1])<<4|(240&b[2])>>4,(15&b[2])<<4|(240&b[3])>>4,16|(240&b[0])>>4,(15&b[0])<<4|(240&b[1])>>4,b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}(typeof m=="string"?(0,p.default)(m):m);return typeof m=="string"?(0,y.unsafeStringify)(u):u}},296:(d,l,o)=>{o.d(l,{A:()=>y});var p=o(7800);function y(m,u){return function(b){if(Array.isArray(b))return b}(m)||function(b,f){var _=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(_!=null){var g,v,w,S,E=[],O=!0,C=!1;try{if(w=(_=_.call(b)).next,f===0){if(Object(_)!==_)return;O=!1}else for(;!(O=(g=w.call(_)).done)&&(E.push(g.value),E.length!==f);O=!0);}catch(k){C=!0,v=k}finally{try{if(!O&&_.return!=null&&(S=_.return(),Object(S)!==S))return}finally{if(C)throw v}}return E}}(m,u)||(0,p.A)(m,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},328:(d,l,o)=>{o(8624),d.exports=self.fetch.bind(self)},338:(d,l)=>{function o(_){return 14+(_+64>>>9<<4)+1}function p(_,g){const v=(65535&_)+(65535&g);return(_>>16)+(g>>16)+(v>>16)<<16|65535&v}function y(_,g,v,w,S,E){return p((O=p(p(g,_),p(w,E)))<<(C=S)|O>>>32-C,v);var O,C}function m(_,g,v,w,S,E,O){return y(g&v|~g&w,_,g,S,E,O)}function u(_,g,v,w,S,E,O){return y(g&w|v&~w,_,g,S,E,O)}function b(_,g,v,w,S,E,O){return y(g^v^w,_,g,S,E,O)}function f(_,g,v,w,S,E,O){return y(v^(g|~w),_,g,S,E,O)}Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(_){return function(g){const v=new Uint8Array(4*g.length);for(let w=0;w<4*g.length;w++)v[w]=g[w>>2]>>>w%4*8&255;return v}(function(g,v){const w=new Uint32Array(o(v)).fill(0);w.set(g),w[v>>5]|=128<<v%32,w[w.length-1]=v,g=w;let S=1732584193,E=-271733879,O=-1732584194,C=271733878;for(let k=0;k<g.length;k+=16){const T=S,h=E,x=O,R=C;S=m(S,E,O,C,g[k],7,-680876936),C=m(C,S,E,O,g[k+1],12,-389564586),O=m(O,C,S,E,g[k+2],17,606105819),E=m(E,O,C,S,g[k+3],22,-1044525330),S=m(S,E,O,C,g[k+4],7,-176418897),C=m(C,S,E,O,g[k+5],12,1200080426),O=m(O,C,S,E,g[k+6],17,-1473231341),E=m(E,O,C,S,g[k+7],22,-45705983),S=m(S,E,O,C,g[k+8],7,1770035416),C=m(C,S,E,O,g[k+9],12,-1958414417),O=m(O,C,S,E,g[k+10],17,-42063),E=m(E,O,C,S,g[k+11],22,-1990404162),S=m(S,E,O,C,g[k+12],7,1804603682),C=m(C,S,E,O,g[k+13],12,-40341101),O=m(O,C,S,E,g[k+14],17,-1502002290),E=m(E,O,C,S,g[k+15],22,1236535329),S=u(S,E,O,C,g[k+1],5,-165796510),C=u(C,S,E,O,g[k+6],9,-1069501632),O=u(O,C,S,E,g[k+11],14,643717713),E=u(E,O,C,S,g[k],20,-373897302),S=u(S,E,O,C,g[k+5],5,-701558691),C=u(C,S,E,O,g[k+10],9,38016083),O=u(O,C,S,E,g[k+15],14,-660478335),E=u(E,O,C,S,g[k+4],20,-405537848),S=u(S,E,O,C,g[k+9],5,568446438),C=u(C,S,E,O,g[k+14],9,-1019803690),O=u(O,C,S,E,g[k+3],14,-187363961),E=u(E,O,C,S,g[k+8],20,1163531501),S=u(S,E,O,C,g[k+13],5,-1444681467),C=u(C,S,E,O,g[k+2],9,-51403784),O=u(O,C,S,E,g[k+7],14,1735328473),E=u(E,O,C,S,g[k+12],20,-1926607734),S=b(S,E,O,C,g[k+5],4,-378558),C=b(C,S,E,O,g[k+8],11,-2022574463),O=b(O,C,S,E,g[k+11],16,1839030562),E=b(E,O,C,S,g[k+14],23,-35309556),S=b(S,E,O,C,g[k+1],4,-1530992060),C=b(C,S,E,O,g[k+4],11,1272893353),O=b(O,C,S,E,g[k+7],16,-155497632),E=b(E,O,C,S,g[k+10],23,-1094730640),S=b(S,E,O,C,g[k+13],4,681279174),C=b(C,S,E,O,g[k],11,-358537222),O=b(O,C,S,E,g[k+3],16,-722521979),E=b(E,O,C,S,g[k+6],23,76029189),S=b(S,E,O,C,g[k+9],4,-640364487),C=b(C,S,E,O,g[k+12],11,-421815835),O=b(O,C,S,E,g[k+15],16,530742520),E=b(E,O,C,S,g[k+2],23,-995338651),S=f(S,E,O,C,g[k],6,-198630844),C=f(C,S,E,O,g[k+7],10,1126891415),O=f(O,C,S,E,g[k+14],15,-1416354905),E=f(E,O,C,S,g[k+5],21,-57434055),S=f(S,E,O,C,g[k+12],6,1700485571),C=f(C,S,E,O,g[k+3],10,-1894986606),O=f(O,C,S,E,g[k+10],15,-1051523),E=f(E,O,C,S,g[k+1],21,-2054922799),S=f(S,E,O,C,g[k+8],6,1873313359),C=f(C,S,E,O,g[k+15],10,-30611744),O=f(O,C,S,E,g[k+6],15,-1560198380),E=f(E,O,C,S,g[k+13],21,1309151649),S=f(S,E,O,C,g[k+4],6,-145523070),C=f(C,S,E,O,g[k+11],10,-1120210379),O=f(O,C,S,E,g[k+2],15,718787259),E=f(E,O,C,S,g[k+9],21,-343485551),S=p(S,T),E=p(E,h),O=p(O,x),C=p(C,R)}return Uint32Array.of(S,E,O,C)}(function(g){if(g.length===0)return new Uint32Array;const v=new Uint32Array(o(8*g.length)).fill(0);for(let w=0;w<g.length;w++)v[w>>2]|=(255&g[w])<<w%4*8;return v}(_),8*_.length))}},388:(d,l,o)=>{o.d(l,{A:()=>y});var p=o(2284);function y(m,u){if(u&&((0,p.A)(u)=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(m)}},467:(d,l,o)=>{function p(m,u,b,f,_,g,v){try{var w=m[g](v),S=w.value}catch(E){return void b(E)}w.done?u(S):Promise.resolve(S).then(f,_)}function y(m){return function(){var u=this,b=arguments;return new Promise(function(f,_){var g=m.apply(u,b);function v(S){p(g,f,_,v,w,"next",S)}function w(S){p(g,f,_,v,w,"throw",S)}v(void 0)})}}o.d(l,{A:()=>y})},477:()=>{},482:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.pad.Iso97971={pad:function(y,m){y.concat(p.lib.WordArray.create([2147483648],1)),p.pad.ZeroPadding.pad(y,m)},unpad:function(y){p.pad.ZeroPadding.unpad(y),y.sigBytes--}},p.pad.Iso97971)},521:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.HandlerInterface=void 0;const p=o(3953);class y extends p.EnhancedEventEmitter{constructor(){super()}}l.HandlerInterface=y},591:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.URL=l.DNS=void 0;const p=o(338),y=o(2988);var m=o(2988);function u(b,f,_,g){return(0,y.default)(48,p.default,b,f,_,g)}Object.defineProperty(l,"DNS",{enumerable:!0,get:function(){return m.DNS}}),Object.defineProperty(l,"URL",{enumerable:!0,get:function(){return m.URL}}),u.DNS=y.DNS,u.URL=y.URL,l.default=u},736:(d,l,o)=>{d.exports=function(p){function y(b){let f,_,g,v=null;function w(...S){if(!w.enabled)return;const E=w,O=Number(new Date),C=O-(f||O);E.diff=C,E.prev=f,E.curr=O,f=O,S[0]=y.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let k=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(T,h)=>{if(T==="%%")return"%";k++;const x=y.formatters[h];if(typeof x=="function"){const R=S[k];T=x.call(E,R),S.splice(k,1),k--}return T}),y.formatArgs.call(E,S),(E.log||y.log).apply(E,S)}return w.namespace=b,w.useColors=y.useColors(),w.color=y.selectColor(b),w.extend=m,w.destroy=y.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>v!==null?v:(_!==y.namespaces&&(_=y.namespaces,g=y.enabled(b)),g),set:S=>{v=S}}),typeof y.init=="function"&&y.init(w),w}function m(b,f){const _=y(this.namespace+(f===void 0?":":f)+b);return _.log=this.log,_}function u(b,f){let _=0,g=0,v=-1,w=0;for(;_<b.length;)if(g<f.length&&(f[g]===b[_]||f[g]==="*"))f[g]==="*"?(v=g,w=_,g++):(_++,g++);else{if(v===-1)return!1;g=v+1,w++,_=w}for(;g<f.length&&f[g]==="*";)g++;return g===f.length}return y.debug=y,y.default=y,y.coerce=function(b){return b instanceof Error?b.stack||b.message:b},y.disable=function(){const b=[...y.names,...y.skips.map(f=>"-"+f)].join(",");return y.enable(""),b},y.enable=function(b){y.save(b),y.namespaces=b,y.names=[],y.skips=[];const f=(typeof b=="string"?b:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const _ of f)_[0]==="-"?y.skips.push(_.slice(1)):y.names.push(_)},y.enabled=function(b){for(const f of y.skips)if(u(b,f))return!1;for(const f of y.names)if(u(b,f))return!0;return!1},y.humanize=o(6585),y.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(p).forEach(b=>{y[b]=p[b]}),y.names=[],y.skips=[],y.formatters={},y.selectColor=function(b){let f=0;for(let _=0;_<b.length;_++)f=(f<<5)-f+b.charCodeAt(_),f|=0;return y.colors[Math.abs(f)%y.colors.length]},y.enable(y.load()),y}},754:function(d,l,o){var p;d.exports=(p=o(9021),function(){var y=p,m=y.lib.WordArray;function u(b,f,_){for(var g=[],v=0,w=0;w<f;w++)if(w%4){var S=_[b.charCodeAt(w-1)]<<w%4*2|_[b.charCodeAt(w)]>>>6-w%4*2;g[v>>>2]|=S<<24-v%4*8,v++}return m.create(g,v)}y.enc.Base64={stringify:function(b){var f=b.words,_=b.sigBytes,g=this._map;b.clamp();for(var v=[],w=0;w<_;w+=3)for(var S=(f[w>>>2]>>>24-w%4*8&255)<<16|(f[w+1>>>2]>>>24-(w+1)%4*8&255)<<8|f[w+2>>>2]>>>24-(w+2)%4*8&255,E=0;E<4&&w+.75*E<_;E++)v.push(g.charAt(S>>>6*(3-E)&63));var O=g.charAt(64);if(O)for(;v.length%4;)v.push(O);return v.join("")},parse:function(b){var f=b.length,_=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var v=0;v<_.length;v++)g[_.charCodeAt(v)]=v}var w=_.charAt(64);if(w){var S=b.indexOf(w);S!==-1&&(f=S)}return u(b,f,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),p.enc.Base64)},816:(d,l,o)=>{o.d(l,{A:()=>y});var p=o(2284);function y(m){var u=function(b,f){if((0,p.A)(b)!="object"||!b)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var g=_.call(b,f);if((0,p.A)(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(b)}(m,"string");return(0,p.A)(u)=="symbol"?u:u+""}},955:function(d,l,o){var p;d.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var y=p,m=y.lib.BlockCipher,u=y.algo,b=[],f=[],_=[],g=[],v=[],w=[],S=[],E=[],O=[],C=[];(function(){for(var h=[],x=0;x<256;x++)h[x]=x<128?x<<1:x<<1^283;var R=0,P=0;for(x=0;x<256;x++){var N=P^P<<1^P<<2^P<<3^P<<4;N=N>>>8^255&N^99,b[R]=N,f[N]=R;var j=h[R],D=h[j],L=h[D],M=257*h[N]^16843008*N;_[R]=M<<24|M>>>8,g[R]=M<<16|M>>>16,v[R]=M<<8|M>>>24,w[R]=M,M=16843009*L^65537*D^257*j^16843008*R,S[N]=M<<24|M>>>8,E[N]=M<<16|M>>>16,O[N]=M<<8|M>>>24,C[N]=M,R?(R=j^h[h[h[L^j]]],P^=h[h[P]]):R=P=1}})();var k=[0,1,2,4,8,16,32,64,128,27,54],T=u.AES=m.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var h=this._keyPriorReset=this._key,x=h.words,R=h.sigBytes/4,P=4*((this._nRounds=R+6)+1),N=this._keySchedule=[],j=0;j<P;j++)j<R?N[j]=x[j]:(M=N[j-1],j%R?R>6&&j%R==4&&(M=b[M>>>24]<<24|b[M>>>16&255]<<16|b[M>>>8&255]<<8|b[255&M]):(M=b[(M=M<<8|M>>>24)>>>24]<<24|b[M>>>16&255]<<16|b[M>>>8&255]<<8|b[255&M],M^=k[j/R|0]<<24),N[j]=N[j-R]^M);for(var D=this._invKeySchedule=[],L=0;L<P;L++){if(j=P-L,L%4)var M=N[j];else M=N[j-4];D[L]=L<4||j<=4?M:S[b[M>>>24]]^E[b[M>>>16&255]]^O[b[M>>>8&255]]^C[b[255&M]]}}},encryptBlock:function(h,x){this._doCryptBlock(h,x,this._keySchedule,_,g,v,w,b)},decryptBlock:function(h,x){var R=h[x+1];h[x+1]=h[x+3],h[x+3]=R,this._doCryptBlock(h,x,this._invKeySchedule,S,E,O,C,f),R=h[x+1],h[x+1]=h[x+3],h[x+3]=R},_doCryptBlock:function(h,x,R,P,N,j,D,L){for(var M=this._nRounds,I=h[x]^R[0],G=h[x+1]^R[1],de=h[x+2]^R[2],ee=h[x+3]^R[3],Q=4,ae=1;ae<M;ae++){var _e=P[I>>>24]^N[G>>>16&255]^j[de>>>8&255]^D[255&ee]^R[Q++],Se=P[G>>>24]^N[de>>>16&255]^j[ee>>>8&255]^D[255&I]^R[Q++],ie=P[de>>>24]^N[ee>>>16&255]^j[I>>>8&255]^D[255&G]^R[Q++],$e=P[ee>>>24]^N[I>>>16&255]^j[G>>>8&255]^D[255&de]^R[Q++];I=_e,G=Se,de=ie,ee=$e}_e=(L[I>>>24]<<24|L[G>>>16&255]<<16|L[de>>>8&255]<<8|L[255&ee])^R[Q++],Se=(L[G>>>24]<<24|L[de>>>16&255]<<16|L[ee>>>8&255]<<8|L[255&I])^R[Q++],ie=(L[de>>>24]<<24|L[ee>>>16&255]<<16|L[I>>>8&255]<<8|L[255&G])^R[Q++],$e=(L[ee>>>24]<<24|L[I>>>16&255]<<16|L[G>>>8&255]<<8|L[255&de])^R[Q++],h[x]=_e,h[x+1]=Se,h[x+2]=ie,h[x+3]=$e},keySize:8});y.AES=m._createHelper(T)}(),p.AES)},1025:function(d,l,o){var p,y,m,u;d.exports=(p=o(9021),m=(y=p).lib.Base,u=y.enc.Utf8,void(y.algo.HMAC=m.extend({init:function(b,f){b=this._hasher=new b.init,typeof f=="string"&&(f=u.parse(f));var _=b.blockSize,g=4*_;f.sigBytes>g&&(f=b.finalize(f)),f.clamp();for(var v=this._oKey=f.clone(),w=this._iKey=f.clone(),S=v.words,E=w.words,O=0;O<_;O++)S[O]^=1549556828,E[O]^=909522486;v.sigBytes=w.sigBytes=g,this.reset()},reset:function(){var b=this._hasher;b.reset(),b.update(this._iKey)},update:function(b){return this._hasher.update(b),this},finalize:function(b){var f=this._hasher,_=f.finalize(b);return f.reset(),f.finalize(this._oKey.clone().concat(_))}})))},1305:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RemoteSdp=void 0;const p=o(7363),y=o(2994),m=o(3471),u=new y.Logger("RemoteSdp");l.RemoteSdp=class{constructor({iceParameters:b,iceCandidates:f,dtlsParameters:_,sctpParameters:g,plainRtpParameters:v,planB:w=!1}){we(this,"_iceParameters");we(this,"_iceCandidates");we(this,"_dtlsParameters");we(this,"_sctpParameters");we(this,"_plainRtpParameters");we(this,"_planB");we(this,"_mediaSections",[]);we(this,"_midToIndex",new Map);we(this,"_firstMid");we(this,"_sdpObject");if(this._iceParameters=b,this._iceCandidates=f,this._dtlsParameters=_,this._sctpParameters=g,this._plainRtpParameters=v,this._planB=w,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},b!=null&&b.iceLite&&(this._sdpObject.icelite="ice-lite"),_){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const S=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:_.fingerprints[S-1].algorithm,hash:_.fingerprints[S-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}v&&(this._sdpObject.origin.address=v.ip,this._sdpObject.origin.ipVer=v.ipVersion)}updateIceParameters(b){u.debug("updateIceParameters() [iceParameters:%o]",b),this._iceParameters=b,this._sdpObject.icelite=b.iceLite?"ice-lite":void 0;for(const f of this._mediaSections)f.setIceParameters(b)}updateDtlsRole(b){u.debug("updateDtlsRole() [role:%s]",b),this._dtlsParameters.role=b;for(const f of this._mediaSections)f.setDtlsRole(b)}setSessionExtmapAllowMixed(){u.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let b=0;b<this._mediaSections.length;++b){const f=this._mediaSections[b];if(f.closed)return{idx:b,reuseMid:f.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:b,reuseMid:f,offerRtpParameters:_,answerRtpParameters:g,codecOptions:v}){const w=new m.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:b,offerRtpParameters:_,answerRtpParameters:g,codecOptions:v});f?this._replaceMediaSection(w,f):this._midToIndex.has(w.mid)?this._replaceMediaSection(w):this._addMediaSection(w)}receive({mid:b,kind:f,offerRtpParameters:_,streamId:g,trackId:v}){const w=this._midToIndex.get(b);let S;if(w!==void 0&&(S=this._mediaSections[w]),this.setSessionExtmapAllowMixed(),S)S.planBReceive({offerRtpParameters:_,streamId:g,trackId:v}),this._replaceMediaSection(S);else{S=new m.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:b,kind:f,offerRtpParameters:_,streamId:g,trackId:v});const E=this._mediaSections.find(O=>O.closed);E?this._replaceMediaSection(S,E.mid):this._addMediaSection(S)}}pauseMediaSection(b){this._findMediaSection(b).pause()}resumeSendingMediaSection(b){this._findMediaSection(b).resume()}resumeReceivingMediaSection(b){this._findMediaSection(b).resume()}disableMediaSection(b){this._findMediaSection(b).disable()}closeMediaSection(b){const f=this._findMediaSection(b);return b===this._firstMid?(u.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",b),this.disableMediaSection(b),!1):(f.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(b,f){const _=this._findMediaSection(b);_.muxSimulcastStreams(f),this._replaceMediaSection(_)}planBStopReceiving({mid:b,offerRtpParameters:f}){const _=this._findMediaSection(b);_.planBStopReceiving({offerRtpParameters:f}),this._replaceMediaSection(_)}sendSctpAssociation({offerMediaObject:b}){const f=new m.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:b});this._addMediaSection(f)}receiveSctpAssociation({oldDataChannelSpec:b=!1}={}){const f=new m.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:b});this._addMediaSection(f)}getSdp(){return this._sdpObject.origin.sessionVersion++,p.write(this._sdpObject)}_addMediaSection(b){this._firstMid||(this._firstMid=b.mid),this._mediaSections.push(b),this._midToIndex.set(b.mid,this._mediaSections.length-1),this._sdpObject.media.push(b.getObject()),this._regenerateBundleMids()}_replaceMediaSection(b,f){if(typeof f=="string"){const _=this._midToIndex.get(f);if(_===void 0)throw new Error(`no media section found for reuseMid '${f}'`);const g=this._mediaSections[_];this._mediaSections[_]=b,this._midToIndex.delete(g.mid),this._midToIndex.set(b.mid,_),this._sdpObject.media[_]=b.getObject(),this._regenerateBundleMids()}else{const _=this._midToIndex.get(b.mid);if(_===void 0)throw new Error(`no media section found with mid '${b.mid}'`);this._mediaSections[_]=b,this._sdpObject.media[_]=b.getObject()}}_findMediaSection(b){const f=this._midToIndex.get(b);if(f===void 0)throw new Error(`no media section found with mid '${b}'`);return this._mediaSections[f]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(b=>!b.closed).map(b=>b.mid).join(" "))}}},1380:function(d,l,o){var p;d.exports=(p=o(9021),o(3240),function(){var y=p,m=y.lib.Hasher,u=y.x64,b=u.Word,f=u.WordArray,_=y.algo;function g(){return b.create.apply(b,arguments)}var v=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],w=[];(function(){for(var E=0;E<80;E++)w[E]=g()})();var S=_.SHA512=m.extend({_doReset:function(){this._hash=new f.init([new b.init(1779033703,4089235720),new b.init(3144134277,2227873595),new b.init(1013904242,4271175723),new b.init(2773480762,1595750129),new b.init(1359893119,2917565137),new b.init(2600822924,725511199),new b.init(528734635,4215389547),new b.init(1541459225,327033209)])},_doProcessBlock:function(E,O){for(var C=this._hash.words,k=C[0],T=C[1],h=C[2],x=C[3],R=C[4],P=C[5],N=C[6],j=C[7],D=k.high,L=k.low,M=T.high,I=T.low,G=h.high,de=h.low,ee=x.high,Q=x.low,ae=R.high,_e=R.low,Se=P.high,ie=P.low,$e=N.high,je=N.low,se=j.high,ue=j.low,Ce=D,He=L,$t=M,nr=I,Ct=G,cr=de,br=ee,jt=Q,nn=ae,Dt=_e,Xt=Se,Gr=ie,dn=$e,Mr=je,Yr=se,un=ue,Lt=0;Lt<80;Lt++){var pn,sn,zr=w[Lt];if(Lt<16)sn=zr.high=0|E[O+2*Lt],pn=zr.low=0|E[O+2*Lt+1];else{var Lr=w[Lt-15],xn=Lr.high,Xr=Lr.low,Pn=(xn>>>1|Xr<<31)^(xn>>>8|Xr<<24)^xn>>>7,Sn=(Xr>>>1|xn<<31)^(Xr>>>8|xn<<24)^(Xr>>>7|xn<<25),In=w[Lt-2],Nn=In.high,Wt=In.low,Mn=(Nn>>>19|Wt<<13)^(Nn<<3|Wt>>>29)^Nn>>>6,ss=(Wt>>>19|Nn<<13)^(Wt<<3|Nn>>>29)^(Wt>>>6|Nn<<26),hn=w[Lt-7],or=hn.high,Ye=hn.low,Me=w[Lt-16],ot=Me.high,Le=Me.low;sn=(sn=(sn=Pn+or+((pn=Sn+Ye)>>>0<Sn>>>0?1:0))+Mn+((pn+=ss)>>>0<ss>>>0?1:0))+ot+((pn+=Le)>>>0<Le>>>0?1:0),zr.high=sn,zr.low=pn}var lt,lr=nn&Xt^~nn&dn,De=Dt&Gr^~Dt&Mr,Zt=Ce&$t^Ce&Ct^$t&Ct,Vt=He&nr^He&cr^nr&cr,_r=(Ce>>>28|He<<4)^(Ce<<30|He>>>2)^(Ce<<25|He>>>7),fr=(He>>>28|Ce<<4)^(He<<30|Ce>>>2)^(He<<25|Ce>>>7),Pr=(nn>>>14|Dt<<18)^(nn>>>18|Dt<<14)^(nn<<23|Dt>>>9),Xe=(Dt>>>14|nn<<18)^(Dt>>>18|nn<<14)^(Dt<<23|nn>>>9),Kt=v[Lt],Tt=Kt.high,zt=Kt.low,Fr=Yr+Pr+((lt=un+Xe)>>>0<un>>>0?1:0),Nr=fr+Vt;Yr=dn,un=Mr,dn=Xt,Mr=Gr,Xt=nn,Gr=Dt,nn=br+(Fr=(Fr=(Fr=Fr+lr+((lt+=De)>>>0<De>>>0?1:0))+Tt+((lt+=zt)>>>0<zt>>>0?1:0))+sn+((lt+=pn)>>>0<pn>>>0?1:0))+((Dt=jt+lt|0)>>>0<jt>>>0?1:0)|0,br=Ct,jt=cr,Ct=$t,cr=nr,$t=Ce,nr=He,Ce=Fr+(_r+Zt+(Nr>>>0<fr>>>0?1:0))+((He=lt+Nr|0)>>>0<lt>>>0?1:0)|0}L=k.low=L+He,k.high=D+Ce+(L>>>0<He>>>0?1:0),I=T.low=I+nr,T.high=M+$t+(I>>>0<nr>>>0?1:0),de=h.low=de+cr,h.high=G+Ct+(de>>>0<cr>>>0?1:0),Q=x.low=Q+jt,x.high=ee+br+(Q>>>0<jt>>>0?1:0),_e=R.low=_e+Dt,R.high=ae+nn+(_e>>>0<Dt>>>0?1:0),ie=P.low=ie+Gr,P.high=Se+Xt+(ie>>>0<Gr>>>0?1:0),je=N.low=je+Mr,N.high=$e+dn+(je>>>0<Mr>>>0?1:0),ue=j.low=ue+un,j.high=se+Yr+(ue>>>0<un>>>0?1:0)},_doFinalize:function(){var E=this._data,O=E.words,C=8*this._nDataBytes,k=8*E.sigBytes;return O[k>>>5]|=128<<24-k%32,O[30+(k+128>>>10<<5)]=Math.floor(C/4294967296),O[31+(k+128>>>10<<5)]=C,E.sigBytes=4*O.length,this._process(),this._hash.toX32()},clone:function(){var E=m.clone.call(this);return E._hash=this._hash.clone(),E},blockSize:32});y.SHA512=m._createHelper(S),y.HmacSHA512=m._createHmacHelper(S)}(),p.SHA512)},1396:function(d,l,o){var p;d.exports=(p=o(9021),o(3240),o(6440),o(5503),o(754),o(4725),o(4636),o(5471),o(3009),o(6308),o(1380),o(9557),o(5953),o(8056),o(1025),o(19),o(9506),o(7165),o(2169),o(6939),o(6372),o(3797),o(8454),o(2073),o(4905),o(482),o(2155),o(8124),o(25),o(955),o(7628),o(7193),o(6298),o(2696),o(3128),p)},1425:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateV1State=void 0;const p=o(2291),y=o(6011),m={};function u(f,_,g){return f.msecs??(f.msecs=-1/0),f.nsecs??(f.nsecs=0),_===f.msecs?(f.nsecs++,f.nsecs>=1e4&&(f.node=void 0,f.nsecs=0)):_>f.msecs?f.nsecs=0:_<f.msecs&&(f.node=void 0),f.node||(f.node=g.slice(10,16),f.node[0]|=1,f.clockseq=16383&(g[8]<<8|g[9])),f.msecs=_,f}function b(f,_,g,v,w,S,E=0){if(f.length<16)throw new Error("Random bytes length must be >= 16");if(S){if(E<0||E+16>S.length)throw new RangeError(`UUID byte range ${E}:${E+15} is out of buffer bounds`)}else S=new Uint8Array(16),E=0;_??(_=Date.now()),g??(g=0),v??(v=16383&(f[8]<<8|f[9])),w??(w=f.slice(10,16));const O=(1e4*(268435455&(_+=122192928e5))+g)%4294967296;S[E++]=O>>>24&255,S[E++]=O>>>16&255,S[E++]=O>>>8&255,S[E++]=255&O;const C=_/4294967296*1e4&268435455;S[E++]=C>>>8&255,S[E++]=255&C,S[E++]=C>>>24&15|16,S[E++]=C>>>16&255,S[E++]=v>>>8|128,S[E++]=255&v;for(let k=0;k<6;++k)S[E++]=w[k];return S}l.updateV1State=u,l.default=function(f,_,g){var S;let v;const w=(f==null?void 0:f._v6)??!1;if(f){const E=Object.keys(f);E.length===1&&E[0]==="_v6"&&(f=void 0)}if(f)v=b(f.random??((S=f.rng)==null?void 0:S.call(f))??(0,p.default)(),f.msecs,f.nsecs,f.clockseq,f.node,_,g);else{const E=Date.now(),O=(0,p.default)();u(m,E,O),v=b(O,m.msecs,m.nsecs,w?void 0:m.clockseq,w?void 0:m.node,_,g)}return _??(0,y.unsafeStringify)(v)}},1765:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=function(o){return o===void 0?void 0:Number.isNaN(o)?NaN:typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))},l.generateRandomNumber=function(){return Math.round(1e7*Math.random())},l.deepFreeze=function o(p){const y=Reflect.ownKeys(p);for(const m of y){const u=p[m];(u&&typeof u=="object"||typeof u=="function")&&o(u)}return Object.freeze(p)}},1767:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Firefox60=void 0;const p=o(7363),y=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),_=o(5938),g=o(521),v=o(1305),w=o(3303),S=new y.Logger("Firefox60"),E={OS:16,MIS:2048};class O extends g.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new O}get name(){return"Firefox60"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),h=document.createElement("canvas");h.getContext("2d");const x=h.captureStream().getVideoTracks()[0];try{T.addTransceiver("audio",{direction:"sendrecv"});const R=T.addTransceiver(x,{direction:"sendrecv"}),P=R.sender.getParameters(),N=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];P.encodings=N,await R.sender.setParameters(P);const j=await T.createOffer();try{h.remove()}catch{}try{x.stop()}catch{}try{T.close()}catch{}const D=p.parse(j.sdp);return f.extractRtpCapabilities({sdpObject:D})}catch(R){try{h.remove()}catch{}try{x.stop()}catch{}try{T.close()}catch{}throw R}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:E}}run({direction:T,iceParameters:h,iceCandidates:x,dtlsParameters:R,sctpParameters:P,iceServers:N,iceTransportPolicy:j,additionalSettings:D,proprietaryConstraints:L,extendedRtpCapabilities:M}){this.assertNotClosed(),S.debug("run()"),this._direction=T,this._remoteSdp=new v.RemoteSdp({iceParameters:h,iceCandidates:x,dtlsParameters:R,sctpParameters:P}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",M),video:b.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",M),video:b.getSendingRemoteRtpParameters("video",M)},this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...D},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",I=>{this.emit("@icecandidateerror",I)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(T){throw this.assertNotClosed(),new m.UnsupportedError("not supported")}async restartIce(T){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:T,encodings:h,codecOptions:x,codec:R}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),h&&((h=u.clone(h)).forEach((ee,Q)=>{ee.rid=`r${Q}`}),h.reverse());const P=u.clone(this._sendingRtpParametersByKind[T.kind]);P.codecs=b.reduceCodecs(P.codecs,R);const N=u.clone(this._sendingRemoteRtpParametersByKind[T.kind]);N.codecs=b.reduceCodecs(N.codecs,R);const j=this._pc.addTransceiver(T,{direction:"sendonly",streams:[this._sendStream]});if(h){const ee=j.sender.getParameters();ee.encodings=h,await j.sender.setParameters(ee)}const D=await this._pc.createOffer();let L=p.parse(D.sdp);L.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L});const M=(0,w.parse)((h??[{}])[0].scalabilityMode);S.debug("send() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const I=j.mid;P.mid=I,L=p.parse(this._pc.localDescription.sdp);const G=L.media[L.media.length-1];if(P.rtcp.cname=f.getCname({offerMediaObject:G}),h)if(h.length===1){const ee=_.getRtpEncodings({offerMediaObject:G});Object.assign(ee[0],h[0]),P.encodings=ee}else P.encodings=h.reverse();else P.encodings=_.getRtpEncodings({offerMediaObject:G});if(P.encodings.length>1&&(P.codecs[0].mimeType.toLowerCase()==="video/vp8"||P.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ee of P.encodings)ee.scalabilityMode?ee.scalabilityMode=`L1T${M.temporalLayers}`:ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:G,offerRtpParameters:P,answerRtpParameters:N,codecOptions:x});const de={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",de),await this._pc.setRemoteDescription(de),this._mapMidTransceiver.set(I,j),{localId:I,rtpParameters:P,rtpSender:j.sender}}async stopSending(T){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",T),this._closed)return;const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated transceiver not found");h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.disableMediaSection(h.mid);const x=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R),this._mapMidTransceiver.delete(T)}async pauseSending(T){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="inactive",this._remoteSdp.pauseMediaSection(T);const x=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async resumeSending(T){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(T);const x=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async replaceTrack(T,h){this.assertNotClosed(),this.assertSendDirection(),h?S.debug("replaceTrack() [localId:%s, track.id:%s]",T,h.id):S.debug("replaceTrack() [localId:%s, no track]",T);const x=this._mapMidTransceiver.get(T);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(h)}async setMaxSpatialLayer(T,h){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,h);const x=this._mapMidTransceiver.get(T);if(!x)throw new Error("associated transceiver not found");const R=x.sender.getParameters();h=R.encodings.length-1-h,R.encodings.forEach((j,D)=>{j.active=D>=h}),await x.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(T,R.encodings);const P=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(T,h){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,h);const x=this._mapMidTransceiver.get(T);if(!x)throw new Error("associated RTCRtpTransceiver not found");const R=x.sender.getParameters();R.encodings.forEach((j,D)=>{R.encodings[D]={...j,...h}}),await x.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(T,R.encodings);const P=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(T){this.assertNotClosed(),this.assertSendDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:h,maxRetransmits:x,label:R,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:h,maxRetransmits:x,protocol:P};S.debug("sendDataChannel() [options:%o]",N);const j=this._pc.createDataChannel(R,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%E.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),L=p.parse(D.sdp),M=L.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const I={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(T){this.assertNotClosed(),this.assertRecvDirection();const h=[],x=new Map;for(const j of T){const{trackId:D,kind:L,rtpParameters:M,streamId:I}=j;S.debug("receive() [trackId:%s, kind:%s]",D,L);const G=M.mid??String(this._mapMidTransceiver.size);x.set(D,G),this._remoteSdp.receive({mid:G,kind:L,offerRtpParameters:M,streamId:I??M.rtcp.cname,trackId:D})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);let P=await this._pc.createAnswer();const N=p.parse(P.sdp);for(const j of T){const{trackId:D,rtpParameters:L}=j,M=x.get(D),I=N.media.find(G=>String(G.mid)===M);f.applyCodecParameters({offerRtpParameters:L,answerMediaObject:I}),P={type:"answer",sdp:p.write(N)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const j of T){const{trackId:D}=j,L=x.get(D),M=this._pc.getTransceivers().find(I=>I.mid===L);if(!M)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,M),h.push({localId:L,track:M.receiver.track,rtpReceiver:M.receiver})}return h}async stopReceiving(T){if(this.assertRecvDirection(),this._closed)return;for(const R of T){S.debug("stopReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const R of T)this._mapMidTransceiver.delete(R)}async pauseReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const R of T){S.debug("pauseReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(R)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const R of T){S.debug("resumeReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(R)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(T){this.assertRecvDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:T,label:h,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:R,ordered:P,maxPacketLifeTime:N,maxRetransmits:j}=T,D={negotiated:!0,id:R,ordered:P,maxPacketLifeTime:N,maxRetransmits:j,protocol:x};S.debug("receiveDataChannel() [options:%o]",D);const L=this._pc.createDataChannel(h,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const M={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const I=await this._pc.createAnswer();if(!this._transportReady){const G=p.parse(I.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:G})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setLocalDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:T,localSdpObject:h}){h||(h=p.parse(this._pc.localDescription.sdp));const x=f.extractDtlsParameters({sdpObject:h});x.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((R,P)=>{this.safeEmit("@connect",{dtlsParameters:x},R,P)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new m.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Firefox60=O},1797:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(9746);l.default=function(y){if(!(0,p.default)(y))throw TypeError("Invalid UUID");let m;return Uint8Array.of((m=parseInt(y.slice(0,8),16))>>>24,m>>>16&255,m>>>8&255,255&m,(m=parseInt(y.slice(9,13),16))>>>8,255&m,(m=parseInt(y.slice(14,18),16))>>>8,255&m,(m=parseInt(y.slice(19,23),16))>>>8,255&m,(m=parseInt(y.slice(24,36),16))/1099511627776&255,m/4294967296&255,m>>>24&255,m>>>16&255,m>>>8&255,255&m)}},1803:(d,l,o)=>{o.d(l,{ed:()=>R,sg:()=>P,v7:()=>T});var p=o(4467),y=o(296),m=o(9027);function u(N,j){var D=Object.keys(N);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(N);j&&(L=L.filter(function(M){return Object.getOwnPropertyDescriptor(N,M).enumerable})),D.push.apply(D,L)}return D}var b={},f={},_={};for(var g in m.$.videoProfiles)m.$.videoProfiles[g].aspectRatio=="oneSixNine"&&(b[g]=m.$.videoProfiles[g],b[g].encoding={maxBitrate:b[g].bitRate,maxFramerate:b[g].frameRate}),m.$.videoProfiles[g].aspectRatio=="fourThree"&&(f[g]=m.$.videoProfiles[g],f[g].encoding={maxBitrate:f[g].bitRate,maxFramerate:f[g].frameRate});for(var g in m.$.screenShareProfiles)_[g]=m.$.screenShareProfiles[g],_[g].encoding={maxBitrate:_[g].bitRate,maxFramerate:_[g].frameRate};var v=Object.values(b),w=Object.values(f),S=Object.values(_),E=[b.h180p_w320p,b.h360p_w640p],O=[f.h180p_w240p,f.h360p_w480p],C=function(N){return[{scaleResolutionDownBy:2,fps:3}].map(function(j){var D;return{width:Math.floor(N.width/j.scaleResolutionDownBy),height:Math.floor(N.height/j.scaleResolutionDownBy),encodings:{maxBitrate:Math.max(15e4,Math.floor(N.encoding.maxBitrate/(Math.pow(j.scaleResolutionDownBy,2)*(((D=N.encoding.maxFramerate)!==null&&D!==void 0?D:30)/j.fps)))),maxFramerate:j.fps}}})},k=["q","h","f"];function T(N,j,D,L,M){var I=L&&L.videoEncoding;N&&(I=L&&L.screenShareEncoding);var G=L==null?void 0:L.simulcast;if(I||(I=function(ie,$e,je){for(var se=function(nr,Ct,cr){if(nr)return S;var br=Ct>cr?Ct/cr:cr/Ct;return Math.abs(br-1.7777777777777777)<Math.abs(br-1.3333333333333333)?v:w}(ie,$e,je),ue=se[0].encoding,Ce=Math.max($e,je),He=0;He<se.length;He+=1){var $t=se[He];if(ue=$t.encoding,$t.width>=Ce)break}return ue}(N,j,D)),!G)return[I];var de,ee={width:j,height:D,encoding:{maxBitrate:I.maxBitrate,maxFramerate:I.maxFramerate}},Q=[],ae=(Q=h(N,ee))[0];if(Q.length>1){var _e=Q;de=(0,y.A)(_e,2)[1]}var Se=Math.max(j,D);return x(j,D,Se>=960&&de?[ae,de,ee]:Se>=480?[ae,ee]:[ee],M)}function h(N,j){N&&C(j);var D=j.width,L=j.height,M=D>L?D/L:L/D;return Math.abs(M-1.7777777777777777)<Math.abs(M-1.3333333333333333)?E:O}function x(N,j,D,L){var M=[];return D.forEach(function(I,G){if(!(G>=k.length)){var de=L?null:{maxFramerate:I.encoding.maxFramerate},ee=Math.min(N,j),Q=function(ae){for(var _e=1;_e<arguments.length;_e++){var Se=arguments[_e]!=null?arguments[_e]:{};_e%2?u(Object(Se),!0).forEach(function(ie){(0,p.A)(ae,ie,Se[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(Se)):u(Object(Se)).forEach(function(ie){Object.defineProperty(ae,ie,Object.getOwnPropertyDescriptor(Se,ie))})}return ae}({rid:k[G],scaleResolutionDownBy:ee/Math.min(I.width,I.height),maxBitrate:I.encoding.maxBitrate},de);M.push(Q)}}),M}function R(N,j,D){if(!N)return{};var L=N.id,M=N.appData,I=M.width,G=M.height,de=M.encodings;try{var ee=function($e){var je=[];if($e&&$e.length!=0){if($e.length===1){for(var se=0;se<3;se++)je.push(Math.pow(2,3-se-1));return je}var ue=!1;return $e.forEach(function(Ce){Ce.scaleResolutionDownBy!==void 0?(ue=!0,je.push(Math.max(1,Ce.scaleResolutionDownBy))):je.push(1)}),ue||$e.forEach(function(Ce,He){je[He]=Math.pow(2,$e.length-He-1)}),je}}(de);if(!ee)return{};var Q=ee.map(function($e){return{width:I/$e,height:G/$e}}).sort(function($e,je){return $e.width-je.width}),ae=Q.findIndex(function($e){return $e.width>=j&&$e.height>=D});ae===-1&&(ae=Q.length-1);var _e=N.temporalLayers?N.temporalLayers:2;if(ae===0&&_e>0){var Se=I/ee[0],ie=G/ee[0];j<.5*Se&&D<.5*ie&&(_e-=1),_e>0&&j<.25*Se&&D<.25*ie&&(_e-=1)}return{consumerId:L,newPreferredSpatialLayer:Math.max(0,ae),newPreferredTemporalLayer:Math.max(0,_e)}}catch{return{}}}function P(N,j){var D;return function(){for(var L=this,M=arguments.length,I=new Array(M),G=0;G<M;G++)I[G]=arguments[G];clearTimeout(D),D=setTimeout(function(){return N.apply(L,I)},j)}}},1806:(d,l,o)=>{o.d(l,{$Q:()=>p,T4:()=>y,Ts:()=>u,ue:()=>m});var p="vk_e2ee",y={sharedKey:!1,ratchetSalt:"VideoSDKEncryptionRatchetSalt",ratchetWindowSize:0,failureTolerance:10,keyringSize:16,discardFrameWhenCryptorNotReady:!1},m=["vp8","vp9","h264","av1"],u=["opus"]},1919:(d,l,o)=>{o.r(l),o.d(l,{default:()=>ai});var p={};o.r(p),o.d(p,{Decoder:()=>De,Encoder:()=>lt,PacketType:()=>Le,protocol:()=>ot});var y=o(296),m=o(2284),u=o(467),b=o(3029),f=o(2901),_=o(4467),g=o(4756),v=o.n(g);const w=Object.create(null);w.open="0",w.close="1",w.ping="2",w.pong="3",w.message="4",w.upgrade="5",w.noop="6";const S=Object.create(null);Object.keys(w).forEach(q=>{S[w[q]]=q});const E={type:"error",data:"parser error"},O=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",C=typeof ArrayBuffer=="function",k=q=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(q):q&&q.buffer instanceof ArrayBuffer,T=({type:q,data:B},V,Y)=>O&&B instanceof Blob?V?Y(B):h(B,Y):C&&(B instanceof ArrayBuffer||k(B))?V?Y(B):h(new Blob([B]),Y):Y(w[q]+(B||"")),h=(q,B)=>{const V=new FileReader;return V.onload=function(){const Y=V.result.split(",")[1];B("b"+(Y||""))},V.readAsDataURL(q)};function x(q){return q instanceof Uint8Array?q:q instanceof ArrayBuffer?new Uint8Array(q):new Uint8Array(q.buffer,q.byteOffset,q.byteLength)}let R;const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let q=0;q<64;q++)N[P.charCodeAt(q)]=q;const j=typeof ArrayBuffer=="function",D=(q,B)=>{if(typeof q!="string")return{type:"message",data:M(q,B)};const V=q.charAt(0);return V==="b"?{type:"message",data:L(q.substring(1),B)}:S[V]?q.length>1?{type:S[V],data:q.substring(1)}:{type:S[V]}:E},L=(q,B)=>{if(j){const V=(Y=>{let ge,Te,rt,dt,qe,Yt=.75*Y.length,ct=Y.length,Pt=0;Y[Y.length-1]==="="&&(Yt--,Y[Y.length-2]==="="&&Yt--);const ar=new ArrayBuffer(Yt),wn=new Uint8Array(ar);for(ge=0;ge<ct;ge+=4)Te=N[Y.charCodeAt(ge)],rt=N[Y.charCodeAt(ge+1)],dt=N[Y.charCodeAt(ge+2)],qe=N[Y.charCodeAt(ge+3)],wn[Pt++]=Te<<2|rt>>4,wn[Pt++]=(15&rt)<<4|dt>>2,wn[Pt++]=(3&dt)<<6|63&qe;return ar})(q);return M(V,B)}return{base64:!0,data:q}},M=(q,B)=>B==="blob"?q instanceof Blob?q:new Blob([q]):q instanceof ArrayBuffer?q:q.buffer,I="";function G(){return new TransformStream({transform(q,B){(function(V,Y){O&&V.data instanceof Blob?V.data.arrayBuffer().then(x).then(Y):C&&(V.data instanceof ArrayBuffer||k(V.data))?Y(x(V.data)):T(V,!1,ge=>{R||(R=new TextEncoder),Y(R.encode(ge))})})(q,V=>{const Y=V.length;let ge;if(Y<126)ge=new Uint8Array(1),new DataView(ge.buffer).setUint8(0,Y);else if(Y<65536){ge=new Uint8Array(3);const Te=new DataView(ge.buffer);Te.setUint8(0,126),Te.setUint16(1,Y)}else{ge=new Uint8Array(9);const Te=new DataView(ge.buffer);Te.setUint8(0,127),Te.setBigUint64(1,BigInt(Y))}q.data&&typeof q.data!="string"&&(ge[0]|=128),B.enqueue(ge),B.enqueue(V)})}})}let de;function ee(q){return q.reduce((B,V)=>B+V.length,0)}function Q(q,B){if(q[0].length===B)return q.shift();const V=new Uint8Array(B);let Y=0;for(let ge=0;ge<B;ge++)V[ge]=q[0][Y++],Y===q[0].length&&(q.shift(),Y=0);return q.length&&Y<q[0].length&&(q[0]=q[0].slice(Y)),V}function ae(q){if(q)return function(B){for(var V in ae.prototype)B[V]=ae.prototype[V];return B}(q)}ae.prototype.on=ae.prototype.addEventListener=function(q,B){return this._callbacks=this._callbacks||{},(this._callbacks["$"+q]=this._callbacks["$"+q]||[]).push(B),this},ae.prototype.once=function(q,B){function V(){this.off(q,V),B.apply(this,arguments)}return V.fn=B,this.on(q,V),this},ae.prototype.off=ae.prototype.removeListener=ae.prototype.removeAllListeners=ae.prototype.removeEventListener=function(q,B){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var V,Y=this._callbacks["$"+q];if(!Y)return this;if(arguments.length==1)return delete this._callbacks["$"+q],this;for(var ge=0;ge<Y.length;ge++)if((V=Y[ge])===B||V.fn===B){Y.splice(ge,1);break}return Y.length===0&&delete this._callbacks["$"+q],this},ae.prototype.emit=function(q){this._callbacks=this._callbacks||{};for(var B=new Array(arguments.length-1),V=this._callbacks["$"+q],Y=1;Y<arguments.length;Y++)B[Y-1]=arguments[Y];if(V){Y=0;for(var ge=(V=V.slice(0)).length;Y<ge;++Y)V[Y].apply(this,B)}return this},ae.prototype.emitReserved=ae.prototype.emit,ae.prototype.listeners=function(q){return this._callbacks=this._callbacks||{},this._callbacks["$"+q]||[]},ae.prototype.hasListeners=function(q){return!!this.listeners(q).length};const _e=typeof Promise=="function"&&typeof Promise.resolve=="function"?q=>Promise.resolve().then(q):(q,B)=>B(q,0),Se=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function ie(q,...B){return B.reduce((V,Y)=>(q.hasOwnProperty(Y)&&(V[Y]=q[Y]),V),{})}const $e=Se.setTimeout,je=Se.clearTimeout;function se(q,B){B.useNativeTimers?(q.setTimeoutFn=$e.bind(Se),q.clearTimeoutFn=je.bind(Se)):(q.setTimeoutFn=Se.setTimeout.bind(Se),q.clearTimeoutFn=Se.clearTimeout.bind(Se))}function ue(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Ce extends Error{constructor(B,V,Y){super(B),this.description=V,this.context=Y,this.type="TransportError"}}class He extends ae{constructor(B){super(),this.writable=!1,se(this,B),this.opts=B,this.query=B.query,this.socket=B.socket,this.supportsBinary=!B.forceBase64}onError(B,V,Y){return super.emitReserved("error",new Ce(B,V,Y)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(B){this.readyState==="open"&&this.write(B)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(B){const V=D(B,this.socket.binaryType);this.onPacket(V)}onPacket(B){super.emitReserved("packet",B)}onClose(B){this.readyState="closed",super.emitReserved("close",B)}pause(B){}createUri(B,V={}){return B+"://"+this._hostname()+this._port()+this.opts.path+this._query(V)}_hostname(){const B=this.opts.hostname;return B.indexOf(":")===-1?B:"["+B+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(B){const V=function(Y){let ge="";for(let Te in Y)Y.hasOwnProperty(Te)&&(ge.length&&(ge+="&"),ge+=encodeURIComponent(Te)+"="+encodeURIComponent(Y[Te]));return ge}(B);return V.length?"?"+V:""}}class $t extends He{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(B){this.readyState="pausing";const V=()=>{this.readyState="paused",B()};if(this._polling||!this.writable){let Y=0;this._polling&&(Y++,this.once("pollComplete",function(){--Y||V()})),this.writable||(Y++,this.once("drain",function(){--Y||V()}))}else V()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(B){((V,Y)=>{const ge=V.split(I),Te=[];for(let rt=0;rt<ge.length;rt++){const dt=D(ge[rt],Y);if(Te.push(dt),dt.type==="error")break}return Te})(B,this.socket.binaryType).forEach(V=>{if(this.readyState==="opening"&&V.type==="open"&&this.onOpen(),V.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(V)}),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const B=()=>{this.write([{type:"close"}])};this.readyState==="open"?B():this.once("open",B)}write(B){this.writable=!1,((V,Y)=>{const ge=V.length,Te=new Array(ge);let rt=0;V.forEach((dt,qe)=>{T(dt,!1,Yt=>{Te[qe]=Yt,++rt===ge&&Y(Te.join(I))})})})(B,V=>{this.doWrite(V,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const B=this.opts.secure?"https":"http",V=this.query||{};return this.opts.timestampRequests!==!1&&(V[this.opts.timestampParam]=ue()),this.supportsBinary||V.sid||(V.b64=1),this.createUri(B,V)}}let nr=!1;try{nr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ct=nr;function cr(){}class br extends $t{constructor(B){if(super(B),typeof location<"u"){const V=location.protocol==="https:";let Y=location.port;Y||(Y=V?"443":"80"),this.xd=typeof location<"u"&&B.hostname!==location.hostname||Y!==B.port}}doWrite(B,V){const Y=this.request({method:"POST",data:B});Y.on("success",V),Y.on("error",(ge,Te)=>{this.onError("xhr post error",ge,Te)})}doPoll(){const B=this.request();B.on("data",this.onData.bind(this)),B.on("error",(V,Y)=>{this.onError("xhr poll error",V,Y)}),this.pollXhr=B}}class jt extends ae{constructor(B,V,Y){super(),this.createRequest=B,se(this,Y),this._opts=Y,this._method=Y.method||"GET",this._uri=V,this._data=Y.data!==void 0?Y.data:null,this._create()}_create(){var B;const V=ie(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");V.xdomain=!!this._opts.xd;const Y=this._xhr=this.createRequest(V);try{Y.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){Y.setDisableHeaderCheck&&Y.setDisableHeaderCheck(!0);for(let ge in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(ge)&&Y.setRequestHeader(ge,this._opts.extraHeaders[ge])}}catch{}if(this._method==="POST")try{Y.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{Y.setRequestHeader("Accept","*/*")}catch{}(B=this._opts.cookieJar)===null||B===void 0||B.addCookies(Y),"withCredentials"in Y&&(Y.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(Y.timeout=this._opts.requestTimeout),Y.onreadystatechange=()=>{var ge;Y.readyState===3&&((ge=this._opts.cookieJar)===null||ge===void 0||ge.parseCookies(Y.getResponseHeader("set-cookie"))),Y.readyState===4&&(Y.status===200||Y.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof Y.status=="number"?Y.status:0)},0))},Y.send(this._data)}catch(ge){return void this.setTimeoutFn(()=>{this._onError(ge)},0)}typeof document<"u"&&(this._index=jt.requestsCount++,jt.requests[this._index]=this)}_onError(B){this.emitReserved("error",B,this._xhr),this._cleanup(!0)}_cleanup(B){if(this._xhr!==void 0&&this._xhr!==null){if(this._xhr.onreadystatechange=cr,B)try{this._xhr.abort()}catch{}typeof document<"u"&&delete jt.requests[this._index],this._xhr=null}}_onLoad(){const B=this._xhr.responseText;B!==null&&(this.emitReserved("data",B),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}jt.requestsCount=0,jt.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",nn):typeof addEventListener=="function"&&addEventListener("onpagehide"in Se?"pagehide":"unload",nn,!1));function nn(){for(let q in jt.requests)jt.requests.hasOwnProperty(q)&&jt.requests[q].abort()}const Dt=function(){const q=Xt({xdomain:!1});return q&&q.responseType!==null}();function Xt(q){const B=q.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!B||Ct))return new XMLHttpRequest}catch{}if(!B)try{return new Se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Gr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class dn extends He{get name(){return"websocket"}doOpen(){const B=this.uri(),V=this.opts.protocols,Y=Gr?{}:ie(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(Y.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(B,V,Y)}catch(ge){return this.emitReserved("error",ge)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=B=>this.onClose({description:"websocket connection closed",context:B}),this.ws.onmessage=B=>this.onData(B.data),this.ws.onerror=B=>this.onError("websocket error",B)}write(B){this.writable=!1;for(let V=0;V<B.length;V++){const Y=B[V],ge=V===B.length-1;T(Y,this.supportsBinary,Te=>{try{this.doWrite(Y,Te)}catch{}ge&&_e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const B=this.opts.secure?"wss":"ws",V=this.query||{};return this.opts.timestampRequests&&(V[this.opts.timestampParam]=ue()),this.supportsBinary||(V.b64=1),this.createUri(B,V)}}const Mr=Se.WebSocket||Se.MozWebSocket,Yr={websocket:class extends dn{createSocket(q,B,V){return Gr?new Mr(q,B,V):B?new Mr(q,B):new Mr(q)}doWrite(q,B){this.ws.send(B)}},webtransport:class extends He{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(q){return this.emitReserved("error",q)}this._transport.closed.then(()=>{this.onClose()}).catch(q=>{this.onError("webtransport error",q)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(q=>{const B=function(rt,dt){de||(de=new TextDecoder);const qe=[];let Yt=0,ct=-1,Pt=!1;return new TransformStream({transform(ar,wn){for(qe.push(ar);;){if(Yt===0){if(ee(qe)<1)break;const on=Q(qe,1);Pt=!(128&~on[0]),ct=127&on[0],Yt=ct<126?3:ct===126?1:2}else if(Yt===1){if(ee(qe)<2)break;const on=Q(qe,2);ct=new DataView(on.buffer,on.byteOffset,on.length).getUint16(0),Yt=3}else if(Yt===2){if(ee(qe)<8)break;const on=Q(qe,8),gs=new DataView(on.buffer,on.byteOffset,on.length),Re=gs.getUint32(0);if(Re>Math.pow(2,21)-1){wn.enqueue(E);break}ct=Re*Math.pow(2,32)+gs.getUint32(4),Yt=3}else{if(ee(qe)<ct)break;const on=Q(qe,ct);wn.enqueue(D(Pt?on:de.decode(on),dt)),Yt=0}if(ct===0||ct>rt){wn.enqueue(E);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),V=q.readable.pipeThrough(B).getReader(),Y=G();Y.readable.pipeTo(q.writable),this._writer=Y.writable.getWriter();const ge=()=>{V.read().then(({done:rt,value:dt})=>{rt||(this.onPacket(dt),ge())}).catch(rt=>{})};ge();const Te={type:"open"};this.query.sid&&(Te.data=`{"sid":"${this.query.sid}"}`),this._writer.write(Te).then(()=>this.onOpen())})})}write(q){this.writable=!1;for(let B=0;B<q.length;B++){const V=q[B],Y=B===q.length-1;this._writer.write(V).then(()=>{Y&&_e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var q;(q=this._transport)===null||q===void 0||q.close()}},polling:class extends br{constructor(q){super(q);const B=q&&q.forceBase64;this.supportsBinary=Dt&&!B}request(q={}){return Object.assign(q,{xd:this.xd},this.opts),new jt(Xt,this.uri(),q)}}},un=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Lt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pn(q){if(q.length>8e3)throw"URI too long";const B=q,V=q.indexOf("["),Y=q.indexOf("]");V!=-1&&Y!=-1&&(q=q.substring(0,V)+q.substring(V,Y).replace(/:/g,";")+q.substring(Y,q.length));let ge=un.exec(q||""),Te={},rt=14;for(;rt--;)Te[Lt[rt]]=ge[rt]||"";return V!=-1&&Y!=-1&&(Te.source=B,Te.host=Te.host.substring(1,Te.host.length-1).replace(/;/g,":"),Te.authority=Te.authority.replace("[","").replace("]","").replace(/;/g,":"),Te.ipv6uri=!0),Te.pathNames=function(dt,qe){const Yt=/\/{2,9}/g,ct=qe.replace(Yt,"/").split("/");return qe.slice(0,1)!="/"&&qe.length!==0||ct.splice(0,1),qe.slice(-1)=="/"&&ct.splice(ct.length-1,1),ct}(0,Te.path),Te.queryKey=function(dt,qe){const Yt={};return qe.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(ct,Pt,ar){Pt&&(Yt[Pt]=ar)}),Yt}(0,Te.query),Te}const sn=typeof addEventListener=="function"&&typeof removeEventListener=="function",zr=[];sn&&addEventListener("offline",()=>{zr.forEach(q=>q())},!1);class Lr extends ae{constructor(B,V){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,B&&typeof B=="object"&&(V=B,B=null),B){const Y=pn(B);V.hostname=Y.host,V.secure=Y.protocol==="https"||Y.protocol==="wss",V.port=Y.port,Y.query&&(V.query=Y.query)}else V.host&&(V.hostname=pn(V.host).host);se(this,V),this.secure=V.secure!=null?V.secure:typeof location<"u"&&location.protocol==="https:",V.hostname&&!V.port&&(V.port=this.secure?"443":"80"),this.hostname=V.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=V.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},V.transports.forEach(Y=>{const ge=Y.prototype.name;this.transports.push(ge),this._transportsByName[ge]=Y}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},V),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(Y){let ge={},Te=Y.split("&");for(let rt=0,dt=Te.length;rt<dt;rt++){let qe=Te[rt].split("=");ge[decodeURIComponent(qe[0])]=decodeURIComponent(qe[1])}return ge}(this.opts.query)),sn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(B){const V=Object.assign({},this.opts.query);V.EIO=4,V.transport=B,this.id&&(V.sid=this.id);const Y=Object.assign({},this.opts,{query:V,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[B]);return new this._transportsByName[B](Y)}_open(){if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const B=this.opts.rememberUpgrade&&Lr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const V=this.createTransport(B);V.open(),this.setTransport(V)}setTransport(B){this.transport&&this.transport.removeAllListeners(),this.transport=B,B.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",V=>this._onClose("transport close",V))}onOpen(){this.readyState="open",Lr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(B){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",B),this.emitReserved("heartbeat"),B.type){case"open":this.onHandshake(JSON.parse(B.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const V=new Error("server error");V.code=B.data,this._onError(V);break;case"message":this.emitReserved("data",B.data),this.emitReserved("message",B.data)}}onHandshake(B){this.emitReserved("handshake",B),this.id=B.sid,this.transport.query.sid=B.sid,this._pingInterval=B.pingInterval,this._pingTimeout=B.pingTimeout,this._maxPayload=B.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const B=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+B,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},B),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const B=this._getWritablePackets();this.transport.send(B),this._prevBufferLen=B.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let B=1;for(let Y=0;Y<this.writeBuffer.length;Y++){const ge=this.writeBuffer[Y].data;if(ge&&(B+=typeof(V=ge)=="string"?function(Te){let rt=0,dt=0;for(let qe=0,Yt=Te.length;qe<Yt;qe++)rt=Te.charCodeAt(qe),rt<128?dt+=1:rt<2048?dt+=2:rt<55296||rt>=57344?dt+=3:(qe++,dt+=4);return dt}(V):Math.ceil(1.33*(V.byteLength||V.size))),Y>0&&B>this._maxPayload)return this.writeBuffer.slice(0,Y);B+=2}var V;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const B=Date.now()>this._pingTimeoutTime;return B&&(this._pingTimeoutTime=0,_e(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),B}write(B,V,Y){return this._sendPacket("message",B,V,Y),this}send(B,V,Y){return this._sendPacket("message",B,V,Y),this}_sendPacket(B,V,Y,ge){if(typeof V=="function"&&(ge=V,V=void 0),typeof Y=="function"&&(ge=Y,Y=null),this.readyState==="closing"||this.readyState==="closed")return;(Y=Y||{}).compress=Y.compress!==!1;const Te={type:B,data:V,options:Y};this.emitReserved("packetCreate",Te),this.writeBuffer.push(Te),ge&&this.once("flush",ge),this.flush()}close(){const B=()=>{this._onClose("forced close"),this.transport.close()},V=()=>{this.off("upgrade",V),this.off("upgradeError",V),B()},Y=()=>{this.once("upgrade",V),this.once("upgradeError",V)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?Y():B()}):this.upgrading?Y():B()),this}_onError(B){if(Lr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",B),this._onClose("transport error",B)}_onClose(B,V){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),sn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const Y=zr.indexOf(this._offlineEventListener);Y!==-1&&zr.splice(Y,1)}this.readyState="closed",this.id=null,this.emitReserved("close",B,V),this.writeBuffer=[],this._prevBufferLen=0}}}Lr.protocol=4;class xn extends Lr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let B=0;B<this._upgrades.length;B++)this._probe(this._upgrades[B])}_probe(B){let V=this.createTransport(B),Y=!1;Lr.priorWebsocketSuccess=!1;const ge=()=>{Y||(V.send([{type:"ping",data:"probe"}]),V.once("packet",Pt=>{if(!Y)if(Pt.type==="pong"&&Pt.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",V),!V)return;Lr.priorWebsocketSuccess=V.name==="websocket",this.transport.pause(()=>{Y||this.readyState!=="closed"&&(ct(),this.setTransport(V),V.send([{type:"upgrade"}]),this.emitReserved("upgrade",V),V=null,this.upgrading=!1,this.flush())})}else{const ar=new Error("probe error");ar.transport=V.name,this.emitReserved("upgradeError",ar)}}))};function Te(){Y||(Y=!0,ct(),V.close(),V=null)}const rt=Pt=>{const ar=new Error("probe error: "+Pt);ar.transport=V.name,Te(),this.emitReserved("upgradeError",ar)};function dt(){rt("transport closed")}function qe(){rt("socket closed")}function Yt(Pt){V&&Pt.name!==V.name&&Te()}const ct=()=>{V.removeListener("open",ge),V.removeListener("error",rt),V.removeListener("close",dt),this.off("close",qe),this.off("upgrading",Yt)};V.once("open",ge),V.once("error",rt),V.once("close",dt),this.once("close",qe),this.once("upgrading",Yt),this._upgrades.indexOf("webtransport")!==-1&&B!=="webtransport"?this.setTimeoutFn(()=>{Y||V.open()},200):V.open()}onHandshake(B){this._upgrades=this._filterUpgrades(B.upgrades),super.onHandshake(B)}_filterUpgrades(B){const V=[];for(let Y=0;Y<B.length;Y++)~this.transports.indexOf(B[Y])&&V.push(B[Y]);return V}}class Xr extends xn{constructor(B,V={}){const Y=typeof B=="object"?B:V;(!Y.transports||Y.transports&&typeof Y.transports[0]=="string")&&(Y.transports=(Y.transports||["polling","websocket","webtransport"]).map(ge=>Yr[ge]).filter(ge=>!!ge)),super(B,Y)}}const Pn=typeof ArrayBuffer=="function",Sn=Object.prototype.toString,In=typeof Blob=="function"||typeof Blob<"u"&&Sn.call(Blob)==="[object BlobConstructor]",Nn=typeof File=="function"||typeof File<"u"&&Sn.call(File)==="[object FileConstructor]";function Wt(q){return Pn&&(q instanceof ArrayBuffer||(B=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(B):B.buffer instanceof ArrayBuffer)(q))||In&&q instanceof Blob||Nn&&q instanceof File}function Mn(q,B){if(!q||typeof q!="object")return!1;if(Array.isArray(q)){for(let V=0,Y=q.length;V<Y;V++)if(Mn(q[V]))return!0;return!1}if(Wt(q))return!0;if(q.toJSON&&typeof q.toJSON=="function"&&arguments.length===1)return Mn(q.toJSON(),!0);for(const V in q)if(Object.prototype.hasOwnProperty.call(q,V)&&Mn(q[V]))return!0;return!1}function ss(q){const B=[],V=q.data,Y=q;return Y.data=hn(V,B),Y.attachments=B.length,{packet:Y,buffers:B}}function hn(q,B){if(!q)return q;if(Wt(q)){const V={_placeholder:!0,num:B.length};return B.push(q),V}if(Array.isArray(q)){const V=new Array(q.length);for(let Y=0;Y<q.length;Y++)V[Y]=hn(q[Y],B);return V}if(typeof q=="object"&&!(q instanceof Date)){const V={};for(const Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&(V[Y]=hn(q[Y],B));return V}return q}function or(q,B){return q.data=Ye(q.data,B),delete q.attachments,q}function Ye(q,B){if(!q)return q;if(q&&q._placeholder===!0){if(typeof q.num=="number"&&q.num>=0&&q.num<B.length)return B[q.num];throw new Error("illegal attachments")}if(Array.isArray(q))for(let V=0;V<q.length;V++)q[V]=Ye(q[V],B);else if(typeof q=="object")for(const V in q)Object.prototype.hasOwnProperty.call(q,V)&&(q[V]=Ye(q[V],B));return q}const Me=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ot=5;var Le;(function(q){q[q.CONNECT=0]="CONNECT",q[q.DISCONNECT=1]="DISCONNECT",q[q.EVENT=2]="EVENT",q[q.ACK=3]="ACK",q[q.CONNECT_ERROR=4]="CONNECT_ERROR",q[q.BINARY_EVENT=5]="BINARY_EVENT",q[q.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class lt{constructor(B){this.replacer=B}encode(B){return B.type!==Le.EVENT&&B.type!==Le.ACK||!Mn(B)?[this.encodeAsString(B)]:this.encodeAsBinary({type:B.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:B.nsp,data:B.data,id:B.id})}encodeAsString(B){let V=""+B.type;return B.type!==Le.BINARY_EVENT&&B.type!==Le.BINARY_ACK||(V+=B.attachments+"-"),B.nsp&&B.nsp!=="/"&&(V+=B.nsp+","),B.id!=null&&(V+=B.id),B.data!=null&&(V+=JSON.stringify(B.data,this.replacer)),V}encodeAsBinary(B){const V=ss(B),Y=this.encodeAsString(V.packet),ge=V.buffers;return ge.unshift(Y),ge}}function lr(q){return Object.prototype.toString.call(q)==="[object Object]"}class De extends ae{constructor(B){super(),this.reviver=B}add(B){let V;if(typeof B=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");V=this.decodeString(B);const Y=V.type===Le.BINARY_EVENT;Y||V.type===Le.BINARY_ACK?(V.type=Y?Le.EVENT:Le.ACK,this.reconstructor=new Zt(V),V.attachments===0&&super.emitReserved("decoded",V)):super.emitReserved("decoded",V)}else{if(!Wt(B)&&!B.base64)throw new Error("Unknown type: "+B);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");V=this.reconstructor.takeBinaryData(B),V&&(this.reconstructor=null,super.emitReserved("decoded",V))}}decodeString(B){let V=0;const Y={type:Number(B.charAt(0))};if(Le[Y.type]===void 0)throw new Error("unknown packet type "+Y.type);if(Y.type===Le.BINARY_EVENT||Y.type===Le.BINARY_ACK){const Te=V+1;for(;B.charAt(++V)!=="-"&&V!=B.length;);const rt=B.substring(Te,V);if(rt!=Number(rt)||B.charAt(V)!=="-")throw new Error("Illegal attachments");Y.attachments=Number(rt)}if(B.charAt(V+1)==="/"){const Te=V+1;for(;++V&&!(B.charAt(V)===","||V===B.length););Y.nsp=B.substring(Te,V)}else Y.nsp="/";const ge=B.charAt(V+1);if(ge!==""&&Number(ge)==ge){const Te=V+1;for(;++V;){const rt=B.charAt(V);if(rt==null||Number(rt)!=rt){--V;break}if(V===B.length)break}Y.id=Number(B.substring(Te,V+1))}if(B.charAt(++V)){const Te=this.tryParse(B.substr(V));if(!De.isPayloadValid(Y.type,Te))throw new Error("invalid payload");Y.data=Te}return Y}tryParse(B){try{return JSON.parse(B,this.reviver)}catch{return!1}}static isPayloadValid(B,V){switch(B){case Le.CONNECT:return lr(V);case Le.DISCONNECT:return V===void 0;case Le.CONNECT_ERROR:return typeof V=="string"||lr(V);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(V)&&(typeof V[0]=="number"||typeof V[0]=="string"&&Me.indexOf(V[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(V)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zt{constructor(B){this.packet=B,this.buffers=[],this.reconPack=B}takeBinaryData(B){if(this.buffers.push(B),this.buffers.length===this.reconPack.attachments){const V=or(this.reconPack,this.buffers);return this.finishedReconstruction(),V}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Vt(q,B,V){return q.on(B,V),function(){q.off(B,V)}}const _r=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fr extends ae{constructor(B,V,Y){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=B,this.nsp=V,Y&&Y.auth&&(this.auth=Y.auth),this._opts=Object.assign({},Y),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const B=this.io;this.subs=[Vt(B,"open",this.onopen.bind(this)),Vt(B,"packet",this.onpacket.bind(this)),Vt(B,"error",this.onerror.bind(this)),Vt(B,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...B){return B.unshift("message"),this.emit.apply(this,B),this}emit(B,...V){var Y,ge,Te;if(_r.hasOwnProperty(B))throw new Error('"'+B.toString()+'" is a reserved event name');if(V.unshift(B),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(V),this;const rt={type:Le.EVENT,data:V,options:{}};if(rt.options.compress=this.flags.compress!==!1,typeof V[V.length-1]=="function"){const Yt=this.ids++,ct=V.pop();this._registerAckCallback(Yt,ct),rt.id=Yt}const dt=(ge=(Y=this.io.engine)===null||Y===void 0?void 0:Y.transport)===null||ge===void 0?void 0:ge.writable,qe=this.connected&&!(!((Te=this.io.engine)===null||Te===void 0)&&Te._hasPingExpired());return this.flags.volatile&&!dt||(qe?(this.notifyOutgoingListeners(rt),this.packet(rt)):this.sendBuffer.push(rt)),this.flags={},this}_registerAckCallback(B,V){var Y;const ge=(Y=this.flags.timeout)!==null&&Y!==void 0?Y:this._opts.ackTimeout;if(ge===void 0)return void(this.acks[B]=V);const Te=this.io.setTimeoutFn(()=>{delete this.acks[B];for(let dt=0;dt<this.sendBuffer.length;dt++)this.sendBuffer[dt].id===B&&this.sendBuffer.splice(dt,1);V.call(this,new Error("operation has timed out"))},ge),rt=(...dt)=>{this.io.clearTimeoutFn(Te),V.apply(this,dt)};rt.withError=!0,this.acks[B]=rt}emitWithAck(B,...V){return new Promise((Y,ge)=>{const Te=(rt,dt)=>rt?ge(rt):Y(dt);Te.withError=!0,V.push(Te),this.emit(B,...V)})}_addToQueue(B){let V;typeof B[B.length-1]=="function"&&(V=B.pop());const Y={id:this._queueSeq++,tryCount:0,pending:!1,args:B,flags:Object.assign({fromQueue:!0},this.flags)};B.push((ge,...Te)=>{if(Y===this._queue[0])return ge!==null?Y.tryCount>this._opts.retries&&(this._queue.shift(),V&&V(ge)):(this._queue.shift(),V&&V(null,...Te)),Y.pending=!1,this._drainQueue()}),this._queue.push(Y),this._drainQueue()}_drainQueue(B=!1){if(!this.connected||this._queue.length===0)return;const V=this._queue[0];V.pending&&!B||(V.pending=!0,V.tryCount++,this.flags=V.flags,this.emit.apply(this,V.args))}packet(B){B.nsp=this.nsp,this.io._packet(B)}onopen(){typeof this.auth=="function"?this.auth(B=>{this._sendConnectPacket(B)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(B){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},B):B})}onerror(B){this.connected||this.emitReserved("connect_error",B)}onclose(B,V){this.connected=!1,delete this.id,this.emitReserved("disconnect",B,V),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(B=>{if(!this.sendBuffer.some(V=>String(V.id)===B)){const V=this.acks[B];delete this.acks[B],V.withError&&V.call(this,new Error("socket has been disconnected"))}})}onpacket(B){if(B.nsp===this.nsp)switch(B.type){case Le.CONNECT:B.data&&B.data.sid?this.onconnect(B.data.sid,B.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(B);break;case Le.ACK:case Le.BINARY_ACK:this.onack(B);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const V=new Error(B.data.message);V.data=B.data.data,this.emitReserved("connect_error",V)}}onevent(B){const V=B.data||[];B.id!=null&&V.push(this.ack(B.id)),this.connected?this.emitEvent(V):this.receiveBuffer.push(Object.freeze(V))}emitEvent(B){if(this._anyListeners&&this._anyListeners.length){const V=this._anyListeners.slice();for(const Y of V)Y.apply(this,B)}super.emit.apply(this,B),this._pid&&B.length&&typeof B[B.length-1]=="string"&&(this._lastOffset=B[B.length-1])}ack(B){const V=this;let Y=!1;return function(...ge){Y||(Y=!0,V.packet({type:Le.ACK,id:B,data:ge}))}}onack(B){const V=this.acks[B.id];typeof V=="function"&&(delete this.acks[B.id],V.withError&&B.data.unshift(null),V.apply(this,B.data))}onconnect(B,V){this.id=B,this.recovered=V&&this._pid===V,this._pid=V,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(B=>this.emitEvent(B)),this.receiveBuffer=[],this.sendBuffer.forEach(B=>{this.notifyOutgoingListeners(B),this.packet(B)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(B=>B()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(B){return this.flags.compress=B,this}get volatile(){return this.flags.volatile=!0,this}timeout(B){return this.flags.timeout=B,this}onAny(B){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(B),this}prependAny(B){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(B),this}offAny(B){if(!this._anyListeners)return this;if(B){const V=this._anyListeners;for(let Y=0;Y<V.length;Y++)if(B===V[Y])return V.splice(Y,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(B){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(B),this}prependAnyOutgoing(B){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(B),this}offAnyOutgoing(B){if(!this._anyOutgoingListeners)return this;if(B){const V=this._anyOutgoingListeners;for(let Y=0;Y<V.length;Y++)if(B===V[Y])return V.splice(Y,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(B){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const V=this._anyOutgoingListeners.slice();for(const Y of V)Y.apply(this,B.data)}}}function Pr(q){q=q||{},this.ms=q.min||100,this.max=q.max||1e4,this.factor=q.factor||2,this.jitter=q.jitter>0&&q.jitter<=1?q.jitter:0,this.attempts=0}Pr.prototype.duration=function(){var q=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var B=Math.random(),V=Math.floor(B*this.jitter*q);q=1&Math.floor(10*B)?q+V:q-V}return 0|Math.min(q,this.max)},Pr.prototype.reset=function(){this.attempts=0},Pr.prototype.setMin=function(q){this.ms=q},Pr.prototype.setMax=function(q){this.max=q},Pr.prototype.setJitter=function(q){this.jitter=q};class Xe extends ae{constructor(B,V){var Y;super(),this.nsps={},this.subs=[],B&&typeof B=="object"&&(V=B,B=void 0),(V=V||{}).path=V.path||"/socket.io",this.opts=V,se(this,V),this.reconnection(V.reconnection!==!1),this.reconnectionAttempts(V.reconnectionAttempts||1/0),this.reconnectionDelay(V.reconnectionDelay||1e3),this.reconnectionDelayMax(V.reconnectionDelayMax||5e3),this.randomizationFactor((Y=V.randomizationFactor)!==null&&Y!==void 0?Y:.5),this.backoff=new Pr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(V.timeout==null?2e4:V.timeout),this._readyState="closed",this.uri=B;const ge=V.parser||p;this.encoder=new ge.Encoder,this.decoder=new ge.Decoder,this._autoConnect=V.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(B){return arguments.length?(this._reconnection=!!B,B||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(B){return B===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=B,this)}reconnectionDelay(B){var V;return B===void 0?this._reconnectionDelay:(this._reconnectionDelay=B,(V=this.backoff)===null||V===void 0||V.setMin(B),this)}randomizationFactor(B){var V;return B===void 0?this._randomizationFactor:(this._randomizationFactor=B,(V=this.backoff)===null||V===void 0||V.setJitter(B),this)}reconnectionDelayMax(B){var V;return B===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=B,(V=this.backoff)===null||V===void 0||V.setMax(B),this)}timeout(B){return arguments.length?(this._timeout=B,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(B){if(~this._readyState.indexOf("open"))return this;this.engine=new Xr(this.uri,this.opts);const V=this.engine,Y=this;this._readyState="opening",this.skipReconnect=!1;const ge=Vt(V,"open",function(){Y.onopen(),B&&B()}),Te=dt=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",dt),B?B(dt):this.maybeReconnectOnOpen()},rt=Vt(V,"error",Te);if(this._timeout!==!1){const dt=this._timeout,qe=this.setTimeoutFn(()=>{ge(),Te(new Error("timeout")),V.close()},dt);this.opts.autoUnref&&qe.unref(),this.subs.push(()=>{this.clearTimeoutFn(qe)})}return this.subs.push(ge),this.subs.push(rt),this}connect(B){return this.open(B)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const B=this.engine;this.subs.push(Vt(B,"ping",this.onping.bind(this)),Vt(B,"data",this.ondata.bind(this)),Vt(B,"error",this.onerror.bind(this)),Vt(B,"close",this.onclose.bind(this)),Vt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(B){try{this.decoder.add(B)}catch(V){this.onclose("parse error",V)}}ondecoded(B){_e(()=>{this.emitReserved("packet",B)},this.setTimeoutFn)}onerror(B){this.emitReserved("error",B)}socket(B,V){let Y=this.nsps[B];return Y?this._autoConnect&&!Y.active&&Y.connect():(Y=new fr(this,B,V),this.nsps[B]=Y),Y}_destroy(B){const V=Object.keys(this.nsps);for(const Y of V)if(this.nsps[Y].active)return;this._close()}_packet(B){const V=this.encoder.encode(B);for(let Y=0;Y<V.length;Y++)this.engine.write(V[Y],B.options)}cleanup(){this.subs.forEach(B=>B()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(B,V){var Y;this.cleanup(),(Y=this.engine)===null||Y===void 0||Y.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",B,V),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const B=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const V=this.backoff.duration();this._reconnecting=!0;const Y=this.setTimeoutFn(()=>{B.skipReconnect||(this.emitReserved("reconnect_attempt",B.backoff.attempts),B.skipReconnect||B.open(ge=>{ge?(B._reconnecting=!1,B.reconnect(),this.emitReserved("reconnect_error",ge)):B.onreconnect()}))},V);this.opts.autoUnref&&Y.unref(),this.subs.push(()=>{this.clearTimeoutFn(Y)})}}onreconnect(){const B=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",B)}}const Kt={};function Tt(q,B){typeof q=="object"&&(B=q,q=void 0);const V=function(qe,Yt="",ct){let Pt=qe;ct=ct||typeof location<"u"&&location,qe==null&&(qe=ct.protocol+"//"+ct.host),typeof qe=="string"&&(qe.charAt(0)==="/"&&(qe=qe.charAt(1)==="/"?ct.protocol+qe:ct.host+qe),/^(https?|wss?):\/\//.test(qe)||(qe=ct!==void 0?ct.protocol+"//"+qe:"https://"+qe),Pt=pn(qe)),Pt.port||(/^(http|ws)$/.test(Pt.protocol)?Pt.port="80":/^(http|ws)s$/.test(Pt.protocol)&&(Pt.port="443")),Pt.path=Pt.path||"/";const ar=Pt.host.indexOf(":")!==-1?"["+Pt.host+"]":Pt.host;return Pt.id=Pt.protocol+"://"+ar+":"+Pt.port+Yt,Pt.href=Pt.protocol+"://"+ar+(ct&&ct.port===Pt.port?"":":"+Pt.port),Pt}(q,(B=B||{}).path||"/socket.io"),Y=V.source,ge=V.id,Te=V.path,rt=Kt[ge]&&Te in Kt[ge].nsps;let dt;return B.forceNew||B["force new connection"]||B.multiplex===!1||rt?dt=new Xe(Y,B):(Kt[ge]||(Kt[ge]=new Xe(Y,B)),dt=Kt[ge]),V.query&&!B.query&&(B.query=V.queryKey),dt.socket(V.path,B)}Object.assign(Tt,{Manager:Xe,Socket:fr,io:Tt,connect:Tt});var zt=o(76),Fr=o(7833),Nr=o.n(Fr),Vr="mediasoup-demo",Er=function(){return(0,f.A)(function q(B){(0,b.A)(this,q),B?(this._debug=Nr()("".concat(Vr,":").concat(B)),this._warn=Nr()("".concat(Vr,":WARN:").concat(B)),this._error=Nr()("".concat(Vr,":ERROR:").concat(B))):(this._debug=Nr()(Vr),this._warn=Nr()("".concat(Vr,":WARN")),this._error=Nr()("".concat(Vr,":ERROR"))),Nr().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}(),xr=o(1396),Jr=xr.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),Qn=xr.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function is(q){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,u.A)(v().mark(function q(B){var V,Y,ge,Te,rt,dt,qe,Yt,ct,Pt,ar,wn,on,gs,Re;return v().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return V=B.roomId,Y=B.secret,ge=B.signalingBaseUrl,Te="call-api.videosdk.live",rt=[],dt=null,qe={},Yt={},ct={},Pt=null,ar=null,wn=null,Ft.next=12,fetch("https://".concat(ge,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:Y,"Content-Type":"application/json"},body:JSON.stringify({roomId:V})}).then(function(rc){return rc.json()}).catch(function(rc){return{}});case 12:return on=Ft.sent,(gs=on.data)&&(Te=gs.baseUrl,Re=gs.observability,rt=Gs(gs.iceServers),dt=Re.jwt,qe=Re.traces,Yt=Re.logs,ct=Re.metaData,Pt=gs.signalingUrl,wn=gs.socketPath,ar=gs.socketUrl),Ft.abrupt("return",{baseUrl:Te,iceServers:rt,observabilityJwt:dt,traces:qe,logs:Yt,metaData:ct,signalingUrl:Pt,socketPath:wn,socketUrl:ar});case 16:case"end":return Ft.stop()}},q)}))).apply(this,arguments)}function Gs(q){try{var B=xr.AES.decrypt(q,Jr,{iv:Qn,mode:xr.mode.CBC,padding:xr.pad.ZeroPadding}).toString(xr.enc.Utf8);return JSON.parse(B)}catch{return[]}}var mi=o(2215),Ci=o.n(mi),gi="mediasoup-demo.user",as="mediasoup-demo.devices";function os(q){var B=q.displayName;Ci().set(gi,{displayName:B})}function zi(){return Ci().getJSON(as)}var Rt=o(2211),ir=o.n(Rt),Gt=function(q){return{type:"SET_ROOM_STATE",payload:{state:q}}},Rn=function(q){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:q}}},ur=function(q){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:q}}},Sr=function(q){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:q.canSendMic,canSendWebcam:q.canSendWebcam}}},fn=function(q){return{type:"SET_DISPLAY_NAME",payload:{displayName:q}}},Tr=function(q){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:q}}},Rr=function(q){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:q}}},an=function(q){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:q}}},Ts=function(q){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:q}}},An=function(q){return{type:"ADD_PRODUCER",payload:{producer:q}}},Ln=function(q){return{type:"REMOVE_PRODUCER",payload:{producerId:q}}},Ys=function(q,B){return{type:"SET_PRODUCER_TRACK",payload:{producerId:q,track:B}}},xs=function(q,B){return{type:"SET_PRODUCER_SCORE",payload:{producerId:q,score:B}}},Hi=function(q){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:q}}},Js=function(q){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:q}}},wa=function(q){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:q}}},ii=function(q){return{type:"ADD_PEER",payload:{peer:q}}},$a=function(q){return{type:"REMOVE_PEER",payload:{peerId:q}}},uo=function(q,B){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:q,peerId:B}}},Uo=function(q,B){return{type:"ADD_CONSUMER",payload:{consumer:q,peerId:B}}},Vo=function(q,B){return{type:"REMOVE_CONSUMER",payload:{consumerId:q,peerId:B}}},qi=function(q,B){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:q,originator:B}}},$o=function(q,B){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:q,originator:B}}},rl=function(q,B,V){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:q,spatialLayer:B,temporalLayer:V}}},nl=function(q,B,V){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:q,spatialLayer:B,temporalLayer:V}}},Wo=function(q,B){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:q,priority:B}}},zo=function(q,B){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:q,score:B}}},sl=function(q,B){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:q,peerId:B}}},Ho=function(q,B){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:q,peerId:B}}},dr=function(q){var B=q.type,V=B===void 0?"info":B,Y=q.text,ge=q.title,Te=q.timeout;if(!Te)switch(V){case"info":Te=3e3;break;case"error":Te=5e3}var rt={id:ir()({length:6}).toLowerCase(),type:V,title:ge,text:Y,timeout:Te};return function(dt){dt(function(qe){return{type:"ADD_NOTIFICATION",payload:{notification:qe}}}(rt)),setTimeout(function(){dt({type:"REMOVE_NOTIFICATION",payload:{notificationId:rt.id}})},Te)}},qo=o(7007),Ko=o(1803),ra=o(9027),gr=o(7080),il="CONNECTING",Go="CONNECTED",al="RECONNECTING",ol="DISCONNECTED",cl=o(5414),Bs=o(2107),ll=o(5071),Yo=o(5458),Ti=Array(32);function po(){for(var q=0;q<16;q++)Ti[q]=Math.floor(16*Math.random())+48,Ti[q]>=58&&(Ti[q]+=39);return String.fromCharCode.apply(null,Ti.slice(0,16))}function na(){var q=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(q)}function Jo(q,B){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);B&&(Y=Y.filter(function(ge){return Object.getOwnPropertyDescriptor(q,ge).enumerable})),V.push.apply(V,Y)}return V}function Qo(q){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Jo(Object(V),!0).forEach(function(Y){(0,_.A)(q,Y,V[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):Jo(Object(V)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(V,Y))})}return q}var dl=function(){return(0,f.A)(function q(B){var V=this,Y=B.roomId,ge=B.peerId,Te=B.sdkName,rt=B.observabilityJwt,dt=B.metaData,qe=B.traces;(0,b.A)(this,q),this._traceId=function(){for(var ct=0;ct<32;ct++)Ti[ct]=Math.floor(16*Math.random())+48,Ti[ct]>=58&&(Ti[ct]+=39);return String.fromCharCode.apply(null,Ti.slice(0,32))}(),this._rootSpanId=po(),this._observabilityJwt=rt,this._tracesEnabled=qe.enabled,this._tracesEndpoint=qe.endPoint;var Yt=function(ct){for(var Pt="0123456789abcdefghijklmnopqrstuvwxyz",ar="",wn=ct;wn>0;wn--)ar+=Pt[Math.floor(36*Math.random())];return ar}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.2.9"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:Yt},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(Y,ge,Te,dt),setInterval(function(){V.processQueue()},4e3))},[{key:"addRootSpan",value:function(q,B,V,Y){var ge={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(q,"_peer_").concat(B,"_sdk_").concat(V),kind:1,startTimeUnixNano:na(),endTimeUnixNano:na(),attributes:[{key:"roomId",value:{stringValue:q}},{key:"peerId",value:{stringValue:B}},{key:"sdkName",value:{stringValue:V}},{key:"userId",value:{stringValue:Y.userId}},{key:"email",value:{stringValue:Y.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(ge)}},{key:"addSpanToTrace",value:function(q){this._spans.push(q)}},{key:"trace",value:function(q){var B=q.spanName,V=q.attributes,Y=V===void 0?{}:V,ge=q.span,Te=ge===void 0?void 0:ge;if(this._tracesEnabled){var rt=po(),dt=na(),qe={traceId:this._traceId,spanId:rt,parentSpanId:Te||this._rootSpanId,name:B,kind:1,startTimeUnixNano:dt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(Y).length>0&&(qe.attributes=Object.entries(Y).map(function(Yt){var ct=(0,y.A)(Yt,2);return{key:ct[0],value:{stringValue:ct[1]}}})),this.addSpanToTrace(qe),rt}}},{key:"traceAutoComplete",value:function(q){var B=q.spanName,V=q.attributes,Y=V===void 0?{}:V,ge=q.status,Te=ge===void 0?1:ge,rt=q.span,dt=rt===void 0?void 0:rt,qe=q.message,Yt=qe===void 0?"SUCCESS":qe;if(this._tracesEnabled){var ct=po(),Pt=na(),ar=na(),wn={traceId:this._traceId,spanId:ct,parentSpanId:dt||this._rootSpanId,name:B,kind:1,startTimeUnixNano:Pt,endTimeUnixNano:ar,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:Te,message:Yt}};Object.keys(Y).length>0&&(wn.attributes=Object.entries(Y).map(function(on){var gs=(0,y.A)(on,2);return{key:gs[0],value:{stringValue:gs[1]}}})),this.addSpanToTrace(wn)}}},{key:"completeSpan",value:function(q){var B=q.span,V=q.status,Y=q.message,ge=q.attributes,Te=ge===void 0?{}:ge;if(this._tracesEnabled){var rt=na();this._spans=this._spans.map(function(dt){if(dt.spanId!==B)return dt;var qe=Object.entries(Te).map(function(Yt){var ct=(0,y.A)(Yt,2);return{key:ct[0],value:{stringValue:ct[1]}}});return dt.attributes=dt.attributes?[].concat((0,Yo.A)(dt.attributes),(0,Yo.A)(qe)):qe,Qo(Qo({},dt),{},{status:{code:V,message:Y},endTimeUnixNano:rt})})}}},{key:"processQueue",value:function(){var q=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var B={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,B).then(function(){var V=(0,u.A)(v().mark(function Y(ge){return v().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return q._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],Te.next=3,ge.text();case 3:return Te.abrupt("return",Te.sent);case 4:case"end":return Te.stop()}},Y)}));return function(Y){return V.apply(this,arguments)}}()).then(function(V){}).catch(function(V){q._spans=q._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",V)})}}}])}();function Xo(q,B){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);B&&(Y=Y.filter(function(ge){return Object.getOwnPropertyDescriptor(q,ge).enumerable})),V.push.apply(V,Y)}return V}function ho(q){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Xo(Object(V),!0).forEach(function(Y){(0,_.A)(q,Y,V[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):Xo(Object(V)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(V,Y))})}return q}var ul=function(){return(0,f.A)(function B(V){var Y=V.roomId,ge=V.peerId,Te=V.logs,rt=V.observabilityJwt,dt=V.deviceInfo,qe=V.sessionId,Yt=V.debugMode;(0,b.A)(this,B);var ct=dt.browserUserAgent,Pt=dt.deviceUserAgent,ar=dt.platform;this._peerId=ge,this._roomId=Y,this._logs=Te,this._observabilityJwt=rt,this._deviceInfo=dt,this._sessionId=qe,this._debugMode=Yt,this.browserOrDeviceInfo=ct?{browserName:ct.browser.name,browserVersion:ct.browser.version,osName:ct.os.name,osVersion:ct.os.version,platform:ar}:Pt?ho({platform:ar},Pt):null},[{key:"pushLogs",value:(q=(0,u.A)(v().mark(function B(V){var Y,ge,Te,rt,dt,qe,Yt,ct;return v().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(Y=V.logType,ge=V.logText,Te=V.attributes,rt=V.dashboardLog,dt=rt!==void 0&&rt,qe=this._logs,Yt=qe.enabled,ct=qe.endPoint,!Yt){Pt.next=8;break}return Pt.next=5,fetch(ct,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:Y,logText:ge,attributes:ho(ho({},Te),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:dt})}).then(function(ar){return ar.json()}).catch(function(ar){return console.log("error",ar),{}});case 5:return Pt.abrupt("return",Pt.sent);case 8:return Pt.abrupt("return",null);case 9:case"end":return Pt.stop()}},B,this)})),function(B){return q.apply(this,arguments)})}]);var q}(),pl=o(4973),fo=o(388),sa=o(3954),mo=o(5501),Zo=o(3662);function ec(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ec=function(){return!!q})()}function Wa(q){var B=typeof Map=="function"?new Map:void 0;return Wa=function(V){if(V===null||!function(ge){try{return Function.toString.call(ge).indexOf("[native code]")!==-1}catch{return typeof ge=="function"}}(V))return V;if(typeof V!="function")throw new TypeError("Super expression must either be null or a function");if(B!==void 0){if(B.has(V))return B.get(V);B.set(V,Y)}function Y(){return function(ge,Te,rt){if(ec())return Reflect.construct.apply(null,arguments);var dt=[null];dt.push.apply(dt,Te);var qe=new(ge.bind.apply(ge,dt));return rt&&(0,Zo.A)(qe,rt.prototype),qe}(V,arguments,(0,sa.A)(this).constructor)}return Y.prototype=Object.create(V.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),(0,Zo.A)(Y,V)},Wa(q)}function xt(q,B,V){return B=(0,sa.A)(B),(0,fo.A)(q,te()?Reflect.construct(B,V||[],(0,sa.A)(q).constructor):B.apply(q,V))}function te(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(te=function(){return!!q})()}var at,pr=function(q){function B(V,Y){var ge;return(0,b.A)(this,B),ge=xt(this,B,[Y||"an error has occured"]),(0,_.A)(ge,"code",void 0),ge.name="VideoSdkError",ge.code=V,ge}return(0,mo.A)(B,q),(0,f.A)(B)}(Wa(Error));(function(q){q[q.InvalidKey=0]="InvalidKey",q[q.MissingKey=1]="MissingKey",q[q.InternalError=2]="InternalError"})(at||(at={}));var Xn=function(q){function B(V){var Y;return(0,b.A)(this,B),(Y=xt(this,B,[21,V??"device is unsupported"])).name="DeviceUnsupportedError",Y}return(0,mo.A)(B,q),(0,f.A)(B)}(pr),Fn=o(1806),vr=o(6746),zu=o(8278);function pd(q,B){return q?B=="audio"?"shareAudio":"share":B}function tc(q,B){var V=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!V){if(Array.isArray(q)||(V=function(qe,Yt){if(qe){if(typeof qe=="string")return hl(qe,Yt);var ct={}.toString.call(qe).slice(8,-1);return ct==="Object"&&qe.constructor&&(ct=qe.constructor.name),ct==="Map"||ct==="Set"?Array.from(qe):ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct)?hl(qe,Yt):void 0}}(q))||B){V&&(q=V);var Y=0,ge=function(){};return{s:ge,n:function(){return Y>=q.length?{done:!0}:{done:!1,value:q[Y++]}},e:function(qe){throw qe},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,rt=!0,dt=!1;return{s:function(){V=V.call(q)},n:function(){var qe=V.next();return rt=qe.done,qe},e:function(qe){dt=!0,Te=qe},f:function(){try{rt||V.return==null||V.return()}finally{if(dt)throw Te}}}}function hl(q,B){(B==null||B>q.length)&&(B=q.length);for(var V=0,Y=Array(B);V<B;V++)Y[V]=q[V];return Y}function Hu(){try{var q=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hu=function(){return!!q})()}var fl=function(q){function B(Y){var ge,Te,rt,dt;return(0,b.A)(this,B),Te=this,rt=B,rt=(0,sa.A)(rt),(ge=(0,fo.A)(Te,Hu()?Reflect.construct(rt,[],(0,sa.A)(Te).constructor):rt.apply(Te,dt))).onWorkerMessage=function(qe){var Yt,ct=qe.data,Pt=ct.kind,ar=ct.data;switch(Pt){case"error":console.error(ar.error.message),ge.emit(vr.KS.EncryptionError,ar.error);break;case"initAck":ar.enabled&&ge.keyProvider.getKeys().forEach(function(on){ge.postKey(on)});break;case"enable":if(ar.enabled&&ge.keyProvider.getKeys().forEach(function(on){ge.postKey(on)}),ge.encryptionEnabled!==ar.enabled&&ar.participantIdentity===ge.room._peerId)ge.emit(vr.KS.ParticipantEncryptionStatusChanged,ar.enabled,ge.room.localParticipant),ge.encryptionEnabled=ar.enabled;else if(ar.participantIdentity){var wn=(Yt=ge.room)===null||Yt===void 0?void 0:Yt.getParticipantByIdentity(ar.participantIdentity);if(!wn)throw TypeError("couldn't set encryption status, participant not found".concat(ar.participantIdentity));ge.emit(vr.KS.ParticipantEncryptionStatusChanged,ar.enabled,wn)}break;case"ratchetKey":ge.keyProvider.emit(vr.fo.KeyRatcheted,ar.material,ar.keyIndex);break;case"e2eeStateChange":ge.emit(vr.KS.E2EEStateChange,ar);break;default:console.log("unknown message kind",qe)}},ge.onWorkerError=function(qe){var Yt;console.error("Worker encountered an error:",qe),console.error("Error message:",qe.message),console.error("Error filename:",qe.filename),console.error("Error line number:",qe.lineno),console.error("Error stack:",(Yt=qe.error)===null||Yt===void 0?void 0:Yt.stack)},ge.keyProvider=Y.keyProvider,ge.worker=Y.worker,ge.encryptionEnabled=!1,ge}return(0,mo.A)(B,q),(0,f.A)(B,[{key:"setup",value:function(Y){if(!(0,zu.Ag)())throw new Xn("tried to setup end-to-end encryption on an unsupported browser");if(console.info("setting up e2ee"),Y!==this.room){this.room=Y,this.setupEventListeners(Y,this.keyProvider),this.handleE2EEManagerEvents();var ge={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};console.log("msg",ge),this.worker&&(console.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(ge))}}},{key:"setParticipantCryptorEnabled",value:function(Y,ge){console.debug("set e2ee to ".concat(Y," for participant ").concat(ge)),this.postEnable(Y,ge)}},{key:"setSifTrailer",value:function(Y){Y&&Y.length!==0?this.postSifTrailer(Y):console.warn("ignoring server sent trailer as it's empty")}},{key:"setupEventListeners",value:function(Y,ge){var Te=this;ge.on(vr.fo.SetKey,function(rt){console.log("### keyInfo",rt),Te.postKey(rt)}).on(vr.fo.RatchetRequest,function(rt,dt){return Te.postRatchetRequest(rt,dt)})}},{key:"postRatchetRequest",value:function(Y,ge){if(!this.worker)throw Error("could not ratchet key, worker is missing");var Te={kind:"ratchetRequest",data:{participantIdentity:Y,keyIndex:ge}};this.worker.postMessage(Te)}},{key:"postKey",value:function(Y){var ge=Y.key,Te=Y.participantIdentity,rt=Y.keyIndex;if(!this.worker)throw Error("could not set key, worker is missing");var dt={kind:"setKey",data:{participantIdentity:Te,isPublisher:Te===this.room._peerId,key:ge,keyIndex:rt}};this.worker.postMessage(dt)}},{key:"postEnable",value:function(Y,ge){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");var Te={kind:"enable",data:{enabled:Y,participantIdentity:ge}};this.worker.postMessage(Te)}},{key:"postRTPMap",value:function(Y){var ge;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((ge=this.room)===null||ge===void 0)&&ge._peerId))throw TypeError("could not post rtp map, local participant identity is missing");var Te={kind:"setRTPMap",data:{map:Y,participantIdentity:this.room._peerId}};this.worker.postMessage(Te)}},{key:"postSifTrailer",value:function(Y){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");var ge={kind:"setSifTrailer",data:{trailer:Y}};this.worker.postMessage(ge)}},{key:"setupE2EEReceiver",value:function(Y,ge){var Te;this.handleReceiver(Y,Y.rtpReceiver,Y.track.id,ge,this.extractCodec(Y.rtpParameters.codecs),pd((Te=Y.appData)===null||Te===void 0?void 0:Te.share,Y.kind))}},{key:"setupE2EESender",value:function(Y){var ge;Y?this.handleSender(Y.rtpSender,Y.track.id,this.extractCodec(Y.rtpParameters.codecs),pd((ge=Y.appData)===null||ge===void 0?void 0:ge.share,Y.kind),this.room._peerId):console.error("Producer is required to setup E2EE sender")}},{key:"handleReceiver",value:(V=(0,u.A)(v().mark(function Y(ge,Te,rt,dt,qe,Yt){var ct,Pt,ar,wn,on,gs;return v().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(this.worker){Re.next=2;break}return Re.abrupt("return");case 2:if(!(0,zu.Wm)()){Re.next=7;break}ct={kind:"decode",participantIdentity:dt,trackId:ge.track.id,codec:qe},Te.transform=new RTCRtpScriptTransform(this.worker,ct),Re.next=18;break;case 7:if(!(Fn.$Q in Te)||!qe){Re.next=11;break}return ar={kind:"updateCodec",data:{trackId:rt,codec:qe,participantIdentity:dt}},this.worker.postMessage(ar),Re.abrupt("return");case 11:if(wn=Te.writableStream,on=Te.readableStream,wn&&on){Re.next=16;break}return console.error("no writable or readable stream"),Re.abrupt("return");case 16:gs={kind:"decode",data:{readableStream:on,writableStream:wn,trackId:rt,codec:qe,participantIdentity:dt,mediaKind:Yt,peerId:(Pt=ge.appData)===null||Pt===void 0?void 0:Pt.peerId}},this.worker.postMessage(gs,[on,wn]);case 18:Te[Fn.$Q]=!0;case 19:case"end":return Re.stop()}},Y,this)})),function(Y,ge,Te,rt,dt,qe){return V.apply(this,arguments)})},{key:"handleSender",value:function(Y,ge,Te,rt,dt){var qe;if(!(Fn.$Q in Y)&&this.worker){if(!(!((qe=this.room)===null||qe===void 0)&&qe._peerId)||this.room._peerId==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if((0,zu.Wm)()){console.info("### initialize script transform");var Yt={kind:"encode",participantIdentity:this.room._peerId,trackId:ge,codec:Te,mediaKind:rt,peerId:dt};Y.transform=new RTCRtpScriptTransform(this.worker,Yt)}else try{var ct=Y.senderStreams;if(ct){var Pt={kind:"encode",data:{readableStream:ct.readable,writableStream:ct.writable,codec:Te,trackId:ge,participantIdentity:this.room._peerId,mediaKind:rt,peerId:dt}};this.worker.postMessage(Pt,[ct.readable,ct.writable])}else console.error("Error no sender streams found")}catch(ar){console.log("Error in handle sender ",ar)}Y[Fn.$Q]=!0}else console.error("### sender already set up")}},{key:"handleE2EEManagerEvents",value:function(){var Y=this;this.on("NEW_CONSUMER",function(ge){var Te=ge.consumer,rt=ge.peerId;console.log("NEW_CONSUMER",Te),Y.setupE2EEReceiver(Te,rt)}),this.on("NEW_PRODUCER",function(ge){Y.setupE2EESender(ge)})}},{key:"extractCodec",value:function(Y){var ge,Te=tc(Y);try{for(Te.s();!(ge=Te.n()).done;){var rt=ge.value,dt=rt.mimeType.split("/")[1].toLowerCase();if(this.kind==="audio"){if(Fn.Ts.includes(dt)){rt=dt;break}}else if(Fn.ue.includes(dt)){rt=dt;break}}}catch(qe){Te.e(qe)}finally{Te.f()}return""}}]);var V}(qo.EventEmitter);function qu(){return hd.apply(this,arguments)}function hd(){return(hd=(0,u.A)(v().mark(function q(){var B,V,Y,ge;return v().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,fetch("https://cdn.videosdk.live/e2ee/0.0.1/bundle.js");case 2:if((B=Te.sent).ok){Te.next=5;break}throw new Error("Failed to load worker script: ".concat(B.statusText));case 5:return Te.next=7,B.text();case 7:return V=Te.sent,Y=new Blob([V],{type:"application/javascript"}),ge=URL.createObjectURL(Y),Te.abrupt("return",new Worker(ge));case 11:case"end":return Te.stop()}},q)}))).apply(this,arguments)}var Jh=o(9633);function Us(q,B){var V=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);B&&(Y=Y.filter(function(ge){return Object.getOwnPropertyDescriptor(q,ge).enumerable})),V.push.apply(V,Y)}return V}function cs(q){for(var B=1;B<arguments.length;B++){var V=arguments[B]!=null?arguments[B]:{};B%2?Us(Object(V),!0).forEach(function(Y){(0,_.A)(q,Y,V[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(V)):Us(Object(V)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(V,Y))})}return q}function Pi(q,B){var V=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!V){if(Array.isArray(q)||(V=function(qe,Yt){if(qe){if(typeof qe=="string")return Qh(qe,Yt);var ct={}.toString.call(qe).slice(8,-1);return ct==="Object"&&qe.constructor&&(ct=qe.constructor.name),ct==="Map"||ct==="Set"?Array.from(qe):ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct)?Qh(qe,Yt):void 0}}(q))||B){V&&(q=V);var Y=0,ge=function(){};return{s:ge,n:function(){return Y>=q.length?{done:!0}:{done:!1,value:q[Y++]}},e:function(qe){throw qe},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,rt=!0,dt=!1;return{s:function(){V=V.call(q)},n:function(){var qe=V.next();return rt=qe.done,qe},e:function(qe){dt=!0,Te=qe},f:function(){try{rt||V.return==null||V.return()}finally{if(dt)throw Te}}}}function Qh(q,B){(B==null||B>q.length)&&(B=q.length);for(var V=0,Y=Array(B);V<B;V++)Y[V]=q[V];return Y}function Xh(q,B){(function(V,Y){if(Y.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")})(q,B),B.add(q)}var Ke,Ku={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},Gu={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Ev={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},Zh=[{scalabilityMode:"S3T3_KEY"}],ia=[{dtx:!0,maxFramerate:30}],Ve=new Er("RoomClient"),Ni=new WeakSet,ai=function(){return(0,f.A)(function re($){var z,H,K=$.roomId,oe=$.peerId,fe=$.secret,Pe=$.displayName,Ne=$.device,ft=$.handlerName,Ze=$.useSimulcast,ht=$.forceTcp,mt=$.mode,pe=$.forceH264,gt=$.forceVP9,it=$.svc,We=$.datachannel,Ue=$.externalVideo,Be=$.micEnabled,vt=$.webcamEnabled,Je=$.maxResolution,yt=$.useSpartialLayerAnalytics,kt=$._deviceInfo,It=$.customCameraVideoTrack,Et=$.customMicrophoneAudioTrack,bt=$.autoConsume,sr=$.preferredProtocol,Bt=$.signalingBaseUrl,Ut=$.metaData,Ar=$.defaultCameraIndex,kn=$.debugMode,Zr=$.keyProvider;switch((0,b.A)(this,re),Xh(this,Ni),(0,_.A)(this,"e2eeManager",null),Ve.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',K,oe,Pe,Ne.flag),this.useSpartialLayerAnalytics=yt||!1,this._deviceInfo=kt,this._eventEmitter=new qo.EventEmitter,this._closed=!1,this._displayName=Pe,this._device=Ne,this._forceTcp=ht,this._preferredProtocol=sr,mt){case Bs.nI.CONFERENCE:case Bs.nI.SEND_AND_RECV:z=!0,H=!0;break;case Bs.nI.RECV_ONLY:z=!1,H=!0;break;default:z=!1,H=!1}if(this._mode=mt,this._produce=z,this._consume=H,this._useDataChannel=We,this._forceH264=!!pe,this._forceVP9=!!gt,this._micEnabled=!!Be,this._webcamEnabled=!!vt,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,Ue&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=Ue,this._externalVideo.play().catch(function(Wr){return Ve.warn("externalVideo.play() failed:%o",Wr)})),this._handlerName=ft,this._useSimulcast=Ze,this._socketUrl="",this._secret=fe,this._peerId=oe,this._roomId=K,this._baseUrl="",this._webSocket=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Je||"hd"},this._pinnedParticipants=new Map,it&&(Zh[0].scalabilityMode="".concat(it,"_KEY")),this.customCameraVideoTrack=It,this.customMicrophoneAudioTrack=Et,this._autoConsume=bt,this._iceServers=[],this._metrics=new cl.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Bt||"api.videosdk.live",this._metaData=Ut,this._defaultCameraIndex=Ar,this._debugMode=!!kn,this._meetingConnectionState=null,Zr){if(!(Zr instanceof Jh.l))throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider");(function(Wr,On,Bn){if(typeof Wr=="function"?Wr===On:Wr.has(On))return arguments.length<3?On:Bn;throw new TypeError("Private element is not present on this object")})(Ni,this,Rv).call(this,Zr)}},[{key:"on",value:function(re,$){this._eventEmitter.on(re,$)}},{key:"softClose",value:function(){var re,$=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({name:"softClose() Start "});try{var z,H,K;this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING");var oe,fe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({name:"Consumer Cleanup",parentSpan:$,attributes:{"videosdk.consumers.count":this._consumers.size||0}}),Pe=Pi(this._consumers.values());try{for(Pe.s();!(oe=Pe.n()).done;)oe.value.close()}catch(ft){Pe.e(ft)}finally{Pe.f()}(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:fe,status:1,message:"Closed ".concat(this._consumers.size," consumers successfully")}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:$,status:1,message:"Soft close completed successfully"})}catch(ft){var Ne;(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:$,status:2,message:"Soft close failed: ".concat(ft.message)}),console.error(ft)}}},{key:"close",value:function(re){var $,z,H,K,oe,fe=re.sendLeft,Pe=fe===void 0||fe;if(Pe&&((oe=this._openTelemetry)===null||oe===void 0||oe.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._webSocket.close(),this._metrics.running&&this._metrics.stopAllProbes(),Ve.debug("close()");var Ne=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:Ne,status:1,message:"Closed Trasnport"}),Ke.dispatch(Gt("closed")),Pe&&this.emitMeetingStateChange(ol),(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),Pe&&this._eventEmitter.emit("MEETING_LEFT"),(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Sf=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe=this;return v().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,is({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:H=gt.sent,K=H.baseUrl,oe=H.iceServers,fe=H.logs,Pe=H.observabilityJwt,Ne=H.traces,ft=H.metaData,Ze=H.signalingUrl,ht=H.socketPath,mt=H.socketUrl,this._baseUrl=K,this._socketUrl="wss://".concat(mt||this._baseUrl,"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode,"&lib=socket"),this._iceServers=oe,this._tracesEnabled=Ne.enabled,this._openTelemetry=new dl((0,_.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Ne,logs:fe,observabilityJwt:Pe,metaData:ft},"traces",Ne)),this._joinSpan=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:Ze||"signalingUrl not specify"}}),this._webSocket=Tt(this._socketUrl,{transports:["websocket"],reconnectionAttempts:10,reconnectionDelay:5e3,reconnection:!0,path:"".concat(ht??"","/socket.io")}),this.emitMeetingStateChange(il),Ke.dispatch(Gt("connecting")),(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._webSocket.on("connect",function(){}),this._webSocket.on("connectionSuccess",function(){var it;pe._isWebsocketAlive=!0,pe._closed=!1,pe._mode===(Bs.nI.RECV_ONLY||Bs.nI.SIGNALLING_ONLY)&&pe.emitMeetingStateChange(Go),(it=pe._openTelemetry)===null||it===void 0||it.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:pe._joinSpan,status:1}),pe.requestEntry()}),this._webSocket.on("disconnect",function(it){}),this._webSocket.io.on("reconnect_failed",function(){pe._closed||pe.close({sendLeft:!0})}),this._webSocket.on("connect_error",function(it){var We,Ue,Be,vt,Je;pe._webSocket.active&&pe._webSocket.io._reconnecting?((We=pe._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"Meeting is in RECONNECTING State",span:pe._joinSpan,status:1}),Ke.dispatch(dr({type:"error",text:"WebSocket Reconnecting"})),pe.emitMeetingStateChange(al),pe._sendTransport&&((vt=pe._sendTransport)===null||vt===void 0||vt.close(),pe._sendTransport=null),pe._recvTransport&&((Je=pe._recvTransport)===null||Je===void 0||Je.close(),pe._recvTransport=null),(Ue=pe.customMicrophoneAudioTrack)===null||Ue===void 0||Ue.getTracks().forEach(function(yt){yt.stop()}),pe.customMicrophoneAudioTrack=null,(Be=pe.customCameraVideoTrack)===null||Be===void 0||Be.getTracks().forEach(function(yt){yt.stop()}),pe.customCameraVideoTrack=null):console.log("Error while trying to reconnect",it.message)}),this._webSocket.on("close",function(){pe._closed||pe.close({sendLeft:!0})}),this._webSocket.on("newConsumer",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt,kt,It,Et,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,On,Bn,Zn,Or,jn,Hn,es,en,Ss,Un,er,ts;return v().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:if(yt=(vt=pe._openTelemetry)===null||vt===void 0?void 0:vt.trace({spanName:"Websocket REQ: newConsumer",attributes:{request:JSON.stringify(Ue)}}),pe._consume){St.next=5;break}return Be({errorCode:403,message:"I do not want to consume",method:"newConsumer"}),(kt=pe._openTelemetry)===null||kt===void 0||kt.completeSpan({span:yt,status:2,message:"I do not want to consume"}),St.abrupt("return");case 5:return It=Ue.peerId,Et=Ue.producerId,bt=Ue.id,sr=Ue.kind,Bt=Ue.rtpParameters,Ut=Ue.type,Ar=Ue.appData,kn=Ue.producerPaused,Zr=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Creating Consumer",span:yt}),St.prev=7,St.next=10,pe._recvTransport.consume({id:bt,producerId:Et,kind:sr,rtpParameters:Bt,appData:cs(cs({},Ar),{},{peerId:It}),onRtpReceiver:function(mr){if(pe.e2eeManager){var yn=mr.writableStream,mn=mr.readableStream;if(!yn||!mn){var bn=mr.createEncodedStreams();mr.writableStream=bn.writable,yn=bn.writable,mr.readableStream=bn.readable,mn=bn.readable}}}});case 10:Or=St.sent,jn=zt.s$(Or.rtpParameters.encodings[0].scalabilityMode),Hn=jn.spatialLayers,es=jn.temporalLayers,Or.spatialLayers=Hn,Or.temporalLayers=es,Or.currentSpatialLayers=Hn-1,Or.currentTemporalLayers=es-1,pe._consumers.set(Or.id,Or),Or.on("transportclose",function(){pe._consumers.delete(Or.id);var mr=Vo(Or.id,It);Ke.dispatch(mr),pe._eventEmitter.emit(mr.type,mr.payload)}),(Wr=pe._openTelemetry)===null||Wr===void 0||Wr.completeSpan({span:Zr,status:1,message:"Consumer Created"}),Zr=(On=pe._openTelemetry)===null||On===void 0?void 0:On.trace({spanName:"Sending Stream Enabled Event",span:yt}),en=Uo({id:Or.id,type:Ut,locallyPaused:!1,remotelyPaused:kn,rtpParameters:Or.rtpParameters,spatialLayers:Hn,temporalLayers:es,currentSpatialLayer:Hn-1,currentTemporalLayer:es-1,preferredSpatialLayer:Hn-1,preferredTemporalLayer:es-1,priority:1,codec:Or.rtpParameters.codecs[0].mimeType.split("/")[1],track:Or.track,appData:Ar,instance:Or},It),Ke.dispatch(en),pe._eventEmitter.emit(en.type,en.payload),Be(),Or.kind==="video"&&Ke.getState().me.audioOnly&&pe._pauseConsumer(Or),(Bn=pe._openTelemetry)===null||Bn===void 0||Bn.completeSpan({span:Zr,status:1,message:"Event Send Successfully"}),(Zn=pe._openTelemetry)===null||Zn===void 0||Zn.completeSpan({span:yt,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Or.id}}),Or.kind=="video"&&Or.appData.share&&((Ss=pe._openTelemetry)===null||Ss===void 0||Ss.traceAutoComplete({spanName:"Presenter Changed",span:yt,attributes:{"peer.id":It}})),pe.e2eeManager&&pe.e2eeManager.emit("NEW_CONSUMER",{consumer:Or,peerId:pe._peerId}),St.next=38;break;case 31:throw St.prev=31,St.t0=St.catch(7),(Un=pe._openTelemetry)===null||Un===void 0||Un.completeSpan({span:Zr,status:2,message:"Error creating a Consumer: ".concat(St.t0)}),(er=pe._openTelemetry)===null||er===void 0||er.completeSpan({span:yt,status:2,message:"Error creating a Consumer: ".concat(St.t0)}),Ke.dispatch(dr({type:"error",text:"Error creating a Consumer: ".concat(St.t0)})),(ts=pe._videosdkLogs)===null||ts===void 0||ts.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:St.t0.message}}),St.t0;case 38:case"end":return St.stop()}},We,null,[[7,31]])}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("newDataConsumer",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt,kt,It,Et,bt,sr;return v().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(pe._consume){Bt.next=3;break}return Be({errorCode:403,message:"I do not want to data consume",method:"newConsumer"}),Bt.abrupt("return");case 3:if(pe._useDataChannel){Bt.next=6;break}return Be({errorCode:403,message:"I do not want DataChannels",method:"newConsumer"}),Bt.abrupt("return");case 6:return vt=Ue.peerId,Je=Ue.dataProducerId,yt=Ue.id,kt=Ue.sctpStreamParameters,It=Ue.label,Et=Ue.protocol,bt=Ue.appData,Bt.prev=7,Bt.next=10,pe._recvTransport.consumeData({id:yt,dataProducerId:Je,sctpStreamParameters:kt,label:It,protocol:Et,appData:cs(cs({},bt),{},{peerId:vt})});case 10:sr=Bt.sent,pe._dataConsumers.set(sr.id,sr),sr.on("transportclose",function(){pe._dataConsumers.delete(sr.id)}),sr.on("open",function(){Ve.debug('DataConsumer "open" event')}),sr.on("close",function(){Ve.warn('DataConsumer "close" event'),pe._dataConsumers.delete(sr.id),Ke.dispatch(dr({type:"error",text:"DataConsumer closed"}))}),sr.on("error",function(Ut){Ve.error('DataConsumer "error" event:%o',Ut),Ke.dispatch(dr({type:"error",text:"DataConsumer error: ".concat(Ut)}))}),sr.on("message",function(Ut){if(Ve.debug('DataConsumer "message" event [streamId:%d]',sr.sctpStreamParameters.streamId),window.DC_MESSAGE=Ut,Ut instanceof ArrayBuffer){var Ar=new DataView(Ut).getUint32();return Ar==Math.pow(2,32)-1?(Ve.warn("dataChannelTest finished!"),void(pe._nextDataChannelTestNumber=0)):(Ar>pe._nextDataChannelTestNumber&&Ve.warn("dataChannelTest: %s packets missing",Ar-pe._nextDataChannelTestNumber),void(pe._nextDataChannelTestNumber=Ar+1))}if(typeof Ut=="string")switch(sr.label){case"chat":var kn=Ke.getState().peers,Zr=Object.keys(kn).map(function(Wr){return kn[Wr]}).find(function(Wr){return Wr.dataConsumers.includes(sr.id)});if(!Zr){Ve.warn('DataConsumer "message" from unknown peer');break}Ke.dispatch(dr({title:"".concat(Zr.displayName," says:"),text:Ut,timeout:5e3})),pe._eventEmitter.emit("CHAT_MESSAGE",{text:Ut,senderId:Zr.id,timestamp:new Date().getTime()});break;case"bot":Ke.dispatch(dr({title:"Message from Bot:",text:Ut,timeout:5e3}))}else Ve.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=sr,Ke.dispatch(sl({id:sr.id,sctpStreamParameters:sr.sctpStreamParameters,label:sr.label,protocol:sr.protocol},vt)),Be(),Bt.next=26;break;case 22:Bt.prev=22,Bt.t0=Bt.catch(7),Ve.error('"newDataConsumer" request failed:%o',Bt.t0),Ke.dispatch(dr({type:"error",text:"Error creating a DataConsumer: ".concat(Bt.t0)}));case 26:case"end":return Bt.stop()}},We,null,[[7,22]])}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("enableMic",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt;return v().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:try{Je=Ue.peerId,(vt=pe._openTelemetry)===null||vt===void 0||vt.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Websocket REQ: enableMic for ".concat(Je),status:1}),pe._eventEmitter.emit("MIC_REQUESTED",{peerId:Je}),Be()}catch(It){Ve.error('"enableMic" request failed:%o',It),(yt=pe._videosdkLogs)===null||yt===void 0||yt.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:It.message}}),pe._emitError({code:3027,message:It.message})}case 1:case"end":return kt.stop()}},We)}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("disableMic",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt,kt,It;return v().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.prev=0,vt=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Websocket REQ: disableMic"}),Et.next=4,pe.disableMic(!1,vt);case 4:(yt=pe._openTelemetry)===null||yt===void 0||yt.completeSpan({span:vt,status:1,message:"Request Completed"}),Be(),Et.next=13;break;case 8:Et.prev=8,Et.t0=Et.catch(0),(kt=pe._openTelemetry)===null||kt===void 0||kt.completeSpan({span:vt,status:2,message:"disableMic request failed ".concat(Et.t0)}),(It=pe._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Et.t0.message}}),pe._emitError({code:3028,message:Et.t0.message});case 13:case"end":return Et.stop()}},We,null,[[0,8]])}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("enableWebcam",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt;return v().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:try{Je=Ue.peerId,(vt=pe._openTelemetry)===null||vt===void 0||vt.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Websocket REQ: enableWebcam for ".concat(Je),status:1}),pe._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Je}),Be()}catch(It){Ve.error('"enableWebcam" request failed:%o',It),(yt=pe._videosdkLogs)===null||yt===void 0||yt.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:It.message}}),pe._emitError({code:3029,message:It.message})}case 1:case"end":return kt.stop()}},We)}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("disableWebcam",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt,kt,It;return v().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.prev=0,vt=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Websocket REQ: disableWebcam"}),Et.next=4,pe.disableWebcam(vt);case 4:(yt=pe._openTelemetry)===null||yt===void 0||yt.completeSpan({span:vt,status:1,message:"Request Completed"}),Be(),Et.next=13;break;case 8:Et.prev=8,Et.t0=Et.catch(0),(kt=pe._openTelemetry)===null||kt===void 0||kt.completeSpan({span:vt,status:2,message:"disableWebcam request failed ".concat(Et.t0)}),(It=pe._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Et.t0.message}}),pe._emitError({code:3030,message:Et.t0.message});case 13:case"end":return Et.stop()}},We,null,[[0,8]])}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("pinStateChanged",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){var vt,Je,yt,kt,It,Et,bt,sr,Bt;return v().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:Ut.prev=0,kt=Ue.peerId,It=Ue.state,Et=Ue.pinnedBy,vt=(Je=pe._openTelemetry)===null||Je===void 0?void 0:Je.trace({spanName:"Websocket REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:kt,state:It,pinnedBy:Et})}}),pe._pinnedParticipants.has(kt)||pe._pinnedParticipants.set(kt,{cam:!1,share:!1}),bt=pe._pinnedParticipants.get(kt),It.cam!=null&&(bt.cam=It.cam),It.share!=null&&(bt.share=It.share),pe._pinnedParticipants.set(kt,bt),pe._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:kt,state:It,pinnedBy:Et}),bt.share==0&&bt.cam==0&&pe._pinnedParticipants.delete(kt),(yt=pe._openTelemetry)===null||yt===void 0||yt.completeSpan({span:vt,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(pe._pinnedParticipants)}}),Be(),Ut.next=19;break;case 14:throw Ut.prev=14,Ut.t0=Ut.catch(0),(sr=pe._openTelemetry)===null||sr===void 0||sr.completeSpan({span:vt,status:2,message:"pinStateChanged request failed"}),(Bt=pe._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:Ut.t0.message}}),Ut.t0;case 19:case"end":return Ut.stop()}},We,null,[[0,14]])}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("switchRoom",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){return v().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:pe._eventEmitter.emit("SWITCH_ROOM",Ue),Be();case 2:case"end":return vt.stop()}},We)}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("statsData",function(){var it=(0,u.A)(v().mark(function We(Ue,Be){return v().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:Be({peerId:pe._peerId,statsData:pe._stats}),pe._stats={};case 2:case"end":return vt.stop()}},We)}));return function(We,Ue){return it.apply(this,arguments)}}()),this._webSocket.on("notification",function(){var it=(0,u.A)(v().mark(function We(Ue){var Be,vt,Je,yt,kt,It,Et,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,On,Bn,Zn,Or,jn,Hn,es,en,Ss,Un,er,ts,St,mr,yn,mn,bn,qn,vi,_a,Ai,oa,ca,$s,Ns,ci,Ws,Oi,F,U,W,Z,le,ne,me,ye,be,ke,Ae,ce,xe,ve,J,X,he,Oe,Ie,wt,ut,et,Qt,Fe,Ee,Qe,ze,Ht,yr,At,Hr,Cn,tn,Ms,cn,As,hc,Al,dp,Ef,up,Rf,fx,mx,gx,vx;return v().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:Be=Ue,Ve.debug('proto "notification" event [method:%s, data:%o]',Ue.method,Be),nt.t0=Ue.method,nt.next=nt.t0==="error"?5:nt.t0==="participantMediaStateChanged"?10:nt.t0==="producerScore"?11:nt.t0==="entryRequested"?14:nt.t0==="entryResponded"?18:nt.t0==="newPeer"?34:nt.t0==="peerClosed"?41:nt.t0==="peerDisplayNameChanged"?47:nt.t0==="consumerClosed"?51:nt.t0==="consumerPaused"?63:nt.t0==="consumerResumed"?71:nt.t0==="consumerLayersChanged"?79:nt.t0==="consumerScore"?90:nt.t0==="dataConsumerClosed"?93:nt.t0==="activeSpeaker"?102:nt.t0==="consumerResumedSubManager"?107:nt.t0==="consumerPausedSubManager"?109:nt.t0==="transcriptionStateChanged"?111:nt.t0==="transcriptionText"?114:nt.t0==="recordingStateChanged"?116:nt.t0==="recordingStarted"?119:nt.t0==="recordingStopped"?121:nt.t0==="livestreamStateChanged"?123:nt.t0==="livestreamStarted"?126:nt.t0==="livestreamStopped"?128:nt.t0==="hlsStateChanged"?130:nt.t0==="hlsPlayableStateChanged"?133:nt.t0==="hlsStarted"?135:nt.t0==="hlsStopped"?138:nt.t0==="whiteboardStarted"?140:nt.t0==="whiteboardStopped"?143:nt.t0==="addCharacter"?145:nt.t0==="removeCharacter"?151:nt.t0==="characterStateChanged"?157:nt.t0==="characterMessage"?160:nt.t0==="userMessage"?162:nt.t0==="characterData"?164:nt.t0==="characterError"?166:nt.t0==="videoStatusChanged"?168:nt.t0==="videoSeeked"?170:nt.t0==="connectionOpen"?173:nt.t0==="connectionClose"?175:nt.t0==="connectionChatMessage"?177:nt.t0==="connectionParticipantJoined"?179:nt.t0==="connectionParticipantLeft"?181:nt.t0==="pubsubMessage"?183:nt.t0==="peerModeChanged"?185:nt.t0==="restartIce"?188:nt.t0==="mediaRelayStarted"?192:nt.t0==="mediaRelayStopped"?195:nt.t0==="mediaRelayError"?198:nt.t0==="mediaRelayRequestResponse"?201:nt.t0==="mediaRelayRequestReceived"?204:207;break;case 5:return yt=Be,pe._eventEmitter.emit("ERROR",yt),(vt=pe._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:yt.message}}),(Je=pe._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:yt.message},status:2}),nt.abrupt("break",208);case 10:try{kt=Be.peerId,It=Be.kind,Et=Be.newState,pe._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:kt,kind:It,newState:Et}),It=="video"&&((bt=pe._openTelemetry)===null||bt===void 0||bt.traceAutoComplete({spanName:"".concat(kt," has ").concat(Et?"enable":"disable"," ").concat(It),status:1}))}catch(pp){Ve.error('"newProducer" request failed:%o',pp),(sr=pe._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:pp.message}})}case 11:return Bt=Be.producerId,Ut=Be.score,Ke.dispatch(xs(Bt,Ut)),nt.abrupt("break",208);case 14:return kn=Be.id,Zr=Be.name,Wr=(Ar=pe._openTelemetry)===null||Ar===void 0?void 0:Ar.trace({spanName:"Websocket Noti: entryRequested",span:pe._joinSpan,attributes:{data:JSON.stringify({id:kn,name:Zr})}}),kn!==pe._peerId?(pe._eventEmitter.emit("ENTRY_REQUESTED",{id:kn,name:Zr}),(On=pe._openTelemetry)===null||On===void 0||On.completeSpan({span:Wr,status:1,message:"EntryResponded Recieved"})):(Bn=pe._openTelemetry)===null||Bn===void 0||Bn.completeSpan({span:Wr,status:2,message:"Entry Request Failed"}),nt.abrupt("break",208);case 18:if(jn=Be.id,Hn=Be.decision,es=Be.sessionId,en=Be.switchingRoomId,Ss=(Zn=pe._openTelemetry)===null||Zn===void 0?void 0:Zn.trace({name:"Entry Response Handling",attributes:{"peer.id":jn,"entry.decision":Hn,switching_room:!!en}}),jn===pe._peerId&&Hn==="allowed"){nt.next=24;break}return(Un=pe._openTelemetry)===null||Un===void 0||Un.completeSpan({span:pe._joinSpan,status:2,message:"Join Request Denied"}),(er=pe._openTelemetry)===null||er===void 0||er.completeSpan({span:Ss,status:2,message:"Entry denied for peer"}),nt.abrupt("break",208);case 24:if(pe._eventEmitter.emit("ENTRY_RESPONDED",{id:jn,decision:Hn}),!en){nt.next=30;break}return(ts=pe._openTelemetry)===null||ts===void 0||ts.completeSpan({span:Ss,status:1,message:"Switching room initiated"}),pe.softClose(),pe.switchingRoom(en),nt.abrupt("break",208);case 30:return pe._videosdkLogs=new ul({roomId:pe._roomId,peerId:pe._peerId,logs:fe,observabilityJwt:Pe,deviceInfo:pe._deviceInfo,sessionId:es,debugMode:pe._debugMode}),pe.joinRoom(),(Or=pe._openTelemetry)===null||Or===void 0||Or.completeSpan({span:Ss,status:1,message:"Entry response handled successfully"}),nt.abrupt("break",208);case 34:mr=ii(cs(cs({},St=Be),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(mr),pe._eventEmitter.emit(mr.type,mr.payload),Ke.dispatch(dr({text:"".concat(St.displayName," has joined the room")}));try{(yn=pe._openTelemetry)===null||yn===void 0||yn.traceAutoComplete({spanName:"Websocket Noti: newPeer ".concat(St.displayName),attributes:{peerData:JSON.stringify(St)}})}catch(pp){(mn=pe._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:"Error Websocket Noti: newPeer",logType:"ERROR",attributes:{error:pp.message}}),console.error(pp)}return nt.abrupt("break",208);case 41:return qn=Be.peerId,vi=$a(qn),Ke.dispatch(vi),pe._eventEmitter.emit(vi.type,vi.payload),(bn=pe._openTelemetry)===null||bn===void 0||bn.traceAutoComplete({spanName:"Websocket Noti: peerClosed for ".concat(qn)}),nt.abrupt("break",208);case 47:return _a=Be.peerId,Ai=Be.displayName,oa=Be.oldDisplayName,Ke.dispatch(uo(Ai,_a)),Ke.dispatch(dr({text:"".concat(oa," is now ").concat(Ai)})),nt.abrupt("break",208);case 51:if($s=Be.consumerId,Ns=pe._consumers.get($s)){nt.next=55;break}return nt.abrupt("break",208);case 55:return Ns.close(),pe._consumers.delete($s),ci=Ns.appData.peerId,Ws=Vo($s,ci),Ke.dispatch(Ws),pe._eventEmitter.emit(Ws.type,Ws.payload),(ca=pe._openTelemetry)===null||ca===void 0||ca.traceAutoComplete({spanName:"Websocket Noti: consumerClosed for id ".concat($s),attributes:{consumerData:JSON.stringify(Ns)}}),nt.abrupt("break",208);case 63:if(Oi=Be.consumerId,F=pe._consumers.get(Oi)){nt.next=67;break}return nt.abrupt("break",208);case 67:return F.pause(),Ke.dispatch(qi(Oi,"remote")),pe._eventEmitter.emit("CONSUMER_PAUSED",{consumerId:Oi,peerId:F.appData.peerId}),nt.abrupt("break",208);case 71:if(U=Be.consumerId,W=pe._consumers.get(U)){nt.next=75;break}return nt.abrupt("break",208);case 75:return W.resume(),Ke.dispatch($o(U,"remote")),pe._eventEmitter.emit("CONSUMER_RESUMED",{consumerId:U,peerId:W.appData.peerId}),nt.abrupt("break",208);case 79:if(le=Be.consumerId,ne=Be.spatialLayer,me=Be.temporalLayer,(ye=pe._consumers.get(le)).currentSpatialLayer=ne,ye.currentTemporalLayer=me,ye){nt.next=85;break}return nt.abrupt("break",208);case 85:return((Z=ye.appData)===null||Z===void 0||(Z=Z.encodings)===null||Z===void 0?void 0:Z.length)>1&&pe._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:ye.appData.peerId,prevQuality:ye.spatialLayers-1-ye.currentSpatialLayer==0?"HIGH":ye.spatialLayers-1-ye.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:ye.spatialLayers-1-ne==0?"HIGH":ye.spatialLayers-1-ne==1?"MEDIUM":"LOW"}),ye.currentSpatialLayer=ne,ye.currentTemporalLayer=me,Ke.dispatch(rl(le,ne,me)),nt.abrupt("break",208);case 90:return be=Be.consumerId,ke=Be.score,Ke.dispatch(zo(be,ke)),nt.abrupt("break",208);case 93:if(Ae=Be.dataConsumerId,ce=pe._dataConsumers.get(Ae)){nt.next=97;break}return nt.abrupt("break",208);case 97:return ce.close(),pe._dataConsumers.delete(Ae),xe=ce.appData.peerId,Ke.dispatch(Ho(Ae,xe)),nt.abrupt("break",208);case 102:return ve=Be.peerId,J=Rn(ve),Ke.dispatch(J),pe._eventEmitter.emit(J.type,J.payload),nt.abrupt("break",208);case 107:return pe._eventEmitter.emit("SUB_MANAGER_RESUMED",Be),nt.abrupt("break",208);case 109:return pe._eventEmitter.emit("SUB_MANAGER_PAUSED",Be),nt.abrupt("break",208);case 111:return pe._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",Be),(X=pe._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 114:return pe._eventEmitter.emit("TRANSCRIPTION_TEXT",Be),nt.abrupt("break",208);case 116:return pe._eventEmitter.emit("RECORDING_STATE_CHANGED",Be),(he=pe._openTelemetry)===null||he===void 0||he.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 119:return pe._eventEmitter.emit("RECORDING_STARTED",{}),nt.abrupt("break",208);case 121:return pe._eventEmitter.emit("RECORDING_STOPPED",{}),nt.abrupt("break",208);case 123:return pe._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",Be),(Oe=pe._openTelemetry)===null||Oe===void 0||Oe.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 126:return pe._eventEmitter.emit("LIVESTREAM_STARTED",{}),nt.abrupt("break",208);case 128:return pe._eventEmitter.emit("LIVESTREAM_STOPPED",{}),nt.abrupt("break",208);case 130:return pe._eventEmitter.emit("HLS_STATE_CHANGED",Be),(Ie=pe._openTelemetry)===null||Ie===void 0||Ie.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 133:return Be.isPlayable&&(pe._eventEmitter.emit("HLS_STATE_CHANGED",cs(cs({},Be),{},{status:ll.V.HLS_PLAYABLE})),(wt=pe._openTelemetry)===null||wt===void 0||wt.traceAutoComplete({spanName:"Websocket Noti: hlsPlayableStateChanged",status:1})),nt.abrupt("break",208);case 135:return ut=Be.downstreamUrl,pe._eventEmitter.emit("HLS_STARTED",ut),nt.abrupt("break",208);case 138:return pe._eventEmitter.emit("HLS_STOPPED",{}),nt.abrupt("break",208);case 140:return et=Be.state,Qt=Be.url,et?pe._eventEmitter.emit("WHITEBOARD_STARTED",{state:et}):Qt&&pe._eventEmitter.emit("WHITEBOARD_STARTED",{url:Qt}),nt.abrupt("break",208);case 143:return pe._eventEmitter.emit("WHITEBOARD_STOPPED",{}),nt.abrupt("break",208);case 145:return Ee=ii(cs(cs({},Be),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(Ee),pe._eventEmitter.emit("ADD_CHARACTER",Be),(Fe=pe._openTelemetry)===null||Fe===void 0||Fe.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(Be),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 151:return ze=Be.id,Ht=$a(ze),Ke.dispatch(Ht),pe._eventEmitter.emit("REMOVE_CHARACTER",Be),(Qe=pe._openTelemetry)===null||Qe===void 0||Qe.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(Be),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 157:return pe._eventEmitter.emit("CHARACTER_STATE_CHANGED",Be),(yr=pe._openTelemetry)===null||yr===void 0||yr.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(Be.status),attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 160:return pe._eventEmitter.emit("CHARACTER_MESSAGE",Be),nt.abrupt("break",208);case 162:return pe._eventEmitter.emit("USER_MESSAGE",Be),nt.abrupt("break",208);case 164:return pe._eventEmitter.emit("CHARACTER_DATA",Be),nt.abrupt("break",208);case 166:return pe._eventEmitter.emit("CHARACTER_ERROR",Be),nt.abrupt("break",208);case 168:return pe._eventEmitter.emit("VIDEO_STATE_CHANGED",Be),nt.abrupt("break",208);case 170:return At=Be.currentTime,pe._eventEmitter.emit("VIDEO_SEEKED",{currentTime:At}),nt.abrupt("break",208);case 173:return pe._eventEmitter.emit("CONNECTION_OPEN",Be),nt.abrupt("break",208);case 175:return pe._eventEmitter.emit("CONNECTION_CLOSE",Be),nt.abrupt("break",208);case 177:return pe._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",Be),nt.abrupt("break",208);case 179:return pe._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",Be),nt.abrupt("break",208);case 181:return pe._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",Be),nt.abrupt("break",208);case 183:return pe._eventEmitter.emit("PUBSUB_MESSAGE",Be),nt.abrupt("break",208);case 185:return pe._eventEmitter.emit("PEER_MODE_CHANGED",Be),(Hr=pe._openTelemetry)===null||Hr===void 0||Hr.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(Be)},status:1}),nt.abrupt("break",208);case 188:return tn=Be.transportId,Ms=Be.iceParameters,cn=(Cn=pe._openTelemetry)===null||Cn===void 0?void 0:Cn.trace({spanName:"Websocket Noti: restartIce for transportId :".concat(tn),attributes:{iceParameters:JSON.stringify(Ms)}}),pe.handleRemoteRestartIce({transportId:tn,iceParameters:Ms,internalSpan:cn}),nt.abrupt("break",208);case 192:return As=Ue.meetingId,pe._eventEmitter.emit("MEDIA_RELAY_STARTED",{meetingId:As}),nt.abrupt("break",208);case 195:return hc=Ue.meetingId,Al=Ue.reason,pe._eventEmitter.emit("MEDIA_RELAY_STOPPED",{meetingId:hc,reason:Al}),nt.abrupt("break",208);case 198:return dp=Ue.meetingId,Ef=Ue.reason,pe._eventEmitter.emit("MEDIA_RELAY_ERROR",{meetingId:dp,reason:Ef}),nt.abrupt("break",208);case 201:return up=Ue.decision,Rf=Ue.decidedBy,fx=Ue.meetingId,pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE",{decision:up,decidedBy:Rf,meetingId:fx}),nt.abrupt("break",208);case 204:return mx=Ue.peerId,gx=Ue.meetingId,vx=Ue.displayName,pe._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED",{peerId:mx,meetingId:gx,displayName:vx}),nt.abrupt("break",208);case 207:Ve.error('unknown Websocket notification.method "%s"',Ue.method);case 208:case"end":return nt.stop()}},We)}));return function(We){return it.apply(this,arguments)}}());case 38:case"end":return gt.stop()}},re,this)})),function(){return Sf.apply(this,arguments)})},{key:"requestEntry",value:(xf=(0,u.A)(v().mark(function re(){var $,z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Requesting Entry",span:this._joinSpan}),K.next=3,this._socketRequest("requestEntry",{name:this._displayName});case 3:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"Entry Requested Successfully"});case 4:case"end":return K.stop()}},re,this)})),function(){return xf.apply(this,arguments)})},{key:"respondEntry",value:(Nl=(0,u.A)(v().mark(function re($,z){var H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return oe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Responding Entry",attributes:{peerId:$,decision:z},span:this._joinSpan}),fe.next=3,this._socketRequest("respondEntry",{id:$,decision:z});case 3:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({message:"Entry Responded Successfully",span:oe,status:1});case 4:case"end":return fe.stop()}},re,this)})),function(re,$){return Nl.apply(this,arguments)})},{key:"startTranscription",value:(za=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe;return v().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ve.debug("startTranscription()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startTranscription() Start",attributes:{config:$?JSON.stringify($):"config Not Specify"}}),Pe.prev=2,Pe.next=5,this._socketRequest("startTranscription",{config:$});case 5:Pe.next=13;break;case 7:Pe.prev=7,Pe.t0=Pe.catch(2),Ve.error("startTranscription() | failed:%o",Pe.t0),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"startTranscription() failed"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Pe.t0.message}}),this._emitError({code:4031,message:Pe.t0.message});case 13:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"startTranscription() End"});case 14:case"end":return Pe.stop()}},re,this,[[2,7]])})),function(re){return za.apply(this,arguments)})},{key:"stopTranscription",value:(lp=(0,u.A)(v().mark(function re(){var $,z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("stopTranscription()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopTranscription() Start"}),fe.prev=2,fe.next=5,this._socketRequest("stopTranscription",{});case 5:fe.next=12;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"stopTranscription() failed"}),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),this._emitError({code:4032,message:fe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopTranscription() End"});case 13:case"end":return fe.stop()}},re,this,[[2,7]])})),function(){return lp.apply(this,arguments)})},{key:"pauseAllConsumers",value:(Dd=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht;return v().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"pauseAllConsumers() Start",attributes:{kind:$||"Kind not specified"}}),mt.prev=1,mt.next=4,this._socketRequest("pauseAllConsumers",{kind:$===void 0?"all":$});case 4:if(fe=mt.sent,Pe=!1,!((fe==null||(oe=fe.consumersWithIssues)===null||oe===void 0?void 0:oe.length)>0)){mt.next=13;break}return mt.next=9,this._socketRequest("pauseAllConsumers",{kind:$===void 0?"all":$});case 9:((ft=mt.sent)==null||(Ne=ft.consumersWithIssues)===null||Ne===void 0?void 0:Ne.length)===0&&(Pe=!0),mt.next=14;break;case 13:Pe=!0;case 14:Pe&&this._eventEmitter.emit("ALL_CONSUMERS_PAUSED",{kind:$}),mt.next=22;break;case 17:mt.prev=17,mt.t0=mt.catch(1),Ve.error("pauseAllConsumers() | failed:%o",mt.t0),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:K,status:2,message:"pauseAllConsumers() failed"}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error pauseAllConsumers() failed",logType:"ERROR",attributes:{error:mt.t0.message}});case 22:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"pauseAllConsumers() End"});case 23:case"end":return mt.stop()}},re,this,[[1,17]])})),function(re){return Dd.apply(this,arguments)})},{key:"resumeAllConsumers",value:(_f=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht;return v().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"resumeAllConsumers() Start",attributes:{kind:$||"Kind not specified"}}),mt.prev=1,mt.next=4,this._socketRequest("resumeAllConsumers",{kind:$===void 0?"all":$});case 4:if(fe=mt.sent,Pe=!1,!((fe==null||(oe=fe.consumersWithIssues)===null||oe===void 0?void 0:oe.length)>0)){mt.next=13;break}return mt.next=9,this._socketRequest("resumeAllConsumers",{kind:$===void 0?"all":$});case 9:((ft=mt.sent)==null||(Ne=ft.consumersWithIssues)===null||Ne===void 0?void 0:Ne.length)===0&&(Pe=!0),mt.next=14;break;case 13:Pe=!0;case 14:Pe&&this._eventEmitter.emit("ALL_CONSUMERS_RESUMED",{kind:$}),mt.next=22;break;case 17:mt.prev=17,mt.t0=mt.catch(1),Ve.error("resumeAllConsumers() | failed:%o",mt.t0),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:K,status:2,message:"resumeAllConsumers() failed"}),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error resumeAllConsumers() failed",logType:"ERROR",attributes:{error:mt.t0.message}});case 22:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"resumeAllConsumers() End"});case 23:case"end":return mt.stop()}},re,this,[[1,17]])})),function(re){return _f.apply(this,arguments)})},{key:"startRecording",value:(wf=(0,u.A)(v().mark(function re($,z,H,K){var oe,fe,Pe,Ne,ft;return v().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ve.debug("startRecording()"),Pe=(oe=this._openTelemetry)===null||oe===void 0?void 0:oe.trace({spanName:"startRecording() Start",attributes:{webhookUrl:$||"webhookUrl Not Specify",awsDirPath:z||"awsDirPath Not Specify",config:H?JSON.stringify(H):"config Not Specify",transcription:K?JSON.stringify(K):"transcription Not Specify"}}),Ze.prev=2,Ze.next=5,this._socketRequest("startRecording",{webhookUrl:$,awsDirPath:z,config:H,transcription:K});case 5:Ze.next=13;break;case 7:Ze.prev=7,Ze.t0=Ze.catch(2),Ve.error("startRecording() | failed:%o",Ze.t0),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:Pe,status:2,message:"startRecording() failed"}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Ze.t0.message}}),this._emitError({code:4011,message:Ze.t0.message});case 13:(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:Pe,status:1,message:"startRecording() End"});case 14:case"end":return Ze.stop()}},re,this,[[2,7]])})),function(re,$,z,H){return wf.apply(this,arguments)})},{key:"stopRecording",value:(oi=(0,u.A)(v().mark(function re(){var $,z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!this._closed){fe.next=2;break}return fe.abrupt("return");case 2:return Ve.debug("stopRecording()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopRecording() Start"}),fe.prev=4,fe.next=7,this._socketRequest("stopRecording",{});case 7:fe.next=14;break;case 9:fe.prev=9,fe.t0=fe.catch(4),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"stopRecording() failed"}),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),this._emitError({code:4012,message:fe.t0.message});case 14:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopRecording() End"});case 15:case"end":return fe.stop()}},re,this,[[4,9]])})),function(){return oi.apply(this,arguments)})},{key:"startLivestream",value:(bf=(0,u.A)(v().mark(function re($,z){var H,K,oe,fe,Pe;return v().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ve.debug("startLivestream()"),oe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"startLivestream() Start",attributes:{outputs:$?JSON.stringify($):"outputs Not Specify",config:z?JSON.stringify(z):"config Not Specify"}}),Ne.prev=2,Ne.next=5,this._socketRequest("startLivestream",{outputs:$,config:z});case 5:Ne.next=12;break;case 7:Ne.prev=7,Ne.t0=Ne.catch(2),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:oe,status:1,message:"startLivestream() End"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Ne.t0.message}}),this._emitError({code:4013,message:Ne.t0.message});case 12:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:oe,status:1,message:"startLivestream() End"});case 13:case"end":return Ne.stop()}},re,this,[[2,7]])})),function(re,$){return bf.apply(this,arguments)})},{key:"stopLivestream",value:(yf=(0,u.A)(v().mark(function re(){var $,z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("stopLivestream()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopLivestream() Start"}),fe.prev=2,fe.next=5,this._socketRequest("stopLivestream",{});case 5:fe.next=12;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:fe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopLivestream() End"});case 13:case"end":return fe.stop()}},re,this,[[2,7]])})),function(){return yf.apply(this,arguments)})},{key:"startHls",value:(jd=(0,u.A)(v().mark(function re($,z){var H,K,oe,fe,Pe;return v().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return $=$||{},z=z||{},Ve.debug("startHls()"),oe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"startHls() Start",attributes:{config:$?JSON.stringify($):"config Not Specify",transcription:z?JSON.stringify(z):"transcription Not Specify"}}),Ne.prev=4,Ne.next=7,this._socketRequest("startHls",{config:$,transcription:z});case 7:Ne.next=15;break;case 9:Ne.prev=9,Ne.t0=Ne.catch(4),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Ne.t0.message}}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:oe,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Ne.t0.message}),Ve.error("startHls() | failed:%o",Ne.t0);case 15:(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:oe,status:1,message:"startHlsSpan() End"});case 16:case"end":return Ne.stop()}},re,this,[[4,9]])})),function(re,$){return jd.apply(this,arguments)})},{key:"stopHls",value:(cp=(0,u.A)(v().mark(function re(){var $,z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("stopHls()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopHls() Start"}),fe.prev=2,fe.next=5,this._socketRequest("stopHls",{});case 5:fe.next=12;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:fe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopHls() End"});case 13:case"end":return fe.stop()}},re,this,[[2,7]])})),function(){return cp.apply(this,arguments)})},{key:"startWhiteboard",value:(wo=(0,u.A)(v().mark(function re(){var $,z,H,K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return Ve.debug("startWhiteboard()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"startWhiteboard() Start"}),oe.prev=2,oe.next=5,this._socketRequest("startWhiteboard",{version:"v2"});case 5:oe.next=12;break;case 7:oe.prev=7,oe.t0=oe.catch(2),Ve.error("startWhiteboard() | failed:%o",oe.t0),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:oe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"startWhiteboard() End"});case 13:case"end":return oe.stop()}},re,this,[[2,7]])})),function(){return wo.apply(this,arguments)})},{key:"stopWhiteboard",value:(Od=(0,u.A)(v().mark(function re(){var $,z,H,K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return Ve.debug("stopWhiteboard()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"stopWhiteboard() Start"}),oe.prev=2,oe.next=5,this._socketRequest("stopWhiteboard",{});case 5:oe.next=12;break;case 7:oe.prev=7,oe.t0=oe.catch(2),Ve.error("stopWhiteboard() | failed:%o",oe.t0),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:oe.t0.message});case 12:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"stopWhiteboard() End"});case 13:case"end":return oe.stop()}},re,this,[[2,7]])})),function(){return Od.apply(this,arguments)})},{key:"joinCharacter",value:(Pl=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe;return v().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ve.debug("joinCharacter()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"joinCharacter() Start",attributes:{config:$?JSON.stringify($):"config Not Specify"}}),Pe.prev=2,Pe.next=5,this._socketRequest("joinCharacter",{config:$});case 5:return Pe.abrupt("return",Pe.sent);case 8:Pe.prev=8,Pe.t0=Pe.catch(2),Ve.error("joinCharacter() | failed:%o",Pe.t0),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"joinCharacter() failed"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Pe.t0.message}}),this._emitError({code:4033,message:Pe.t0.message});case 14:return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"joinCharacter() End"}),Pe.abrupt("return",!1);case 16:case"end":return Pe.stop()}},re,this,[[2,8]])})),function(re){return Pl.apply(this,arguments)})},{key:"switchTo",value:(Ad=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft;return v().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return H=$.meetingId,K=$.participantId,oe=$.token,fe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"switchTo() Start",attributes:{"peer.id":K,meetingId:H}}),Ze.prev=2,Ze.next=5,this._socketRequest("switchToMeeting",{meetingId:H,participantId:K,secret:oe||this._secret});case 5:(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:fe,status:1,message:"switchTo() Success"}),Ze.next=12;break;case 8:Ze.prev=8,Ze.t0=Ze.catch(2),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:fe,status:2,message:"switchTo() failed"}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error switchTo() failed",logType:"ERROR",attributes:{error:Ze.t0.message}});case 12:case"end":return Ze.stop()}},re,this,[[2,8]])})),function(re){return Ad.apply(this,arguments)})},{key:"removeCharacter",value:(vf=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe;return v().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Ve.debug("removeCharacter()"),K=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"removeCharacter() Start"}),Pe.prev=2,Pe.next=5,this._socketRequest("leaveCharacter",{config:$});case 5:Pe.next=14;break;case 7:return Pe.prev=7,Pe.t0=Pe.catch(2),Ve.error("removeCharacter() | failed:%o",Pe.t0),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"removeCharacter() failed"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Pe.t0.message}}),this._emitError({code:4034,message:Pe.t0.message}),Pe.abrupt("return",!1);case 14:return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"removeCharacter() End"}),Pe.abrupt("return",!0);case 16:case"end":return Pe.stop()}},re,this,[[2,7]])})),function(re){return vf.apply(this,arguments)})},{key:"sendCharacterMessage",value:(Tl=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=$.interactionId,H=$.text,Ve.debug("sendCharacterMessage()"),K.prev=2,K.next=5,this._socketRequest("sendCharacterMessage",{interactionId:z,text:H});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),Ve.error("sendCharacterMessage() | failed:%o",K.t0),this._emitError({code:4035,message:K.t0.message});case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Tl.apply(this,arguments)})},{key:"interruptCharacter",value:(pc=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=$.interactionId,Ve.debug("interruptCharacter()"),H.prev=2,H.next=5,this._socketRequest("interruptCharacter",{interactionId:z});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),Ve.error("interruptCharacter() | failed:%o",H.t0),this._emitError({code:4036,message:H.t0.message});case 11:case"end":return H.stop()}},re,this,[[2,7]])})),function(re){return pc.apply(this,arguments)})},{key:"pinStateChange",value:(Cl=(0,u.A)(v().mark(function re($){var z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return H=$.peerId,K=$.state,(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Pin state Change for ".concat(H),attributes:{state:K?JSON.stringify(K):null},status:1}),fe.prev=2,fe.next=5,this._socketRequest("pinStateChanged",{peerId:H,state:K});case 5:fe.next=11;break;case 7:fe.prev=7,fe.t0=fe.catch(2),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:fe.t0.message}}),Ve.error("pinStateChange() | failed");case 11:case"end":return fe.stop()}},re,this,[[2,7]])})),function(re){return Cl.apply(this,arguments)})},{key:"startVideo",value:(kl=(0,u.A)(v().mark(function re($){var z,H,K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return H=$.link,Ve.debug("startVideo()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),oe.prev=3,oe.next=6,this._socketRequest("startVideo",{link:H});case 6:oe.next=13;break;case 8:oe.prev=8,oe.t0=oe.catch(3),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:oe.t0.message}}),Ve.error("startVideo() | failed:%o",oe.t0),this._emitError({code:3023,message:oe.t0.message});case 13:case"end":return oe.stop()}},re,this,[[3,8]])})),function(re){return kl.apply(this,arguments)})},{key:"stopVideo",value:(uc=(0,u.A)(v().mark(function re(){var $,z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Ve.debug("stopVideo()"),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),H.prev=2,H.next=5,this._socketRequest("stopVideo",{});case 5:H.next=12;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Ve.error("stopVideo() | failed:%o",H.t0),this._emitError({code:3024,message:H.t0.message});case 12:case"end":return H.stop()}},re,this,[[2,7]])})),function(){return uc.apply(this,arguments)})},{key:"pauseVideo",value:(gf=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("pauseVideo()"),z.prev=1,z.next=4,this._socketRequest("pauseVideo",{currentTime:$});case 4:z.next=10;break;case 6:z.prev=6,z.t0=z.catch(1),Ve.error("pauseVideo() | failed:%o",z.t0),this._emitError({code:3025,message:z.t0.message});case 10:case"end":return z.stop()}},re,this,[[1,6]])})),function(re){return gf.apply(this,arguments)})},{key:"resumeVideo",value:(mf=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:return Ve.debug("resumeVideo()"),$.prev=1,$.next=4,this._socketRequest("resumeVideo",{});case 4:$.next=10;break;case 6:$.prev=6,$.t0=$.catch(1),Ve.error("resumeVideo() | failed:%o",$.t0),this._emitError({code:3026,message:$.t0.message});case 10:case"end":return $.stop()}},re,this,[[1,6]])})),function(){return mf.apply(this,arguments)})},{key:"seekVideo",value:(dc=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("seekVideo()"),z.prev=1,z.next=4,this._socketRequest("seekVideo",{currentTime:$});case 4:z.next=10;break;case 6:z.prev=6,z.t0=z.catch(1),Ve.error("seekVideo() | failed:%o",z.t0),this._emitError({code:3031,message:z.t0.message});case 10:case"end":return z.stop()}},re,this,[[1,6]])})),function(re){return dc.apply(this,arguments)})},{key:"enablePeerMic",value:(ff=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Enabling peer ".concat($," Mic"),status:1}),Ve.debug("enablePeerMic()"),K.prev=2,K.next=5,this._socketRequest("enablePeerMic",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("enablePeerMic() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return ff.apply(this,arguments)})},{key:"requestMediaRelay",value:(op=(0,u.A)(v().mark(function re($,z,H){var K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,oe.next=3,this._socketRequest("mediaRelayRequestSent",{meetingId:$,secret:z??this._secret,kinds:H??["audio","video","share","share_audio"]});case 3:oe.next=8;break;case 5:oe.prev=5,oe.t0=oe.catch(0),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error relayRequest() failed",logType:"ERROR",attributes:{error:oe.t0.message}});case 8:case"end":return oe.stop()}},re,this,[[0,5]])})),function(re,$,z){return op.apply(this,arguments)})},{key:"handleRelayRequestResponse",value:(ap=(0,u.A)(v().mark(function re($){var z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return z=$.decision,H=$.peerId,K=$.meetingId,fe.prev=1,fe.next=4,this._socketRequest("respondToMediaRelayRequest",{decision:z,decidedBy:this._peerId,peerId:H,meetingId:K});case 4:fe.next=9;break;case 6:fe.prev=6,fe.t0=fe.catch(1),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error respondToMediaRelayRequest() failed",logType:"ERROR",attributes:{error:fe.t0.message}});case 9:case"end":return fe.stop()}},re,this,[[1,6]])})),function(re){return ap.apply(this,arguments)})},{key:"stopMediaRelay",value:(hf=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,this._socketRequest("mediaRelayRequestStop",{meetingId:$});case 3:H.next=8;break;case 5:H.prev=5,H.t0=H.catch(0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopMediaRelay() failed",logType:"ERROR",attributes:{error:H.t0.message}});case 8:case"end":return H.stop()}},re,this,[[0,5]])})),function(re){return hf.apply(this,arguments)})},{key:"enableRelayMedia",value:(ip=(0,u.A)(v().mark(function re($,z){var H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this._socketRequest("enableRelayMedia",{meetingId:$,kind:z});case 3:K.next=8;break;case 5:K.prev=5,K.t0=K.catch(0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enableRelayMedia() failed",logType:"ERROR",attributes:{error:K.t0.message}});case 8:case"end":return K.stop()}},re,this,[[0,5]])})),function(re,$){return ip.apply(this,arguments)})},{key:"disableRelayMedia",value:(Nd=(0,u.A)(v().mark(function re($,z){var H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this._socketRequest("disableRelayMedia",{meetingId:$,kind:z});case 3:K.next=8;break;case 5:K.prev=5,K.t0=K.catch(0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disableRelayMedia() failed",logType:"ERROR",attributes:{error:K.t0.message}});case 8:case"end":return K.stop()}},re,this,[[0,5]])})),function(re,$){return Nd.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(Pd=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,this._socketRequest("enableAdaptiveSubscription");case 3:z.next=8;break;case 5:z.prev=5,z.t0=z.catch(0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error enableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:z.t0.message}});case 8:case"end":return z.stop()}},re,this,[[0,5]])})),function(){return Pd.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(Td=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,this._socketRequest("disableAdaptiveSubscription");case 3:z.next=8;break;case 5:z.prev=5,z.t0=z.catch(0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error disableAdaptiveSubscription() failed",logType:"ERROR",attributes:{error:z.t0.message}});case 8:case"end":return z.stop()}},re,this,[[0,5]])})),function(){return Td.apply(this,arguments)})},{key:"disablePeerMic",value:(Cd=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Disabling peer ".concat($," Mic"),status:1}),Ve.debug("disablePeerMic()"),K.prev=2,K.next=5,this._socketRequest("disablePeerMic",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("disablePeerMic() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return Cd.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Rl=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return Ve.debug("consumeWebcamStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.prev=4,K.next=7,this._socketRequest("consumeVideoStreams",{peerId:$});case 7:K.next=13;break;case 9:K.prev=9,K.t0=K.catch(4),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("consumeWebcamStreams() | failed:%o",K.t0);case 13:case"end":return K.stop()}},re,this,[[4,9]])})),function(re){return Rl.apply(this,arguments)})},{key:"consumeMicStreams",value:(sp=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return Ve.debug("consumeMicStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.prev=2,K.next=5,this._socketRequest("consumeAudioStreams",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("consumeMicStreams() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return sp.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(np=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return Ve.debug("stopConsumingAudioStreams()"),K.prev=3,K.next=6,this._socketRequest("stopConsumingAudioStreams",{peerId:$});case 6:(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.next=13;break;case 9:K.prev=9,K.t0=K.catch(3),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("stopConsumingMicStreams() | failed:%o",K.t0);case 13:case"end":return K.stop()}},re,this,[[3,9]])})),function(re){return np.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(rp=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return Ve.debug("stopConsumingWebcamStreams()"),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:$}}),K.prev=2,K.next=5,this._socketRequest("stopConsumingVideoStreams",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("stopConsumingWebcamStreams() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return rp.apply(this,arguments)})},{key:"changeMode",value:(kd=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt=this;return v().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeMode() Calling with mode: ".concat($)}),K=this._mode,Je.prev=2,K!==$){Je.next=7;break}throw(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"changeMode() Ending"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"You are already in ".concat($," mode"),logType:"INFO"}),new Error("You are already in ".concat($," mode"));case 7:if(Pe=function(){var yt=(0,u.A)(v().mark(function kt(It,Et){return v().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return bt.next=2,vt._socketRequest("createWebRtcTransport",{preferredProtocol:vt._preferredProtocol,producing:It,consuming:Et,sctpCapabilities:vt._useDataChannel?vt._mediasoupDevice.sctpCapabilities:void 0});case 2:return bt.abrupt("return",bt.sent);case 3:case"end":return bt.stop()}},kt)}));return function(kt,It){return yt.apply(this,arguments)}}(),!(0,Bs.kR)($)){Je.next=36;break}return this._consume=!0,this._produce=!0,this._mode=$,this._mediasoupDevice=new zt.pF({handlerName:this._handlerName}),Je.next=15,this._socketRequest("getRouterRtpCapabilities");case 15:return ft=Je.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(ft.headerExtensions=(Ze=ft.headerExtensions)===null||Ze===void 0?void 0:Ze.filter(function(yt){return yt.uri!="urn:3gpp:video-orientation"})),Je.next=19,this._mediasoupDevice.load({routerRtpCapabilities:ft});case 19:if(!this._produce){Je.next=24;break}return Je.next=22,Pe(!0,!1);case 22:ht=Je.sent,this.createProducerTransport(ht,H);case 24:if(K===Bs.nI.RECV_ONLY||!this._consume){Je.next=29;break}return Je.next=27,Pe(!1,!0);case 27:mt=Je.sent,this.createConsumerTransport(mt,H);case 29:return(Ne=this._openTelemetry)===null||Ne===void 0||Ne.traceAutoComplete({spanName:"Sending changeMode request to server",span:H,status:1}),Je.next=32,this._socketRequest("changeMode",{mode:$});case 32:this._produce&&(Ke.dispatch(Sr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),this._webcamEnabled&&this.enableWebcam(this.customCameraVideoTrack,H)),window.SHOW_INFO&&(pe=Ke.getState(),gt=pe.me,Ke.dispatch(ur(gt.id))),Je.next=62;break;case 36:if(!(0,Bs.kR)(K)||$!==Bs.nI.RECV_ONLY){Je.next=44;break}return this._produce=!1,this._mode=$,this._closeProducersAndTransport(),Je.next=42,this._socketRequest("changeMode",{mode:$});case 42:Je.next=62;break;case 44:if(!(0,Bs.wZ)(K)||$!==Bs.nI.RECV_ONLY){Je.next=54;break}return this._consume=!0,this._mode=$,Je.next=49,this._setupWebrtcTransport(H);case 49:return Je.next=51,this._socketRequest("changeMode",{mode:$});case 51:window.SHOW_INFO&&(it=Ke.getState(),We=it.me,Ke.dispatch(ur(We.id))),Je.next=62;break;case 54:if(!(0,Bs.wZ)($)){Je.next=62;break}return Je.next=57,this._socketRequest("changeMode",{mode:$});case 57:this._consume=!1,this._produce=!1,this._mode=$,this._dataConsumers.clear(),this._closeTransports();case 62:Je.next=68;break;case 64:Je.prev=64,Je.t0=Je.catch(2),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:"Error changeMode(".concat($,") | failed"),logType:"ERROR",attributes:{error:Je.t0.message}}),(Be=this._openTelemetry)===null||Be===void 0||Be.completeSpan({span:H,status:2,message:"changeMode(".concat($,") | failed")});case 68:case"end":return Je.stop()}},re,this,[[2,64]])})),function(re){return kd.apply(this,arguments)})},{key:"_closeProducersAndTransport",value:function(){var re;this._webcamProducer&&(this._webcamProducer.close(),this._webcamProducer=null),this._micProducer&&(this._micProducer.close(),this._micProducer=null),this._shareProducer&&(this._shareProducer.close(),this._shareProducer=null),this._shareAudioProducer&&(this._shareAudioProducer.close(),this._shareAudioProducer=null),(re=this._sendTransport)===null||re===void 0||re.close(),this._sendTransport=null}},{key:"_closeTransports",value:function(){var re,$;this._sendTransport&&((re=this._sendTransport)===null||re===void 0||re.close(),this._sendTransport=null),this._recvTransport&&(($=this._recvTransport)===null||$===void 0||$.close(),this._recvTransport=null)}},{key:"_setupWebrtcTransport",value:(Rd=(0,u.A)(v().mark(function re($){var z,H,K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return this._mediasoupDevice=new zt.pF({handlerName:this._handlerName}),oe.next=3,this._socketRequest("getRouterRtpCapabilities");case 3:return z=oe.sent,this._deviceInfo.sdkType!=="react-native"&&navigator.userAgent.includes("Firefox")&&(z.headerExtensions=(H=z.headerExtensions)===null||H===void 0?void 0:H.filter(function(fe){return fe.uri!="urn:3gpp:video-orientation"})),oe.next=7,this._mediasoupDevice.load({routerRtpCapabilities:z});case 7:return oe.next=9,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 9:K=oe.sent,this.createConsumerTransport(K,$);case 11:case"end":return oe.stop()}},re,this)})),function(re){return Rd.apply(this,arguments)})},{key:"enablePeerWebcam",value:(bo=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Enabling peer ".concat($," Webcam"),status:1}),Ve.debug("enablePeerWebcam()"),K.prev=2,K.next=5,this._socketRequest("enablePeerWebcam",{peerId:$});case 5:K.next=11;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("enablePeerWebcam() | failed:%o",K.t0);case 11:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return bo.apply(this,arguments)})},{key:"disablePeerWebcam",value:(El=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Disabling peer ".concat($," Webcam"),status:1}),Ve.debug("disablePeerWebcam()"),K.prev=2,K.next=5,this._socketRequest("disablePeerWebcam",{peerId:$});case 5:K.next=10;break;case 7:K.prev=7,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:K.t0.message}});case 10:case"end":return K.stop()}},re,this,[[2,7]])})),function(re){return El.apply(this,arguments)})},{key:"getMicStats",value:function(re){var $=this;if(this._micProducer){var z=0;re.onStatsCollected=function(H){var K;$._stats.producerStats||($._stats.producerStats={}),$._stats.producerStats.audio||($._stats.producerStats.audio=[]),$._micProducer&&($._latestStats[(K=$._micProducer)===null||K===void 0?void 0:K.id]=[]),H.audio.forEach(function(oe){var fe;$._micProducer&&$._latestStats[(fe=$._micProducer)===null||fe===void 0?void 0:fe.id].push(oe)}),z%5==0&&$._micProducer!=null&&$._stats.producerStats.audio.push(cs({timestamp:new Date},$._latestStats[$._micProducer.id]?$._latestStats[$._micProducer.id][0]:{})),z++}}}},{key:"enableMic",value:(Sl=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt,Je,yt,kt,It,Et,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,On,Bn,Zn,Or,jn,Hn,es,en,Ss,Un,er,ts,St,mr,yn,mn,bn,qn,vi,_a,Ai,oa,ca,$s,Ns,ci,Ws,Oi,F,U,W,Z,le,ne,me,ye,be,ke,Ae,ce=this,xe=arguments;return v().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(fe=xe.length>0&&xe[0]!==void 0?xe[0]:void 0,Pe=xe.length>1&&xe[1]!==void 0?xe[1]:void 0,Ne=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"enableMic() Calling ".concat(fe?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:fe?JSON.stringify(fe):"Not Specify Custom Track"},span:Pe||null}),Ve.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){ve.next=28;break}if(ht=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Mic Producer found",span:Ne}),fe&&((mt=this._openTelemetry)===null||mt===void 0||mt.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Ne,status:1}),fe.getTracks().forEach(function(J){J.stop()})),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:ht,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),pe=this._micProducer,!this._sendTransport){ve.next=19;break}return ve.next=14,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions,appData:{isEncrypted:this.isE2EEEnabled},onRtpSender:function(J){ce.e2eeManager&&(J.senderStreams=J.createEncodedStreams())}});case 14:this._micProducer=ve.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),this._micProducer?(it=An({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:pe._appData.encodings,codecOptions:pe._appData.codecOptions,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),Ke.dispatch(it),this._eventEmitter.emit(it.type,it.payload),(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:Ne,status:1,message:"Enable Mic Successful"})):(We=this._openTelemetry)===null||We===void 0||We.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: micProducer null"}),ve.next=22;break;case 19:return(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:gr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(gr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),ve.abrupt("return");case 22:return Be=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Be==null||Be.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(Be)}),this._micProducer.observer.on("close",function(){Be==null||Be.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(Be)}),this.getMicStats(Be),Be.start(),ve.abrupt("return");case 28:if(!this._mediasoupDevice){ve.next=37;break}if(this._mediasoupDevice.canProduce("audio")){ve.next=35;break}return yt=this._deviceInfo.sdkType=="react-native"?gr.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:gr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(vt=this._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:yt,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),Ve.error("enableMic() | cannot produce audio"),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: ".concat(yt)}),ve.abrupt("return");case 35:ve.next=40;break;case 37:return(kt=this._videosdkLogs)===null||kt===void 0||kt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(It=this._openTelemetry)===null||It===void 0||It.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),ve.abrupt("return");case 40:if(ve.prev=40,this._externalVideo){ve.next=107;break}return Ve.debug("enableMic() | calling getUserMedia()"),ve.next=45,this._updateMics(Ne);case 45:if(this._mic.device){ve.next=48;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 48:try{fe&&(Et=fe.getAudioTracks()[0]).readyState=="ended"&&(Et=null,Wr=gr.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(Zr=this._videosdkLogs)===null||Zr===void 0||Zr.pushLogs({logText:Wr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Wr))}catch(J){Bn=gr.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(On=this._videosdkLogs)===null||On===void 0||On.pushLogs({logText:Bn.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Bn),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(J))}if(Et){ve.next=105;break}return jn=(Zn=this._openTelemetry)===null||Zn===void 0?void 0:Zn.trace({spanName:"Creating Track",span:Ne}),ve.prev=51,ve.next=54,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 54:Hn=ve.sent,ve.next=103;break;case 57:if(ve.prev=57,ve.t0=ve.catch(51),(es=this._openTelemetry)===null||es===void 0||es.completeSpan({message:"Error in enableMic() :: ".concat(ve.t0.message),span:jn,status:2}),ve.t0.name!=="SecurityError"){ve.next=68;break}Un=gr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,er=Un.message,this._emitError(Un),(en=this._videosdkLogs)===null||en===void 0||en.pushLogs({logText:er,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(Ss=this._openTelemetry)===null||Ss===void 0||Ss.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(er),span:Ne,status:2}),ve.next=102;break;case 68:if(ve.t0.name!=="DOMException"){ve.next=76;break}mr=gr.q.ERROR_RN_MIC_NOT_FOUND,yn=mr.message,this._emitError(mr),(ts=this._videosdkLogs)===null||ts===void 0||ts.pushLogs({logText:yn,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(St=this._openTelemetry)===null||St===void 0||St.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(yn),span:Ne,status:2}),ve.next=102;break;case 76:if(!(ve.t0 instanceof DOMException)){ve.next=99;break}ve.t1=ve.t0.name,ve.next=ve.t1==="NotAllowedError"?80:ve.t1==="NotReadableError"?83:ve.t1==="NotFoundError"?86:93;break;case 80:return mn=this.handleNotAllowedError(ve.t0,this._openTelemetry,this._videosdkLogs,Ne,"audio"),this._emitError(mn),ve.abrupt("break",97);case 83:return bn=this.handleNotReadableError(ve.t0,this._openTelemetry,this._videosdkLogs,Ne,"audio"),this._emitError(bn),ve.abrupt("break",97);case 86:return qn=gr.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(qn=gr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),vi=qn.message,this._emitError(qn),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:vi,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(vi),span:Ne,status:2}),ve.abrupt("break",97);case 93:return _a="An error occurred in creating audio track, ".concat(ve.t0.message),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:ve.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(_a)},dashboardLog:!0}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Error in enableMic() :: ".concat(_a),span:Ne,status:2}),ve.abrupt("break",97);case 97:ve.next=102;break;case 99:ca="An error occurred in creating audio track, ".concat(ve.t0.message),(Ai=this._videosdkLogs)===null||Ai===void 0||Ai.pushLogs({logText:ve.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(ca)},dashboardLog:!0}),(oa=this._openTelemetry)===null||oa===void 0||oa.completeSpan({message:"Error in enableMic() :: ".concat(ca),span:Ne,status:2});case 102:return ve.abrupt("return");case 103:Et=Hn.getAudioTracks()[0],(Or=this._openTelemetry)===null||Or===void 0||Or.completeSpan({message:"Audio Track Generated",span:jn,status:1});case 105:ve.next=111;break;case 107:return ve.next=109,this._getExternalVideoStream();case 109:$s=ve.sent,Et=$s.getAudioTracks()[0].clone();case 111:if(bt=(sr=this._openTelemetry)===null||sr===void 0?void 0:sr.trace({spanName:"Generating Producer Configuration",span:Ne}),Ns={opusStereo:1,opusDtx:1},fe&&(ci=fe.encoderConfig?ra.$.audioProfiles[fe.encoderConfig]:ra.$.audioProfiles.speech_standard,Ns={opusStereo:ci.stereo?1:0,opusFec:ci.fec?1:0,opusDtx:ci.dtx?1:0,opusMaxPlaybackRate:ci.maxPlaybackRate,opusPtime:ci.packetTime}),Oi={encodings:Ws=[{networkPriority:"high"}],codecOptions:Ns},(Bt=this._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"Generated AppData",span:bt,attributes:{appData:JSON.stringify(Oi)},status:1}),(Ut=this._openTelemetry)===null||Ut===void 0||Ut.completeSpan({span:bt,status:1,message:"Producer Configuration Generated"}),bt=(Ar=this._openTelemetry)===null||Ar===void 0?void 0:Ar.trace({spanName:"Creating Mic Producer",span:Ne}),(kn=Et)===null||kn===void 0||kn.addEventListener("ended",function(){console.log("Track Ended Error");try{var J,X,he=ce._deviceInfo.sdkType=="react-native"?gr.q.ERROR_RN_MIC_TRACK_ENDED:gr.q.ERROR_MICROPHONE_TRACK_ENDED;(J=ce._videosdkLogs)===null||J===void 0||J.pushLogs({logText:he.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(he.message)},dashboardLog:!0}),(X=ce._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ne,message:he.message,status:2}),Ke.dispatch(dr({type:"error",text:"Microphone disconnected!"})),ce.disableMic(!0,Ne).catch(function(){})}catch(Oe){console.error(Oe)}}),!this._sendTransport){ve.next=128;break}return ve.next=124,this._sendTransport.produce({track:Et,encodings:Ws,codecOptions:Ns,appData:cs(cs({},Oi),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(J){ce.e2eeManager&&(J.senderStreams=J.createEncodedStreams())}});case 124:this._micProducer=ve.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._micProducer),ve.next=131;break;case 128:return(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:gr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(gr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),ve.abrupt("return");case 131:this._micProducer?(Et.getConstraints().deviceId&&(this._mic.device=this._mics.get(Et.getConstraints().deviceId)),Z=An({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Ws,codecOptions:Ns,instance:this._micProducer,rtpSender:this._micProducer.rtpSender}),Ke.dispatch(Z),this._eventEmitter.emit(Z.type,Z.payload),(le=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(le),this._micProducer.on("transportclose",function(){var J,X=Ln(ce._micProducer.id);Ke.dispatch(X),ce._eventEmitter.emit(X.type,X.payload),(J=ce._micProducer)===null||J===void 0||J.close(),ce._micProducer=null}),this._micProducer.observer.on("pause",function(){le==null||le.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(le)}),this._micProducer.observer.on("close",function(){le==null||le.stop(),ce._latestStats[ce._micProducer.id]=[],ce._metrics.removeExistingProbe(le)}),this._micProducer.on("trackended",function(){var J,X,he=ce._deviceInfo.sdkType=="react-native"?gr.q.ERROR_RN_MIC_TRACK_ENDED:gr.q.ERROR_MICROPHONE_TRACK_ENDED;(J=ce._videosdkLogs)===null||J===void 0||J.pushLogs({logText:he.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(he.message)},dashboardLog:!0}),(X=ce._openTelemetry)===null||X===void 0||X.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ne,message:he.message,status:2}),Ke.dispatch(dr({type:"error",text:"Microphone disconnected!"})),ce.disableMic(!0,Ne).catch(function(){})}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:bt,status:1,message:"Mic Producer Created"}),(W=this._openTelemetry)===null||W===void 0||W.completeSpan({span:Ne,status:1,message:"Enable Mic Successful"})):((ne=this._videosdkLogs)===null||ne===void 0||ne.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(me=this._openTelemetry)===null||me===void 0||me.completeSpan({span:bt,status:2,message:"Error in enableMic() :: micProducer null"}),(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:Ne,status:2,message:"Error in enableMic() :: micProducer null"})),ve.next=144;break;case 134:return ve.prev=134,ve.t2=ve.catch(40),(be=this._openTelemetry)===null||be===void 0||be.completeSpan({span:bt,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(ve.t2.message)}),(ke=this._openTelemetry)===null||ke===void 0||ke.completeSpan({span:Ne,status:2,message:"Error in enableMic :: ".concat(ve.t2.message)}),(Ae=this._videosdkLogs)===null||Ae===void 0||Ae.pushLogs({logText:ve.t2.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(ve.t2.message)},dashboardLog:!0}),Ve.error("enableMic() | failed:%o",ve.t2),Ke.dispatch(dr({type:"error",text:"Error enabling microphone: ".concat(ve.t2)})),ve.next=143,this._socketRequest("produceError",{mediaType:"audio",message:ve.t2.message});case 143:Et&&Et.stop();case 144:case"end":return ve.stop()}},re,this,[[40,134],[51,57]])})),function(){return Sl.apply(this,arguments)})},{key:"disableMic",value:(lc=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt,Je,yt,kt,It,Et,bt,sr=arguments;return v().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(H=sr.length>0&&sr[0]!==void 0&&sr[0],K=sr.length>1&&sr[1]!==void 0?sr[1]:void 0,Ve.debug("disableMic()"),oe=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"disableMic() Calling",status:1,span:K||null}),this._micProducer){Bt.next=8;break}return(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:oe,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Pe=this._videosdkLogs)===null||Pe===void 0||Pe.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Bt.abrupt("return");case 8:if(Ne=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Mic Producer",span:oe,status:1}),this._micEnabled=!1,!this._micProducer||H){Bt.next=32;break}return mt=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Pausing Mic Producer",span:Ne,status:1}),this._micProducer.pause(),pe=Ln(this._micProducer.id),(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:mt,status:1,message:"Pause Mic Successfully"}),Ke.dispatch(pe),this._eventEmitter.emit(pe.type,pe.payload),Bt.prev=17,Bt.next=20,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 20:(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:Ne,status:1,message:"Requested Server to Close Producer"}),Bt.next=30;break;case 23:Bt.prev=23,Bt.t0=Bt.catch(17),Ke.dispatch(dr({type:"error",text:"Error closing server-side mic Producer: ".concat(Bt.t0)})),Be="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(H),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:Ne,status:2,message:"Error in disableMic() :: ".concat(Bt.t0.message)}),(We=this._openTelemetry)===null||We===void 0||We.completeSpan({span:oe,status:2,message:Be}),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:Be,logType:"ERROR",attributes:{error:Bt.t0.message},dashboardLog:!0});case 30:return(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:oe,status:1,message:"Mic Disabled Successfully"}),Bt.abrupt("return");case 32:return this._micProducer.close(),vt=Ln(this._micProducer.id),Ke.dispatch(vt),this._eventEmitter.emit(vt.type,vt.payload),Bt.prev=36,Bt.next=39,this._socketRequest("closeProducer",{producerId:this._micProducer.id});case 39:(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:Ne,status:1,message:"Requested Server to Close Producer"}),(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:oe,status:1,message:"Mic Disabled Successfully"}),Bt.next=50;break;case 43:Bt.prev=43,Bt.t1=Bt.catch(36),Ke.dispatch(dr({type:"error",text:"Error closing server-side mic Producer: ".concat(Bt.t1)})),bt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(H),(kt=this._openTelemetry)===null||kt===void 0||kt.completeSpan({span:Ne,status:2,message:"Error in disableMic() :: ".concat(Bt.t1.message)}),(It=this._openTelemetry)===null||It===void 0||It.completeSpan({span:oe,status:2,message:bt}),(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:bt,logType:"ERROR",attributes:{error:Bt.t1.message},dashboardLog:!0});case 50:this._micProducer=null;case 51:case"end":return Bt.stop()}},re,this,[[17,23],[36,43]])})),function(){return lc.apply(this,arguments)})},{key:"muteMic",value:(pf=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),z.prev=3,z.next=6,this._socketRequest("pauseProducer",{producerId:this._micProducer.id});case 6:Ke.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(3),Ve.error("muteMic() | failed: %o",z.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:z.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error pausing server-side mic Producer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},re,this,[[3,9]])})),function(){return pf.apply(this,arguments)})},{key:"unmuteMic",value:(uf=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),z.prev=3,z.next=6,this._socketRequest("resumeProducer",{producerId:this._micProducer.id});case 6:Ke.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(3),Ve.error("unmuteMic() | failed: %o",z.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:z.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error resuming server-side mic Producer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},re,this,[[3,9]])})),function(){return uf.apply(this,arguments)})},{key:"enableWebcam",value:(tp=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt,Je,yt,kt,It,Et,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,On,Bn,Zn,Or,jn,Hn,es,en,Ss,Un,er,ts,St,mr,yn,mn,bn,qn,vi,_a,Ai,oa,ca,$s,Ns,ci,Ws,Oi,F,U,W,Z,le,ne,me,ye,be,ke,Ae=this,ce=arguments;return v().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(fe=ce.length>0&&ce[0]!==void 0?ce[0]:void 0,Pe=ce.length>1&&ce[1]!==void 0?ce[1]:void 0,Ne=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"enableWebcam() Calling ".concat(fe?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:fe?JSON.stringify(fe):"Not Specify Custom Track"},span:Pe||null}),Ve.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){xe.next=9;break}return(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Ze=this._videosdkLogs)===null||Ze===void 0||Ze.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),xe.abrupt("return");case 9:if(!this._mediasoupDevice){xe.next=18;break}if(this._mediasoupDevice.canProduce("video")){xe.next=16;break}return pe=this._deviceInfo.sdkType=="react-native"?gr.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:gr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: ".concat(pe)}),(mt=this._videosdkLogs)===null||mt===void 0||mt.pushLogs({logText:pe,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),Ve.error("enableWebcam() | cannot produce video"),xe.abrupt("return");case 16:xe.next=21;break;case 18:return(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),xe.abrupt("return");case 21:if(Ke.dispatch(Js(!0)),Be=this._webcam.resolution,xe.prev=23,this._externalVideo){xe.next=100;break}return xe.next=27,this._updateWebcams(Ne);case 27:if(Ue=this._webcam.device){xe.next=31;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 31:Ve.debug("enableWebcam() | calling getUserMedia()");try{fe&&(We=fe.getVideoTracks()[0]).readyState=="ended"&&(We=null,Et=gr.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(It=this._videosdkLogs)===null||It===void 0||It.pushLogs({logText:Et.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Et))}catch(ve){sr=gr.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(bt=this._videosdkLogs)===null||bt===void 0||bt.pushLogs({logText:sr.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(sr),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(ve))}if(We){xe.next=98;break}if(Ut=(Bt=this._openTelemetry)===null||Bt===void 0?void 0:Bt.trace({spanName:"Creating Track",span:Ne}),Ar=null,xe.prev=36,this._webcam.resolution!="hd"){xe.next=44;break}return xe.next=40,this.createCameraVideoTrack({cameraId:Ue.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Ue.facing});case 40:fe=xe.sent,Ar=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),xe.next=48;break;case 44:return xe.next=46,this.createCameraVideoTrack({cameraId:Ue.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Ue.facing});case 46:fe=xe.sent,Ar=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 48:We=fe.getVideoTracks()[0],(kn=this._openTelemetry)===null||kn===void 0||kn.completeSpan({message:"Video Track Generated",span:Ut,attributes:{customVideoTrackConfig:Ar},status:1}),xe.next=98;break;case 52:if(xe.prev=52,xe.t0=xe.catch(36),(Zr=this._openTelemetry)===null||Zr===void 0||Zr.completeSpan({message:"Error in enableWebcam() :: ".concat(xe.t0.message),span:Ut,status:2}),xe.t0.name!=="SecurityError"){xe.next=63;break}Bn=gr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,Zn=Bn.message,this._emitError(Bn),(Wr=this._videosdkLogs)===null||Wr===void 0||Wr.pushLogs({logText:Zn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(On=this._openTelemetry)===null||On===void 0||On.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Zn),span:enableMicSpan,status:2}),xe.next=97;break;case 63:if(xe.t0.name!=="DOMException"){xe.next=71;break}Hn=gr.q.ERROR_RN_CAMERA_NOT_FOUND,es=Hn.message,this._emitError(Hn),(Or=this._videosdkLogs)===null||Or===void 0||Or.pushLogs({logText:es,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(jn=this._openTelemetry)===null||jn===void 0||jn.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(es),span:enableMicSpan,status:2}),xe.next=97;break;case 71:if(!(xe.t0 instanceof DOMException)){xe.next=94;break}xe.t1=xe.t0.name,xe.next=xe.t1==="NotAllowedError"?75:xe.t1==="NotReadableError"?78:xe.t1==="NotFoundError"?81:88;break;case 75:return en=this.handleNotAllowedError(xe.t0,this._openTelemetry,this._videosdkLogs,Ne,"video"),this._emitError(en),xe.abrupt("break",92);case 78:return Ss=this.handleNotReadableError(xe.t0,this._openTelemetry,this._videosdkLogs,Ne,"video"),this._emitError(Ss),xe.abrupt("break",92);case 81:return Un=gr.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Un=gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),er=Un.message,this._emitError(Un),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:er,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(er),span:Ne,status:2}),xe.abrupt("break",92);case 88:return ts="An error occurred in creating video track, ".concat(xe.t0.message),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:xe.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(ts)},dashboardLog:!0}),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Error in enableWebcam() :: ".concat(ts),span:Ne,status:2}),xe.abrupt("break",92);case 92:xe.next=97;break;case 94:yn="An error occurred in creating video track, ".concat(xe.t0.message),(St=this._videosdkLogs)===null||St===void 0||St.pushLogs({logText:xe.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(yn)},dashboardLog:!0}),(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({message:"Error in enableWebcam() :: ".concat(yn),span:Ne,status:2});case 97:return xe.abrupt("return");case 98:xe.next=105;break;case 100:return Ue={label:"external video"},xe.next=103,this._getExternalVideoStream();case 103:mn=xe.sent,We=mn.getVideoTracks()[0].clone();case 105:if(bn=(vt=this._openTelemetry)===null||vt===void 0?void 0:vt.trace({spanName:"Generating Producer Configuration",span:Ne}),_a={videoGoogleStartBitrate:1e3},!this._forceH264){xe.next=114;break}if(vi=this._mediasoupDevice.rtpCapabilities.codecs.find(function(ve){return ve.mimeType.toLowerCase()==="video/h264"})){xe.next=112;break}throw new Error("The desired H.264 codec and configuration are not supported");case 112:xe.next=119;break;case 114:if(!this._forceVP9){xe.next=119;break}if(vi=this._mediasoupDevice.rtpCapabilities.codecs.find(function(ve){return ve.mimeType.toLowerCase()==="video/vp9"})){xe.next=119;break}throw new Error("The desired VP9 codec and configuration are not supported");case 119:We?(Ai=We.getConstraints(),oa=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",qn=(0,Ko.v7)(!1,Ai.width,Ai.height,{simulcast:fe.multiStream},oa)):this._useSimulcast&&(ca=this._mediasoupDevice.rtpCapabilities.codecs.find(function(ve){return ve.kind==="video"}),qn=this._forceVP9&&vi||ca.mimeType.toLowerCase()==="video/vp9"?Zh:Ev[this._webcam.resolution]),$s={};try{$s={encodings:qn,width:fe?(Ns=We)===null||Ns===void 0?void 0:Ns.getConstraints().width:Gu[Be].width.ideal,height:fe?(ci=We)===null||ci===void 0?void 0:ci.getConstraints().height:Gu[Be].height.ideal}}catch(ve){(Ws=this._videosdkLogs)===null||Ws===void 0||Ws.pushLogs({logText:ve.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(ve.message)},dashboardLog:!0}),console.log(ve)}if((Je=this._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Track Generated with height ".concat($s.height," and width ").concat($s.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify($s)},span:Ne,status:1}),(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:bn,status:1,message:"Producer Configuration Generated"}),bn=(kt=this._openTelemetry)===null||kt===void 0?void 0:kt.trace({spanName:"Creating Webcam Producer",span:Ne}),!this._sendTransport){xe.next=132;break}return xe.next=128,this._sendTransport.produce({track:We,encodings:qn,codecOptions:_a,codec:vi,appData:cs(cs({},$s),{},{isEncrypted:this.isE2EEEnabled}),onRtpSender:function(ve){Ae.e2eeManager&&(ve.senderStreams=ve.createEncodedStreams())}});case 128:this._webcamProducer=xe.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._webcamProducer),xe.next=135;break;case 132:return(Oi=this._videosdkLogs)===null||Oi===void 0||Oi.pushLogs({logText:gr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(gr.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),xe.abrupt("return");case 135:We.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(We.getConstraints().deviceId)),this._webcamProducer?(W=An({id:this._webcamProducer.id,deviceLabel:Ue.label,type:this._getWebcamType(Ue),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer,rtpSender:this._webcamProducer.rtpSender}),Ke.dispatch(W),this._eventEmitter.emit(W.type,W.payload),Z=0,(le=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(ve){try{var J;Ae._stats.producerStats||(Ae._stats.producerStats={}),Ae._stats.producerStats.video||(Ae._stats.producerStats.video=[]),Ae._webcamProducer&&(Ae._latestStats[(J=Ae._webcamProducer)===null||J===void 0?void 0:J.id]=[]),ve.video.forEach(function(he){var Oe;Ae._latestStats[(Oe=Ae._webcamProducer)===null||Oe===void 0?void 0:Oe.id].push(he)}),Z%5==0&&Ae._webcamProducer!=null&&Ae._stats.producerStats.video.push({timestamp:new Date,stats:Ae._latestStats[Ae._webcamProducer.id]}),Z++}catch(he){var X;(X=Ae._videosdkLogs)===null||X===void 0||X.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:he.message}}),console.log("PRODUCER ERROR",he)}},le.start(),this._webcamProducer.observer.on("close",function(){le.stop(),Ae._metrics.removeExistingProbe(le)}),this._webcamProducer.on("transportclose",function(){var ve,J=Ln(Ae._webcamProducer.id);Ke.dispatch(J),Ae._eventEmitter.emit(J.type,J.payload),(ve=Ae._webcamProducer)===null||ve===void 0||ve.close(),Ae._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var ve,J,X=Ae._deviceInfo.sdkType=="react-native"?gr.q.ERROR_RN_CAMERA_TRACK_ENDED:gr.q.ERROR_WEBCAM_TRACK_ENDED;(ve=Ae._videosdkLogs)===null||ve===void 0||ve.pushLogs({logText:X.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(X.message)},dashboardLog:!0}),(J=Ae._openTelemetry)===null||J===void 0||J.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Ne,message:X.message,status:2}),Ke.dispatch(dr({type:"error",text:"Webcam disconnected!"})),Ae.disableWebcam(Ne).catch(function(){})}),(F=this._openTelemetry)===null||F===void 0||F.completeSpan({span:bn,status:1,message:"Webcam Producer Created"}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Ne,status:1,message:"Enable Webcam Successful"})):((ne=this._videosdkLogs)===null||ne===void 0||ne.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(me=this._openTelemetry)===null||me===void 0||me.completeSpan({span:bn,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),xe.next=147;break;case 139:return xe.prev=139,xe.t2=xe.catch(23),(be=this._videosdkLogs)===null||be===void 0||be.pushLogs({logText:xe.t2.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(xe.t2.message)},dashboardLog:!0}),(ke=this._openTelemetry)===null||ke===void 0||ke.completeSpan({span:Ne,status:2,message:"Error in enableWebcam() :: ".concat(xe.t2.message)}),Ke.dispatch(dr({type:"error",text:"Error enabling webcam: ".concat(xe.t2)})),xe.next=146,this._socketRequest("produceError",{mediaType:"video",message:xe.t2.message});case 146:We&&We.stop();case 147:Ke.dispatch(Js(!1));case 148:case"end":return xe.stop()}},re,this,[[23,139],[36,52]])})),function(){return tp.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(re,$,z,H,K){var oe={};return oe=re.message==="Permission denied"||re.message==="Permission dismissed"?K==="video"?gr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:gr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:re.message.includes("The request is not allowed by the user agent")?K==="video"?gr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:gr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:re.message==="Permission denied by system"?K==="video"?gr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:gr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:K==="video"?gr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:gr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,z.pushLogs({logText:oe.message,logType:"ERROR",attributes:{error:"Error in ".concat(K==="video"?"enableWebcam()":"enableMic()"," :: ").concat(re.message)},dashboardLog:!0}),$.completeSpan({message:K==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(oe.message):"Error in enableMic() :: occurred in creating audio track, ".concat(oe.message),span:H,status:2}),oe}},{key:"handleNotReadableError",value:function(re,$,z,H,K){var oe={};return oe=re.message==="Device in use"?K==="video"?gr.q.ERROR_CAMERA_IN_USE:gr.q.ERROR_MICROPHONE_IN_USE:K==="video"?gr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:gr.q.ERROR_MICROPHONE_IN_USE,z.pushLogs({logText:oe.message,logType:"ERROR",attributes:{error:"Error in ".concat(K==="video"?"enableWebcam()":"enableMic()"," :: ").concat(re.message)},dashboardLog:!0}),$.completeSpan({message:K==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(oe.message):"Error in enableMic() :: occurred in creating audio track, ".concat(oe.message),span:H,status:2}),oe}},{key:"createCameraVideoTrack",value:(Ed=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt;return v().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return z=$.cameraId,H=z===void 0?void 0:z,K=$.encoderConfig,oe=K===void 0?void 0:K,fe=$.facingMode,Pe=fe===void 0?void 0:fe,Ne=$.optimizationMode,ft=Ne===void 0?void 0:Ne,Ze=$.multiStream,ht=Ze===void 0||Ze,mt=oe?ra.$.videoProfiles[oe]:ra.$.videoProfiles.h360p_w640p,pe={video:{deviceId:H||void 0,facingMode:Pe||void 0,width:mt.width,height:mt.height,frameRate:mt.frameRate}},it.next=5,(0,pl.lp)(pe);case 5:return gt=it.sent,ft&&(gt.contentHint=ft),gt.encoderConfig=oe||"h360p_w640p",gt.contentHint=ft||"",gt.multiStream=ht,gt.cameraId=H,it.abrupt("return",gt);case 12:case"end":return it.stop()}},re)})),function(re){return Ed.apply(this,arguments)})},{key:"disableWebcam",value:(Vs=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt=arguments;return v().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(H=gt.length>0&&gt[0]!==void 0?gt[0]:void 0,K=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"disableWebcam() Calling",status:1,span:H||null}),Ve.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){it.next=8;break}return(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(fe=this._videosdkLogs)===null||fe===void 0||fe.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),it.abrupt("return");case 8:return Pe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Webcam Producer",span:K,status:1}),this._webcamProducer.close(),Ne=Ln(this._webcamProducer.id),Ke.dispatch(Ne),this._eventEmitter.emit(Ne.type,Ne.payload),it.prev=13,it.next=16,this._socketRequest("closeProducer",{producerId:this._webcamProducer.id});case 16:(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Pe,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Ze=this._openTelemetry)===null||Ze===void 0||Ze.completeSpan({span:K,status:1,message:"Webcam Disabled Successfully"}),it.next=27;break;case 21:it.prev=21,it.t0=it.catch(13),(ht=this._videosdkLogs)===null||ht===void 0||ht.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:it.t0.message},dashboardLog:!0}),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:Pe,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(it.t0)}),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:K,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(it.t0)}),Ke.dispatch(dr({type:"error",text:"Error closing server-side webcam Producer: ".concat(it.t0)}));case 27:case"end":return it.stop()}},re,this,[[13,21]])})),function(){return Vs.apply(this,arguments)})},{key:"getMics",value:(df=(0,u.A)(v().mark(function re(){var $,z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return $=[],H.prev=1,H.next=4,this._updateMics();case 4:this._mics.forEach(function(K,oe){$.push({deviceId:oe,label:K.label})}),H.next=11;break;case 7:H.prev=7,H.t0=H.catch(1),Ve.error("getMics() | Error",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:H.t0.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 11:return H.abrupt("return",$);case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(){return df.apply(this,arguments)})},{key:"changeMic",value:(ep=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it;return v().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeMic() Calling"}),We.prev=1,(0,m.A)($)!="object"){We.next=9;break}return We.next=5,this.disableMic(!0,H);case 5:return We.next=7,this.enableMic($,H);case 7:We.next=27;break;case 9:return Pe=$,We.next=12,this._updateMics();case 12:if(Ne=Array.from(this._mics.keys()),ft=Ne.length,Ze=this._mic.device?this._mic.device.deviceId:void 0,Pe!=null&&Pe!=null?ht=Ne.indexOf(Pe):(ht=Ne.indexOf(Ze))<ft-1?ht++:ht=0,this._mic.device=this._mics.get(Ne[ht]),mt=(K=this._openTelemetry)===null||K===void 0?void 0:K.trace({spanName:"Getting Selected Mic",span:H,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){We.next=21;break}throw(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return We.next=23,this.disableMic(!0,H);case 23:return We.next=25,this.enableMic(void 0,H);case 25:(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:mt,status:1,message:"Done"}),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:H,status:1,message:"changeMic() Ending"});case 27:We.next=33;break;case 29:We.prev=29,We.t0=We.catch(1),(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:H,status:2,message:"changeMic() | Error ".concat(We.t0)}),(it=this._videosdkLogs)===null||it===void 0||it.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:We.t0.message}});case 33:case"end":return We.stop()}},re,this,[[1,29]])})),function(re){return ep.apply(this,arguments)})},{key:"getWebcams",value:(lf=(0,u.A)(v().mark(function re(){var $,z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return $=[],H.prev=1,H.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(K,oe){$.push({deviceId:oe,label:K.label,facingMode:K.facing||"environment"})}),H.next=11;break;case 7:H.prev=7,H.t0=H.catch(1),Ve.error("getWebcams() | failed %o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:H.t0.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 11:return H.abrupt("return",$);case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(){return lf.apply(this,arguments)})},{key:"replaceWebcamStream",value:(xl=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._webcamProducer){H.next=7;break}return z=$.getVideoTracks()[0],H.next=4,this._webcamProducer.replaceTrack({track:z});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),H.next=11;break;case 7:return H.next=9,this.disableWebcam();case 9:return H.next=11,this.enableWebcam($);case 11:case"end":return H.stop()}},re,this)})),function(re){return xl.apply(this,arguments)})},{key:"changeWebcam",value:(Zu=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it;return v().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"changeWebcam() Calling"}),Ke.dispatch(Js(!0)),(0,m.A)($)!=="object"){We.next=17;break}return We.prev=3,We.next=6,this.disableWebcam(H);case 6:return We.next=8,this.enableWebcam($,H);case 8:We.next=15;break;case 10:We.prev=10,We.t0=We.catch(3),Ve.error("changeWebcam() | failed: %o",We.t0),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify($),error:We.t0.message}}),Ke.dispatch(dr({type:"error",text:"Could not change webcam: ".concat(We.t0)}));case 15:We.next=46;break;case 17:return We.prev=17,We.next=20,this._updateWebcams(H);case 20:if(Ne=Array.from(this._webcams.keys()),ft=Ne.length,Ze=this._webcam.device?this._webcam.device.deviceId:void 0,$!=null&&$!=null?ht=Ne.indexOf($):(ht=Ne.indexOf(Ze))<ft-1?ht++:ht=0,this._webcam.device=this._webcams.get(Ne[ht]),Ve.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",mt=(oe=this._openTelemetry)===null||oe===void 0?void 0:oe.trace({spanName:"Getting Selected Webcam",span:H,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){We.next=31;break}throw(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return We.next=33,this.disableWebcam(H);case 33:return We.next=35,this.enableWebcam(void 0,H);case 35:return(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:mt,status:1,message:"Done"}),(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:H,status:1,message:"changeWebcam() Ending"}),We.abrupt("return");case 40:We.prev=40,We.t1=We.catch(17),Ve.error("changeWebcam() | failed: %o",We.t1),(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify($),error:We.t1.message}}),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:H,status:2,message:"Could not change webcam ".concat(We.t1)}),Ke.dispatch(dr({type:"error",text:"Could not change webcam: ".concat(We.t1)}));case 46:Ke.dispatch(Js(!1));case 47:case"end":return We.stop()}},re,this,[[3,10],[17,40]])})),function(re){return Zu.apply(this,arguments)})},{key:"changeWebcamResolution",value:(_l=(0,u.A)(v().mark(function re(){var $,z,H,K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:Ve.debug("changeWebcamResolution()"),Ke.dispatch(Js(!0)),oe.prev=2,oe.t0=this._webcam.resolution,oe.next=oe.t0==="qvga"?6:oe.t0==="vga"?8:oe.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",oe.abrupt("break",13);case 8:return this._webcam.resolution="hd",oe.abrupt("break",13);case 10:return this._webcam.resolution="qvga",oe.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return Ve.debug("changeWebcamResolution() | calling getUserMedia()"),oe.prev=14,oe.next=17,navigator.mediaDevices.getUserMedia({video:cs({deviceId:{exact:this._webcam.device.deviceId}},Gu[this._webcam.resolution])});case 17:$=oe.sent,oe.next=25;break;case 20:return oe.prev=20,oe.t1=oe.catch(14),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(oe.t1)}}),oe.t1.message==="Permission denied"||oe.t1.name==="NotAllowedError"?this._emitError(gr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(gr.q.ERROR_GET_VIDEO_MEDIA),oe.abrupt("return");case 25:return H=$.getVideoTracks()[0],oe.next=28,this._webcamProducer.replaceTrack({track:H});case 28:Ke.dispatch(Ys(this._webcamProducer.id,H)),oe.next=36;break;case 31:oe.prev=31,oe.t2=oe.catch(2),Ve.error("changeWebcamResolution() | failed: %o",oe.t2),(K=this._videosdkLogs)===null||K===void 0||K.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:oe.t2.message}}),Ke.dispatch(dr({type:"error",text:"Could not change webcam resolution: ".concat(oe.t2)}));case 36:Ke.dispatch(Js(!1));case 37:case"end":return oe.stop()}},re,this,[[2,31],[14,20]])})),function(){return _l.apply(this,arguments)})},{key:"enableShare",value:(Xu=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt,Je,yt,kt,It,Et,bt,sr,Bt,Ut,Ar,kn,Zr,Wr,On,Bn,Zn,Or,jn,Hn,es,en,Ss,Un,er=this,ts=arguments;return v().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:if(z=ts.length>0&&ts[0]!==void 0?ts[0]:void 0,H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"enableShare() Calling ".concat(z?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:z?JSON.stringify(z):"Not Specify Custom Track"}}),Ve.debug("enableShare()"),!this._shareProducer){St.next=6;break}return(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:H,status:2,message:"Screen Share Producer found"}),St.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){St.next=10;break}return(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:2,message:"enableShare() | cannot produce video"}),Ve.error("enableShare() | cannot produce video"),St.abrupt("return");case 10:if(Ne=[],Ke.dispatch(wa(!0)),St.prev=12,Ve.debug("enableShare() | calling getUserMedia()"),it=(ft=this._openTelemetry)===null||ft===void 0?void 0:ft.trace({spanName:"Creating Track",span:H}),!z||!z.active){St.next=21;break}fe=z.getVideoTracks()[0],Pe=z.getAudioTracks()[0],z.multiStream?(We=fe.getConstraints(),Ue=We.height,Be=We.frameRate,vt=ra.$.screenShareProfiles["h".concat(Ue,"p_").concat(Be,"fps")],Je=[{maxBitrate:vt.bitrates.high,maxFramerate:Be,scalabilityMode:"S3T3",dtx:!0},{maxBitrate:vt.bitrates.medium,maxFramerate:Be,scalabilityMode:"S2T3",dtx:!0},{maxBitrate:vt.bitrates.low,maxFramerate:Be,scalabilityMode:"S1T3",dtx:!0}],Ne=Je):Ne=ia,St.next=41;break;case 21:return St.prev=21,St.next=24,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 24:kt=St.sent,St.next=33;break;case 27:return St.prev=27,St.t0=St.catch(21),(It=this._videosdkLogs)===null||It===void 0||It.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(St.t0)}}),(Et=this._openTelemetry)===null||Et===void 0||Et.completeSpan({span:H,status:2,message:"Error in getDisplayMedia for screen share ".concat(St.t0)}),St.t0.message==="Permission denied"||St.t0.name==="NotAllowedError"?this._emitError(gr.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(gr.q.ERROR_GET_DISPLAY_MEDIA),St.abrupt("return");case 33:if(kt){St.next=37;break}return Ke.dispatch(wa(!0)),(bt=this._openTelemetry)===null||bt===void 0||bt.completeSpan({span:H,status:2,message:"Stream not found"}),St.abrupt("return");case 37:fe=kt.getVideoTracks()[0],Pe=kt.getAudioTracks()[0],Ne=ia,(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({message:"Track Generated with height ".concat(fe.getSettings().height," and width ").concat(fe.getSettings().width),span:it,status:1});case 41:if(sr=(Ze=this._openTelemetry)===null||Ze===void 0?void 0:Ze.trace({spanName:"Generating Producer Configuration",span:H}),Ut={videoGoogleStartBitrate:1e3},!this._forceH264){St.next=50;break}if(Bt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(mr){return mr.mimeType.toLowerCase()==="video/h264"})){St.next=48;break}throw(Ar=this._videosdkLogs)===null||Ar===void 0||Ar.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 48:St.next=55;break;case 50:if(!this._forceVP9){St.next=55;break}if(Bt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(mr){return mr.mimeType.toLowerCase()==="video/vp9"})){St.next=55;break}throw(kn=this._videosdkLogs)===null||kn===void 0||kn.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 55:return(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:sr,status:1,message:"Producer Configuration Generated"}),sr=(mt=this._openTelemetry)===null||mt===void 0?void 0:mt.trace({spanName:"Creating Share Producer",span:H}),St.next=59,this._sendTransport.produce({track:fe,encodings:Ne.length>0?Ne:ia,codecOptions:Ut,codec:Bt,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(mr){er.e2eeManager&&(mr.senderStreams=mr.createEncodedStreams())}});case 59:if(this._shareProducer=St.sent,this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareProducer),Zr=An({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareProducer,rtpSender:this._shareProducer.rtpSender}),Ke.dispatch(Zr),this._eventEmitter.emit(Zr.type,Zr.payload),this._shareProducer.on("transportclose",function(){var mr,yn=Ln(er._shareProducer.id);Ke.dispatch(yn),er._eventEmitter.emit(yn.type,yn.payload),(mr=er._shareProducer)===null||mr===void 0||mr.close(),er._shareProducer=null}),this._shareProducer.on("trackended",function(){var mr;(mr=er._openTelemetry)===null||mr===void 0||mr.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:H,status:2}),Ke.dispatch(dr({type:"error",text:"Share disconnected!"})),er.disableShare().catch(function(){})}),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:sr,status:1,message:"Share Producer Created"}),!Pe){St.next=88;break}return St.prev=68,Bn={opusStereo:1,opusDtx:1},sr=(Wr=this._openTelemetry)===null||Wr===void 0?void 0:Wr.trace({spanName:"Creating Share Audio Producer",span:H}),St.next=73,this._sendTransport.produce({track:Pe,codecOptions:Bn,appData:{share:!0,isEncrypted:this.isE2EEEnabled},onRtpSender:function(mr){er.e2eeManager&&(mr.senderStreams=mr.createEncodedStreams())}});case 73:this._shareAudioProducer=St.sent,Zn=An({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0,isEncrypted:this.isE2EEEnabled},instance:this._shareAudioProducer,rtpSender:this._shareAudioProducer.rtpSender}),Ke.dispatch(Zn),this.e2eeManager&&this.e2eeManager.emit("NEW_PRODUCER",this._shareAudioProducer),this._eventEmitter.emit(Zn.type,Zn.payload),this._shareAudioProducer.on("transportclose",function(){var mr,yn=Ln(er._shareAudioProducer.id);Ke.dispatch(yn),er._eventEmitter.emit(yn.type,yn.payload),(mr=er._shareAudioProducer)===null||mr===void 0||mr.close(),er._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var mr;(mr=er._openTelemetry)===null||mr===void 0||mr.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:H,status:2}),Ke.dispatch(dr({type:"error",text:"Share disconnected!"}))}),(On=this._openTelemetry)===null||On===void 0||On.completeSpan({span:sr,status:1,message:"Share Audio Producer Created"}),St.next=88;break;case 83:return St.prev=83,St.t1=St.catch(68),St.next=87,this._socketRequest("produceError",{mediaType:"shareAudio",message:St.t1.message});case 87:(Or=this._videosdkLogs)===null||Or===void 0||Or.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:St.t1.message}});case 88:(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:H,status:1,message:"Enable Share Successful"}),St.next=102;break;case 91:return St.prev=91,St.t2=St.catch(12),Ve.error("enableShare() | failed:%o",St.t2),(jn=this._openTelemetry)===null||jn===void 0||jn.completeSpan({span:H,status:2,attributes:{error:St.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",St.t2.message),(Hn=this._videosdkLogs)===null||Hn===void 0||Hn.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:St.t2.message}}),St.t2.name!=="NotAllowedError"&&Ke.dispatch(dr({type:"error",text:"Error sharing: ".concat(St.t2)})),St.next=100,this._socketRequest("produceError",{mediaType:"share",message:St.t2.message});case 100:fe&&fe.stop(),Pe&&Pe.stop();case 102:Ke.dispatch(wa(!1)),this._shareProducer&&(es=0,(en=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(mr){try{var yn;er._stats.producerStats||(er._stats.producerStats={}),er._stats.producerStats.share||(er._stats.producerStats.share=[]),er._shareProducer&&(er._latestStats[(yn=er._shareProducer)===null||yn===void 0?void 0:yn.id]=[]),mr.video.forEach(function(bn){var qn;er._shareProducer&&er._latestStats[(qn=er._shareProducer)===null||qn===void 0?void 0:qn.id].push(bn)}),es%5==0&&er._shareProducer!=null&&er._stats.producerStats.share.push({timestamp:new Date,stats:er._latestStats[er._shareProducer.id]}),es++}catch(bn){var mn;(mn=er._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:bn.message}}),console.log("PRODUCER ERROR",bn)}},en.start(),this._shareProducer.observer.on("close",function(){en.stop(),er._metrics.removeExistingProbe(en)})),this._shareAudioProducer&&(Ss=0,(Un=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(mr){try{var yn;er._stats.producerStats||(er._stats.producerStats={}),er._stats.producerStats.shareAudio||(er._stats.producerStats.shareAudio=[]),er._shareAudioProducer&&(er._latestStats[(yn=er._shareAudioProducer)===null||yn===void 0?void 0:yn.id]=[]),mr.audio.forEach(function(bn){var qn;er._shareAudioProducer&&er._latestStats[(qn=er._shareAudioProducer)===null||qn===void 0?void 0:qn.id].push(bn)}),Ss%5==0&&er._shareAudioProducer!=null&&er._stats.producerStats.shareAudio.push(cs({timestamp:new Date},er._latestStats[er._shareAudioProducer.id]?er._latestStats[er._shareAudioProducer.id][0]:{})),Ss++}catch(bn){var mn;(mn=er._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:bn.message}}),console.log("PRODUCER ERROR",bn)}},Un.start(),this._shareAudioProducer.observer.on("close",function(){Un.stop(),er._metrics.removeExistingProbe(Un)}));case 105:case"end":return St.stop()}},re,this,[[12,91],[21,27],[68,83]])})),function(){return Xu.apply(this,arguments)})},{key:"disableShare",value:(cc=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe;return v().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(Ve.debug("disableShare()"),K=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){gt.next=5;break}return(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:K,status:2,message:"Share Producer Not found"}),gt.abrupt("return");case 5:return fe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Closing Share Producer",span:K,status:1}),this._shareProducer.close(),Pe=Ln(this._shareProducer.id),Ke.dispatch(Pe),this._eventEmitter.emit(Pe.type,Pe.payload),this._shareAudioProducer&&(Ze=(Ne=this._openTelemetry)===null||Ne===void 0?void 0:Ne.trace({spanName:"Closing Share Audio Producer",span:K,status:1}),this._shareAudioProducer.close(),Pe=Ln(this._shareAudioProducer.id),Ke.dispatch(Pe),this._eventEmitter.emit(Pe.type,Pe.payload),(ft=this._openTelemetry)===null||ft===void 0||ft.completeSpan({span:Ze,status:1,message:"Closed Share Audio Producer"})),gt.prev=11,gt.next=14,this._socketRequest("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){gt.next=17;break}return gt.next=17,this._socketRequest("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(ht=this._openTelemetry)===null||ht===void 0||ht.completeSpan({span:fe,status:1,message:"Requested Server to Close Producer"}),gt.next=25;break;case 20:gt.prev=20,gt.t0=gt.catch(11),Ke.dispatch(dr({type:"error",text:"Error closing server-side share Producer: ".concat(gt.t0)})),(mt=this._openTelemetry)===null||mt===void 0||mt.completeSpan({span:K,status:2,message:"Error closing server-side share Producer ".concat(gt.t0)}),(pe=this._videosdkLogs)===null||pe===void 0||pe.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:gt.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:K,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return gt.stop()}},re,this,[[11,20]])})),function(){return cc.apply(this,arguments)})},{key:"enableAudioOnly",value:(Sd=(0,u.A)(v().mark(function re(){var $,z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:Ve.debug("enableAudioOnly()"),Ke.dispatch(Rr(!0)),this.disableWebcam(),$=Pi(this._consumers.values()),K.prev=4,$.s();case 6:if((z=$.n()).done){K.next=13;break}if((H=z.value).kind==="video"){K.next=10;break}return K.abrupt("continue",11);case 10:this._pauseConsumer(H);case 11:K.next=6;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(4),$.e(K.t0);case 18:return K.prev=18,$.f(),K.finish(18);case 21:Ke.dispatch(Tr(!0)),Ke.dispatch(Rr(!1));case 23:case"end":return K.stop()}},re,this,[[4,15,18,21]])})),function(){return Sd.apply(this,arguments)})},{key:"disableAudioOnly",value:(oc=(0,u.A)(v().mark(function re(){var $,z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:Ve.debug("disableAudioOnly()"),Ke.dispatch(Rr(!0)),!this._webcamProducer&&this._produce&&(zi()||{}).webcamEnabled&&this.enableWebcam(),$=Pi(this._consumers.values()),K.prev=4,$.s();case 6:if((z=$.n()).done){K.next=13;break}if((H=z.value).kind==="video"){K.next=10;break}return K.abrupt("continue",11);case 10:this._resumeConsumer(H);case 11:K.next=6;break;case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(4),$.e(K.t0);case 18:return K.prev=18,$.f(),K.finish(18);case 21:Ke.dispatch(Tr(!1)),Ke.dispatch(Rr(!1));case 23:case"end":return K.stop()}},re,this,[[4,15,18,21]])})),function(){return oc.apply(this,arguments)})},{key:"muteAudio",value:(xd=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:Ve.debug("muteAudio()"),Ke.dispatch(an(!0));case 2:case"end":return $.stop()}},re)})),function(){return xd.apply(this,arguments)})},{key:"unmuteAudio",value:(_d=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:Ve.debug("unmuteAudio()"),Ke.dispatch(an(!1));case 2:case"end":return $.stop()}},re)})),function(){return _d.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(wd=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft;return v().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return K=$.iceParameters,oe=$.transportId,fe=$.internalSpan,oe===((z=this._sendTransport)===null||z===void 0?void 0:z.id)&&this._sendTransport.restartIce({iceParameters:K}),oe===((H=this._recvTransport)===null||H===void 0?void 0:H.id)&&this._recvTransport.restartIce({iceParameters:K}),Ze.prev=3,Ze.next=6,this._socketRequest("iceRestarted",{transportId:oe});case 6:(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:fe,status:1,message:"iceRestarted"}),Ze.next=14;break;case 9:Ze.prev=9,Ze.t0=Ze.catch(3),(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:fe,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Ze.t0)}),(ft=this._videosdkLogs)===null||ft===void 0||ft.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Ze.t0.message}}),Ke.dispatch(dr({type:"error",text:"ICE restart failed: ".concat(Ze.t0)}));case 14:case"end":return Ze.stop()}},re,this,[[3,9]])})),function(re){return wd.apply(this,arguments)})},{key:"restartIce",value:(wl=(0,u.A)(v().mark(function re(){var $,z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Ve.debug("restartIce()"),Ke.dispatch(Ts(!0)),K.prev=2,!this._sendTransport){K.next=9;break}return K.next=6,this._socketRequest("restartIce",{transportId:this._sendTransport.id});case 6:return $=K.sent,K.next=9,this._sendTransport.restartIce({iceParameters:$});case 9:if(!this._recvTransport){K.next=15;break}return K.next=12,this._socketRequest("restartIce",{transportId:this._recvTransport.id});case 12:return z=K.sent,K.next=15,this._recvTransport.restartIce({iceParameters:z});case 15:Ke.dispatch(dr({text:"ICE restarted"})),K.next=23;break;case 18:K.prev=18,K.t0=K.catch(2),Ve.error("restartIce() | failed:%o",K.t0),Ke.dispatch(dr({type:"error",text:"ICE restart failed: ".concat(K.t0)})),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:K.t0.message}});case 23:Ke.dispatch(Ts(!1));case 24:case"end":return K.stop()}},re,this,[[2,18]])})),function(){return wl.apply(this,arguments)})},{key:"_socketRequest",value:(yo=(0,u.A)(v().mark(function re($){var z,H=this,K=arguments;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return z=K.length>1&&K[1]!==void 0?K[1]:{},oe.abrupt("return",new Promise(function(fe,Pe){H._webSocket.emit("request",{method:$,request:!0,data:z},function(Ne){Ne!=null&&Ne.error?Pe(new Error(Ne.error)):fe(Ne.data)})}));case 2:case"end":return oe.stop()}},re)})),function(re){return yo.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(ac=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Ve.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",$),H.prev=1,!this._webcamProducer){H.next=7;break}return H.next=5,this._webcamProducer.setMaxSpatialLayer($);case 5:H.next=10;break;case 7:if(!this._shareProducer){H.next=10;break}return H.next=10,this._shareProducer.setMaxSpatialLayer($);case 10:H.next=17;break;case 12:H.prev=12,H.t0=H.catch(1),Ve.error("setMaxSendingSpatialLayer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error setting max sending video spatial layer: ".concat(H.t0)}));case 17:case"end":return H.stop()}},re,this,[[1,12]])})),function(re){return ac.apply(this,arguments)})},{key:"setWebcamQuality",value:(vo=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(this._webcamProducer){K.next=2;break}return K.abrupt("return");case 2:if(z=this._webcam.resolution,H=Ku[z][$].s,this._webcamProducer.maxSpatialLayer!=H){K.next=6;break}return K.abrupt("return");case 6:return K.next=8,this._webcamProducer.setMaxSpatialLayer(H);case 8:case"end":return K.stop()}},re,this)})),function(re){return vo.apply(this,arguments)})},{key:"setConsumerScreenShareQuality",value:(aa=(0,u.A)(v().mark(function re($,z){var H,K,oe,fe,Pe,Ne;return v().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return fe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:'Setting "'.concat(z,'" Quality for Screen Share')}),Ne=(Pe={high:{spatialLayer:2,temporalLayer:2},med:{spatialLayer:1,temporalLayer:2},low:{spatialLayer:0,temporalLayer:2}})[z]||Pe.high,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:fe,attributes:{selectedQuality:Ne},status:1}),ft.next=6,this.setConsumerPreferredLayers($,Ne.spatialLayer,Ne.temporalLayer);case 6:(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Done",span:fe,status:1});case 7:case"end":return ft.stop()}},re,this)})),function(re,$){return aa.apply(this,arguments)})},{key:"setConsumerQuality",value:(ic=(0,u.A)(v().mark(function re($,z){var H,K,oe,fe,Pe,Ne,ft;return v().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return fe=this._webcam.resolution,Pe=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:'Setting "'.concat(z,'" Quality')}),Ne=Ku[fe][z].s,ft=Ku[fe][z].t,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Pe,attributes:{spatialLayers:JSON.parse(Ne),temporalLayers:JSON.parse(ft)},status:1}),Ze.next=7,this.setConsumerPreferredLayers($,Ne,ft);case 7:(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({message:"Done",span:Pe,status:1});case 8:case"end":return Ze.stop()}},re,this)})),function(re,$){return ic.apply(this,arguments)})},{key:"setViewPort",value:(sc=(0,u.A)(v().mark(function re($,z,H){var K,oe,fe,Pe;return v().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(this._consumers.get($.id)){Ne.next=2;break}return Ne.abrupt("return");case 2:if(K=(0,Ko.ed)(this._consumers.get($.id),z,H),oe=K.consumerId,fe=K.newPreferredSpatialLayer,Pe=K.newPreferredTemporalLayer,fe!==$.preferredSpatialLayer||Pe!==$.preferredTemporalLayer){Ne.next=5;break}return Ne.abrupt("return");case 5:if(!oe){Ne.next=8;break}return Ne.next=8,this.setConsumerPreferredLayers(oe,fe,Pe);case 8:case"end":return Ne.stop()}},re,this)})),function(re,$,z){return sc.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(nc=(0,u.A)(v().mark(function re($,z,H){var K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return Ve.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",$,z,H),fe.prev=1,(K=this._consumers.get($)).spatialLayers>1&&(K.preferredSpatialLayer=z,K.preferredTemporalLayer=H),fe.next=6,this._socketRequest("setConsumerPreferredLayers",{consumerId:$,spatialLayer:z,temporalLayer:H});case 6:Ke.dispatch(nl($,z,H)),fe.next=14;break;case 9:fe.prev=9,fe.t0=fe.catch(1),Ve.error("setConsumerPreferredLayers() | failed:%o",fe.t0),(oe=this._videosdkLogs)===null||oe===void 0||oe.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:fe.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error setting Consumer preferred layers: ".concat(fe.t0)}));case 14:case"end":return fe.stop()}},re,this,[[1,9]])})),function(re,$,z){return nc.apply(this,arguments)})},{key:"setConsumerPriority",value:(bd=(0,u.A)(v().mark(function re($,z){var H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return Ve.debug("setConsumerPriority() [consumerId:%s, priority:%d]",$,z),K.prev=1,K.next=4,this._socketRequest("setConsumerPriority",{consumerId:$,priority:z});case 4:Ke.dispatch(Wo($,z)),K.next=12;break;case 7:K.prev=7,K.t0=K.catch(1),Ve.error("setConsumerPriority() | failed:%o",K.t0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:K.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error setting Consumer priority: ".concat(K.t0)}));case 12:case"end":return K.stop()}},re,this,[[1,7]])})),function(re,$){return bd.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(yd=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Ve.debug("requestConsumerKeyFrame() [consumerId:%s]",$),H.prev=1,H.next=4,this._socketRequest("requestConsumerKeyFrame",{consumerId:$});case 4:Ke.dispatch(dr({text:"Keyframe requested for video consumer"})),H.next=12;break;case 7:H.prev=7,H.t0=H.catch(1),Ve.error("requestConsumerKeyFrame() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error requesting key frame for Consumer: ".concat(H.t0)}));case 12:case"end":return H.stop()}},re,this,[[1,7]])})),function(re){return yd.apply(this,arguments)})},{key:"enableChatDataProducer",value:(go=(0,u.A)(v().mark(function re(){var $,z=this;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Ve.debug("enableChatDataProducer()"),this._useDataChannel){H.next=3;break}return H.abrupt("return");case 3:return H.prev=3,H.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=H.sent,Ke.dispatch(Hi({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){z._chatDataProducer=null}),this._chatDataProducer.on("open",function(){Ve.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){Ve.error('chat DataProducer "close" event'),z._chatDataProducer=null,Ke.dispatch(dr({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(K){Ve.error('chat DataProducer "error" event:%o',K),Ke.dispatch(dr({type:"error",text:"Chat DataProducer error: ".concat(K)}))}),this._chatDataProducer.on("bufferedamountlow",function(){Ve.debug('chat DataProducer "bufferedamountlow" event')}),H.next=21;break;case 15:throw H.prev=15,H.t0=H.catch(3),Ve.error("enableChatDataProducer() | failed:%o",H.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error enabling chat DataProducer: ".concat(H.t0)})),H.t0;case 21:case"end":return H.stop()}},re,this,[[3,15]])})),function(){return go.apply(this,arguments)})},{key:"enableBotDataProducer",value:(vd=(0,u.A)(v().mark(function re(){var $,z=this;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Ve.debug("enableBotDataProducer()"),this._useDataChannel){H.next=3;break}return H.abrupt("return");case 3:return H.prev=3,H.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=H.sent,Ke.dispatch(Hi({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){z._botDataProducer=null}),this._botDataProducer.on("open",function(){Ve.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){Ve.error('bot DataProducer "close" event'),z._botDataProducer=null,Ke.dispatch(dr({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(K){Ve.error('bot DataProducer "error" event:%o',K),Ke.dispatch(dr({type:"error",text:"Bot DataProducer error: ".concat(K)}))}),this._botDataProducer.on("bufferedamountlow",function(){Ve.debug('bot DataProducer "bufferedamountlow" event')}),H.next=21;break;case 15:throw H.prev=15,H.t0=H.catch(3),Ve.error("enableBotDataProducer() | failed:%o",H.t0),($=this._videosdkLogs)===null||$===void 0||$.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error enabling bot DataProducer: ".concat(H.t0)})),H.t0;case 21:case"end":return H.stop()}},re,this,[[3,15]])})),function(){return vd.apply(this,arguments)})},{key:"sendChatMessage",value:(bl=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug('sendChatMessage() [text:"%s]',$),this._chatDataProducer){z.next=4;break}return Ke.dispatch(dr({type:"error",text:"No chat DataProducer"})),z.abrupt("return");case 4:try{this._chatDataProducer.send($)}catch(H){Ve.error("chat DataProducer.send() failed:%o",H),Ke.dispatch(dr({type:"error",text:"chat DataProducer.send() failed: ".concat(H)}))}case 5:case"end":return z.stop()}},re,this)})),function(re){return bl.apply(this,arguments)})},{key:"sendBotMessage",value:(gd=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug('sendBotMessage() [text:"%s]',$),this._botDataProducer){z.next=4;break}return Ke.dispatch(dr({type:"error",text:"No bot DataProducer"})),z.abrupt("return");case 4:try{this._botDataProducer.send($)}catch(H){Ve.error("bot DataProducer.send() failed:%o",H),Ke.dispatch(dr({type:"error",text:"bot DataProducer.send() failed: ".concat(H)}))}case 5:case"end":return z.stop()}},re,this)})),function(re){return gd.apply(this,arguments)})},{key:"changeDisplayName",value:(md=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Ve.debug('changeDisplayName() [displayName:"%s"]',$),os({displayName:$}),z.prev=2,z.next=5,this._socketRequest("changeDisplayName",{displayName:$});case 5:this._displayName=$,Ke.dispatch(fn($)),Ke.dispatch(dr({text:"Display name changed"})),z.next=15;break;case 10:z.prev=10,z.t0=z.catch(2),Ve.error("changeDisplayName() | failed: %o",z.t0),Ke.dispatch(dr({type:"error",text:"Could not change display name: ".concat(z.t0)})),Ke.dispatch(fn());case 15:case"end":return z.stop()}},re,this,[[2,10]])})),function(re){return md.apply(this,arguments)})},{key:"openConnection",value:(fd=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=$.roomId,H=$.payload,K.next=3,this._socketRequest("openConnection",{roomId:z,payload:H}).catch(function(oe){throw new Error(oe)});case 3:case"end":return K.stop()}},re,this)})),function(re){return fd.apply(this,arguments)})},{key:"closeConnection",value:(yl=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this._socketRequest("closeConnection",{roomId:$});case 2:case"end":return z.stop()}},re,this)})),function(re){return yl.apply(this,arguments)})},{key:"switchPeerRoom",value:(vl=(0,u.A)(v().mark(function re($){var z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return z=$.peerId,H=$.roomId,K=$.payload,oe=$.token,fe.next=3,this._socketRequest("switchPeerRoom",{roomId:H,peerId:z,payload:K,token:oe});case 3:case"end":return fe.stop()}},re,this)})),function(re){return vl.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(gl=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe;return v().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return z=$.roomId,H=$.connectionRoomId,K=$.peerId,oe=$.payload,fe=$.token,Pe.next=3,this._socketRequest("connectionSwitchPeerRoom",{roomId:z,connectionRoomId:H,peerId:K,payload:oe,token:fe});case 3:case"end":return Pe.stop()}},re,this)})),function(re){return gl.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(cf=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return z=$.roomId,H=$.message,K.next=3,this._socketRequest("connectionSendChatMessage",{roomId:z,message:H});case 3:case"end":return K.stop()}},re,this)})),function(re){return cf.apply(this,arguments)})},{key:"connectionEndMeeting",value:(of=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=$.roomId,H.next=3,this._socketRequest("connectionCloseRoom",{roomId:z});case 3:case"end":return H.stop()}},re,this)})),function(re){return of.apply(this,arguments)})},{key:"pubsubPublish",value:(af=(0,u.A)(v().mark(function re($,z,H,K){var oe,fe,Pe,Ne,ft,Ze;return v().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(ht.prev=0,H!=null&&H.sendOnly){if(oe=H.sendOnly,fe=[],oe){Pe=Pi(oe);try{for(Pe.s();!(Ne=Pe.n()).done;)(ft=Ne.value)&&fe.push(ft.toString())}catch(mt){Pe.e(mt)}finally{Pe.f()}}H.sendOnly=fe}return ht.next=4,this._socketRequest("pubsubPublish",{topic:$,message:z,options:H,payload:K});case 4:ht.next=10;break;case 6:ht.prev=6,ht.t0=ht.catch(0),(Ze=this._videosdkLogs)===null||Ze===void 0||Ze.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:ht.t0.message}}),Ve.error("pubsubPublish() | failed: %o",ht.t0);case 10:case"end":return ht.stop()}},re,this,[[0,6]])})),function(re,$,z,H){return af.apply(this,arguments)})},{key:"pubsubSubscribe",value:(sf=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return K.prev=2,K.next=5,this._socketRequest("pubsubSubscribe",{topic:$});case 5:return z=K.sent,K.abrupt("return",z);case 9:K.prev=9,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("pubsubSubscribe() | failed: %o",K.t0);case 13:case"end":return K.stop()}},re,this,[[2,9]])})),function(re){return sf.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(nf=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!this._closed){K.next=2;break}return K.abrupt("return");case 2:return K.prev=2,K.next=5,this._socketRequest("pubsubUnsubscribe",{topic:$});case 5:(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat($),logType:"INFO"}),K.next=12;break;case 8:K.prev=8,K.t0=K.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:K.t0.message}}),Ve.error("pubsubUnsubscribe() | failed: %o",K.t0);case 12:case"end":return K.stop()}},re,this,[[2,8]])})),function(re){return nf.apply(this,arguments)})},{key:"closeRoom",value:(rf=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,this._socketRequest("closeRoom",{});case 2:case"end":return $.stop()}},re,this)})),function(){return rf.apply(this,arguments)})},{key:"removePeer",value:(tf=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Removing peer ".concat($),status:1}),$!=null){H.next=3;break}return H.abrupt("return");case 3:return H.next=5,this._socketRequest("removePeer",{peerId:$});case 5:case"end":return H.stop()}},re,this)})),function(re){return tf.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(ef=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getSendTransportRemoteStats()"),this._sendTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return $.stop()}},re,this)})),function(){return ef.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(Qu=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getRecvTransportRemoteStats()"),this._recvTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._socketRequest("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return $.stop()}},re,this)})),function(){return Qu.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Ju=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getAudioRemoteStats()"),$=this._micProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[$.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return Ju.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(ml=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getVideoRemoteStats()"),$=this._webcamProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[$.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return ml.apply(this,arguments)})},{key:"getShareRemoteStats",value:(Ps=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getVideoRemoteStats()"),$=this._shareProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._latestStats[$.id]);case 5:case"end":return z.stop()}},re,this)})),function(){return Ps.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(Jt=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($=this._shareAudioProducer){z.next=3;break}return z.abrupt("return");case 3:return z.abrupt("return",this._latestStats[$.id]);case 4:case"end":return z.stop()}},re,this)})),function(){return Jt.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(Yu=(0,u.A)(v().mark(function re($){var z,H;return v().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Ve.debug("getConsumerRemoteStats()"),z=this._consumers.get($)){K.next=4;break}return K.abrupt("return");case 4:return this._latestStats[$]&&(this._latestStats[$][0].currentSpatialLayer=z.currentSpatialLayer,this._latestStats[$][0].currentTemporalLayer=z.currentTemporalLayer,this._latestStats[$][0].preferredSpatialLayer=z.preferredSpatialLayer,this._latestStats[$][0].preferredTemporalLayer=z.preferredTemporalLayer),H=z.track.id.replace(/[{}]/g,""),K.abrupt("return",this._latestStats[H]);case 7:case"end":return K.stop()}},re,this)})),function(re){return Yu.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(hr=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getChatDataProducerRemoteStats()"),$=this._chatDataProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:$.id}));case 5:case"end":return z.stop()}},re,this)})),function(){return hr.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(rc=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getBotDataProducerRemoteStats()"),$=this._botDataProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataProducerStats",{dataProducerId:$.id}));case 5:case"end":return z.stop()}},re,this)})),function(){return rc.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Ft=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get($)){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",this._socketRequest("getDataConsumerStats",{dataConsumerId:$}));case 5:case"end":return z.stop()}},re,this)})),function(re){return Ft.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Re=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getSendTransportLocalStats()"),this._sendTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._sendTransport.getStats());case 4:case"end":return $.stop()}},re,this)})),function(){return Re.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(gs=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getRecvTransportLocalStats()"),this._recvTransport){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._recvTransport.getStats());case 4:case"end":return $.stop()}},re,this)})),function(){return gs.apply(this,arguments)})},{key:"getAudioLocalStats",value:(on=(0,u.A)(v().mark(function re(){return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ve.debug("getAudioLocalStats()"),this._micProducer){$.next=3;break}return $.abrupt("return");case 3:return $.abrupt("return",this._micProducer.getStats());case 4:case"end":return $.stop()}},re,this)})),function(){return on.apply(this,arguments)})},{key:"getVideoLocalStats",value:(wn=(0,u.A)(v().mark(function re(){var $;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Ve.debug("getVideoLocalStats()"),$=this._webcamProducer||this._shareProducer){z.next=4;break}return z.abrupt("return");case 4:return z.abrupt("return",$.getStats());case 5:case"end":return z.stop()}},re,this)})),function(){return wn.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(ar=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(z=this._consumers.get($)){H.next=3;break}return H.abrupt("return");case 3:return H.abrupt("return",z.getStats());case 4:case"end":return H.stop()}},re,this)})),function(re){return ar.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Pt=(0,u.A)(v().mark(function re($){var z,H,K,oe;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return z=$.uplink,H=$.downlink,K=$.rtt,oe=$.secret,Ve.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",z,H,K),fe.prev=2,fe.next=5,this._socketRequest("applyNetworkThrottle",{uplink:z,downlink:H,rtt:K,secret:oe});case 5:fe.next=11;break;case 7:fe.prev=7,fe.t0=fe.catch(2),Ve.error("applyNetworkThrottle() | failed:%o",fe.t0),Ke.dispatch(dr({type:"error",text:"Error applying network throttle: ".concat(fe.t0)}));case 11:case"end":return fe.stop()}},re,this,[[2,7]])})),function(re){return Pt.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(ct=(0,u.A)(v().mark(function re($){var z,H,K;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return z=$.silent,H=z!==void 0&&z,K=$.secret,Ve.debug("resetNetworkThrottle()"),oe.prev=2,oe.next=5,this._socketRequest("resetNetworkThrottle",{secret:K});case 5:oe.next=10;break;case 7:oe.prev=7,oe.t0=oe.catch(2),H||(Ve.error("resetNetworkThrottle() | failed:%o",oe.t0),Ke.dispatch(dr({type:"error",text:"Error resetting network throttle: ".concat(oe.t0)})));case 10:case"end":return oe.stop()}},re,this,[[2,7]])})),function(re){return ct.apply(this,arguments)})},{key:"createProducerTransport",value:(Yt=(0,u.A)(v().mark(function re($,z){var H,K,oe,fe,Pe,Ne,ft,Ze,ht=this;return v().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:oe=$.id,fe=$.iceParameters,Pe=$.iceCandidates,Ne=$.dtlsParameters,ft=$.sctpParameters,Ze=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Creating Send Transport",span:z||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:oe,iceParameters:fe,iceCandidates:Pe,dtlsParameters:Ne,sctpParameters:ft,iceServers:this._iceServers}),this._sendTransport.on("connect",function(pe,gt,it){var We,Ue=pe.dtlsParameters;(We=ht._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Ze,status:1}),ht._socketRequest("connectWebRtcTransport",{transportId:ht._sendTransport.id,dtlsParameters:Ue}).then(function(){gt()}).catch(function(Be){it(Be)})}),this._sendTransport.on("produce",function(){var pe=(0,u.A)(v().mark(function gt(it,We,Ue){var Be,vt,Je,yt,kt,It,Et;return v().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return Be=it.kind,vt=it.rtpParameters,Je=it.appData,bt.prev=1,(yt=ht._openTelemetry)===null||yt===void 0||yt.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Ze,status:1}),bt.next=5,ht._socketRequest("produce",{transportId:ht._sendTransport.id,kind:Be,rtpParameters:vt,appData:Je});case 5:kt=bt.sent,It=kt.id,We({id:It}),bt.next=14;break;case 10:bt.prev=10,bt.t0=bt.catch(1),(Et=ht._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:bt.t0.message}}),Ue(bt.t0);case 14:case"end":return bt.stop()}},gt,null,[[1,10]])}));return function(gt,it,We){return pe.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var pe=(0,u.A)(v().mark(function gt(it,We,Ue){var Be,vt,Je,yt,kt,It,Et;return v().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return Be=it.sctpStreamParameters,vt=it.label,Je=it.protocol,yt=it.appData,bt.prev=1,bt.next=4,ht._socketRequest("produceData",{transportId:ht._sendTransport.id,sctpStreamParameters:Be,label:vt,protocol:Je,appData:yt});case 4:kt=bt.sent,It=kt.id,We({id:It}),bt.next=13;break;case 9:bt.prev=9,bt.t0=bt.catch(1),(Et=ht._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:bt.t0.message}}),Ue(bt.t0);case 13:case"end":return bt.stop()}},gt,null,[[1,9]])}));return function(gt,it,We){return pe.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(){var pe=(0,u.A)(v().mark(function gt(it){var We,Ue,Be,vt;return v().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.t0=Array,Je.next=3,ht._sendTransport.getStats();case 3:Je.t1=Je.sent,(Ue=Je.t0.from.call(Je.t0,Je.t1).filter(function(yt){var kt=(0,y.A)(yt,2)[1];return kt.type==="local-candidate"||kt.type==="remote-candidate"}).map(function(yt){return(0,y.A)(yt,2)[1]})).length>0&&((Be=ht._videosdkLogs)===null||Be===void 0||Be.pushLogs({logText:'Send Trasnport State Change "'.concat(it,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(Ue)}})),it==="connected"&&ht.emitMeetingStateChange(Go),(We=ht._openTelemetry)===null||We===void 0||We.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(it),span:Ze,status:1}),it==="failed"&&((vt=ht._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:"ERROR_MEETING_MEDIA_CONNECTION_FAILED",logType:"ERROR",attributes:{error:"Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network."},dashboardLog:!0}),ht.restartIce()),ht._transportState=it;case 10:case"end":return Je.stop()}},gt)}));return function(gt){return pe.apply(this,arguments)}}()),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:Ze,status:1,message:"Send Transport Created Successfully"});case 8:case"end":return mt.stop()}},re,this)})),function(re,$){return Yt.apply(this,arguments)})},{key:"createConsumerTransport",value:(qe=(0,u.A)(v().mark(function re($,z){var H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe=this;return v().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:oe=$.id,fe=$.iceParameters,Pe=$.iceCandidates,Ne=$.dtlsParameters,ft=$.sctpParameters,Ze=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Creating Recieve Transport",span:z||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:oe,iceParameters:fe,iceCandidates:Pe,dtlsParameters:Ne,sctpParameters:ft,iceServers:this._iceServers}),this._recvTransport.on("connect",function(it,We,Ue){var Be,vt=it.dtlsParameters;(Be=pe._openTelemetry)===null||Be===void 0||Be.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Ze,status:1}),pe._socketRequest("connectWebRtcTransport",{transportId:pe._recvTransport.id,dtlsParameters:vt}).then(function(){We()}).catch(function(Je){Ue(Je)})}),this._recvTransport.on("connectionstatechange",function(){var it=(0,u.A)(v().mark(function We(Ue){var Be,vt,Je;return v().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.t0=Array,yt.next=3,pe._recvTransport.getStats();case 3:yt.t1=yt.sent,(vt=yt.t0.from.call(yt.t0,yt.t1).filter(function(kt){var It=(0,y.A)(kt,2)[1];return It.type==="local-candidate"||It.type==="remote-candidate"}).map(function(kt){return(0,y.A)(kt,2)[1]})).length>0&&((Je=pe._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:'Recv Trasnport State Change "'.concat(Ue,'" candidates'),logType:"INFO",attributes:{candidates:JSON.stringify(vt)}})),(Be=pe._openTelemetry)===null||Be===void 0||Be.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Ue),span:Ze,status:1}),Ue==="failed"&&pe.restartIce(),pe._transportState=Ue;case 9:case"end":return yt.stop()}},We)}));return function(We){return it.apply(this,arguments)}}()),ht=0,(mt=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(it){try{var We=function(vt,Je,yt){pe._stats.consumerStats||(pe._stats.consumerStats={});var kt=Je.appData.peerId;pe._stats.consumerStats[kt]||(pe._stats.consumerStats[kt]={}),pe._stats.consumerStats[kt][yt]||(pe._stats.consumerStats[kt][yt]=[]),pe._latestStats[Je.track.id.replace(/[{}]/g,"")]=[vt],ht%5==0&&pe._stats.consumerStats[kt][yt].push(vt)},Ue=function(vt){it[vt].forEach(function(Je){var yt,kt=Pi(pe._consumers);try{for(kt.s();!(yt=kt.n()).done;){var It=(0,y.A)(yt.value,2),Et=(It[0],It[1]);if(Et.track.id.replace(/[{}]/g,"")===Je.trackId){var bt=Et.appData.share?Et.kind==="audio"?"shareAudio":"share":Et.kind;We(Je,Et,bt)}}}catch(sr){kt.e(sr)}finally{kt.f()}})};Ue("audio"),Ue("video"),ht++}catch(vt){var Be;(Be=pe._videosdkLogs)===null||Be===void 0||Be.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:vt.message}}),console.log("CONSUMER CATCH",vt)}},mt.start(),this._recvTransport.observer.on("close",function(){mt.stop(),pe._metrics.removeExistingProbe(mt)}),(K=this._openTelemetry)===null||K===void 0||K.completeSpan({span:Ze,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return gt.stop()}},re,this)})),function(re,$){return qe.apply(this,arguments)})},{key:"emitMeetingStateChange",value:function(re){this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:re}),this._meetingConnectionState=re}},{key:"joinRoom",value:(dt=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt,Je,yt,kt,It,Et,bt,sr,Bt;return v().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ve.debug("joinRoom()"),Ut.prev=1,Pe=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new zt.pF({handlerName:this._handlerName}),Ut.next=6,this._socketRequest("getRouterRtpCapabilities");case 6:return Ne=Ut.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Ne.headerExtensions=(ft=Ne.headerExtensions)===null||ft===void 0?void 0:ft.filter(function(Ar){return Ar.uri!="urn:3gpp:video-orientation"})):Ne.headerExtensions=(Ze=Ne.headerExtensions)===null||Ze===void 0?void 0:Ze.filter(function(Ar){return Ar.uri!="urn:3gpp:video-orientation"}),Ut.next=10,this._mediasoupDevice.load({routerRtpCapabilities:Ne});case 10:if((z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:Pe,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Ne).toString()},message:"Router Capabilities Loaded"}),!this._produce){Ut.next=16;break}return Ut.next=14,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 14:ht=Ut.sent,this.createProducerTransport(ht,this._joinSpan);case 16:if(!this._consume){Ut.next=21;break}return Ut.next=19,this._socketRequest("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 19:mt=Ut.sent,this.createConsumerTransport(mt,this._joinSpan);case 21:return Ut.next=23,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(H=this._mediasoupDevice)===null||H===void 0?void 0:H.rtpCapabilities,sctpCapabilities:(K=this._mediasoupDevice)===null||K===void 0?void 0:K.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 23:pe=Ut.sent,gt=pe.peers,it=pe.poll,We=pe.messages,Ke.dispatch(Gt("connected")),(oe=this._openTelemetry)===null||oe===void 0||oe.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:gt,poll:it,messages:We,baseUrl:this._baseUrl}),Ke.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Ke.dispatch(dr({text:"You are in the room!",timeout:3e3})),Ue=Pi(gt);try{for(Ue.s();!(Be=Ue.n()).done;)vt=Be.value,Je=ii(cs(cs({},vt),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(Je),this._eventEmitter.emit(Je.type,Je.payload)}catch(Ar){Ue.e(Ar)}finally{Ue.f()}this._produce&&(Ke.dispatch(Sr({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((yt=this._openTelemetry)===null||yt===void 0||yt.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(Ar){Ar.stop()})),kt=zi(),this._webcamEnabled&&(!kt||kt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((It=this._openTelemetry)===null||It===void 0||It.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(Ar){Ar.stop()}))),window.SHOW_INFO&&(Et=Ke.getState(),bt=Et.me,Ke.dispatch(ur(bt.id))),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),Ut.next=46;break;case 39:Ut.prev=39,Ut.t0=Ut.catch(1),Ve.error("joinRoom() failed:%o",Ut.t0),(sr=this._videosdkLogs)===null||sr===void 0||sr.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:Ut.t0.message}}),(Bt=this._openTelemetry)===null||Bt===void 0||Bt.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(Ut.t0)}),Ke.dispatch(dr({type:"error",text:"Could not join the room: ".concat(Ut.t0)})),this.close({sendLeft:!0});case 46:case"end":return Ut.stop()}},re,this,[[1,39]])})),function(){return dt.apply(this,arguments)})},{key:"switchingRoom",value:(rt=(0,u.A)(v().mark(function re($){var z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We,Ue,Be,vt;return v().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return H=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({name:"switchingRoom() start",attributes:{"room.id":$,"peer.id":this._peerId,display_name:this._displayName}}),Je.prev=1,ft=(K=this._openTelemetry)===null||K===void 0?void 0:K.trace({name:"switch room join request",parentSpan:H}),Je.next=5,this._socketRequest("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(oe=this._mediasoupDevice)===null||oe===void 0?void 0:oe.rtpCapabilities,sctpCapabilities:(fe=this._mediasoupDevice)===null||fe===void 0?void 0:fe.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData,switchingRoom:!0});case 5:Ze=Je.sent,ht=Ze.peers,mt=Ze.poll,pe=Ze.messages,(Pe=this._openTelemetry)===null||Pe===void 0||Pe.completeSpan({span:ft,status:1,message:"Join request successful in switched room"}),Ke.dispatch(Gt("connected")),this._eventEmitter.emit("MEETING_JOINED",{switchRoomId:$,peers:ht,poll:mt,messages:pe,baseUrl:this._baseUrl}),Ke.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Ke.dispatch(dr({text:"You are in the room!",timeout:3e3})),gt=Pi(ht);try{for(gt.s();!(it=gt.n()).done;)We=it.value,Ue=ii(cs(cs({},We),{},{consumers:[],dataConsumers:[]})),Ke.dispatch(Ue),this._eventEmitter.emit(Ue.type,Ue.payload)}catch(yt){gt.e(yt)}finally{gt.f()}(Ne=this._openTelemetry)===null||Ne===void 0||Ne.completeSpan({span:H,status:1,message:"Room switch completed successfully"}),Je.next=26;break;case 19:Je.prev=19,Je.t0=Je.catch(1),Ve.error("joinRoom() failed:%o",Je.t0),(Be=this._videosdkLogs)===null||Be===void 0||Be.pushLogs({logText:"Error Could not join the switched room",logType:"ERROR",attributes:{error:Je.t0.message}}),(vt=this._openTelemetry)===null||vt===void 0||vt.completeSpan({span:H,status:2,message:"Room switch failed: ".concat(Je.t0.message)}),Ke.dispatch(dr({type:"error",text:"Could not join the switched room: ".concat(Je.t0)})),this.close({sendLeft:!0});case 26:case"end":return Je.stop()}},re,this,[[1,19]])})),function(re){return rt.apply(this,arguments)})},{key:"_updateMics",value:(Te=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We=arguments;return v().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return z=We.length>0&&We[0]!==void 0?We[0]:void 0,this._mics=new Map,Ve.debug("_updateMics() |"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:z||null}),Ue.prev=4,Ue.next=7,navigator.mediaDevices.enumerateDevices();case 7:fe=Ue.sent,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting System Mic list",span:H,status:1,attributes:{systemDevice:fe?JSON.stringify(fe):"Device not found"}}),Pe=Pi(fe);try{for(Pe.s();!(Ne=Pe.n()).done;)(ft=Ne.value).kind=="audioinput"&&this._mics.set(ft.deviceId,ft)}catch(Be){Pe.e(Be)}finally{Pe.f()}Ze=Array.from(this._mics.values()),ht=Ze.length,mt=this._mic.device?this._mic.device.deviceId:void 0,ht===0?this._mic.device=null:this._mics.has(mt)||(this._mic.device=Ze[0]),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:1,message:"Update Mic"}),Ue.next=30;break;case 18:if(Ue.prev=18,Ue.t0=Ue.catch(4),!(Ue.t0 instanceof TypeError)){Ue.next=30;break}if(Ue.t0.name!=="TypeError"){Ue.next=28;break}throw gt=gr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(gt),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:H,status:2,message:"Error in updateMics() :: ".concat(gt.message)}),new Error(gt.message);case 28:throw(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:H,status:2,message:"Error in updateMics() :: ".concat(Ue.t0.message)}),new Error(Ue.t0.message);case 30:case"end":return Ue.stop()}},re,this,[[4,18]])})),function(){return Te.apply(this,arguments)})},{key:"_updateWebcams",value:(ge=(0,u.A)(v().mark(function re(){var $,z,H,K,oe,fe,Pe,Ne,ft,Ze,ht,mt,pe,gt,it,We=arguments;return v().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return z=We.length>0&&We[0]!==void 0?We[0]:void 0,Ve.debug("_updateWebcams()"),this._webcams=new Map,Ve.debug("_updateWebcams() | calling enumerateDevices()"),H=($=this._openTelemetry)===null||$===void 0?void 0:$.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:z||null}),Ue.prev=5,Ue.next=8,navigator.mediaDevices.enumerateDevices();case 8:fe=Ue.sent,(K=this._openTelemetry)===null||K===void 0||K.traceAutoComplete({spanName:"Getting System Webcam list",span:H,status:1,attributes:{systemDevice:fe?JSON.stringify(fe):"Device not found"}}),Pe=Pi(fe),Ue.prev=11,Pe.s();case 13:if((Ne=Pe.n()).done){Ue.next=20;break}if((ft=Ne.value).kind==="videoinput"){Ue.next=17;break}return Ue.abrupt("continue",18);case 17:this._webcams.set(ft.deviceId,ft);case 18:Ue.next=13;break;case 20:Ue.next=25;break;case 22:Ue.prev=22,Ue.t0=Ue.catch(11),Pe.e(Ue.t0);case 25:return Ue.prev=25,Pe.f(),Ue.finish(25);case 28:Ze=Array.from(this._webcams.values()),ht=Ze.length,(mt=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=mt),Ve.debug("_updateWebcams() [webcams:%o]",Ze),ht===0?this._webcam.device=null:this._webcams.has(mt)||(this._webcam.device=Ze[this._defaultCameraIndex]),(oe=this._openTelemetry)===null||oe===void 0||oe.completeSpan({span:H,status:1,message:"Update Webcam"}),Ke.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1}),Ue.next=50;break;case 38:if(Ue.prev=38,Ue.t1=Ue.catch(5),!(Ue.t1 instanceof TypeError)){Ue.next=50;break}if(Ue.t1.name!=="TypeError"){Ue.next=48;break}throw gt=gr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(gt),(pe=this._openTelemetry)===null||pe===void 0||pe.completeSpan({span:H,status:2,message:"Error in updateWebcams() :: ".concat(gt.message)}),new Error(gt.message);case 48:throw(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:H,status:2,message:"Error in updateWebcams() :: ".concat(Ue.t1.message)}),new Error(Ue.t1.message);case 50:case"end":return Ue.stop()}},re,this,[[5,38],[11,22,25,28]])})),function(){return ge.apply(this,arguments)})},{key:"_getWebcamType",value:function(re){return/(back|rear)/i.test(re.label)?(Ve.debug("_getWebcamType() | it seems to be a back camera"),"back"):(Ve.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(Y=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!$.paused){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._socketRequest("pauseConsumer",{consumerId:$.id});case 5:$.pause(),Ke.dispatch(qi($.id,"local")),H.next=14;break;case 9:H.prev=9,H.t0=H.catch(2),Ve.error("_pauseConsumer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error pausing Consumer: ".concat(H.t0)}));case 14:case"end":return H.stop()}},re,this,[[2,9]])})),function(re){return Y.apply(this,arguments)})},{key:"_resumeConsumer",value:(V=(0,u.A)(v().mark(function re($){var z;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if($.paused){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._socketRequest("resumeConsumer",{consumerId:$.id});case 5:$.resume(),Ke.dispatch($o($.id,"local")),H.next=14;break;case 9:H.prev=9,H.t0=H.catch(2),Ve.error("_resumeConsumer() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:H.t0.message}}),Ke.dispatch(dr({type:"error",text:"Error resuming Consumer: ".concat(H.t0)}));case 14:case"end":return H.stop()}},re,this,[[2,9]])})),function(re){return V.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(B=(0,u.A)(v().mark(function re(){var $=this;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._externalVideoStream){z.next=2;break}return z.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){z.next=5;break}return z.next=5,new Promise(function(H){return $._externalVideo.addEventListener("canplay",H)});case 5:if(!this._externalVideo.captureStream){z.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),z.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){z.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),z.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return z.abrupt("return",this._externalVideoStream);case 15:case"end":return z.stop()}},re,this)})),function(){return B.apply(this,arguments)})},{key:"toggleE2EEEnabled",value:(q=(0,u.A)(v().mark(function re($){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this.e2eeManager){z.next=5;break}this._peerId&&this.e2eeManager.setParticipantCryptorEnabled($,this._peerId),this.isE2EEEnabled=$,z.next=6;break;case 5:throw Error("e2ee not configured, please set e2ee settings within the room options");case 6:case"end":return z.stop()}},re,this)})),function(re){return q.apply(this,arguments)})},{key:"_emitError",value:function(re){this._eventEmitter.emit("ERROR",re)}}],[{key:"init",value:function(re){Ke=re.store}}]);var q,B,V,Y,ge,Te,rt,dt,qe,Yt,ct,Pt,ar,wn,on,gs,Re,Ft,rc,hr,Yu,Jt,Ps,ml,Ju,Qu,ef,tf,rf,nf,sf,af,of,cf,gl,vl,yl,fd,md,gd,bl,vd,go,yd,bd,nc,sc,ic,aa,vo,ac,yo,wl,wd,_d,xd,oc,Sd,cc,Xu,_l,Zu,xl,lf,ep,df,Vs,Ed,tp,uf,pf,lc,Sl,El,bo,Rd,kd,rp,np,sp,Rl,Cd,Td,Pd,Nd,ip,hf,ap,op,ff,dc,mf,gf,uc,kl,Cl,pc,Tl,vf,Ad,Pl,Od,wo,cp,jd,yf,bf,oi,wf,_f,Dd,lp,za,Nl,xf,Sf}();function Rv(q){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,u.A)(v().mark(function q(B){var V,Y=this;return v().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(ge.prev=0,this.e2eeManager){ge.next=13;break}return ge.t0=fl,ge.t1=B,ge.next=6,qu();case 6:ge.t2=ge.sent,ge.t3={keyProvider:ge.t1,worker:ge.t2},this.e2eeManager=new ge.t0(ge.t3),this.e2eeManager.on(vr.KS.ParticipantEncryptionStatusChanged,function(Te){Y.isE2EEEnabled=Te}),this.e2eeManager.on(vr.KS.E2EEStateChange,function(Te){Y._eventEmitter.emit("E2EE_STATE_CHANGE",Te)}),(V=this.e2eeManager)===null||V===void 0||V.setup(this),this.toggleE2EEEnabled(!0);case 13:ge.next=19;break;case 15:throw ge.prev=15,ge.t4=ge.catch(0),console.error("Error setting up E2EE: ",ge.t4),new Error("Error setting up E2EE: "+ge.t4.message);case 19:case"end":return ge.stop()}},q,this,[[0,15]])}))).apply(this,arguments)}},2073:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.pad.AnsiX923={pad:function(y,m){var u=y.sigBytes,b=4*m,f=b-u%b,_=u+f-1;y.clamp(),y.words[_>>>2]|=f<<24-_%4*8,y.sigBytes+=f},unpad:function(y){var m=255&y.words[y.sigBytes-1>>>2];y.sigBytes-=m}},p.pad.Ansix923)},2107:(d,l,o)=>{o.d(l,{kR:()=>y,nI:()=>p,wZ:()=>m});var p={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER",SEND_AND_RECV:"SEND_AND_RECV",SIGNALLING_ONLY:"SIGNALLING_ONLY",RECV_ONLY:"RECV_ONLY"};function y(u){return u===p.CONFERENCE||u===p.SEND_AND_RECV}function m(u){return u===p.VIEWER||u===p.SIGNALLING_ONLY}},2109:function(d,l,o){var p;(function(y,m){var u,b="user-agent",f="",_="function",g="undefined",v="object",w="string",S="browser",E="cpu",O="device",C="engine",k="os",T="result",h="name",x="type",R="vendor",P="version",N="architecture",j="major",D="model",L="console",M="mobile",I="tablet",G="smarttv",de="wearable",ee="xr",Q="embedded",ae="inapp",_e="brands",Se="formFactors",ie="fullVersionList",$e="platform",je="platformVersion",se="bitness",ue="sec-ch-ua",Ce=ue+"-full-version-list",He=ue+"-arch",$t=ue+"-"+se,nr=ue+"-form-factors",Ct=ue+"-"+M,cr=ue+"-"+D,br=ue+"-"+$e,jt=br+"-version",nn=[_e,ie,M,D,$e,je,N,Se,se],Dt="Amazon",Xt="Apple",Gr="ASUS",dn="BlackBerry",Mr="Google",Yr="Huawei",un="Lenovo",Lt="Honor",pn="LG",sn="Microsoft",zr="Motorola",Lr="Nvidia",xn="OnePlus",Xr="OPPO",Pn="Samsung",Sn="Sharp",In="Sony",Nn="Xiaomi",Wt="Zebra",Mn="Chrome",ss="Chromium",hn="Chromecast",or="Firefox",Ye="Opera",Me="Facebook",ot="Sogou",Le="Mobile ",lt=" Browser",lr="Windows",De=typeof y!==g,Zt=De&&y.navigator?y.navigator:m,Vt=Zt&&Zt.userAgentData?Zt.userAgentData:m,_r=function(Rt){for(var ir={},Gt=0;Gt<Rt.length;Gt++)ir[Rt[Gt].toUpperCase()]=Rt[Gt];return ir},fr=function(Rt,ir){if(typeof Rt===v&&Rt.length>0){for(var Gt in Rt)if(Tt(Rt[Gt])==Tt(ir))return!0;return!1}return!!Xe(Rt)&&Tt(ir).indexOf(Tt(Rt))!==-1},Pr=function(Rt,ir){for(var Gt in Rt)return/^(browser|cpu|device|engine|os)$/.test(Gt)||!!ir&&Pr(Rt[Gt])},Xe=function(Rt){return typeof Rt===w},Kt=function(Rt){if(!Rt)return m;for(var ir=[],Gt=Nr(/\\?\"/g,Rt).split(","),Rn=0;Rn<Gt.length;Rn++)if(Gt[Rn].indexOf(";")>-1){var ur=Er(Gt[Rn]).split(";v=");ir[Rn]={brand:ur[0],version:ur[1]}}else ir[Rn]=Er(Gt[Rn]);return ir},Tt=function(Rt){return Xe(Rt)?Rt.toLowerCase():Rt},zt=function(Rt){return Xe(Rt)?Nr(/[^\d\.]/g,Rt).split(".")[0]:m},Fr=function(Rt){for(var ir in Rt){var Gt=Rt[ir];typeof Gt==v&&Gt.length==2?this[Gt[0]]=Gt[1]:this[Gt]=m}return this},Nr=function(Rt,ir){return Xe(ir)?ir.replace(Rt,f):ir},Vr=function(Rt){return Nr(/\\?\"/g,Rt)},Er=function(Rt,ir){if(Xe(Rt))return Rt=Nr(/^\s\s*/,Rt),typeof ir===g?Rt:Rt.substring(0,500)},xr=function(Rt,ir){if(Rt&&ir)for(var Gt,Rn,ur,Sr,fn,Tr,Rr=0;Rr<ir.length&&!fn;){var an=ir[Rr],Ts=ir[Rr+1];for(Gt=Rn=0;Gt<an.length&&!fn&&an[Gt];)if(fn=an[Gt++].exec(Rt))for(ur=0;ur<Ts.length;ur++)Tr=fn[++Rn],typeof(Sr=Ts[ur])===v&&Sr.length>0?Sr.length===2?typeof Sr[1]==_?this[Sr[0]]=Sr[1].call(this,Tr):this[Sr[0]]=Sr[1]:Sr.length===3?typeof Sr[1]!==_||Sr[1].exec&&Sr[1].test?this[Sr[0]]=Tr?Tr.replace(Sr[1],Sr[2]):m:this[Sr[0]]=Tr?Sr[1].call(this,Tr,Sr[2]):m:Sr.length===4&&(this[Sr[0]]=Tr?Sr[3].call(this,Tr.replace(Sr[1],Sr[2])):m):this[Sr]=Tr||m;Rr+=2}},Jr=function(Rt,ir){for(var Gt in ir)if(typeof ir[Gt]===v&&ir[Gt].length>0){for(var Rn=0;Rn<ir[Gt].length;Rn++)if(fr(ir[Gt][Rn],Rt))return Gt==="?"?m:Gt}else if(fr(ir[Gt],Rt))return Gt==="?"?m:Gt;return ir.hasOwnProperty("*")?ir["*"]:Rt},Qn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},is={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":m},Ks={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[P,[h,Le+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[P,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,P],[/opios[\/ ]+([\w\.]+)/i],[P,[h,Ye+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[P,[h,Ye+" GX"]],[/\bopr\/([\w\.]+)/i],[P,[h,Ye]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[P,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[P,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[h,P],[/quark(?:pc)?\/([-\w\.]+)/i],[P,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[P,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[P,[h,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[P,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[P,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[P,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[P,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[P,[h,"Smart "+un+lt]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure"+lt],P],[/\bfocus\/([\w\.]+)/i],[P,[h,or+" Focus"]],[/\bopt\/([\w\.]+)/i],[P,[h,Ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[P,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[P,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[P,[h,Ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[P,[h,"MIUI"+lt]],[/fxios\/([\w\.-]+)/i],[P,[h,Le+or]],[/\bqihoobrowser\/?([\w\.]*)/i],[P,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],P],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+lt],P],[/samsungbrowser\/([\w\.]+)/i],[P,[h,Pn+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[P,[h,ot+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,ot+" Mobile"],P],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,P],[/(lbbrowser|rekonq)/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[P,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Me],P,[x,ae]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,P,[x,ae]],[/\bgsa\/([\w\.]+) .*safari\//i],[P,[h,"GSA"],[x,ae]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[P,[h,"TikTok"],[x,ae]],[/\[(linkedin)app\]/i],[h,[x,ae]],[/(chromium)[\/ ]([-\w\.]+)/i],[h,P],[/headlesschrome(?:\/([\w\.]+)| )/i],[P,[h,Mn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,Mn+" WebView"],P],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[P,[h,"Android"+lt]],[/chrome\/([\w\.]+) mobile/i],[P,[h,Le+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,P],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[P,[h,Le+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[h,Le+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[P,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[P,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[h,P],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[h,Le+or],P],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],P],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,P],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[P,[h,or+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[h,[P,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[P,/[^\d\.]+./,f]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[N,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[N,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[N,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[N,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[N,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[N,/ower/,f,Tt]],[/ sun4\w[;\)]/i],[[N,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[N,Tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[D,[R,Pn],[x,I]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[D,[R,Pn],[x,M]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[D,[R,Xt],[x,M]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[D,[R,Xt],[x,I]],[/(macintosh);/i],[D,[R,Xt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[D,[R,Sn],[x,M]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[D,[R,Lt],[x,I]],[/honor([-\w ]+)[;\)]/i],[D,[R,Lt],[x,M]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[D,[R,Yr],[x,I]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[D,[R,Yr],[x,M]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[D,/_/g," "],[R,Nn],[x,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[D,/_/g," "],[R,Nn],[x,M]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[D,[R,Xr],[x,M]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[D,[R,Jr,{OnePlus:["304","403","203"],"*":Xr}],[x,I]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[D,[R,"BLU"],[x,M]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[D,[R,"Vivo"],[x,M]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[D,[R,"Realme"],[x,M]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[D,[R,zr],[x,M]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[D,[R,zr],[x,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[D,[R,pn],[x,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[D,[R,pn],[x,M]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[D,[R,un],[x,I]],[/(nokia) (t[12][01])/i],[R,D,[x,I]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[D,/_/g," "],[x,M],[R,"Nokia"]],[/(pixel (c|tablet))\b/i],[D,[R,Mr],[x,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[D,[R,Mr],[x,M]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[D,[R,In],[x,M]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[D,"Xperia Tablet"],[R,In],[x,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[D,[R,xn],[x,M]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[D,[R,Dt],[x,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[D,/(.+)/g,"Fire Phone $1"],[R,Dt],[x,M]],[/(playbook);[-\w\),; ]+(rim)/i],[D,R,[x,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[D,[R,dn],[x,M]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[D,[R,Gr],[x,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[D,[R,Gr],[x,M]],[/(nexus 9)/i],[D,[R,"HTC"],[x,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[R,[D,/_/g," "],[x,M]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[D,[R,"TCL"],[x,I]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[D,[R,"TCL"],[x,M]],[/(itel) ((\w+))/i],[[R,Tt],D,[x,Jr,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[D,[R,"Acer"],[x,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[D,[R,"Meizu"],[x,M]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[D,[R,"Ulefone"],[x,M]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[D,[R,"Energizer"],[x,M]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[D,[R,"Cat"],[x,M]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[D,[R,"Smartfren"],[x,M]],[/droid.+; (a(?:015|06[35]|142p?))/i],[D,[R,"Nothing"],[x,M]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[D,[R,"Archos"],[x,I]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[D,[R,"Archos"],[x,M]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[R,D,[x,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[R,D,[x,M]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[R,D,[x,I]],[/(surface duo)/i],[D,[R,sn],[x,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[D,[R,"Fairphone"],[x,M]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[D,[R,Lr],[x,I]],[/(sprint) (\w+)/i],[R,D,[x,M]],[/(kin\.[onetw]{3})/i],[[D,/\./g," "],[R,sn],[x,M]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[D,[R,Wt],[x,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[D,[R,Wt],[x,M]],[/smart-tv.+(samsung)/i],[R,[x,G]],[/hbbtv.+maple;(\d+)/i],[[D,/^/,"SmartTV"],[R,Pn],[x,G]],[/tcast.+(lg)e?. ([-\w]+)/i],[R,D,[x,G]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[R,pn],[x,G]],[/(apple) ?tv/i],[R,[D,Xt+" TV"],[x,G]],[/crkey.*devicetype\/chromecast/i],[[D,hn+" Third Generation"],[R,Mr],[x,G]],[/crkey.*devicetype\/([^/]*)/i],[[D,/^/,"Chromecast "],[R,Mr],[x,G]],[/fuchsia.*crkey/i],[[D,hn+" Nest Hub"],[R,Mr],[x,G]],[/crkey/i],[[D,hn],[R,Mr],[x,G]],[/(portaltv)/i],[D,[R,Me],[x,G]],[/droid.+aft(\w+)( bui|\))/i],[D,[R,Dt],[x,G]],[/(shield \w+ tv)/i],[D,[R,Lr],[x,G]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[D,[R,Sn],[x,G]],[/(bravia[\w ]+)( bui|\))/i],[D,[R,In],[x,G]],[/(mi(tv|box)-?\w+) bui/i],[D,[R,Nn],[x,G]],[/Hbbtv.*(technisat) (.*);/i],[R,D,[x,G]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[R,Er],[D,Er],[x,G]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[D,[x,G]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[x,G]],[/(ouya)/i,/(nintendo) (\w+)/i],[R,D,[x,L]],[/droid.+; (shield)( bui|\))/i],[D,[R,Lr],[x,L]],[/(playstation \w+)/i],[D,[R,In],[x,L]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[D,[R,sn],[x,L]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[D,[R,Pn],[x,de]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[R,D,[x,de]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[D,[R,Xr],[x,de]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[D,[R,Xt],[x,de]],[/(opwwe\d{3})/i],[D,[R,xn],[x,de]],[/(moto 360)/i],[D,[R,zr],[x,de]],[/(smartwatch 3)/i],[D,[R,In],[x,de]],[/(g watch r)/i],[D,[R,pn],[x,de]],[/droid.+; (wt63?0{2,3})\)/i],[D,[R,Wt],[x,de]],[/droid.+; (glass) \d/i],[D,[R,Mr],[x,ee]],[/(pico) (4|neo3(?: link|pro)?)/i],[R,D,[x,ee]],[/(quest( \d| pro)?s?).+vr/i],[D,[R,Me],[x,ee]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[R,[x,Q]],[/(aeobc)\b/i],[D,[R,Dt],[x,Q]],[/(homepod).+mac os/i],[D,[R,Xt],[x,Q]],[/windows iot/i],[[x,Q]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[D,[x,Jr,{mobile:"Mobile",xr:"VR","*":I}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[x,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[x,M]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[D,[R,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[P,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,P],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[P,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,P],[/ladybird\//i],[[h,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[P,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,P],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[h,[P,Jr,Qn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[P,Jr,Qn],[h,lr]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[P,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"macOS"],[P,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[P,[h,hn+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[P,[h,hn+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[P,[h,hn+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[P,[h,hn+" Linux"]],[/crkey\/([\d\.]+)/i],[P,[h,hn]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[P,h],[/(ubuntu) ([\w\.]+) like android/i],[[h,/(.+)/,"$1 Touch"],P],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[h,P],[/\(bb(10);/i],[P,[h,dn]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[P,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[P,[h,or+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[P,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[P,[h,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,"Chrome OS"],P],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,P],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],P],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,P]]},Gs=(Fr.call((u={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[S,[h,P,j,x]],[E,[N]],[O,[x,D,R]],[C,[h,P]],[k,[h,P]]]),Fr.call(u.isIgnore,[[S,[P,j]],[C,[P]],[k,[P]]]),Fr.call(u.isIgnoreRgx,[[S,/ ?browser$/i],[k,/ ?os$/i]]),Fr.call(u.toString,[[S,[h,P]],[E,[N]],[O,[R,D]],[C,[h,P]],[k,[h,P]]]),u),mi=function(Rt,ir){var Gt=Gs.init[ir],Rn=Gs.isIgnore[ir]||0,ur=Gs.isIgnoreRgx[ir]||0,Sr=Gs.toString[ir]||0;function fn(){Fr.call(this,Gt)}return fn.prototype.getItem=function(){return Rt},fn.prototype.withClientHints=function(){return Vt?Vt.getHighEntropyValues(nn).then(function(Tr){return Rt.setCH(new Ci(Tr,!1)).parseCH().get()}):Rt.parseCH().get()},fn.prototype.withFeatureCheck=function(){return Rt.detectFeature().get()},ir!=T&&(fn.prototype.is=function(Tr){var Rr=!1;for(var an in this)if(this.hasOwnProperty(an)&&!fr(Rn,an)&&Tt(ur?Nr(ur,this[an]):this[an])==Tt(ur?Nr(ur,Tr):Tr)){if(Rr=!0,Tr!=g)break}else if(Tr==g&&Rr){Rr=!Rr;break}return Rr},fn.prototype.toString=function(){var Tr=f;for(var Rr in Sr)typeof this[Sr[Rr]]!==g&&(Tr+=(Tr?" ":f)+this[Sr[Rr]]);return Tr||g}),Vt||(fn.prototype.then=function(Tr){var Rr=this,an=function(){for(var An in Rr)Rr.hasOwnProperty(An)&&(this[An]=Rr[An])};an.prototype={is:fn.prototype.is,toString:fn.prototype.toString};var Ts=new an;return Tr(Ts),Ts}),new fn};function Ci(Rt,ir){if(Rt=Rt||{},Fr.call(this,nn),ir)Fr.call(this,[[_e,Kt(Rt[ue])],[ie,Kt(Rt[Ce])],[M,/\?1/.test(Rt[Ct])],[D,Vr(Rt[cr])],[$e,Vr(Rt[br])],[je,Vr(Rt[jt])],[N,Vr(Rt[He])],[Se,Kt(Rt[nr])],[se,Vr(Rt[$t])]]);else for(var Gt in Rt)this.hasOwnProperty(Gt)&&typeof Rt[Gt]!==g&&(this[Gt]=Rt[Gt])}function gi(Rt,ir,Gt,Rn){return this.get=function(ur){return ur?this.data.hasOwnProperty(ur)?this.data[ur]:m:this.data},this.set=function(ur,Sr){return this.data[ur]=Sr,this},this.setCH=function(ur){return this.uaCH=ur,this},this.detectFeature=function(){if(Zt&&Zt.userAgent==this.ua)switch(this.itemType){case S:Zt.brave&&typeof Zt.brave.isBrave==_&&this.set(h,"Brave");break;case O:!this.get(x)&&Vt&&Vt[M]&&this.set(x,M),this.get(D)=="Macintosh"&&Zt&&typeof Zt.standalone!==g&&Zt.maxTouchPoints&&Zt.maxTouchPoints>2&&this.set(D,"iPad").set(x,I);break;case k:!this.get(h)&&Vt&&Vt[$e]&&this.set(h,Vt[$e]);break;case T:var ur=this.data,Sr=function(fn){return ur[fn].getItem().detectFeature().get()};this.set(S,Sr(S)).set(E,Sr(E)).set(O,Sr(O)).set(C,Sr(C)).set(k,Sr(k))}return this},this.parseUA=function(){return this.itemType!=T&&xr.call(this.data,this.ua,this.rgxMap),this.itemType==S&&this.set(j,zt(this.get(P))),this},this.parseCH=function(){var ur=this.uaCH,Sr=this.rgxMap;switch(this.itemType){case S:case C:var fn,Tr=ur[ie]||ur[_e];if(Tr)for(var Rr in Tr){var an=Tr[Rr].brand||Tr[Rr],Ts=Tr[Rr].version;this.itemType!=S||/not.a.brand/i.test(an)||fn&&(!/chrom/i.test(fn)||an==ss)||(an=Jr(an,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(h,an).set(P,Ts).set(j,zt(Ts)),fn=an),this.itemType==C&&an==ss&&this.set(P,Ts)}break;case E:var An=ur[N];An&&(An&&ur[se]=="64"&&(An+="64"),xr.call(this.data,An+";",Sr));break;case O:if(ur[M]&&this.set(x,M),ur[D]&&(this.set(D,ur[D]),!this.get(x)||!this.get(R))){var Ln={};xr.call(Ln,"droid 9; "+ur[D]+")",Sr),!this.get(x)&&Ln.type&&this.set(x,Ln.type),!this.get(R)&&Ln.vendor&&this.set(R,Ln.vendor)}if(ur[Se]){var Ys;if(typeof ur[Se]!="string")for(var xs=0;!Ys&&xs<ur[Se].length;)Ys=Jr(ur[Se][xs++],is);else Ys=Jr(ur[Se],is);this.set(x,Ys)}break;case k:var Hi=ur[$e];if(Hi){var Js=ur[je];Hi==lr&&(Js=parseInt(zt(Js),10)>=13?"11":"10"),this.set(h,Hi).set(P,Js)}this.get(h)==lr&&ur[D]=="Xbox"&&this.set(h,"Xbox").set(P,m);break;case T:var wa=this.data,ii=function($a){return wa[$a].getItem().setCH(ur).parseCH().get()};this.set(S,ii(S)).set(E,ii(E)).set(O,ii(O)).set(C,ii(C)).set(k,ii(k))}return this},Fr.call(this,[["itemType",Rt],["ua",ir],["uaCH",Rn],["rgxMap",Gt],["data",mi(this,Rt)]]),this}function as(Rt,ir,Gt){if(typeof Rt===v?(Pr(Rt,!0)?(typeof ir===v&&(Gt=ir),ir=Rt):(Gt=Rt,ir=m),Rt=m):typeof Rt!==w||Pr(ir,!0)||(Gt=ir,ir=m),Gt&&typeof Gt.append===_){var Rn={};Gt.forEach(function(Rr,an){Rn[an]=Rr}),Gt=Rn}if(!(this instanceof as))return new as(Rt,ir,Gt).getResult();var ur=typeof Rt===w?Rt:Gt&&Gt[b]?Gt[b]:Zt&&Zt.userAgent?Zt.userAgent:f,Sr=new Ci(Gt,!0),fn=ir?function(Rr,an){var Ts={},An=an;if(!Pr(an))for(var Ln in An={},an)for(var Ys in an[Ln])An[Ys]=an[Ln][Ys].concat(An[Ys]?An[Ys]:[]);for(var xs in Rr)Ts[xs]=An[xs]&&An[xs].length%2==0?An[xs].concat(Rr[xs]):Rr[xs];return Ts}(Ks,ir):Ks,Tr=function(Rr){return Rr==T?function(){return new gi(Rr,ur,fn,Sr).set("ua",ur).set(S,this.getBrowser()).set(E,this.getCPU()).set(O,this.getDevice()).set(C,this.getEngine()).set(k,this.getOS()).get()}:function(){return new gi(Rr,ur,fn[Rr],Sr).parseUA().get()}};return Fr.call(this,[["getBrowser",Tr(S)],["getCPU",Tr(E)],["getDevice",Tr(O)],["getEngine",Tr(C)],["getOS",Tr(k)],["getResult",Tr(T)],["getUA",function(){return ur}],["setUA",function(Rr){return Xe(Rr)&&(ur=Rr.length>500?Er(Rr,500):Rr),this}]]).setUA(ur),this}as.VERSION="2.0.3",as.BROWSER=_r([h,P,j,x]),as.CPU=_r([N]),as.DEVICE=_r([D,R,x,L,M,G,I,de,Q]),as.ENGINE=as.OS=_r([h,P]),typeof l!==g?(d.exports&&(l=d.exports=as),l.UAParser=as):o.amdO?(p=(function(){return as}).call(l,o,l,d))===m||(d.exports=p):De&&(y.UAParser=as);var os=De&&(y.jQuery||y.Zepto);if(os&&!os.ua){var zi=new as;os.ua=zi.getResult(),os.ua.get=function(){return zi.getUA()},os.ua.set=function(Rt){zi.setUA(Rt);var ir=zi.getResult();for(var Gt in ir)os.ua[Gt]=ir[Gt]}}})(typeof window=="object"?window:this)},2155:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.pad.ZeroPadding={pad:function(y,m){var u=4*m;y.clamp(),y.sigBytes+=u-(y.sigBytes%u||u)},unpad:function(y){var m=y.words,u=y.sigBytes-1;for(u=y.sigBytes-1;u>=0;u--)if(m[u>>>2]>>>24-u%4*8&255){y.sigBytes=u+1;break}}},p.pad.ZeroPadding)},2169:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.mode.CFB=function(){var y=p.lib.BlockCipherMode.extend();function m(u,b,f,_){var g,v=this._iv;v?(g=v.slice(0),this._iv=void 0):g=this._prevBlock,_.encryptBlock(g,0);for(var w=0;w<f;w++)u[b+w]^=g[w]}return y.Encryptor=y.extend({processBlock:function(u,b){var f=this._cipher,_=f.blockSize;m.call(this,u,b,_,f),this._prevBlock=u.slice(b,b+_)}}),y.Decryptor=y.extend({processBlock:function(u,b){var f=this._cipher,_=f.blockSize,g=u.slice(b,b+_);m.call(this,u,b,_,f),this._prevBlock=g}}),y}(),p.mode.CFB)},2183:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Chrome111=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),_=o(4256),g=o(4893),v=o(521),w=o(1305),S=o(3303),E=new y.Logger("Chrome111"),O={OS:1024,MIS:1024};class C extends v.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new C}get name(){return"Chrome111"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{h.addTransceiver("audio"),h.addTransceiver("video");const x=await h.createOffer();try{h.close()}catch{}const R=p.parse(x.sdp),P=b.extractRtpCapabilities({sdpObject:R});return _.addNackSupportForOpus(P),P}catch(x){try{h.close()}catch{}throw x}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:h,iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N,iceServers:j,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._direction=h,this._remoteSdp=new w.RemoteSdp({iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const x=this._pc.getConfiguration();x.iceServers=h,this._pc.setConfiguration(x)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:x,codecOptions:R,codec:P,onRtpSender:N}){if(this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),x&&x.length>1){let ae=1;for(const _e of x){const Se=_e.scalabilityMode?(0,S.parse)(_e.scalabilityMode).temporalLayers:3;Se>ae&&(ae=Se)}x.forEach((_e,Se)=>{_e.rid=`r${Se}`,_e.scalabilityMode=`L1T${ae}`})}const j=m.clone(this._sendingRtpParametersByKind[h.kind]);j.codecs=u.reduceCodecs(j.codecs,P);const D=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);D.codecs=u.reduceCodecs(D.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:x});N&&N(M.sender);const I=await this._pc.createOffer();let G=p.parse(I.sdp);G.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:G}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",I),await this._pc.setLocalDescription(I);const de=M.mid;j.mid=de,G=p.parse(this._pc.localDescription.sdp);const ee=G.media[L.idx];if(j.rtcp.cname=b.getCname({offerMediaObject:ee}),x)if(x.length===1){const ae=f.getRtpEncodings({offerMediaObject:ee});Object.assign(ae[0],x[0]),j.encodings=ae}else j.encodings=x;else j.encodings=f.getRtpEncodings({offerMediaObject:ee});this._remoteSdp.send({offerMediaObject:ee,reuseMid:L.reuseMid,offerRtpParameters:j,answerRtpParameters:D,codecOptions:R});const Q={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Q),await this._pc.setRemoteDescription(Q),this._mapMidTransceiver.set(de,M),{localId:de,rtpParameters:j,rtpSender:M.sender}}async stopSending(h){if(this.assertSendDirection(),E.debug("stopSending() [localId:%s]",h),this._closed)return;const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");if(x.sender.replaceTrack(null),this._pc.removeTrack(x.sender),this._remoteSdp.closeMediaSection(x.mid))try{x.stop()}catch{}const R=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(h);const R=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(this._remoteSdp.resumeSendingMediaSection(h),!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="sendonly";const R=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,x){this.assertNotClosed(),this.assertSendDirection(),x?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,x.id):E.debug("replaceTrack() [localId:%s, no track]",h);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(x)}async setMaxSpatialLayer(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=x}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...x}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:x,maxRetransmits:R,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:x,maxRetransmits:R,protocol:N};E.debug("sendDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(P,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const x=[],R=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const D of h){const{trackId:L,onRtpReceiver:M}=D;if(M){const I=R.get(L),G=this._pc.getTransceivers().find(de=>de.mid===I);if(!G)throw new Error("transceiver not found");M(G.receiver)}}let N=await this._pc.createAnswer();const j=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=R.get(L),G=j.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=R.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),x.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return x}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:x,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D,protocol:R};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(x,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:x}){x||(x=p.parse(this._pc.localDescription.sdp));const R=b.extractDtlsParameters({sdpObject:x});R.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:R},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Chrome111=C},2196:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2211:d=>{d.exports=function(l){var o,p,y="",m=(l=function(b){return b||(b={}),{length:b.length||8,numeric:typeof b.numeric!="boolean"||b.numeric,letters:typeof b.letters!="boolean"||b.letters,special:typeof b.special=="boolean"&&b.special,exclude:Array.isArray(b.exclude)?b.exclude:[]}}(l)).length,u=(l.exclude,function(b){var f="";b.numeric&&(f+="0123456789"),b.letters&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),b.special&&(f+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var _=0;_<=b.exclude.length;_++)f=f.replace(b.exclude[_],"");return f}(l));for(o=1;o<=m;o++)y+=u.substring(p=Math.floor(Math.random()*u.length),p+1);return y}},2215:(d,l,o)=>{var p,y;(function(m){(y=typeof(p=m)=="function"?p.call(l,o,l,d):p)===void 0||(d.exports=y),d.exports=m()})(function(){function m(){for(var b=0,f={};b<arguments.length;b++){var _=arguments[b];for(var g in _)f[g]=_[g]}return f}function u(b){return b.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function b(f){function _(){}function g(w,S,E){if(typeof document<"u"){typeof(E=m({path:"/"},_.defaults,E)).expires=="number"&&(E.expires=new Date(1*new Date+864e5*E.expires)),E.expires=E.expires?E.expires.toUTCString():"";try{var O=JSON.stringify(S);/^[\{\[]/.test(O)&&(S=O)}catch{}S=f.write?f.write(S,w):encodeURIComponent(String(S)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),w=encodeURIComponent(String(w)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var C="";for(var k in E)E[k]&&(C+="; "+k,E[k]!==!0&&(C+="="+E[k].split(";")[0]));return document.cookie=w+"="+S+C}}function v(w,S){if(typeof document<"u"){for(var E={},O=document.cookie?document.cookie.split("; "):[],C=0;C<O.length;C++){var k=O[C].split("="),T=k.slice(1).join("=");S||T.charAt(0)!=='"'||(T=T.slice(1,-1));try{var h=u(k[0]);if(T=(f.read||f)(T,h)||u(T),S)try{T=JSON.parse(T)}catch{}if(E[h]=T,w===h)break}catch{}}return w?E[w]:E}}return _.set=g,_.get=function(w){return v(w,!1)},_.getJSON=function(w){return v(w,!0)},_.remove=function(w,S){g(w,"",m(S,{expires:-1}))},_.defaults={},_.withConverter=b,_}(function(){})})},2284:(d,l,o)=>{function p(y){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},p(y)}o.d(l,{A:()=>p})},2291:(d,l)=>{let o;Object.defineProperty(l,"__esModule",{value:!0});const p=new Uint8Array(16);l.default=function(){if(!o){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(p)}},2292:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Firefox120=void 0;const p=o(7363),y=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),_=o(5938),g=o(521),v=o(1305),w=o(3303),S=new y.Logger("Firefox120"),E={OS:16,MIS:2048};class O extends g.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new O}get name(){return"Firefox120"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const T=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),h=document.createElement("canvas");h.getContext("2d");const x=h.captureStream().getVideoTracks()[0];try{T.addTransceiver("audio",{direction:"sendrecv"}),T.addTransceiver(x,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const R=await T.createOffer();try{h.remove()}catch{}try{x.stop()}catch{}try{T.close()}catch{}const P=p.parse(R.sdp);return f.extractRtpCapabilities({sdpObject:P})}catch(R){try{h.remove()}catch{}try{x.stop()}catch{}try{T.close()}catch{}throw R}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:E}}run({direction:T,iceParameters:h,iceCandidates:x,dtlsParameters:R,sctpParameters:P,iceServers:N,iceTransportPolicy:j,additionalSettings:D,proprietaryConstraints:L,extendedRtpCapabilities:M}){this.assertNotClosed(),S.debug("run()"),this._direction=T,this._remoteSdp=new v.RemoteSdp({iceParameters:h,iceCandidates:x,dtlsParameters:R,sctpParameters:P}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",M),video:b.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",M),video:b.getSendingRemoteRtpParameters("video",M)},this._pc=new RTCPeerConnection({iceServers:N??[],iceTransportPolicy:j??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...D},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",I=>{this.emit("@icecandidateerror",I)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(T){throw this.assertNotClosed(),new m.UnsupportedError("not supported")}async restartIce(T){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(T),this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const x={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:T,encodings:h,codecOptions:x,codec:R,onRtpSender:P}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),h&&h.length>1&&h.forEach((Q,ae)=>{Q.rid=`r${ae}`});const N=u.clone(this._sendingRtpParametersByKind[T.kind]);N.codecs=b.reduceCodecs(N.codecs,R);const j=u.clone(this._sendingRemoteRtpParametersByKind[T.kind]);j.codecs=b.reduceCodecs(j.codecs,R);const D=this._pc.addTransceiver(T,{direction:"sendonly",streams:[this._sendStream],sendEncodings:h});P&&P(D.sender);const L=await this._pc.createOffer();let M=p.parse(L.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M});const I=(0,w.parse)((h??[{}])[0].scalabilityMode);S.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const G=D.mid;N.mid=G,M=p.parse(this._pc.localDescription.sdp);const de=M.media[M.media.length-1];if(N.rtcp.cname=f.getCname({offerMediaObject:de}),h)if(h.length===1){const Q=_.getRtpEncodings({offerMediaObject:de});Object.assign(Q[0],h[0]),N.encodings=Q}else N.encodings=h;else N.encodings=_.getRtpEncodings({offerMediaObject:de});if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Q of N.encodings)Q.scalabilityMode?Q.scalabilityMode=`L1T${I.temporalLayers}`:Q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:de,offerRtpParameters:N,answerRtpParameters:j,codecOptions:x});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(G,D),{localId:G,rtpParameters:N,rtpSender:D.sender}}async stopSending(T){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",T),this._closed)return;const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated transceiver not found");h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.disableMediaSection(h.mid);const x=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R),this._mapMidTransceiver.delete(T)}async pauseSending(T){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="inactive",this._remoteSdp.pauseMediaSection(T);const x=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async resumeSending(T){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",T);const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");h.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(T);const x=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}async replaceTrack(T,h){this.assertNotClosed(),this.assertSendDirection(),h?S.debug("replaceTrack() [localId:%s, track.id:%s]",T,h.id):S.debug("replaceTrack() [localId:%s, no track]",T);const x=this._mapMidTransceiver.get(T);if(!x)throw new Error("associated RTCRtpTransceiver not found");await x.sender.replaceTrack(h)}async setMaxSpatialLayer(T,h){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,h);const x=this._mapMidTransceiver.get(T);if(!x)throw new Error("associated transceiver not found");const R=x.sender.getParameters();R.encodings.forEach((j,D)=>{j.active=D<=h}),await x.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(T,R.encodings);const P=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(T,h){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,h);const x=this._mapMidTransceiver.get(T);if(!x)throw new Error("associated RTCRtpTransceiver not found");const R=x.sender.getParameters();R.encodings.forEach((j,D)=>{R.encodings[D]={...j,...h}}),await x.sender.setParameters(R),this._remoteSdp.muxMediaSectionSimulcast(T,R.encodings);const P=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P);const N={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(T){this.assertNotClosed(),this.assertSendDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:T,maxPacketLifeTime:h,maxRetransmits:x,label:R,protocol:P}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:T,maxPacketLifeTime:h,maxRetransmits:x,protocol:P};S.debug("sendDataChannel() [options:%o]",N);const j=this._pc.createDataChannel(R,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%E.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),L=p.parse(D.sdp),M=L.media.find(G=>G.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:L}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const I={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:j,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(T){this.assertNotClosed(),this.assertRecvDirection();const h=[],x=new Map;for(const j of T){const{trackId:D,kind:L,rtpParameters:M,streamId:I}=j;S.debug("receive() [trackId:%s, kind:%s]",D,L);const G=M.mid??String(this._mapMidTransceiver.size);x.set(D,G),this._remoteSdp.receive({mid:G,kind:L,offerRtpParameters:M,streamId:I??M.rtcp.cname,trackId:D})}const R={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",R),await this._pc.setRemoteDescription(R);for(const j of T){const{trackId:D,onRtpReceiver:L}=j;if(L){const M=x.get(D),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("transceiver not found");L(I.receiver)}}let P=await this._pc.createAnswer();const N=p.parse(P.sdp);for(const j of T){const{trackId:D,rtpParameters:L}=j,M=x.get(D),I=N.media.find(G=>String(G.mid)===M);f.applyCodecParameters({offerRtpParameters:L,answerMediaObject:I}),P={type:"answer",sdp:p.write(N)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",P),await this._pc.setLocalDescription(P);for(const j of T){const{trackId:D}=j,L=x.get(D),M=this._pc.getTransceivers().find(I=>I.mid===L);if(!M)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,M),h.push({localId:L,track:M.receiver.track,rtpReceiver:M.receiver})}return h}async stopReceiving(T){if(this.assertRecvDirection(),this._closed)return;for(const R of T){S.debug("stopReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(P.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const R of T)this._mapMidTransceiver.delete(R)}async pauseReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const R of T){S.debug("pauseReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="inactive",this._remoteSdp.pauseMediaSection(R)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async resumeReceiving(T){this.assertNotClosed(),this.assertRecvDirection();for(const R of T){S.debug("resumeReceiving() [localId:%s]",R);const P=this._mapMidTransceiver.get(R);if(!P)throw new Error("associated RTCRtpTransceiver not found");P.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(R)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const x=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x)}async getReceiverStats(T){this.assertRecvDirection();const h=this._mapMidTransceiver.get(T);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:T,label:h,protocol:x}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:R,ordered:P,maxPacketLifeTime:N,maxRetransmits:j}=T,D={negotiated:!0,id:R,ordered:P,maxPacketLifeTime:N,maxRetransmits:j,protocol:x};S.debug("receiveDataChannel() [options:%o]",D);const L=this._pc.createDataChannel(h,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const M={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const I=await this._pc.createAnswer();if(!this._transportReady){const G=p.parse(I.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:G})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setLocalDescription(I),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:T,localSdpObject:h}){h||(h=p.parse(this._pc.localDescription.sdp));const x=f.extractDtlsParameters({sdpObject:h});x.role=T,this._remoteSdp.updateDtlsRole(T==="client"?"server":"client"),await new Promise((R,P)=>{this.safeEmit("@connect",{dtlsParameters:x},R,P)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new m.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Firefox120=O},2696:function(d,l,o){var p;d.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var y=p,m=y.lib.StreamCipher,u=y.algo,b=[],f=[],_=[],g=u.RabbitLegacy=m.extend({_doReset:function(){var w=this._key.words,S=this.cfg.iv,E=this._X=[w[0],w[3]<<16|w[2]>>>16,w[1],w[0]<<16|w[3]>>>16,w[2],w[1]<<16|w[0]>>>16,w[3],w[2]<<16|w[1]>>>16],O=this._C=[w[2]<<16|w[2]>>>16,4294901760&w[0]|65535&w[1],w[3]<<16|w[3]>>>16,4294901760&w[1]|65535&w[2],w[0]<<16|w[0]>>>16,4294901760&w[2]|65535&w[3],w[1]<<16|w[1]>>>16,4294901760&w[3]|65535&w[0]];this._b=0;for(var C=0;C<4;C++)v.call(this);for(C=0;C<8;C++)O[C]^=E[C+4&7];if(S){var k=S.words,T=k[0],h=k[1],x=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),R=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),P=x>>>16|4294901760&R,N=R<<16|65535&x;for(O[0]^=x,O[1]^=P,O[2]^=R,O[3]^=N,O[4]^=x,O[5]^=P,O[6]^=R,O[7]^=N,C=0;C<4;C++)v.call(this)}},_doProcessBlock:function(w,S){var E=this._X;v.call(this),b[0]=E[0]^E[5]>>>16^E[3]<<16,b[1]=E[2]^E[7]>>>16^E[5]<<16,b[2]=E[4]^E[1]>>>16^E[7]<<16,b[3]=E[6]^E[3]>>>16^E[1]<<16;for(var O=0;O<4;O++)b[O]=16711935&(b[O]<<8|b[O]>>>24)|4278255360&(b[O]<<24|b[O]>>>8),w[S+O]^=b[O]},blockSize:4,ivSize:2});function v(){for(var w=this._X,S=this._C,E=0;E<8;E++)f[E]=S[E];for(S[0]=S[0]+1295307597+this._b|0,S[1]=S[1]+3545052371+(S[0]>>>0<f[0]>>>0?1:0)|0,S[2]=S[2]+886263092+(S[1]>>>0<f[1]>>>0?1:0)|0,S[3]=S[3]+1295307597+(S[2]>>>0<f[2]>>>0?1:0)|0,S[4]=S[4]+3545052371+(S[3]>>>0<f[3]>>>0?1:0)|0,S[5]=S[5]+886263092+(S[4]>>>0<f[4]>>>0?1:0)|0,S[6]=S[6]+1295307597+(S[5]>>>0<f[5]>>>0?1:0)|0,S[7]=S[7]+3545052371+(S[6]>>>0<f[6]>>>0?1:0)|0,this._b=S[7]>>>0<f[7]>>>0?1:0,E=0;E<8;E++){var O=w[E]+S[E],C=65535&O,k=O>>>16,T=((C*C>>>17)+C*k>>>15)+k*k,h=((4294901760&O)*O|0)+((65535&O)*O|0);_[E]=T^h}w[0]=_[0]+(_[7]<<16|_[7]>>>16)+(_[6]<<16|_[6]>>>16)|0,w[1]=_[1]+(_[0]<<8|_[0]>>>24)+_[7]|0,w[2]=_[2]+(_[1]<<16|_[1]>>>16)+(_[0]<<16|_[0]>>>16)|0,w[3]=_[3]+(_[2]<<8|_[2]>>>24)+_[1]|0,w[4]=_[4]+(_[3]<<16|_[3]>>>16)+(_[2]<<16|_[2]>>>16)|0,w[5]=_[5]+(_[4]<<8|_[4]>>>24)+_[3]|0,w[6]=_[6]+(_[5]<<16|_[5]>>>16)+(_[4]<<16|_[4]>>>16)|0,w[7]=_[7]+(_[6]<<8|_[6]>>>24)+_[5]|0}y.RabbitLegacy=m._createHelper(g)}(),p.RabbitLegacy)},2731:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FakeHandler=void 0;const p=o(5328),y=o(3953),m=o(2994),u=o(1765),b=o(8046),f=o(4893),_=o(521),g=new m.Logger("FakeHandler");class v extends y.EnhancedEventEmitter{constructor({id:O,ordered:C,maxPacketLifeTime:k,maxRetransmits:T,label:h,protocol:x}){super();we(this,"id");we(this,"ordered");we(this,"maxPacketLifeTime");we(this,"maxRetransmits");we(this,"label");we(this,"protocol");this.id=O,this.ordered=C,this.maxPacketLifeTime=k,this.maxRetransmits=T,this.label=h,this.protocol=x}close(){this.safeEmit("close"),this.emit("@close")}send(O){this.safeEmit("message",O)}addEventListener(O,C){this.on(O,C)}}class w extends _.HandlerInterface{constructor(O){super();we(this,"_closed",!1);we(this,"fakeParameters");we(this,"_rtpParametersByKind");we(this,"_cname",`CNAME-${u.generateRandomNumber()}`);we(this,"_transportReady",!1);we(this,"_nextLocalId",1);we(this,"_tracks",new Map);we(this,"_nextSctpStreamId",0);this.fakeParameters=O}static createFactory(O){return()=>new w(O)}get name(){return"FakeHandler"}close(){g.debug("close()"),this._closed||(this._closed=!0)}setIceGatheringState(O){this.emit("@icegatheringstatechange",O)}setConnectionState(O){this.emit("@connectionstatechange",O)}async getNativeRtpCapabilities(){return g.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:O,iceParameters:C,iceCandidates:k,dtlsParameters:T,sctpParameters:h,iceServers:x,iceTransportPolicy:R,proprietaryConstraints:P,extendedRtpCapabilities:N}){this.assertNotClosed(),g.debug("run()"),this._rtpParametersByKind={audio:b.getSendingRtpParameters("audio",N),video:b.getSendingRtpParameters("video",N)}}async updateIceServers(O){this.assertNotClosed(),g.debug("updateIceServers()")}async restartIce(O){this.assertNotClosed(),g.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:O,encodings:C,codecOptions:k,codec:T}){this.assertNotClosed(),g.debug("send() [kind:%s, track.id:%s]",O.kind,O.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const h=u.clone(this._rtpParametersByKind[O.kind]),x=h.codecs.some(P=>/.+\/rtx$/i.test(P.mimeType));h.mid=`mid-${u.generateRandomNumber()}`,C||(C=[{}]);for(const P of C)P.ssrc=u.generateRandomNumber(),x&&(P.rtx={ssrc:u.generateRandomNumber()});h.encodings=C,h.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const R=this._nextLocalId++;return this._tracks.set(R,O),{localId:String(R),rtpParameters:h}}async stopSending(O){if(g.debug("stopSending() [localId:%s]",O),!this._closed){if(!this._tracks.has(Number(O)))throw new Error("local track not found");this._tracks.delete(Number(O))}}async pauseSending(O){this.assertNotClosed()}async resumeSending(O){this.assertNotClosed()}async replaceTrack(O,C){this.assertNotClosed(),C?g.debug("replaceTrack() [localId:%s, track.id:%s]",O,C.id):g.debug("replaceTrack() [localId:%s, no track]",O),this._tracks.delete(Number(O)),this._tracks.set(Number(O),C)}async setMaxSpatialLayer(O,C){this.assertNotClosed(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",O,C)}async setRtpEncodingParameters(O,C){this.assertNotClosed(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",O,C)}async getSenderStats(O){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:O,maxPacketLifeTime:C,maxRetransmits:k,label:T,protocol:h}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),g.debug("sendDataChannel()"),{dataChannel:new v({id:this._nextSctpStreamId++,ordered:O,maxPacketLifeTime:C,maxRetransmits:k,label:T,protocol:h}),sctpStreamParameters:{streamId:this._nextSctpStreamId,ordered:O,maxPacketLifeTime:C,maxRetransmits:k}}}async receive(O){this.assertNotClosed();const C=[];for(const k of O){const{trackId:T,kind:h}=k;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),g.debug("receive() [trackId:%s, kind:%s]",T,h);const x=this._nextLocalId++,R=new p.FakeMediaStreamTrack({kind:h});this._tracks.set(x,R),C.push({localId:String(x),track:R})}return C}async stopReceiving(O){if(!this._closed)for(const C of O)g.debug("stopReceiving() [localId:%s]",C),this._tracks.delete(Number(C))}async pauseReceiving(O){this.assertNotClosed()}async resumeReceiving(O){this.assertNotClosed()}async getReceiverStats(O){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:O,label:C,protocol:k}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),g.debug("receiveDataChannel()"),{dataChannel:new v({id:O.streamId,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits,label:C,protocol:k})}}async setupTransport({localDtlsRole:O,localSdpObject:C}){const k=u.clone(this.fakeParameters.generateLocalDtlsParameters());O&&(k.role=O),this.emit("@connectionstatechange","connecting"),await new Promise((T,h)=>this.emit("@connect",{dtlsParameters:k},T,h)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}}l.FakeHandler=w},2770:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(9746);l.default=function(y){if(!(0,p.default)(y))throw TypeError("Invalid UUID");return parseInt(y.slice(14,15),16)}},2829:(d,l)=>{function o(y,m,u,b){switch(y){case 0:return m&u^~m&b;case 1:case 3:return m^u^b;case 2:return m&u^m&b^u&b}}function p(y,m){return y<<m|y>>>32-m}Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(y){const m=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520],b=new Uint8Array(y.length+1);b.set(y),b[y.length]=128;const f=(y=b).length/4+2,_=Math.ceil(f/16),g=new Array(_);for(let v=0;v<_;++v){const w=new Uint32Array(16);for(let S=0;S<16;++S)w[S]=y[64*v+4*S]<<24|y[64*v+4*S+1]<<16|y[64*v+4*S+2]<<8|y[64*v+4*S+3];g[v]=w}g[_-1][14]=8*(y.length-1)/Math.pow(2,32),g[_-1][14]=Math.floor(g[_-1][14]),g[_-1][15]=8*(y.length-1)&4294967295;for(let v=0;v<_;++v){const w=new Uint32Array(80);for(let T=0;T<16;++T)w[T]=g[v][T];for(let T=16;T<80;++T)w[T]=p(w[T-3]^w[T-8]^w[T-14]^w[T-16],1);let S=u[0],E=u[1],O=u[2],C=u[3],k=u[4];for(let T=0;T<80;++T){const h=Math.floor(T/20),x=p(S,5)+o(h,E,O,C)+k+m[h]+w[T]>>>0;k=C,C=O,O=p(E,30)>>>0,E=S,S=x}u[0]=u[0]+S>>>0,u[1]=u[1]+E>>>0,u[2]=u[2]+O>>>0,u[3]=u[3]+C>>>0,u[4]=u[4]+k>>>0}return Uint8Array.of(u[0]>>24,u[0]>>16,u[0]>>8,u[0],u[1]>>24,u[1]>>16,u[1]>>8,u[1],u[2]>>24,u[2]>>16,u[2]>>8,u[2],u[3]>>24,u[3]>>16,u[3]>>8,u[3],u[4]>>24,u[4]>>16,u[4]>>8,u[4])}},2901:(d,l,o)=>{o.d(l,{A:()=>m});var p=o(816);function y(u,b){for(var f=0;f<b.length;f++){var _=b[f];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,(0,p.A)(_.key),_)}}function m(u,b,f){return b&&y(u.prototype,b),f&&y(u,f),Object.defineProperty(u,"prototype",{writable:!1}),u}},2988:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.URL=l.DNS=l.stringToBytes=void 0;const p=o(1797),y=o(6011);function m(u){u=unescape(encodeURIComponent(u));const b=new Uint8Array(u.length);for(let f=0;f<u.length;++f)b[f]=u.charCodeAt(f);return b}l.stringToBytes=m,l.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",l.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",l.default=function(u,b,f,_,g,v){const w=typeof f=="string"?m(f):f,S=typeof _=="string"?(0,p.default)(_):_;if(typeof _=="string"&&(_=(0,p.default)(_)),(_==null?void 0:_.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let E=new Uint8Array(16+w.length);if(E.set(S),E.set(w,S.length),E=b(E),E[6]=15&E[6]|u,E[8]=63&E[8]|128,g){v=v||0;for(let O=0;O<16;++O)g[v+O]=E[O];return g}return(0,y.unsafeStringify)(E)}},2994:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Logger=void 0;const p=o(7833),y="mediasoup-client";l.Logger=class{constructor(m){we(this,"_debug");we(this,"_warn");we(this,"_error");m?(this._debug=(0,p.default)(`${y}:${m}`),this._warn=(0,p.default)(`${y}:WARN:${m}`),this._error=(0,p.default)(`${y}:ERROR:${m}`)):(this._debug=(0,p.default)(y),this._warn=(0,p.default)(`${y}:WARN`),this._error=(0,p.default)(`${y}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3009:function(d,l,o){var p;d.exports=(p=o(9021),function(y){var m=p,u=m.lib,b=u.WordArray,f=u.Hasher,_=m.algo,g=[],v=[];(function(){function E(T){for(var h=y.sqrt(T),x=2;x<=h;x++)if(!(T%x))return!1;return!0}function O(T){return 4294967296*(T-(0|T))|0}for(var C=2,k=0;k<64;)E(C)&&(k<8&&(g[k]=O(y.pow(C,.5))),v[k]=O(y.pow(C,.3333333333333333)),k++),C++})();var w=[],S=_.SHA256=f.extend({_doReset:function(){this._hash=new b.init(g.slice(0))},_doProcessBlock:function(E,O){for(var C=this._hash.words,k=C[0],T=C[1],h=C[2],x=C[3],R=C[4],P=C[5],N=C[6],j=C[7],D=0;D<64;D++){if(D<16)w[D]=0|E[O+D];else{var L=w[D-15],M=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,I=w[D-2],G=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;w[D]=M+w[D-7]+G+w[D-16]}var de=k&T^k&h^T&h,ee=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22),Q=j+((R<<26|R>>>6)^(R<<21|R>>>11)^(R<<7|R>>>25))+(R&P^~R&N)+v[D]+w[D];j=N,N=P,P=R,R=x+Q|0,x=h,h=T,T=k,k=Q+(ee+de)|0}C[0]=C[0]+k|0,C[1]=C[1]+T|0,C[2]=C[2]+h|0,C[3]=C[3]+x|0,C[4]=C[4]+R|0,C[5]=C[5]+P|0,C[6]=C[6]+N|0,C[7]=C[7]+j|0},_doFinalize:function(){var E=this._data,O=E.words,C=8*this._nDataBytes,k=8*E.sigBytes;return O[k>>>5]|=128<<24-k%32,O[14+(k+64>>>9<<4)]=y.floor(C/4294967296),O[15+(k+64>>>9<<4)]=C,E.sigBytes=4*O.length,this._process(),this._hash},clone:function(){var E=f.clone.call(this);return E._hash=this._hash.clone(),E}});m.SHA256=f._createHelper(S),m.HmacSHA256=f._createHmacHelper(S)}(Math),p.SHA256)},3029:(d,l,o)=>{function p(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}o.d(l,{A:()=>p})},3128:function(d,l,o){var p;d.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var y=p,m=y.lib.BlockCipher,u=y.algo;const b=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],_=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var g={pbox:[],sbox:[]};function v(C,k){let T=k>>24&255,h=k>>16&255,x=k>>8&255,R=255&k,P=C.sbox[0][T]+C.sbox[1][h];return P^=C.sbox[2][x],P+=C.sbox[3][R],P}function w(C,k,T){let h,x=k,R=T;for(let P=0;P<b;++P)x^=C.pbox[P],R=v(C,x)^R,h=x,x=R,R=h;return h=x,x=R,R=h,R^=C.pbox[b],x^=C.pbox[b+1],{left:x,right:R}}function S(C,k,T){let h,x=k,R=T;for(let P=b+1;P>1;--P)x^=C.pbox[P],R=v(C,x)^R,h=x,x=R,R=h;return h=x,x=R,R=h,R^=C.pbox[1],x^=C.pbox[0],{left:x,right:R}}function E(C,k,T){for(let N=0;N<4;N++){C.sbox[N]=[];for(let j=0;j<256;j++)C.sbox[N][j]=_[N][j]}let h=0;for(let N=0;N<b+2;N++)C.pbox[N]=f[N]^k[h],h++,h>=T&&(h=0);let x=0,R=0,P=0;for(let N=0;N<b+2;N+=2)P=w(C,x,R),x=P.left,R=P.right,C.pbox[N]=x,C.pbox[N+1]=R;for(let N=0;N<4;N++)for(let j=0;j<256;j+=2)P=w(C,x,R),x=P.left,R=P.right,C.sbox[N][j]=x,C.sbox[N][j+1]=R;return!0}var O=u.Blowfish=m.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var C=this._keyPriorReset=this._key,k=C.words,T=C.sigBytes/4;E(g,k,T)}},encryptBlock:function(C,k){var T=w(g,C[k],C[k+1]);C[k]=T.left,C[k+1]=T.right},decryptBlock:function(C,k){var T=S(g,C[k],C[k+1]);C[k]=T.left,C[k+1]=T.right},blockSize:2,keySize:4,ivSize:2});y.Blowfish=m._createHelper(O)}(),p.Blowfish)},3145:(d,l,o)=>{function p(y,m){(m==null||m>y.length)&&(m=y.length);for(var u=0,b=Array(m);u<m;u++)b[u]=y[u];return b}o.d(l,{A:()=>p})},3200:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ProfileLevelId=l.Level=l.Profile=void 0,l.parseProfileLevelId=w,l.profileLevelIdToString=S,l.profileToString=function(k){switch(k){case y.ConstrainedBaseline:return"ConstrainedBaseline";case y.Baseline:return"Baseline";case y.Main:return"Main";case y.ConstrainedHigh:return"ConstrainedHigh";case y.High:return"High";case y.PredictiveHigh444:return"PredictiveHigh444";default:return void p.warn(`profileToString() | unrecognized profile ${k}`)}},l.levelToString=function(k){switch(k){case m.L1_b:return"1b";case m.L1:return"1";case m.L1_1:return"1.1";case m.L1_2:return"1.2";case m.L1_3:return"1.3";case m.L2:return"2";case m.L2_1:return"2.1";case m.L2_2:return"2.2";case m.L3:return"3";case m.L3_1:return"3.1";case m.L3_2:return"3.2";case m.L4:return"4";case m.L4_1:return"4.1";case m.L4_2:return"4.2";case m.L5:return"5";case m.L5_1:return"5.1";case m.L5_2:return"5.2";default:return void p.warn(`levelToString() | unrecognized level ${k}`)}},l.parseSdpProfileLevelId=E,l.isSameProfile=function(k={},T={}){const h=E(k),x=E(T);return!!(h&&x&&h.profile===x.profile)},l.isSameProfileAndLevel=function(k={},T={}){const h=E(k),x=E(T);return!!(h&&x&&h.profile===x.profile&&h.level==x.level)},l.generateProfileLevelIdStringForAnswer=function(k={},T={}){if(!k["profile-level-id"]&&!T["profile-level-id"])return void p.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const h=E(k),x=E(T);if(!h)throw new TypeError("invalid local_profile_level_id");if(!x)throw new TypeError("invalid remote_profile_level_id");if(h.profile!==x.profile)throw new TypeError("H264 Profile mismatch");const R=C(k)&&C(T),P=h.level,N=x.level,j=(L=P,M=N,function(I,G){return I===m.L1_b?G!==m.L1&&G!==m.L1_b:G===m.L1_b?I!==m.L1:I<G}(L,M)?L:M),D=R?P:j;var L,M;return p.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${h.profile}, level:${D}]`),S(new u(h.profile,D))},l.supportedLevel=function(k,T){for(let h=v.length-1;h>=0;--h){const x=v[h];if(256*x.max_macroblock_frame_size<=k&&x.max_macroblocks_per_second<=T*x.max_macroblock_frame_size)return p.debug(`supportedLevel() | result [max_frame_pixel_count:${k}, max_fps:${T}, level:${x.level}]`),x.level}return void p.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${k}, max_fps:${T}]`)};const p=new(o(3582)).Logger;var y,m;(function(k){k[k.ConstrainedBaseline=1]="ConstrainedBaseline",k[k.Baseline=2]="Baseline",k[k.Main=3]="Main",k[k.ConstrainedHigh=4]="ConstrainedHigh",k[k.High=5]="High",k[k.PredictiveHigh444=6]="PredictiveHigh444"})(y||(l.Profile=y={})),function(k){k[k.L1_b=0]="L1_b",k[k.L1=10]="L1",k[k.L1_1=11]="L1_1",k[k.L1_2=12]="L1_2",k[k.L1_3=13]="L1_3",k[k.L2=20]="L2",k[k.L2_1=21]="L2_1",k[k.L2_2=22]="L2_2",k[k.L3=30]="L3",k[k.L3_1=31]="L3_1",k[k.L3_2=32]="L3_2",k[k.L4=40]="L4",k[k.L4_1=41]="L4_1",k[k.L4_2=42]="L4_2",k[k.L5=50]="L5",k[k.L5_1=51]="L5_1",k[k.L5_2=52]="L5_2"}(m||(l.Level=m={}));class u{constructor(T,h){this.profile=T,this.level=h}}l.ProfileLevelId=u;const b=new u(y.ConstrainedBaseline,m.L3_1);class f{constructor(T){this.mask=~O("x",T),this.masked_value=O("1",T)}isMatch(T){return this.masked_value===(T&this.mask)}}class _{constructor(T,h,x){this.profile_idc=T,this.profile_iop=h,this.profile=x}}const g=[new _(66,new f("x1xx0000"),y.ConstrainedBaseline),new _(77,new f("1xxx0000"),y.ConstrainedBaseline),new _(88,new f("11xx0000"),y.ConstrainedBaseline),new _(66,new f("x0xx0000"),y.Baseline),new _(88,new f("10xx0000"),y.Baseline),new _(77,new f("0x0x0000"),y.Main),new _(100,new f("00000000"),y.High),new _(100,new f("00001100"),y.ConstrainedHigh),new _(244,new f("00000000"),y.PredictiveHigh444)],v=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:m.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:m.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:m.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:m.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:m.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:m.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:m.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:m.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:m.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:m.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:m.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:m.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:m.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:m.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:m.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:m.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:m.L5_2}];function w(k){if(typeof k!="string"||k.length!==6)return;const T=parseInt(k,16);if(T===0)return;const h=255&T,x=T>>8&255,R=T>>16&255;let P;switch(h){case m.L1_1:P=16&x?m.L1_b:m.L1_1;break;case m.L1:case m.L1_2:case m.L1_3:case m.L2:case m.L2_1:case m.L2_2:case m.L3:case m.L3_1:case m.L3_2:case m.L4:case m.L4_1:case m.L4_2:case m.L5:case m.L5_1:case m.L5_2:P=h;break;default:return void p.warn(`parseProfileLevelId() | unrecognized level_idc [str:${k}, level_idc:${h}]`)}for(const N of g)if(R===N.profile_idc&&N.profile_iop.isMatch(x))return p.debug(`parseProfileLevelId() | result [str:${k}, profile:${N.profile}, level:${P}]`),new u(N.profile,P);p.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${k}, profile_idc:${R}, profile_iop:${x}]`)}function S(k){if(k.level==m.L1_b)switch(k.profile){case y.ConstrainedBaseline:return"42f00b";case y.Baseline:return"42100b";case y.Main:return"4d100b";default:return void p.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${k.profile}`)}let T;switch(k.profile){case y.ConstrainedBaseline:T="42e0";break;case y.Baseline:T="4200";break;case y.Main:T="4d00";break;case y.ConstrainedHigh:T="640c";break;case y.High:T="6400";break;case y.PredictiveHigh444:T="f400";break;default:return void p.warn(`profileLevelIdToString() | unrecognized profile ${k.profile}`)}let h=k.level.toString(16);return h.length===1&&(h=`0${h}`),`${T}${h}`}function E(k={}){const T=k["profile-level-id"];return T?w(T):b}function O(k,T){return+(T[0]===k)<<7|+(T[1]===k)<<6|+(T[2]===k)<<5|+(T[3]===k)<<4|+(T[4]===k)<<3|+(T[5]===k)<<2|+(T[6]===k)<<1|+(T[7]===k)}function C(k={}){const T=k["level-asymmetry-allowed"];return T===!0||T===1||T==="1"}},3240:function(d,l,o){var p;d.exports=(p=o(9021),function(y){var m=p,u=m.lib,b=u.Base,f=u.WordArray,_=m.x64={};_.Word=b.extend({init:function(g,v){this.high=g,this.low=v}}),_.WordArray=b.extend({init:function(g,v){g=this.words=g||[],this.sigBytes=v!=y?v:8*g.length},toX32:function(){for(var g=this.words,v=g.length,w=[],S=0;S<v;S++){var E=g[S];w.push(E.high),w.push(E.low)}return f.create(w,this.sigBytes)},clone:function(){for(var g=b.clone.call(this),v=g.words=this.words.slice(0),w=v.length,S=0;S<w;S++)v[S]=v[S].clone();return g}})}(),p)},3303:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.parse=function(p){const y=o.exec(p??"");return y?{spatialLayers:Number(y[1]),temporalLayers:Number(y[2])}:{spatialLayers:1,temporalLayers:1}};const o=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})")},3465:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.default="00000000-0000-0000-0000-000000000000"},3471:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OfferMediaSection=l.AnswerMediaSection=l.MediaSection=void 0;const p=o(7363),y=o(1765);class m{constructor({iceParameters:f,iceCandidates:_,dtlsParameters:g,planB:v=!1}){we(this,"_mediaObject");we(this,"_planB");if(this._mediaObject={},this._planB=v,f&&this.setIceParameters(f),_){this._mediaObject.candidates=[];for(const w of _){const S={component:1};S.foundation=w.foundation,S.ip=w.address??w.ip,S.port=w.port,S.priority=w.priority,S.transport=w.protocol,S.type=w.type,w.tcpType&&(S.tcptype=w.tcpType),this._mediaObject.candidates.push(S)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}g&&this.setDtlsRole(g.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(f){this._mediaObject.iceUfrag=f.usernameFragment,this._mediaObject.icePwd=f.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}l.MediaSection=m,l.AnswerMediaSection=class extends m{constructor({iceParameters:b,iceCandidates:f,dtlsParameters:_,sctpParameters:g,plainRtpParameters:v,planB:w=!1,offerMediaObject:S,offerRtpParameters:E,answerRtpParameters:O,codecOptions:C}){switch(super({iceParameters:b,iceCandidates:f,dtlsParameters:_,planB:w}),this._mediaObject.mid=String(S.mid),this._mediaObject.type=S.type,this._mediaObject.protocol=S.protocol,v?(this._mediaObject.connection={ip:v.ip,version:v.ipVersion},this._mediaObject.port=v.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),S.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const k of O.codecs){const T={payload:k.payloadType,codec:u(k),rate:k.clockRate};k.channels>1&&(T.encoding=k.channels),this._mediaObject.rtp.push(T);const h=y.clone(k.parameters)??{};let x=y.clone(k.rtcpFeedback)??[];if(C){const{opusStereo:P,opusFec:N,opusDtx:j,opusMaxPlaybackRate:D,opusMaxAverageBitrate:L,opusPtime:M,opusNack:I,videoGoogleStartBitrate:G,videoGoogleMaxBitrate:de,videoGoogleMinBitrate:ee}=C,Q=E.codecs.find(ae=>ae.payloadType===k.payloadType);switch(k.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":P!==void 0&&(Q.parameters["sprop-stereo"]=P?1:0,h.stereo=P?1:0),N!==void 0&&(Q.parameters.useinbandfec=N?1:0,h.useinbandfec=N?1:0),j!==void 0&&(Q.parameters.usedtx=j?1:0,h.usedtx=j?1:0),D!==void 0&&(h.maxplaybackrate=D),L!==void 0&&(h.maxaveragebitrate=L),M!==void 0&&(Q.parameters.ptime=M,h.ptime=M),I||(Q.rtcpFeedback=Q.rtcpFeedback.filter(ae=>ae.type!=="nack"||ae.parameter),x=x.filter(ae=>ae.type!=="nack"||ae.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":G!==void 0&&(h["x-google-start-bitrate"]=G),de!==void 0&&(h["x-google-max-bitrate"]=de),ee!==void 0&&(h["x-google-min-bitrate"]=ee)}}const R={payload:k.payloadType,config:""};for(const P of Object.keys(h))R.config&&(R.config+=";"),R.config+=`${P}=${h[P]}`;R.config&&this._mediaObject.fmtp.push(R);for(const P of x)this._mediaObject.rtcpFb.push({payload:k.payloadType,type:P.type,subtype:P.parameter})}this._mediaObject.payloads=O.codecs.map(k=>k.payloadType).join(" "),this._mediaObject.ext=[];for(const k of O.headerExtensions)(S.ext??[]).some(T=>T.uri===k.uri)&&this._mediaObject.ext.push({uri:k.uri,value:k.id});if(S.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),S.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:S.simulcast.list1},this._mediaObject.rids=[];for(const k of S.rids??[])k.direction==="send"&&this._mediaObject.rids.push({id:k.id,direction:"recv"})}else if(S.simulcast_03){this._mediaObject.simulcast_03={value:S.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const k of S.rids??[])k.direction==="send"&&this._mediaObject.rids.push({id:k.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof S.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize):S.sctpmap&&(this._mediaObject.payloads=g.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize})}}setDtlsRole(b){switch(b){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(b){var v,w;if(!((v=this._mediaObject.simulcast)!=null&&v.list1))return;const f={};for(const S of b)S.rid&&(f[S.rid]=S);const _=this._mediaObject.simulcast.list1,g=p.parseSimulcastStreamList(_);for(const S of g)for(const E of S)E.paused=!((w=f[E.scid])!=null&&w.active);this._mediaObject.simulcast.list1=g.map(S=>S.map(E=>`${E.paused?"~":""}${E.scid}`).join(",")).join(";")}};function u(b){const f=new RegExp("^(audio|video)/(.+)","i").exec(b.mimeType);if(!f)throw new TypeError("invalid codec.mimeType");return f[2]}l.OfferMediaSection=class extends m{constructor({iceParameters:b,iceCandidates:f,dtlsParameters:_,sctpParameters:g,plainRtpParameters:v,planB:w=!1,mid:S,kind:E,offerRtpParameters:O,streamId:C,trackId:k,oldDataChannelSpec:T=!1}){var h;switch(super({iceParameters:b,iceCandidates:f,dtlsParameters:_,planB:w}),this._mediaObject.mid=String(S),this._mediaObject.type=E,v?(this._mediaObject.connection={ip:v.ip,version:v.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=v.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=g?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",E){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${C??"-"} ${k}`);for(const N of O.codecs){const j={payload:N.payloadType,codec:u(N),rate:N.clockRate};N.channels>1&&(j.encoding=N.channels),this._mediaObject.rtp.push(j);const D={payload:N.payloadType,config:""};for(const L of Object.keys(N.parameters))D.config&&(D.config+=";"),D.config+=`${L}=${N.parameters[L]}`;D.config&&this._mediaObject.fmtp.push(D);for(const L of N.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:N.payloadType,type:L.type,subtype:L.parameter})}this._mediaObject.payloads=O.codecs.map(N=>N.payloadType).join(" "),this._mediaObject.ext=[];for(const N of O.headerExtensions)this._mediaObject.ext.push({uri:N.uri,value:N.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const x=O.encodings[0],R=x.ssrc,P=(h=x.rtx)==null?void 0:h.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],O.rtcp.cname&&this._mediaObject.ssrcs.push({id:R,attribute:"cname",value:O.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:R,attribute:"msid",value:`${C??"-"} ${k}`}),P&&(O.rtcp.cname&&this._mediaObject.ssrcs.push({id:P,attribute:"cname",value:O.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:P,attribute:"msid",value:`${C??"-"} ${k}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${R} ${P}`}));break}case"application":T?(this._mediaObject.payloads=g.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:g.port,maxMessageSize:g.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=g.port,this._mediaObject.maxMessageSize=g.maxMessageSize)}}setDtlsRole(b){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:b,streamId:f,trackId:_}){var E;const g=b.encodings[0],v=g.ssrc,w=(E=g.rtx)==null?void 0:E.ssrc,S=this._mediaObject.payloads.split(" ");for(const O of b.codecs){if(S.includes(String(O.payloadType)))continue;const C={payload:O.payloadType,codec:u(O),rate:O.clockRate};O.channels>1&&(C.encoding=O.channels),this._mediaObject.rtp.push(C);const k={payload:O.payloadType,config:""};for(const T of Object.keys(O.parameters))k.config&&(k.config+=";"),k.config+=`${T}=${O.parameters[T]}`;k.config&&this._mediaObject.fmtp.push(k);for(const T of O.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:O.payloadType,type:T.type,subtype:T.parameter})}this._mediaObject.payloads+=` ${b.codecs.filter(O=>!this._mediaObject.payloads.includes(O.payloadType)).map(O=>O.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),b.rtcp.cname&&this._mediaObject.ssrcs.push({id:v,attribute:"cname",value:b.rtcp.cname}),this._mediaObject.ssrcs.push({id:v,attribute:"msid",value:`${f??"-"} ${_}`}),w&&(b.rtcp.cname&&this._mediaObject.ssrcs.push({id:w,attribute:"cname",value:b.rtcp.cname}),this._mediaObject.ssrcs.push({id:w,attribute:"msid",value:`${f??"-"} ${_}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${v} ${w}`}))}planBStopReceiving({offerRtpParameters:b}){var v;const f=b.encodings[0],_=f.ssrc,g=(v=f.rtx)==null?void 0:v.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(w=>w.id!==_&&w.id!==g),g&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(w=>w.ssrcs!==`${_} ${g}`))}}},3518:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Consumer=void 0;const p=o(2994),y=o(3953),m=o(4893),u=new p.Logger("Consumer");class b extends y.EnhancedEventEmitter{constructor({id:g,localId:v,producerId:w,rtpReceiver:S,track:E,rtpParameters:O,appData:C}){super();we(this,"_id");we(this,"_localId");we(this,"_producerId");we(this,"_closed",!1);we(this,"_rtpReceiver");we(this,"_track");we(this,"_rtpParameters");we(this,"_paused");we(this,"_appData");we(this,"_observer",new y.EnhancedEventEmitter);u.debug("constructor()"),this._id=g,this._localId=v,this._producerId=w,this._rtpReceiver=S,this._track=E,this._rtpParameters=O,this._paused=!E.enabled,this._appData=C??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(u.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(u.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new m.InvalidStateError("closed");return new Promise((g,v)=>{this.safeEmit("@getstats",g,v)})}pause(){u.debug("pause()"),this._closed?u.error("pause() | Consumer closed"):this._paused?u.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){u.debug("resume()"),this._closed?u.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):u.debug("resume() | Consumer is already resumed")}onTrackEnded(){u.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}l.Consumer=b},3582:function(d,l,o){var p=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(l,"__esModule",{value:!0}),l.Logger=void 0;const y=p(o(7833)),m="h264-profile-level-id";l.Logger=class{constructor(u){u?(this._debug=(0,y.default)(`${m}:${u}`),this._warn=(0,y.default)(`${m}:WARN:${u}`),this._error=(0,y.default)(`${m}:ERROR:${u}`)):(this._debug=(0,y.default)(m),this._warn=(0,y.default)(`${m}:WARN`),this._error=(0,y.default)(`${m}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3662:(d,l,o)=>{function p(y,m){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,b){return u.__proto__=b,u},p(y,m)}o.d(l,{A:()=>p})},3738:d=>{function l(o){return d.exports=l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},d.exports.__esModule=!0,d.exports.default=d.exports,l(o)}d.exports=l,d.exports.__esModule=!0,d.exports.default=d.exports},3779:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0});const o=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);l.default={randomUUID:o}},3785:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=function(o){return o===void 0?void 0:Number.isNaN(o)?NaN:typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))}},3797:function(d,l,o){var p,y,m;d.exports=(m=o(9021),o(7165),m.mode.OFB=(p=m.lib.BlockCipherMode.extend(),y=p.Encryptor=p.extend({processBlock:function(u,b){var f=this._cipher,_=f.blockSize,g=this._iv,v=this._keystream;g&&(v=this._keystream=g.slice(0),this._iv=void 0),f.encryptBlock(v,0);for(var w=0;w<_;w++)u[b+w]^=v[w]}}),p.Decryptor=y,p),m.mode.OFB)},3804:(d,l,o)=>{var p=o(5602),y=/%[sdv%]/g,m=function(_){var g=1,v=arguments,w=v.length;return _.replace(y,function(S){if(g>=w)return S;var E=v[g];switch(g+=1,S){case"%%":return"%";case"%s":return String(E);case"%d":return Number(E);case"%v":return""}})},u=function(_,g,v){var w=[_+"="+(g.format instanceof Function?g.format(g.push?v:v[g.name]):g.format)];if(g.names)for(var S=0;S<g.names.length;S+=1){var E=g.names[S];g.name?w.push(v[g.name][E]):w.push(v[g.names[S]])}else w.push(v[g.name]);return m.apply(null,w)},b=["v","o","s","i","u","e","p","c","b","t","r","z","a"],f=["i","c","b","a"];d.exports=function(_,g){g=g||{},_.version==null&&(_.version=0),_.name==null&&(_.name=" "),_.media.forEach(function(E){E.payloads==null&&(E.payloads="")});var v=g.outerOrder||b,w=g.innerOrder||f,S=[];return v.forEach(function(E){p[E].forEach(function(O){O.name in _&&_[O.name]!=null?S.push(u(E,O,_)):O.push in _&&_[O.push]!=null&&_[O.push].forEach(function(C){S.push(u(E,O,C))})})}),_.media.forEach(function(E){S.push(u("m",p.m[0],E)),w.forEach(function(O){p[O].forEach(function(C){C.name in E&&E[C.name]!=null?S.push(u(O,C,E)):C.push in E&&E[C.push]!=null&&E[C.push].forEach(function(k){S.push(u(O,C,k))})})})}),S.join(`\r
`)+`\r
`}},3953:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EnhancedEventEmitter=void 0;const p=o(9596),y=new(o(2994)).Logger("EnhancedEventEmitter");class m extends p.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(b,...f){return super.emit(b,...f)}safeEmit(b,...f){try{return super.emit(b,...f)}catch(_){y.error("safeEmit() | event listener threw an error [eventName:%s]:%o",b,_);try{super.emit("listenererror",b,_)}catch{}return!!super.listenerCount(b)}}on(b,f){return super.on(b,f),this}off(b,f){return super.off(b,f),this}addListener(b,f){return super.on(b,f),this}prependListener(b,f){return super.prependListener(b,f),this}once(b,f){return super.once(b,f),this}prependOnceListener(b,f){return super.prependOnceListener(b,f),this}removeListener(b,f){return super.off(b,f),this}removeAllListeners(b){return super.removeAllListeners(b),this}listenerCount(b){return super.listenerCount(b)}listeners(b){return super.listeners(b)}rawListeners(b){return super.rawListeners(b)}}l.EnhancedEventEmitter=m},3954:(d,l,o)=>{function p(y){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},p(y)}o.d(l,{A:()=>p})},4039:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ReactNativeUnifiedPlan=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),_=o(4256),g=o(4893),v=o(521),w=o(1305),S=o(3303),E=new y.Logger("ReactNativeUnifiedPlan"),O={OS:1024,MIS:1024};class C extends v.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new C}get name(){return"ReactNativeUnifiedPlan"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{h.addTransceiver("audio"),h.addTransceiver("video");const x=await h.createOffer();try{h.close()}catch{}const R=p.parse(x.sdp),P=b.extractRtpCapabilities({sdpObject:R});return _.addNackSupportForOpus(P),P}catch(x){try{h.close()}catch{}throw x}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:h,iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N,iceServers:j,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._direction=h,this._remoteSdp=new w.RemoteSdp({iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const x=this._pc.getConfiguration();x.iceServers=h,this._pc.setConfiguration(x)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:x,codecOptions:R,codec:P,onRtpSender:N}){this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),x&&x.length>1&&x.forEach((Se,ie)=>{Se.rid=`r${ie}`});const j=m.clone(this._sendingRtpParametersByKind[h.kind]);j.codecs=u.reduceCodecs(j.codecs,P);const D=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);D.codecs=u.reduceCodecs(D.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:x});N&&N(M.sender);let I,G=await this._pc.createOffer(),de=p.parse(G.sdp);de.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de});let ee=!1;const Q=(0,S.parse)((x??[{}])[0].scalabilityMode);x&&x.length===1&&Q.spatialLayers>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(E.debug("send() | enabling legacy simulcast for VP9 SVC"),ee=!0,de=p.parse(G.sdp),I=de.media[L.idx],f.addLegacySimulcast({offerMediaObject:I,numStreams:Q.spatialLayers}),G={type:"offer",sdp:p.write(de)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",G),await this._pc.setLocalDescription(G);let ae=M.mid??void 0;if(ae||E.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),j.mid=ae,de=p.parse(this._pc.localDescription.sdp),I=de.media[L.idx],j.rtcp.cname=b.getCname({offerMediaObject:I}),x)if(x.length===1){let Se=f.getRtpEncodings({offerMediaObject:I});Object.assign(Se[0],x[0]),ee&&(Se=[Se[0]]),j.encodings=Se}else j.encodings=x;else j.encodings=f.getRtpEncodings({offerMediaObject:I});if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Se of j.encodings)Se.scalabilityMode?Se.scalabilityMode=`L1T${Q.temporalLayers}`:Se.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:L.reuseMid,offerRtpParameters:j,answerRtpParameters:D,codecOptions:R});const _e={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_e),await this._pc.setRemoteDescription(_e),ae||(ae=M.mid,j.mid=ae),this._mapMidTransceiver.set(ae,M),{localId:ae,rtpParameters:j,rtpSender:M.sender}}async stopSending(h){if(this.assertSendDirection(),this._closed)return;E.debug("stopSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");if(x.sender.replaceTrack(null),this._pc.removeTrack(x.sender),this._remoteSdp.closeMediaSection(x.mid))try{x.stop()}catch{}const R=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(h);const R=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(this._remoteSdp.resumeSendingMediaSection(h),!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="sendonly";const R=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,x){this.assertNotClosed(),this.assertSendDirection(),x?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,x.id):E.debug("replaceTrack() [localId:%s, no track]",h);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(x)}async setMaxSpatialLayer(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=x}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...x}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:x,maxRetransmits:R,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:x,maxRetransmits:R,protocol:N};E.debug("sendDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(P,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const x=[],R=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const D of h){const{trackId:L,onRtpReceiver:M}=D;if(M){const I=R.get(L),G=this._pc.getTransceivers().find(de=>de.mid===I);if(!G)throw new Error("transceiver not found");M(G.receiver)}}let N=await this._pc.createAnswer();const j=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=R.get(L),G=j.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=R.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),x.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return x}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:x,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D,protocol:R};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(x,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:x}){x||(x=p.parse(this._pc.localDescription.sdp));const R=b.extractDtlsParameters({sdpObject:x});R.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:R},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.ReactNativeUnifiedPlan=C},4160:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0})},4253:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AwaitQueueRemovedTaskError=l.AwaitQueueStoppedError=void 0;class o extends Error{constructor(m){super(m??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o)}}l.AwaitQueueStoppedError=o;class p extends Error{constructor(m){super(m??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,p)}}l.AwaitQueueRemovedTaskError=p},4256:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addNackSupportForOpus=function(o){var p;for(const y of o.codecs??[])y.mimeType.toLowerCase()!=="audio/opus"&&y.mimeType.toLowerCase()!=="audio/multiopus"||(p=y.rtcpFeedback)!=null&&p.some(m=>m.type==="nack"&&!m.parameter)||(y.rtcpFeedback||(y.rtcpFeedback=[]),y.rtcpFeedback.push({type:"nack"}))}},4299:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateV7State=void 0;const p=o(2291),y=o(6011),m={};function u(f,_,g){return f.msecs??(f.msecs=-1/0),f.seq??(f.seq=0),_>f.msecs?(f.seq=g[6]<<23|g[7]<<16|g[8]<<8|g[9],f.msecs=_):(f.seq=f.seq+1|0,f.seq===0&&f.msecs++),f}function b(f,_,g,v,w=0){if(f.length<16)throw new Error("Random bytes length must be >= 16");if(v){if(w<0||w+16>v.length)throw new RangeError(`UUID byte range ${w}:${w+15} is out of buffer bounds`)}else v=new Uint8Array(16),w=0;return _??(_=Date.now()),g??(g=127*f[6]<<24|f[7]<<16|f[8]<<8|f[9]),v[w++]=_/1099511627776&255,v[w++]=_/4294967296&255,v[w++]=_/16777216&255,v[w++]=_/65536&255,v[w++]=_/256&255,v[w++]=255&_,v[w++]=112|g>>>28&15,v[w++]=g>>>20&255,v[w++]=128|g>>>14&63,v[w++]=g>>>6&255,v[w++]=g<<2&255|3&f[10],v[w++]=f[11],v[w++]=f[12],v[w++]=f[13],v[w++]=f[14],v[w++]=f[15],v}l.updateV7State=u,l.default=function(f,_,g){var w;let v;if(f)v=b(f.random??((w=f.rng)==null?void 0:w.call(f))??(0,p.default)(),f.msecs,f.seq,_,g);else{const S=Date.now(),E=(0,p.default)();u(m,S,E),v=b(E,m.msecs,m.seq,_,g)}return _??(0,y.unsafeStringify)(v)}},4467:(d,l,o)=>{o.d(l,{A:()=>y});var p=o(816);function y(m,u,b){return(u=(0,p.A)(u))in m?Object.defineProperty(m,u,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[u]=b,m}},4496:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRtpEncodings=function({offerMediaObject:o,track:p}){const y=new Set;for(const b of o.ssrcs??[])if(b.attribute==="msid"&&b.value.split(" ")[1]===p.id){const f=b.id;y.add(f)}if(y.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${p.id}]`);const m=new Map;for(const b of o.ssrcGroups??[]){if(b.semantics!=="FID")continue;let[f,_]=b.ssrcs.split(/\s+/);f=Number(f),_=Number(_),y.has(f)&&(y.delete(f),y.delete(_),m.set(f,_))}for(const b of y)m.set(b,null);const u=[];for(const[b,f]of m){const _={ssrc:b};f&&(_.rtx={ssrc:f}),u.push(_)}return u},l.addLegacySimulcast=function({offerMediaObject:o,track:p,numStreams:y}){if(y<=1)throw new TypeError("numStreams must be greater than 1");let m,u,b;if(!(o.ssrcs??[]).find(w=>w.attribute!=="msid"?!1:w.value.split(" ")[1]===p.id&&(m=w.id,b=w.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${p.id}]`);(o.ssrcGroups??[]).some(w=>{if(w.semantics!=="FID")return!1;const S=w.ssrcs.split(/\s+/);return Number(S[0])===m&&(u=Number(S[1]),!0)});const f=o.ssrcs.find(w=>w.attribute==="cname"&&w.id===m);if(!f)throw new Error(`a=ssrc line with cname information not found [track.id:${p.id}]`);const _=f.value,g=[],v=[];for(let w=0;w<y;++w)g.push(m+w),u&&v.push(u+w);o.ssrcGroups=o.ssrcGroups??[],o.ssrcs=o.ssrcs??[],o.ssrcGroups.push({semantics:"SIM",ssrcs:g.join(" ")});for(const w of g)o.ssrcs.push({id:w,attribute:"cname",value:_}),o.ssrcs.push({id:w,attribute:"msid",value:`${b} ${p.id}`});for(let w=0;w<v.length;++w){const S=g[w],E=v[w];o.ssrcs.push({id:E,attribute:"cname",value:_}),o.ssrcs.push({id:E,attribute:"msid",value:`${b} ${p.id}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${S} ${E}`})}}},4557:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.URL=l.DNS=void 0;const p=o(2829),y=o(2988);var m=o(2988);function u(b,f,_,g){return(0,y.default)(80,p.default,b,f,_,g)}Object.defineProperty(l,"DNS",{enumerable:!0,get:function(){return m.DNS}}),Object.defineProperty(l,"URL",{enumerable:!0,get:function(){return m.URL}}),u.DNS=y.DNS,u.URL=y.URL,l.default=u},4633:(d,l,o)=>{var p=o(3738).default;function y(){d.exports=y=function(){return u},d.exports.__esModule=!0,d.exports.default=d.exports;var m,u={},b=Object.prototype,f=b.hasOwnProperty,_=typeof Symbol=="function"?Symbol:{},g=_.iterator||"@@iterator",v=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag";function S(ee,Q,ae,_e){return Object.defineProperty(ee,Q,{value:ae,enumerable:!_e,configurable:!_e,writable:!_e})}try{S({},"")}catch{S=function(Q,ae,_e){return Q[ae]=_e}}function E(ee,Q,ae,_e){var Se=Q&&Q.prototype instanceof k?Q:k,ie=Object.create(Se.prototype);return S(ie,"_invoke",function($e,je,se){var ue=1;return function(Ce,He){if(ue===3)throw Error("Generator is already running");if(ue===4){if(Ce==="throw")throw He;return{value:m,done:!0}}for(se.method=Ce,se.arg=He;;){var $t=se.delegate;if($t){var nr=L($t,se);if(nr){if(nr===C)continue;return nr}}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(ue===1)throw ue=4,se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);ue=3;var Ct=O($e,je,se);if(Ct.type==="normal"){if(ue=se.done?4:2,Ct.arg===C)continue;return{value:Ct.arg,done:se.done}}Ct.type==="throw"&&(ue=4,se.method="throw",se.arg=Ct.arg)}}}(ee,ae,new G(_e||[])),!0),ie}function O(ee,Q,ae){try{return{type:"normal",arg:ee.call(Q,ae)}}catch(_e){return{type:"throw",arg:_e}}}u.wrap=E;var C={};function k(){}function T(){}function h(){}var x={};S(x,g,function(){return this});var R=Object.getPrototypeOf,P=R&&R(R(de([])));P&&P!==b&&f.call(P,g)&&(x=P);var N=h.prototype=k.prototype=Object.create(x);function j(ee){["next","throw","return"].forEach(function(Q){S(ee,Q,function(ae){return this._invoke(Q,ae)})})}function D(ee,Q){function ae(Se,ie,$e,je){var se=O(ee[Se],ee,ie);if(se.type!=="throw"){var ue=se.arg,Ce=ue.value;return Ce&&p(Ce)=="object"&&f.call(Ce,"__await")?Q.resolve(Ce.__await).then(function(He){ae("next",He,$e,je)},function(He){ae("throw",He,$e,je)}):Q.resolve(Ce).then(function(He){ue.value=He,$e(ue)},function(He){return ae("throw",He,$e,je)})}je(se.arg)}var _e;S(this,"_invoke",function(Se,ie){function $e(){return new Q(function(je,se){ae(Se,ie,je,se)})}return _e=_e?_e.then($e,$e):$e()},!0)}function L(ee,Q){var ae=Q.method,_e=ee.i[ae];if(_e===m)return Q.delegate=null,ae==="throw"&&ee.i.return&&(Q.method="return",Q.arg=m,L(ee,Q),Q.method==="throw")||ae!=="return"&&(Q.method="throw",Q.arg=new TypeError("The iterator does not provide a '"+ae+"' method")),C;var Se=O(_e,ee.i,Q.arg);if(Se.type==="throw")return Q.method="throw",Q.arg=Se.arg,Q.delegate=null,C;var ie=Se.arg;return ie?ie.done?(Q[ee.r]=ie.value,Q.next=ee.n,Q.method!=="return"&&(Q.method="next",Q.arg=m),Q.delegate=null,C):ie:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,C)}function M(ee){this.tryEntries.push(ee)}function I(ee){var Q=ee[4]||{};Q.type="normal",Q.arg=m,ee[4]=Q}function G(ee){this.tryEntries=[[-1]],ee.forEach(M,this),this.reset(!0)}function de(ee){if(ee!=null){var Q=ee[g];if(Q)return Q.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var ae=-1,_e=function Se(){for(;++ae<ee.length;)if(f.call(ee,ae))return Se.value=ee[ae],Se.done=!1,Se;return Se.value=m,Se.done=!0,Se};return _e.next=_e}}throw new TypeError(p(ee)+" is not iterable")}return T.prototype=h,S(N,"constructor",h),S(h,"constructor",T),T.displayName=S(h,w,"GeneratorFunction"),u.isGeneratorFunction=function(ee){var Q=typeof ee=="function"&&ee.constructor;return!!Q&&(Q===T||(Q.displayName||Q.name)==="GeneratorFunction")},u.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,h):(ee.__proto__=h,S(ee,w,"GeneratorFunction")),ee.prototype=Object.create(N),ee},u.awrap=function(ee){return{__await:ee}},j(D.prototype),S(D.prototype,v,function(){return this}),u.AsyncIterator=D,u.async=function(ee,Q,ae,_e,Se){Se===void 0&&(Se=Promise);var ie=new D(E(ee,Q,ae,_e),Se);return u.isGeneratorFunction(Q)?ie:ie.next().then(function($e){return $e.done?$e.value:ie.next()})},j(N),S(N,w,"Generator"),S(N,g,function(){return this}),S(N,"toString",function(){return"[object Generator]"}),u.keys=function(ee){var Q=Object(ee),ae=[];for(var _e in Q)ae.unshift(_e);return function Se(){for(;ae.length;)if((_e=ae.pop())in Q)return Se.value=_e,Se.done=!1,Se;return Se.done=!0,Se}},u.values=de,G.prototype={constructor:G,reset:function(ee){if(this.prev=this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(I),!ee)for(var Q in this)Q.charAt(0)==="t"&&f.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=m)},stop:function(){this.done=!0;var ee=this.tryEntries[0][4];if(ee.type==="throw")throw ee.arg;return this.rval},dispatchException:function(ee){if(this.done)throw ee;var Q=this;function ae(ue){ie.type="throw",ie.arg=ee,Q.next=ue}for(var _e=Q.tryEntries.length-1;_e>=0;--_e){var Se=this.tryEntries[_e],ie=Se[4],$e=this.prev,je=Se[1],se=Se[2];if(Se[0]===-1)return ae("end"),!1;if(!je&&!se)throw Error("try statement without catch or finally");if(Se[0]!=null&&Se[0]<=$e){if($e<je)return this.method="next",this.arg=m,ae(je),!0;if($e<se)return ae(se),!1}}},abrupt:function(ee,Q){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var _e=this.tryEntries[ae];if(_e[0]>-1&&_e[0]<=this.prev&&this.prev<_e[2]){var Se=_e;break}}Se&&(ee==="break"||ee==="continue")&&Se[0]<=Q&&Q<=Se[2]&&(Se=null);var ie=Se?Se[4]:{};return ie.type=ee,ie.arg=Q,Se?(this.method="next",this.next=Se[2],C):this.complete(ie)},complete:function(ee,Q){if(ee.type==="throw")throw ee.arg;return ee.type==="break"||ee.type==="continue"?this.next=ee.arg:ee.type==="return"?(this.rval=this.arg=ee.arg,this.method="return",this.next="end"):ee.type==="normal"&&Q&&(this.next=Q),C},finish:function(ee){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ae=this.tryEntries[Q];if(ae[2]===ee)return this.complete(ae[4],ae[3]),I(ae),C}},catch:function(ee){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ae=this.tryEntries[Q];if(ae[0]===ee){var _e=ae[4];if(_e.type==="throw"){var Se=_e.arg;I(ae)}return Se}}throw Error("illegal catch attempt")},delegateYield:function(ee,Q,ae){return this.delegate={i:de(ee),r:Q,n:ae},this.method==="next"&&(this.arg=m),C}},u}d.exports=y,d.exports.__esModule=!0,d.exports.default=d.exports},4636:function(d,l,o){var p;d.exports=(p=o(9021),function(y){var m=p,u=m.lib,b=u.WordArray,f=u.Hasher,_=m.algo,g=[];(function(){for(var C=0;C<64;C++)g[C]=4294967296*y.abs(y.sin(C+1))|0})();var v=_.MD5=f.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,k){for(var T=0;T<16;T++){var h=k+T,x=C[h];C[h]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}var R=this._hash.words,P=C[k+0],N=C[k+1],j=C[k+2],D=C[k+3],L=C[k+4],M=C[k+5],I=C[k+6],G=C[k+7],de=C[k+8],ee=C[k+9],Q=C[k+10],ae=C[k+11],_e=C[k+12],Se=C[k+13],ie=C[k+14],$e=C[k+15],je=R[0],se=R[1],ue=R[2],Ce=R[3];je=w(je,se,ue,Ce,P,7,g[0]),Ce=w(Ce,je,se,ue,N,12,g[1]),ue=w(ue,Ce,je,se,j,17,g[2]),se=w(se,ue,Ce,je,D,22,g[3]),je=w(je,se,ue,Ce,L,7,g[4]),Ce=w(Ce,je,se,ue,M,12,g[5]),ue=w(ue,Ce,je,se,I,17,g[6]),se=w(se,ue,Ce,je,G,22,g[7]),je=w(je,se,ue,Ce,de,7,g[8]),Ce=w(Ce,je,se,ue,ee,12,g[9]),ue=w(ue,Ce,je,se,Q,17,g[10]),se=w(se,ue,Ce,je,ae,22,g[11]),je=w(je,se,ue,Ce,_e,7,g[12]),Ce=w(Ce,je,se,ue,Se,12,g[13]),ue=w(ue,Ce,je,se,ie,17,g[14]),je=S(je,se=w(se,ue,Ce,je,$e,22,g[15]),ue,Ce,N,5,g[16]),Ce=S(Ce,je,se,ue,I,9,g[17]),ue=S(ue,Ce,je,se,ae,14,g[18]),se=S(se,ue,Ce,je,P,20,g[19]),je=S(je,se,ue,Ce,M,5,g[20]),Ce=S(Ce,je,se,ue,Q,9,g[21]),ue=S(ue,Ce,je,se,$e,14,g[22]),se=S(se,ue,Ce,je,L,20,g[23]),je=S(je,se,ue,Ce,ee,5,g[24]),Ce=S(Ce,je,se,ue,ie,9,g[25]),ue=S(ue,Ce,je,se,D,14,g[26]),se=S(se,ue,Ce,je,de,20,g[27]),je=S(je,se,ue,Ce,Se,5,g[28]),Ce=S(Ce,je,se,ue,j,9,g[29]),ue=S(ue,Ce,je,se,G,14,g[30]),je=E(je,se=S(se,ue,Ce,je,_e,20,g[31]),ue,Ce,M,4,g[32]),Ce=E(Ce,je,se,ue,de,11,g[33]),ue=E(ue,Ce,je,se,ae,16,g[34]),se=E(se,ue,Ce,je,ie,23,g[35]),je=E(je,se,ue,Ce,N,4,g[36]),Ce=E(Ce,je,se,ue,L,11,g[37]),ue=E(ue,Ce,je,se,G,16,g[38]),se=E(se,ue,Ce,je,Q,23,g[39]),je=E(je,se,ue,Ce,Se,4,g[40]),Ce=E(Ce,je,se,ue,P,11,g[41]),ue=E(ue,Ce,je,se,D,16,g[42]),se=E(se,ue,Ce,je,I,23,g[43]),je=E(je,se,ue,Ce,ee,4,g[44]),Ce=E(Ce,je,se,ue,_e,11,g[45]),ue=E(ue,Ce,je,se,$e,16,g[46]),je=O(je,se=E(se,ue,Ce,je,j,23,g[47]),ue,Ce,P,6,g[48]),Ce=O(Ce,je,se,ue,G,10,g[49]),ue=O(ue,Ce,je,se,ie,15,g[50]),se=O(se,ue,Ce,je,M,21,g[51]),je=O(je,se,ue,Ce,_e,6,g[52]),Ce=O(Ce,je,se,ue,D,10,g[53]),ue=O(ue,Ce,je,se,Q,15,g[54]),se=O(se,ue,Ce,je,N,21,g[55]),je=O(je,se,ue,Ce,de,6,g[56]),Ce=O(Ce,je,se,ue,$e,10,g[57]),ue=O(ue,Ce,je,se,I,15,g[58]),se=O(se,ue,Ce,je,Se,21,g[59]),je=O(je,se,ue,Ce,L,6,g[60]),Ce=O(Ce,je,se,ue,ae,10,g[61]),ue=O(ue,Ce,je,se,j,15,g[62]),se=O(se,ue,Ce,je,ee,21,g[63]),R[0]=R[0]+je|0,R[1]=R[1]+se|0,R[2]=R[2]+ue|0,R[3]=R[3]+Ce|0},_doFinalize:function(){var C=this._data,k=C.words,T=8*this._nDataBytes,h=8*C.sigBytes;k[h>>>5]|=128<<24-h%32;var x=y.floor(T/4294967296),R=T;k[15+(h+64>>>9<<4)]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),k[14+(h+64>>>9<<4)]=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8),C.sigBytes=4*(k.length+1),this._process();for(var P=this._hash,N=P.words,j=0;j<4;j++){var D=N[j];N[j]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}return P},clone:function(){var C=f.clone.call(this);return C._hash=this._hash.clone(),C}});function w(C,k,T,h,x,R,P){var N=C+(k&T|~k&h)+x+P;return(N<<R|N>>>32-R)+k}function S(C,k,T,h,x,R,P){var N=C+(k&h|T&~h)+x+P;return(N<<R|N>>>32-R)+k}function E(C,k,T,h,x,R,P){var N=C+(k^T^h)+x+P;return(N<<R|N>>>32-R)+k}function O(C,k,T,h,x,R,P){var N=C+(T^(k|~h))+x+P;return(N<<R|N>>>32-R)+k}m.MD5=f._createHelper(v),m.HmacMD5=f._createHmacHelper(v)}(Math),p.MD5)},4725:function(d,l,o){var p;d.exports=(p=o(9021),function(){var y=p,m=y.lib.WordArray;function u(b,f,_){for(var g=[],v=0,w=0;w<f;w++)if(w%4){var S=_[b.charCodeAt(w-1)]<<w%4*2|_[b.charCodeAt(w)]>>>6-w%4*2;g[v>>>2]|=S<<24-v%4*8,v++}return m.create(g,v)}y.enc.Base64url={stringify:function(b,f){f===void 0&&(f=!0);var _=b.words,g=b.sigBytes,v=f?this._safe_map:this._map;b.clamp();for(var w=[],S=0;S<g;S+=3)for(var E=(_[S>>>2]>>>24-S%4*8&255)<<16|(_[S+1>>>2]>>>24-(S+1)%4*8&255)<<8|_[S+2>>>2]>>>24-(S+2)%4*8&255,O=0;O<4&&S+.75*O<g;O++)w.push(v.charAt(E>>>6*(3-O)&63));var C=v.charAt(64);if(C)for(;w.length%4;)w.push(C);return w.join("")},parse:function(b,f){f===void 0&&(f=!0);var _=b.length,g=f?this._safe_map:this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var w=0;w<g.length;w++)v[g.charCodeAt(w)]=w}var S=g.charAt(64);if(S){var E=b.indexOf(S);E!==-1&&(_=E)}return u(b,_,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),p.enc.Base64url)},4756:(d,l,o)=>{var p=o(4633)();d.exports=p;try{regeneratorRuntime=p}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},4893:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InvalidStateError=l.UnsupportedError=void 0;class o extends Error{constructor(m){super(m),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,o):this.stack=new Error(m).stack}}l.UnsupportedError=o;class p extends Error{constructor(m){super(m),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,p):this.stack=new Error(m).stack}}l.InvalidStateError=p},4905:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.pad.Iso10126={pad:function(y,m){var u=4*m,b=u-y.sigBytes%u;y.concat(p.lib.WordArray.random(b-1)).concat(p.lib.WordArray.create([b<<24],1))},unpad:function(y){var m=255&y.words[y.sigBytes-1>>>2];y.sigBytes-=m}},p.pad.Iso10126)},4973:(d,l,o)=>{o.d(l,{Zu:()=>b,lp:()=>u});var p=o(467),y=o(4756),m=o.n(y),u=(o(9027),function(){var f=(0,p.A)(m().mark(function _(g){return m().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(w){var S=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return S?new Promise(function(E,O){S.call(navigator,w,E,O)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),v.next=4,navigator.mediaDevices.getUserMedia(g);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},_)}));return function(_){return f.apply(this,arguments)}}()),b=function(){var f=(0,p.A)(m().mark(function _(g){return m().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(w){var S=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return S?new Promise(function(E,O){S.call(navigator,w,E,O)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),v.next=4,navigator.mediaDevices.getDisplayMedia(g);case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},_)}));return function(_){return f.apply(this,arguments)}}()},5020:(d,l,o)=>{var p=function(f){return String(Number(f))===f?Number(f):f},y=function(f,_,g){var v=f.name&&f.names;f.push&&!_[f.push]?_[f.push]=[]:v&&!_[f.name]&&(_[f.name]={});var w=f.push?{}:v?_[f.name]:_;(function(S,E,O,C){if(C&&!O)E[C]=p(S[1]);else for(var k=0;k<O.length;k+=1)S[k+1]!=null&&(E[O[k]]=p(S[k+1]))})(g.match(f.reg),w,f.names,f.name),f.push&&_[f.push].push(w)},m=o(5602),u=RegExp.prototype.test.bind(/^([a-z])=(.*)/);l.parse=function(f){var _={},g=[],v=_;return f.split(/(\r\n|\r|\n)/).filter(u).forEach(function(w){var S=w[0],E=w.slice(2);S==="m"&&(g.push({rtp:[],fmtp:[]}),v=g[g.length-1]);for(var O=0;O<(m[S]||[]).length;O+=1){var C=m[S][O];if(C.reg.test(E))return y(C,v,E)}}),_.media=g,_};var b=function(f,_){var g=_.split(/=(.+)/,2);return g.length===2?f[g[0]]=p(g[1]):g.length===1&&_.length>1&&(f[g[0]]=void 0),f};l.parseParams=function(f){return f.split(/;\s?/).reduce(b,{})},l.parseFmtpConfig=l.parseParams,l.parsePayloads=function(f){return f.toString().split(" ").map(Number)},l.parseRemoteCandidates=function(f){for(var _=[],g=f.split(" ").map(p),v=0;v<g.length;v+=3)_.push({component:g[v],ip:g[v+1],port:g[v+2]});return _},l.parseImageAttributes=function(f){return f.split(" ").map(function(_){return _.substring(1,_.length-1).split(",").reduce(b,{})})},l.parseSimulcastStreamList=function(f){return f.split(";").map(function(_){return _.split(",").map(function(g){var v,w=!1;return g[0]!=="~"?v=p(g):(v=p(g.substring(1,g.length)),w=!0),{scid:v,paused:w}})})}},5071:(d,l,o)=>{o.d(l,{V:()=>p});var p={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},5248:(d,l,o)=>{o(1765)},5328:(d,l,o)=>{var b,f,_,g,v,w,S,E,O,C,k,T,h,x,R,P;Object.defineProperty(l,"__esModule",{value:!0}),l.FakeMediaStreamTrack=void 0;const p=o(182),y=o(5862),m=o(3785),N=class N extends y.FakeEventTarget{constructor({kind:L,id:M,label:I,contentHint:G,enabled:de,muted:ee,readyState:Q,capabilities:ae,constraints:_e,settings:Se,data:ie}){super();Xs(this,b);Xs(this,f);Xs(this,_);Xs(this,g);Xs(this,v);Xs(this,w);Xs(this,S);Xs(this,E);Xs(this,O);Xs(this,C);Xs(this,k);Xs(this,T,null);Xs(this,h,null);Xs(this,x,null);Xs(this,R,null);Xs(this,P,null);Kn(this,b,M??(0,p.v4)()),Kn(this,f,L),Kn(this,_,I??""),Kn(this,S,G??""),Kn(this,v,de??!0),Kn(this,w,ee??!1),Kn(this,g,Q??"live"),Kn(this,E,ae??{}),Kn(this,O,_e??{}),Kn(this,C,Se??{}),Kn(this,k,ie??{})}get id(){return Dr(this,b)}get kind(){return Dr(this,f)}get label(){return Dr(this,_)}get contentHint(){return Dr(this,S)}set contentHint(L){Kn(this,S,L)}get enabled(){return Dr(this,v)}set enabled(L){const M=Dr(this,v)!==L;Kn(this,v,L),M&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return Dr(this,w)}get readyState(){return Dr(this,g)}get data(){return Dr(this,k)}set data(L){Kn(this,k,L)}get onmute(){return Dr(this,T)}set onmute(L){Dr(this,T)&&this.removeEventListener("mute",Dr(this,T)),Kn(this,T,L),L&&this.addEventListener("mute",L)}get onunmute(){return Dr(this,h)}set onunmute(L){Dr(this,h)&&this.removeEventListener("unmute",Dr(this,h)),Kn(this,h,L),L&&this.addEventListener("unmute",L)}get onended(){return Dr(this,x)}set onended(L){Dr(this,x)&&this.removeEventListener("ended",Dr(this,x)),Kn(this,x,L),L&&this.addEventListener("ended",L)}get onenabledchange(){return Dr(this,R)}set onenabledchange(L){Dr(this,R)&&this.removeEventListener("enabledchange",Dr(this,R)),Kn(this,R,L),L&&this.addEventListener("enabledchange",L)}get onstopped(){return Dr(this,P)}set onstopped(L){Dr(this,P)&&this.removeEventListener("stopped",Dr(this,P)),Kn(this,P,L),L&&this.addEventListener("stopped",L)}addEventListener(L,M,I){super.addEventListener(L,M,I)}removeEventListener(L,M){super.removeEventListener(L,M)}stop(){Dr(this,g)!=="ended"&&(Kn(this,g,"ended"),this.dispatchEvent(new Event("stopped")))}clone({id:L,data:M}={}){return new N({id:L??(0,p.v4)(),kind:Dr(this,f),label:Dr(this,_),contentHint:Dr(this,S),enabled:Dr(this,v),muted:Dr(this,w),readyState:Dr(this,g),capabilities:(0,m.clone)(Dr(this,E)),constraints:(0,m.clone)(Dr(this,O)),settings:(0,m.clone)(Dr(this,C)),data:M??(0,m.clone)(Dr(this,k))})}getCapabilities(){return Dr(this,E)}getConstraints(){return Dr(this,O)}async applyConstraints(L={}){return Kn(this,O,L),Promise.resolve()}getSettings(){return Dr(this,C)}remoteStop(){Dr(this,g)!=="ended"&&(Kn(this,g,"ended"),this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){Dr(this,w)||(Kn(this,w,!0),this.dispatchEvent(new Event("mute")))}remoteUnmute(){Dr(this,w)&&(Kn(this,w,!1),this.dispatchEvent(new Event("unmute")))}};b=new WeakMap,f=new WeakMap,_=new WeakMap,g=new WeakMap,v=new WeakMap,w=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,C=new WeakMap,k=new WeakMap,T=new WeakMap,h=new WeakMap,x=new WeakMap,R=new WeakMap,P=new WeakMap;let u=N;l.FakeMediaStreamTrack=u},5370:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0})},5414:d=>{d.exports=(()=>{var l={43:function(m,u,b){var f,_;(function(){f=function(){var g=function(){},v="undefined",w=typeof window!==v&&typeof window.navigator!==v&&/Trident\/|MSIE /.test(window.navigator.userAgent),S=["trace","debug","info","warn","error"];function E(N,j){var D=N[j];if(typeof D.bind=="function")return D.bind(N);try{return Function.prototype.bind.call(D,N)}catch{return function(){return Function.prototype.apply.apply(D,[N,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function C(N,j){for(var D=0;D<S.length;D++){var L=S[D];this[L]=D<N?g:this.methodFactory(L,N,j)}this.log=this.debug}function k(N,j,D){return function(){typeof console!==v&&(C.call(this,j,D),this[N].apply(this,arguments))}}function T(N,j,D){return function(L){return L==="debug"&&(L="log"),typeof console!==v&&(L==="trace"&&w?O:console[L]!==void 0?E(console,L):console.log!==void 0?E(console,"log"):g)}(N)||k.apply(this,arguments)}function h(N,j,D){var L,M=this,I="loglevel";function G(){var ee;if(typeof window!==v&&I){try{ee=window.localStorage[I]}catch{}if(typeof ee===v)try{var Q=window.document.cookie,ae=Q.indexOf(encodeURIComponent(I)+"=");ae!==-1&&(ee=/^([^;]+)/.exec(Q.slice(ae))[1])}catch{}return M.levels[ee]===void 0&&(ee=void 0),ee}}typeof N=="string"?I+=":"+N:typeof N=="symbol"&&(I=void 0),M.name=N,M.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},M.methodFactory=D||T,M.getLevel=function(){return L},M.setLevel=function(ee,Q){if(typeof ee=="string"&&M.levels[ee.toUpperCase()]!==void 0&&(ee=M.levels[ee.toUpperCase()]),!(typeof ee=="number"&&ee>=0&&ee<=M.levels.SILENT))throw"log.setLevel() called with invalid level: "+ee;if(L=ee,Q!==!1&&function(ae){var _e=(S[ae]||"silent").toUpperCase();if(typeof window!==v&&I){try{return void(window.localStorage[I]=_e)}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+_e+";"}catch{}}}(ee),C.call(M,ee,N),typeof console===v&&ee<M.levels.SILENT)return"No console available for logging"},M.setDefaultLevel=function(ee){G()||M.setLevel(ee,!1)},M.enableAll=function(ee){M.setLevel(M.levels.TRACE,ee)},M.disableAll=function(ee){M.setLevel(M.levels.SILENT,ee)};var de=G();de==null&&(de=j??"WARN"),M.setLevel(de,!1)}var x=new h,R={};x.getLogger=function(N){if(typeof N!="symbol"&&typeof N!="string"||N==="")throw new TypeError("You must supply a name when creating a logger.");var j=R[N];return j||(j=R[N]=new h(N,x.getLevel(),x.methodFactory)),j};var P=typeof window!==v?window.log:void 0;return x.noConflict=function(){return typeof window!==v&&window.log===x&&(window.log=P),x},x.getLoggers=function(){return R},x.default=x,x},(_=f.call(u,b,u,m))===void 0||(m.exports=_)})()}},o={};function p(m){var u=o[m];if(u!==void 0)return u.exports;var b=o[m]={exports:{}};return l[m].call(b.exports,b,b.exports,p),b.exports}p.d=(m,u)=>{for(var b in u)p.o(u,b)&&!p.o(m,b)&&Object.defineProperty(m,b,{enumerable:!0,get:u[b]})},p.o=(m,u)=>Object.prototype.hasOwnProperty.call(m,u),p.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var y={};return(()=>{p.r(y),p.d(y,{VideoSDKMetrics:()=>or});const m="inbound",u="outbound",b={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:m},f={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:u},_={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:m},g={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:u},v="inbound-rtp",w="bytesReceived",S="bytesSent",E="clockRate",O="codecId",C="currentRoundTripTime",k="roundTripTime",T="fractionLost",h="frameHeight",x="frameWidth",R="qualityLimitationReason",P="qualityLimitationDurations",N="qualityLimitationResolutionChanges",j="id",D="jitter",L="kind",M="mimeType",I="packetsLost",G="packetsReceived",de="packetsSent",ee="responsesReceived",Q="ssrc",ae="selected",_e="timestamp",Se="totalRoundTripTime",ie="roundTripTimeMeasurements",$e="type",je="framesDecoded",se="framesEncoded",ue="totalDecodeTime",Ce="totalEncodeTime",He="pliCount",$t="nackCount",nr="trackId",Ct="trackIdentifier",cr="mediaSourceId",br="audio",jt="video",nn={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Dt="audio",Xt="video",Gr="network",dn="data";var Mr=p(43);const Yr=()=>`${new Date().toISOString()} | metrics`,un=(Ye,Me,ot)=>`${Ye} | ${Me} | ${ot}`;Mr.setDefaultLevel(Mr.levels.TRACE);const Lt=(Ye,Me,ot)=>{ot?Mr.debug(un(Yr(),Ye,Me),ot):Mr.debug(un(Yr(),Ye,Me))},pn=(Ye,Me)=>{Mr.warn(un(Yr(),Ye,Me))},sn=(Ye,Me)=>{Mr.error(un(Yr(),Ye,Me))},zr="extractor   ",Lr=(Ye,Me,ot)=>{if(!Me)return null;const Le={};let lt=Me[br][Ye];lt||(lt=ot===m?{...b}:{...f}),Le[br]=lt;let lr=Me[jt][Ye];return lr||(lr=ot===m?{..._}:{...g}),Le[jt]=lr,Le},xn=(Ye,Me,ot,Le)=>{let lt=!1;const lr=Le[Me].total_rtt_ms_out,De=Le[Me].total_rtt_measure_out,Zt=ot?ot[Me].total_rtt_ms_out:0,Vt=ot?ot[Me].total_rtt_measure_out:0,_r={rtt:null,totalRTT:lr,totalRTTMeasurements:De};if(Ye[_e]===Le[Me].timestamp_out||!Object.prototype.hasOwnProperty.call(Ye,k)||Object.prototype.hasOwnProperty.call(Ye,ie)&&(lt=!0,Number(Ye[ie])===0||Number(Ye[ie])-Vt===De))return _r;const fr=1e3*Number(Ye[k]);let Pr=lr+fr,Xe=De+1;return lt&&(Pr=1e3*Number(Ye[Se])-Zt,Xe=Number(Ye[ie])-Vt),{rtt:fr,totalRTT:Pr,totalRTTMeasurements:Xe}},Xr=(Ye,Me,ot)=>Ye[_e]===ot[Me].timestamp_out?null:Object.prototype.hasOwnProperty.call(Ye,D)?1e3*(Number(Ye[D])||0):null,Pn=(Ye,Me,ot,Le)=>{if(!Object.prototype.hasOwnProperty.call(Ye,de)||!Object.prototype.hasOwnProperty.call(Ye,S))return{packetsSent:ot[Me].total_packets_out,packetsLost:ot[Me].total_packets_lost_out,bytesSent:ot[Me].total_KBytes_out};const lt=Number(Ye[de])||0-(Le?Le[Me].total_packets_out:0),lr=lt-ot[Me].total_packets_out,De=Number(Ye[S])/1024-(Le?Le[Me].total_KBytes_out:0),Zt=De-ot[Me].total_KBytes_out,Vt=Ye[_e]||Date.now(),_r=Le?Le.timestamp:null;let fr=ot.timestamp;!fr&&_r&&(fr=_r);const Pr=fr?Vt-fr:0;return{packetsSent:lt,deltaPacketsSent:lr,KBytesSent:De,deltaKBytesSent:Zt,kbsSent:Pr>0?.008*Zt*1024/Pr*1e3:0}},Sn=(Ye,Me,ot,Le)=>{let lt=ot[Me].total_packets_lost_out,lr=0,De=0;return Object.prototype.hasOwnProperty.call(Ye,I)&&(lt=Number(Ye[I])||0-(Le?Le[Me].total_packets_lost_out:0),lr=lt-ot[Me].total_packets_lost_out),Object.prototype.hasOwnProperty.call(Ye,T)&&(De=Number(100*Ye[T])),{packetsLost:lt,deltaPacketsLost:lr,fractionLost:De}},In=(Ye,Me,ot,Le)=>{if(!Object.prototype.hasOwnProperty.call(Ye,G)||!Object.prototype.hasOwnProperty.call(Ye,I)||!Object.prototype.hasOwnProperty.call(Ye,w))return{percent_packets_lost:ot[Me].percent_packets_lost_in,packetsReceived:ot[Me].total_packets_in,packetsLost:ot[Me].total_packets_lost_in,bytesReceived:ot[Me].total_KBytes_in};const lt=(Number(Ye[G])||0)-(Le?Le[Me].total_packets_in:0),lr=(Number(Ye[I])||0)-(Le?Le[Me].total_packets_lost_in:0),De=lr-ot[Me].total_packets_lost_in,Zt=lt-ot[Me].total_packets_in,Vt=lt!==ot[Me].total_packets_in?100*De/(De+Zt):0,_r=Number(Ye[w])/1024-(Le?Le[Me].total_KBytes_in:0),fr=_r-ot[Me].total_KBytes_in,Pr=Ye[_e]||Date.now(),Xe=Le?Le.timestamp:null;let Kt=ot.timestamp;!Kt&&Xe&&(Kt=Xe);const Tt=Kt?Pr-Kt:0;return{percentPacketsLost:Vt,packetsReceived:lt,deltaPacketsReceived:Zt,packetsLost:lr,deltaPacketsLost:De,KBytesReceived:_r,deltaKBytesReceived:fr,kbsReceived:Tt>0?.008*fr*1024/Tt*1e3:0}},Nn=Ye=>Ye.candidateType!=="relay"?"":Ye.relayProtocol||"",Wt=Ye=>Object.prototype.hasOwnProperty.call(Ye,h)&&Object.prototype.hasOwnProperty.call(Ye,x)?{width:Ye[x]||null,height:Ye[h]||null,framerate:Ye.framesPerSecond}:{width:null,height:null,framerate:null};class Mn{constructor(Me,ot){this._callbacks={onStatsCollected:null},this._id=`collector-${ot}`,this._moduleName=this._id,this._probeId=ot,this._config=Me,this._state="idle",this._statsReports=[]}registerCallback(Me,ot,Le){Me in this._callbacks?(this._callbacks[Me]={callback:ot,context:Le},Lt(this._moduleName,`registered callback '${Me}'`)):sn(this._moduleName,`can't register callback for '${Me}' - not found`)}unregisterCallback(Me){Me in this._callbacks?(this._callbacks[Me]=null,delete this._callbacks[Me],Lt(this._moduleName,`unregistered callback '${Me}'`)):sn(this._moduleName,`can't unregister callback for '${Me}' - not found`)}analyze(Me,ot){const Le=(lr=>{const De={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(lr){const Zt={...lr,audio:{},video:{},data:{...lr.data},network:{...lr.network}};return Object.keys(lr.audio).forEach(Vt=>{Zt.audio[Vt]={...lr.audio[Vt]}}),Object.keys(lr.video).forEach(Vt=>{Zt.video[Vt]={...lr.video[Vt]}}),Zt}return{...De,audio:{},video:{},data:{...De.data},network:{...De.network}}})(ot);Le.name=this._config.name,Le.meetingId=this._config.meetingId,Le.peerId=this._config.peerId,Le.count=ot?ot.count+1:1;let lt=null;return Me.forEach(lr=>{!lt&&lr.timestamp&&(lt=lr.timestamp),((De,Zt,Vt,_r)=>{if(!De)return[];switch(De[$e]){case"candidate-pair":let fr=!1;if(De.nominated&&De.state==="succeeded"&&(fr=!0,Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De),ae in De&&!De[ae]&&(fr=!1)),fr){De.localCandidateId,De.remoteCandidateId;const Xe=((Tt,zt,Fr)=>{const Nr=(Tt[w]||0)/1024-0,Vr=(Tt[S]||0)/1024-0,Er=Tt[_e]||Date.now(),xr=Nr-zt.data.total_KBytes_in,Jr=Vr-zt.data.total_KBytes_out;let Qn=zt.timestamp;const is=Qn?Er-Qn:0;return{total_KBytes_received:Nr,total_KBytes_sent:Vr,delta_KBytes_received:xr,delta_KBytes_sent:Jr,kbs_speed_received:is>0?.008*xr*1024/is*1e3:0,kbs_speed_sent:is>0?.008*Jr*1024/is*1e3:0}})(De,Zt),Kt=((Tt=>{Tt.availableIncomingBitrate,Tt.availableOutgoingBitrate})(De),((Tt,zt,Fr,Nr)=>{if(!Object.prototype.hasOwnProperty.call(Tt,C))return{rtt:null,totalRTT:Nr[zt].total_rtt_connectivity_ms,totalRTTMeasurements:Nr[zt].total_rtt_connectivity_measure};const Vr=1e3*Number(Tt[C]);let Er=Nr[zt].total_rtt_connectivity_ms+Vr,xr=Nr[zt].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(Tt,Se)&&(Er=1e3*Number(Tt[Se])-0),Object.prototype.hasOwnProperty.call(Tt,ee)&&(xr=Number(Tt[ee])-0),{rtt:Vr,totalRTT:Er,totalRTTMeasurements:xr}})(De,"data",_r,Zt));return[{type:dn,value:{total_KBytes_in:Xe.total_KBytes_received}},{type:dn,value:{total_KBytes_out:Xe.total_KBytes_sent}},{type:dn,value:{delta_KBytes_in:Xe.delta_KBytes_received}},{type:dn,value:{delta_KBytes_out:Xe.delta_KBytes_sent}},{type:dn,value:{delta_kbs_in:Xe.kbs_speed_received}},{type:dn,value:{delta_kbs_out:Xe.kbs_speed_sent}},{type:dn,value:{delta_rtt_connectivity_ms:Kt.rtt}}]}break;case"local-candidate":if(De[j]===Zt.network.local_candidate_id)return[{type:Gr,value:{infrastructure:De.networkType}},{type:Gr,value:{local_candidate_protocol:De.protocol||""}},{type:Gr,value:{local_candidate_relay_protocol:Nn(De)}}];break;case v:{Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,m);Kt&&(Kt.timestamp=Zt.timestamp);const Tt=Lr(Xe,_r,m);if(Tt&&(Tt.timestamp=_r.timestamp),De[L]===br){const zt=In(De,br,Kt,Tt),Fr=Xr(De,br,Kt),Nr=De[O]||"",Vr=((Er,xr,Jr)=>{const Qn=Number(Er.concealmentEvents)||0,is=Qn-(Jr[xr].total_concealment_events||0),Ks=Number(Er.insertedSamplesForDeceleration)||0,Gs=Ks-(Jr[xr].total_inserted_samples_for_decelaration||0),mi=Number(Er.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:Qn,deltaConcealmentEvents:is,totalInsertedSamplesForDecelaration:Ks,deltaInsertedSamplesForDecelaration:Gs,totalRemovedSamplesForAccelaration:mi,deltaRemovedSampleForAccelaration:mi-(Jr[xr].total_removed_samples_for_accelaration||0)}})(De,br,Kt);return[{ssrc:Xe,type:Dt,value:{codec_id_in:Nr}},{ssrc:Xe,type:Dt,value:{total_packets_in:zt.packetsReceived}},{ssrc:Xe,type:Dt,value:{delta_packets_in:zt.deltaPacketsReceived}},{ssrc:Xe,type:Dt,value:{total_packets_lost_in:zt.packetsLost}},{ssrc:Xe,type:Dt,value:{delta_packets_lost_in:zt.deltaPacketsLost}},{ssrc:Xe,type:Dt,value:{percent_packets_lost_in:zt.percentPacketsLost}},{ssrc:Xe,type:Dt,value:{total_KBytes_in:zt.KBytesReceived}},{ssrc:Xe,type:Dt,value:{delta_KBytes_in:zt.deltaKBytesReceived}},{ssrc:Xe,type:Dt,value:{delta_kbs_in:zt.kbsReceived}},{ssrc:Xe,type:Dt,value:{delta_jitter_ms_in:Fr}},{ssrc:Xe,type:Dt,value:{total_concealment_events:Vr.totalConcealmentEvents}},{ssrc:Xe,type:Dt,value:{delta_concealment_events:Vr.deltaConcealmentEvents}},{ssrc:Xe,type:Dt,value:{total_inserted_samples_for_decelaration:Vr.totalInsertedSamplesForDecelaration}},{ssrc:Xe,type:Dt,value:{delta_inserted_samples_for_decelaration:Vr.deltaInsertedSamplesForDecelaration}},{ssrc:Xe,type:Dt,value:{total_removed_samples_for_accelaration:Vr.totalRemovedSamplesForAccelaration}},{ssrc:Xe,type:Dt,value:{delta_removed_samples_for_accelaration:Vr.deltaRemovedSampleForAccelaration}},{ssrc:Xe,type:Dt,value:{track_in:De[nr]}},{ssrc:Xe,type:Dt,value:{track_id_in:De[Ct]}},{ssrc:Xe,type:Dt,value:{media_source_id:De[cr]}}]}if(De[L]===jt){((Er,xr)=>{if(!Object.prototype.hasOwnProperty.call(Er,je)||!Object.prototype.hasOwnProperty.call(Er,ue))return{delta_ms_decode_frame:xr[jt].delta_ms_decode_frame_in,frames_decoded:xr[jt].total_frames_decoded_in,total_decode_time:xr[jt].total_time_decoded_in};Er[je],Er[ue],xr[jt].total_time_decoded_in,xr[jt].total_frames_decoded_in})(De,Kt);const zt=In(De,jt,Kt,Tt),Fr=Xr(De,jt,Kt),Nr=(De.decoderImplementation,De[O]||null),Vr=Wt(De);return((Er,xr,Jr)=>{if(!Object.prototype.hasOwnProperty.call(Er,He)||!Object.prototype.hasOwnProperty.call(Er,$t))return{pliCount:xr.total_pli_sent_in,nackCount:xr.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};Er[He],Jr&&Jr[jt].total_pli_sent_in,Er[$t],Jr&&Jr[jt].total_nack_sent_in,xr[jt].total_pli_sent_in,xr[jt].total_nack_sent_in})(De,Kt,Tt),[{ssrc:Xe,type:Xt,value:{codec_id_in:Nr}},{ssrc:Xe,type:Xt,value:{total_packets_in:zt.packetsReceived}},{ssrc:Xe,type:Xt,value:{delta_packets_in:zt.deltaPacketsReceived}},{ssrc:Xe,type:Xt,value:{total_packets_lost_in:zt.packetsLost}},{ssrc:Xe,type:Xt,value:{delta_packets_lost_in:zt.deltaPacketsLost}},{ssrc:Xe,type:Xt,value:{percent_packets_lost_in:zt.percentPacketsLost}},{ssrc:Xe,type:Xt,value:{total_KBytes_in:zt.KBytesReceived}},{ssrc:Xe,type:Xt,value:{delta_KBytes_in:zt.deltaKBytesReceived}},{ssrc:Xe,type:Xt,value:{delta_kbs_in:zt.kbsReceived}},{ssrc:Xe,type:Xt,value:{delta_jitter_ms_in:Fr}},{ssrc:Xe,type:Xt,value:{size_in:Vr}},{ssrc:Xe,type:Xt,value:{track_in:De[nr]}},{ssrc:Xe,type:Xt,value:{track_id_in:De[Ct]}},{ssrc:Xe,type:Xt,value:{media_source_id:De[cr]}},{ssrc:Xe,type:Xt,value:{pause_count:De.pauseCount}},{ssrc:Xe,type:Xt,value:{total_pauses_duration:De.totalPausesDuration}},{ssrc:Xe,type:Xt,value:{freeze_count:De.freezeCount}},{ssrc:Xe,type:Xt,value:{total_freezes_duration:De.totalFreezesDuration}}]}break}case"outbound-rtp":{Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,u);Kt&&(Kt.timestamp=Zt.timestamp);const Tt=Lr(Xe,_r,u);if(Tt&&(Tt.timestamp=_r.timestamp),De[L]===br){const zt=De[O]||null,Fr=Pn(De,br,Kt,Tt);return[{ssrc:Xe,type:Dt,value:{codec_id_out:zt}},{ssrc:Xe,type:Dt,value:{total_packets_out:Fr.packetsSent}},{ssrc:Xe,type:Dt,value:{delta_packets_out:Fr.deltaPacketsSent}},{ssrc:Xe,type:Dt,value:{total_KBytes_out:Fr.KBytesSent}},{type:Dt,value:{delta_KBytes_out:Fr.deltaKBytesSent}},{ssrc:Xe,type:Dt,value:{delta_kbs_out:Fr.kbsSent}},{ssrc:Xe,type:Dt,value:{track_out:De[nr]}},{ssrc:Xe,type:Dt,value:{track_id_out:De[Ct]}},{ssrc:Xe,type:Dt,value:{media_source_id:De[cr]}}]}if(De[L]===jt){De.encoderImplementation;const zt=De[O]||null,Fr=(((Er,xr)=>{if(!Object.prototype.hasOwnProperty.call(Er,se)||!Object.prototype.hasOwnProperty.call(Er,Ce))return{delta_ms_encode_frame:xr[jt].delta_ms_encode_frame_out,frames_encoded:xr[jt].total_frames_encoded_out,total_encode_time:xr[jt].total_time_encoded_out};Er[se],Er[Ce],xr[jt].total_time_encoded_out,xr[jt].total_frames_encoded_out})(De,Kt),Wt(De)),Nr=(Er=>{const xr=Object.prototype.hasOwnProperty.call(Er,R)?Er[R]:null,Jr=Object.prototype.hasOwnProperty.call(Er,N)?Er[N]:null,Qn=Object.prototype.hasOwnProperty.call(Er,P)?Er[P]:null;return Qn&&Object.keys(Qn).forEach(is=>{Qn[is]>1e3&&(Qn[is]=Number(Qn[is]/1e3))}),{reason:xr,durations:Qn,resolutionChanges:Jr}})(De),Vr=(((Er,xr,Jr)=>{if(!Object.prototype.hasOwnProperty.call(Er,He)||!Object.prototype.hasOwnProperty.call(Er,$t))return{pliCount:xr.total_pli_received_out,nackCount:xr.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};Er[He],Jr&&Jr[jt].total_pli_received_out,Er[$t],Jr&&Jr[jt].total_nack_received_out,xr[jt].total_pli_received_out,xr[jt].total_nack_received_out})(De,Kt,Tt),Pn(De,jt,Kt,Tt));return[{ssrc:Xe,type:Xt,value:{codec_id_out:zt}},{ssrc:Xe,type:Xt,value:{total_packets_out:Vr.packetsSent}},{ssrc:Xe,type:Xt,value:{delta_packets_out:Vr.deltaPacketsSent}},{ssrc:Xe,type:Xt,value:{total_KBytes_out:Vr.KBytesSent}},{ssrc:Xe,type:Xt,value:{delta_KBytes_out:Vr.deltaKBytesSent}},{ssrc:Xe,type:Xt,value:{delta_kbs_out:Vr.kbsSent}},{ssrc:Xe,type:Xt,value:{size_out:Fr}},{ssrc:Xe,type:Xt,value:{limitation_out:Nr}},{ssrc:Xe,type:Xt,value:{track_out:De[nr]}},{ssrc:Xe,type:Xt,value:{track_id_out:De[Ct]}},{ssrc:Xe,type:Xt,value:{media_source_id:De[cr]}}]}break}case"media-source":{Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Xe=[];return Object.keys(Zt[br]).forEach(Kt=>{const Tt=Zt[br][Kt];if(Tt.media_source_id===De[j]){var zt=De[Ct];Xe.push({ssrc:Tt.ssrc,type:Dt,value:{track_id_out:zt}})}}),Object.keys(Zt[jt]).forEach(Kt=>{const Tt=Zt[jt][Kt];if(Tt.media_source_id===De[j]){var zt=De[Ct];Xe.push({ssrc:Tt.ssrc,type:Xt,value:{track_id_out:zt}})}}),Xe}case"track":{Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Xe=[];return Object.keys(Zt[br]).forEach(Kt=>{const Tt=Zt[br][Kt];if(Tt.track_in===De[j]||Tt.track_out===De[j]){Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);var zt=De[Ct];De[j]===Tt.track_in?Xe.push({ssrc:Tt.ssrc,type:Dt,value:{track_id_in:zt}}):Xe.push({ssrc:Tt.ssrc,type:Dt,value:{track_id_out:zt}})}}),Object.keys(Zt[jt]).forEach(Kt=>{const Tt=Zt[jt][Kt];if(Tt.track_in===De[j]||Tt.track_out===De[j]){Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);var zt=De[Ct];De[j]===Tt.track_in?Xe.push({ssrc:Tt.ssrc,type:Xt,value:{track_id_in:zt}}):Xe.push({ssrc:Tt.ssrc,type:Xt,value:{track_id_out:zt}})}}),Xe}case"codec":const Pr=[];return Object.keys(Zt[br]).forEach(Xe=>{const Kt=Zt[br][Xe];if(Kt.codec_id_in===De[j]||Kt.codec_id_out===De[j]){Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Tt=(zt=>({channels:zt.channels||null,clock_rate:zt[E]||null,mime_type:zt[M]||null,sdp_fmtp_line:zt.sdpFmtpLine||null}))(De);De[j]===Kt.codec_id_in?Pr.push({ssrc:Kt.ssrc,type:Dt,value:{codec_in:Tt}}):Pr.push({ssrc:Kt.ssrc,type:Dt,value:{codec_out:Tt}})}}),Object.keys(Zt[jt]).forEach(Xe=>{const Kt=Zt[jt][Xe];if(Kt.codec_id_in===De[j]||Kt.codec_id_out===De[j]){Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Tt=(zt=>({clock_rate:zt[E]||null,mime_type:zt[M]||null}))(De);De[j]===Kt.codec_id_in?Pr.push({ssrc:Kt.ssrc,type:Xt,value:{codec_in:Tt}}):Pr.push({ssrc:Kt.ssrc,type:Xt,value:{codec_out:Tt}})}}),Pr;case"remote-inbound-rtp":{Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,u),Tt=Lr(Xe,_r,u);if(De[L]===br){const zt=xn(De,br,Tt,Kt),Fr=Xr(De,br,Kt),Nr=Sn(De,br,Kt,Tt);return[{ssrc:Xe,type:Dt,value:{delta_rtt_ms_out:zt.rtt}},{ssrc:Xe,type:Dt,value:{delta_jitter_ms_out:Fr}},{ssrc:Xe,type:Dt,value:{timestamp_out:De[_e]}},{ssrc:Xe,type:Dt,value:{total_packets_lost_out:Nr.packetsLost}},{ssrc:Xe,type:Dt,value:{delta_packets_lost_out:Nr.deltaPacketsLost}},{ssrc:Xe,type:Dt,value:{percent_packets_lost_out:Nr.fractionLost}}]}if(De[L]===jt){const zt=xn(De,jt,Tt,Kt),Fr=Xr(De,jt,Kt),Nr=Sn(De,jt,Kt,Tt);return[{ssrc:Xe,type:Xt,value:{delta_rtt_ms_out:zt.rtt}},{ssrc:Xe,type:Xt,value:{delta_jitter_ms_out:Fr}},{ssrc:Xe,type:Xt,value:{timestamp_out:De[_e]}},{ssrc:Xe,type:Xt,value:{total_packets_lost_out:Nr.packetsLost}},{ssrc:Xe,type:Xt,value:{delta_packets_lost_out:Nr.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Lt(zr,`analyze() - got stats ${De[$e]} for ${Vt}`,De);const Xe=De[Q],Kt=Lr(Xe,Zt,u),Tt=Lr(Xe,_r,u);if(De[L]===br){const zt=xn(De,br,Tt,Kt);return[{ssrc:Xe,type:Dt,value:{delta_rtt_ms_in:zt.rtt}},{ssrc:Xe,type:Dt,value:{timestamp_in:De[_e]}}]}break}}return[]})(lr,Le,Le.name,null).forEach(De=>{if(De.value&&De.type)if(De.ssrc){let _r=Le[De.type][De.ssrc];_r||(Zt=De.type,Vt=lr.type,_r=Zt===br?Vt===v?{...b}:{...f}:Vt===v?{..._}:{...g},_r.ssrc=De.ssrc,Le[De.type][De.ssrc]=_r),Object.keys(De.value).forEach(fr=>{De.value[fr]!==void 0&&(_r[fr]=De.value[fr])})}else Object.keys(De.value).forEach(_r=>{De.value[_r]!==void 0&&(Le[De.type][_r]=De.value[_r])});var Zt,Vt})}),Le.timestamp=lt,Le}async collectStats(){try{const Me=await this._config.monitoringObject.getStats(),ot=this.analyze(Me,this._statsReports.slice().pop()||null);return this._statsReports.push(ot),this.fireOnStatsCollected(ot),Me}catch(Me){return sn(this._moduleName,`got error ${Me}`),null}}fireOnStatsCollected(Me){if(this._callbacks.onStatsCollected){const ot={};ot.meetingId=Me.meetingId,ot.peerId=Me.peerId,ot.name=Me.name,ot.audio=[],ot.video=[],Object.values(Me.audio).forEach(Le=>{const lt={};if(lt.network=nn[Me.network.infrastructure],lt.timestamp=Me.timestamp,Le.direction==m){lt.codec=Le.codec_in.mime_type,lt.jitter=Le.delta_jitter_ms_in,lt.bitrate=Le.delta_kbs_in,lt.packetsLost=Le.delta_packets_lost_in,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_in,lt.concealmentEvents=Le.delta_concealment_events,lt.removedSampleForAccelaration=Le.delta_removed_samples_for_accelaration,lt.insertedSamplesForDecelaration=Le.delta_inserted_samples_for_decelaration;const lr=JSON.stringify(Le.track_id_in).replace(/[{}"]/g,"");lt.trackId=lr}else Le.direction==u&&(lt.codec=Le.codec_out.mime_type,lt.jitter=Le.delta_jitter_ms_out,lt.bitrate=Le.delta_kbs_out,lt.packetsLost=Le.delta_packets_lost_out,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_out,lt.trackId=Le.track_id_out);ot.audio.push(lt)}),Object.values(Me.video).forEach(Le=>{const lt={};if(lt.network=nn[Me.network.infrastructure],lt.timestamp=Me.timestamp,Le.direction==m){lt.codec=Le.codec_in.mime_type,lt.jitter=Le.delta_jitter_ms_in,lt.bitrate=Le.delta_kbs_in,lt.packetsLost=Le.delta_packets_lost_in,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_in,lt.size=Le.size_in,lt.pauseCount=Le.pause_count,lt.totalPausesDuration=Le.total_pauses_duration,lt.freezeCount=Le.freeze_count,lt.totalFreezesDuration=Le.total_freezes_duration;const lr=JSON.stringify(Le.track_id_in).replace(/[{}"]/g,"");lt.trackId=lr}else Le.direction==u&&(lt.codec=Le.codec_out.mime_type,lt.jitter=Le.delta_jitter_ms_out,lt.bitrate=Le.delta_kbs_out,lt.packetsLost=Le.delta_packets_lost_out,lt.rtt=Me.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Le.delta_packets_out,lt.limitation=Le.limitation_out,lt.size=Le.size_out,lt.trackId=Le.track_id_out);ot.video.push(lt)}),this._callbacks.onStatsCollected.callback(ot)}}}class ss{constructor(Me){this._id=Me.name&&Me.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=Me,this._collector=new Mn(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?pn("Probe already started."):(Lt(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Lt(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Lt(this._moduleName,"Probe Stopped")):pn("Probe not running, Please start first.")}set onStatsCollected(Me){Me?this._collector.registerCallback("onStatsCollected",Me):this._collector.unregisterCallback("onStatsCollected")}}const hn={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class or{constructor(Me){var ot;this._config={defaultConfig:hn,...Me},this._probes=[],ot=this._config.verbose||!1,Mr.setLevel(ot?Mr.levels.TRACE:Mr.levels.INFO),Lt("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(Me,ot){if(!Me)throw new Error("undefined monitoring object");const Le={monitoringObject:Me,...ot,...this._config},lt=new ss(Le);return this._probes.push(lt),lt}removeExistingProbe(Me){if(!Me)throw new Error("undefined probe");Me.stop(),this._probes=this._probes.filter(ot=>Me.id!==ot.id)}getProbe(Me){for(let ot of this.probes)if(ot.id==Me)return ot}startAllProbes(){this._probes.forEach((Me,ot)=>{Me.start()})}stopAllProbes(){this._probes.forEach(Me=>Me.stop())}}})(),y})()},5458:(d,l,o)=>{o.d(l,{A:()=>m});var p=o(3145),y=o(7800);function m(u){return function(b){if(Array.isArray(b))return(0,p.A)(b)}(u)||function(b){if(typeof Symbol<"u"&&b[Symbol.iterator]!=null||b["@@iterator"]!=null)return Array.from(b)}(u)||(0,y.A)(u)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5471:function(d,l,o){var p,y,m,u,b,f,_,g;d.exports=(g=o(9021),y=(p=g).lib,m=y.WordArray,u=y.Hasher,b=p.algo,f=[],_=b.SHA1=u.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,w){for(var S=this._hash.words,E=S[0],O=S[1],C=S[2],k=S[3],T=S[4],h=0;h<80;h++){if(h<16)f[h]=0|v[w+h];else{var x=f[h-3]^f[h-8]^f[h-14]^f[h-16];f[h]=x<<1|x>>>31}var R=(E<<5|E>>>27)+T+f[h];R+=h<20?1518500249+(O&C|~O&k):h<40?1859775393+(O^C^k):h<60?(O&C|O&k|C&k)-1894007588:(O^C^k)-899497514,T=k,k=C,C=O<<30|O>>>2,O=E,E=R}S[0]=S[0]+E|0,S[1]=S[1]+O|0,S[2]=S[2]+C|0,S[3]=S[3]+k|0,S[4]=S[4]+T|0},_doFinalize:function(){var v=this._data,w=v.words,S=8*this._nDataBytes,E=8*v.sigBytes;return w[E>>>5]|=128<<24-E%32,w[14+(E+64>>>9<<4)]=Math.floor(S/4294967296),w[15+(E+64>>>9<<4)]=S,v.sigBytes=4*w.length,this._process(),this._hash},clone:function(){var v=u.clone.call(this);return v._hash=this._hash.clone(),v}}),p.SHA1=u._createHelper(_),p.HmacSHA1=u._createHmacHelper(_),g.SHA1)},5501:(d,l,o)=>{o.d(l,{A:()=>y});var p=o(3662);function y(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),u&&(0,p.A)(m,u)}},5503:function(d,l,o){var p;d.exports=(p=o(9021),function(){var y=p,m=y.lib.WordArray,u=y.enc;function b(f){return f<<8&4278255360|f>>>8&16711935}u.Utf16=u.Utf16BE={stringify:function(f){for(var _=f.words,g=f.sigBytes,v=[],w=0;w<g;w+=2){var S=_[w>>>2]>>>16-w%4*8&65535;v.push(String.fromCharCode(S))}return v.join("")},parse:function(f){for(var _=f.length,g=[],v=0;v<_;v++)g[v>>>1]|=f.charCodeAt(v)<<16-v%2*16;return m.create(g,2*_)}},u.Utf16LE={stringify:function(f){for(var _=f.words,g=f.sigBytes,v=[],w=0;w<g;w+=2){var S=b(_[w>>>2]>>>16-w%4*8&65535);v.push(String.fromCharCode(S))}return v.join("")},parse:function(f){for(var _=f.length,g=[],v=0;v<_;v++)g[v>>>1]|=b(f.charCodeAt(v)<<16-v%2*16);return m.create(g,2*_)}}}(),p.enc.Utf16)},5535:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Chrome70=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),_=o(521),g=o(1305),v=o(3303),w=new y.Logger("Chrome70"),S={OS:1024,MIS:1024};class E extends _.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new E}get name(){return"Chrome70"}close(){if(w.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){w.debug("getNativeRtpCapabilities()");const k=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{k.addTransceiver("audio"),k.addTransceiver("video");const T=await k.createOffer();try{k.close()}catch{}const h=p.parse(T.sdp);return b.extractRtpCapabilities({sdpObject:h})}catch(T){try{k.close()}catch{}throw T}}async getNativeSctpCapabilities(){return w.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:k,iceParameters:T,iceCandidates:h,dtlsParameters:x,sctpParameters:R,iceServers:P,iceTransportPolicy:N,additionalSettings:j,proprietaryConstraints:D,extendedRtpCapabilities:L}){w.debug("run()"),this._direction=k,this._remoteSdp=new g.RemoteSdp({iceParameters:T,iceCandidates:h,dtlsParameters:x,sctpParameters:R}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",L),video:u.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",L),video:u.getSendingRemoteRtpParameters("video",L)},x.role&&x.role!=="auto"&&(this._forcedLocalDtlsRole=x.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(w.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(k){w.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=k,this._pc.setConfiguration(T)}async restartIce(k){if(w.debug("restartIce()"),this._remoteSdp.updateIceParameters(k),this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});w.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const h={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();w.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:k,encodings:T,codecOptions:h,codec:x}){this.assertSendDirection(),w.debug("send() [kind:%s, track.id:%s]",k.kind,k.id);const R=m.clone(this._sendingRtpParametersByKind[k.kind]);R.codecs=u.reduceCodecs(R.codecs,x);const P=m.clone(this._sendingRemoteRtpParametersByKind[k.kind]);P.codecs=u.reduceCodecs(P.codecs,x);const N=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(k,{direction:"sendonly",streams:[this._sendStream]});let D,L=await this._pc.createOffer(),M=p.parse(L.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),T&&T.length>1&&(w.debug("send() | enabling legacy simulcast"),M=p.parse(L.sdp),D=M.media[N.idx],f.addLegacySimulcast({offerMediaObject:D,numStreams:T.length}),L={type:"offer",sdp:p.write(M)});let I=!1;const G=(0,v.parse)((T??[{}])[0].scalabilityMode);if(T&&T.length===1&&G.spatialLayers>1&&R.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(w.debug("send() | enabling legacy simulcast for VP9 SVC"),I=!0,M=p.parse(L.sdp),D=M.media[N.idx],f.addLegacySimulcast({offerMediaObject:D,numStreams:G.spatialLayers}),L={type:"offer",sdp:p.write(M)}),w.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),T){w.debug("send() | applying given encodings");const Q=j.sender.getParameters();for(let ae=0;ae<(Q.encodings??[]).length;++ae){const _e=Q.encodings[ae],Se=T[ae];if(!Se)break;Q.encodings[ae]=Object.assign(_e,Se)}await j.sender.setParameters(Q)}const de=j.mid;if(R.mid=de,M=p.parse(this._pc.localDescription.sdp),D=M.media[N.idx],R.rtcp.cname=b.getCname({offerMediaObject:D}),R.encodings=f.getRtpEncodings({offerMediaObject:D}),T)for(let Q=0;Q<R.encodings.length;++Q)T[Q]&&Object.assign(R.encodings[Q],T[Q]);if(I&&(R.encodings=[R.encodings[0]]),R.encodings.length>1&&(R.codecs[0].mimeType.toLowerCase()==="video/vp8"||R.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Q of R.encodings)Q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:D,reuseMid:N.reuseMid,offerRtpParameters:R,answerRtpParameters:P,codecOptions:h});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return w.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(de,j),{localId:de,rtpParameters:R,rtpSender:j.sender}}async stopSending(k){this.assertSendDirection(),w.debug("stopSending() [localId:%s]",k);const T=this._mapMidTransceiver.get(k);if(!T)throw new Error("associated RTCRtpTransceiver not found");if(T.sender.replaceTrack(null),this._pc.removeTrack(T.sender),this._remoteSdp.closeMediaSection(T.mid))try{T.stop()}catch{}const h=await this._pc.createOffer();w.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const x={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.delete(k)}async pauseSending(k){}async resumeSending(k){}async replaceTrack(k,T){this.assertSendDirection(),T?w.debug("replaceTrack() [localId:%s, track.id:%s]",k,T.id):w.debug("replaceTrack() [localId:%s, no track]",k);const h=this._mapMidTransceiver.get(k);if(!h)throw new Error("associated RTCRtpTransceiver not found");await h.sender.replaceTrack(T)}async setMaxSpatialLayer(k,T){this.assertSendDirection(),w.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",k,T);const h=this._mapMidTransceiver.get(k);if(!h)throw new Error("associated RTCRtpTransceiver not found");const x=h.sender.getParameters();x.encodings.forEach((N,j)=>{N.active=j<=T}),await h.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(k,x.encodings);const R=await this._pc.createOffer();w.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async setRtpEncodingParameters(k,T){this.assertSendDirection(),w.debug("setRtpEncodingParameters() [localId:%s, params:%o]",k,T);const h=this._mapMidTransceiver.get(k);if(!h)throw new Error("associated RTCRtpTransceiver not found");const x=h.sender.getParameters();x.encodings.forEach((N,j)=>{x.encodings[j]={...N,...T}}),await h.sender.setParameters(x),this._remoteSdp.muxMediaSectionSimulcast(k,x.encodings);const R=await this._pc.createOffer();w.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async getSenderStats(k){this.assertSendDirection();const T=this._mapMidTransceiver.get(k);if(!T)throw new Error("associated RTCRtpTransceiver not found");return T.sender.getStats()}async sendDataChannel({ordered:k,maxPacketLifeTime:T,maxRetransmits:h,label:x,protocol:R}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:k,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:h,protocol:R};w.debug("sendDataChannel() [options:%o]",P);const N=this._pc.createDataChannel(x,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),D=p.parse(j.sdp),L=D.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),w.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const M={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(k){this.assertRecvDirection();const T=[],h=new Map;for(const N of k){const{trackId:j,kind:D,rtpParameters:L,streamId:M}=N;w.debug("receive() [trackId:%s, kind:%s]",j,D);const I=L.mid??String(this._mapMidTransceiver.size);h.set(j,I),this._remoteSdp.receive({mid:I,kind:D,offerRtpParameters:L,streamId:M??L.rtcp.cname,trackId:j})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);let R=await this._pc.createAnswer();const P=p.parse(R.sdp);for(const N of k){const{trackId:j,rtpParameters:D}=N,L=h.get(j),M=P.media.find(I=>String(I.mid)===L);b.applyCodecParameters({offerRtpParameters:D,answerMediaObject:M})}R={type:"answer",sdp:p.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),w.debug("receive() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const N of k){const{trackId:j}=N,D=h.get(j),L=this._pc.getTransceivers().find(M=>M.mid===D);if(!L)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(D,L),T.push({localId:D,track:L.receiver.track,rtpReceiver:L.receiver})}return T}async stopReceiving(k){this.assertRecvDirection();for(const x of k){w.debug("stopReceiving() [localId:%s]",x);const R=this._mapMidTransceiver.get(x);if(!R)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(R.mid)}const T={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();w.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h);for(const x of k)this._mapMidTransceiver.delete(x)}async pauseReceiving(k){}async resumeReceiving(k){}async getReceiverStats(k){this.assertRecvDirection();const T=this._mapMidTransceiver.get(k);if(!T)throw new Error("associated RTCRtpTransceiver not found");return T.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:k,label:T,protocol:h}){this.assertRecvDirection();const{streamId:x,ordered:R,maxPacketLifeTime:P,maxRetransmits:N}=k,j={negotiated:!0,id:x,ordered:R,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:N,protocol:h};w.debug("receiveDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(T,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const L={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const M=await this._pc.createAnswer();if(!this._transportReady){const I=p.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}w.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:k,localSdpObject:T}){T||(T=p.parse(this._pc.localDescription.sdp));const h=b.extractDtlsParameters({sdpObject:T});h.role=k,this._remoteSdp.updateDtlsRole(k==="client"?"server":"client"),await new Promise((x,R)=>{this.safeEmit("@connect",{dtlsParameters:h},x,R)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Chrome70=E},5544:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.extractRtpCapabilities=function({sdpObject:y}){const m=new Map,u=[];let b=!1,f=!1;for(const _ of y.media){const g=_.type;switch(g){case"audio":if(b)continue;b=!0;break;case"video":if(f)continue;f=!0;break;default:continue}for(const v of _.rtp){const w={kind:g,mimeType:`${g}/${v.codec}`,preferredPayloadType:v.payload,clockRate:v.rate,channels:v.encoding,parameters:{},rtcpFeedback:[]};m.set(w.preferredPayloadType,w)}for(const v of _.fmtp??[]){const w=p.parseParams(v.config),S=m.get(v.payload);S&&(w!=null&&w.hasOwnProperty("profile-level-id")&&(w["profile-level-id"]=String(w["profile-level-id"])),S.parameters=w)}for(const v of _.rtcpFb??[]){const w={type:v.type,parameter:v.subtype};if(w.parameter||delete w.parameter,v.payload!=="*"){const S=m.get(v.payload);if(!S)continue;S.rtcpFeedback.push(w)}else for(const S of m.values())S.kind!==g||/.+\/rtx$/i.test(S.mimeType)||S.rtcpFeedback.push(w)}for(const v of _.ext??[]){if(v["encrypt-uri"])continue;const w={kind:g,uri:v.uri,preferredId:v.value};u.push(w)}}return{codecs:Array.from(m.values()),headerExtensions:u}},l.extractDtlsParameters=function({sdpObject:y}){let m,u=y.setup,b=y.fingerprint;if(!u||!b){const f=(y.media??[]).find(_=>_.port!==0);f&&(u??(u=f.setup),b??(b=f.fingerprint))}if(!u)throw new Error("no a=setup found at SDP session or media level");if(!b)throw new Error("no a=fingerprint found at SDP session or media level");switch(u){case"active":m="client";break;case"passive":m="server";break;case"actpass":m="auto"}return{role:m,fingerprints:[{algorithm:b.type,value:b.hash}]}},l.getCname=function({offerMediaObject:y}){const m=(y.ssrcs??[]).find(u=>u.attribute==="cname");return m?m.value:""},l.applyCodecParameters=function({offerRtpParameters:y,answerMediaObject:m}){for(const u of y.codecs){const b=u.mimeType.toLowerCase();if(b!=="audio/opus"||!(m.rtp??[]).find(g=>g.payload===u.payloadType))continue;m.fmtp=m.fmtp??[];let f=m.fmtp.find(g=>g.payload===u.payloadType);f||(f={payload:u.payloadType,config:""},m.fmtp.push(f));const _=p.parseParams(f.config);switch(b){case"audio/opus":{const g=u.parameters["sprop-stereo"];g!==void 0&&(_.stereo=Number(g)?1:0);break}}f.config="";for(const g of Object.keys(_))f.config&&(f.config+=";"),f.config+=`${g}=${_[g]}`}};const p=o(7363)},5601:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Transport=void 0;const p=o(8876),y=o(2994),m=o(3953),u=o(4893),b=o(1765),f=o(8046),_=o(9792),g=o(3518),v=o(7504),w=o(9166),S=new y.Logger("Transport");class E{constructor(k){we(this,"consumerOptions");we(this,"promise");we(this,"resolve");we(this,"reject");this.consumerOptions=k,this.promise=new Promise((T,h)=>{this.resolve=T,this.reject=h})}}class O extends m.EnhancedEventEmitter{constructor({direction:T,id:h,iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N,iceServers:j,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,appData:I,handlerFactory:G,extendedRtpCapabilities:de,canProduceByKind:ee}){super();we(this,"_id");we(this,"_closed",!1);we(this,"_direction");we(this,"_extendedRtpCapabilities");we(this,"_canProduceByKind");we(this,"_maxSctpMessageSize");we(this,"_handler");we(this,"_iceGatheringState","new");we(this,"_connectionState","new");we(this,"_appData");we(this,"_producers",new Map);we(this,"_consumers",new Map);we(this,"_dataProducers",new Map);we(this,"_dataConsumers",new Map);we(this,"_probatorConsumerCreated",!1);we(this,"_awaitQueue",new p.AwaitQueue);we(this,"_pendingConsumerTasks",[]);we(this,"_consumerCreationInProgress",!1);we(this,"_pendingPauseConsumers",new Map);we(this,"_consumerPauseInProgress",!1);we(this,"_pendingResumeConsumers",new Map);we(this,"_consumerResumeInProgress",!1);we(this,"_pendingCloseConsumers",new Map);we(this,"_consumerCloseInProgress",!1);we(this,"_observer",new m.EnhancedEventEmitter);S.debug("constructor() [id:%s, direction:%s]",h,T),this._id=h,this._direction=T,this._extendedRtpCapabilities=de,this._canProduceByKind=ee,this._maxSctpMessageSize=N?N.maxMessageSize:null;const Q=b.clone(L)??{};delete Q.iceServers,delete Q.iceTransportPolicy,delete Q.bundlePolicy,delete Q.rtcpMuxPolicy,delete Q.sdpSemantics,this._handler=G(),this._handler.run({direction:T,iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N,iceServers:j,iceTransportPolicy:D,additionalSettings:Q,proprietaryConstraints:M,extendedRtpCapabilities:de}),this._appData=I??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(T){this._appData=T}get observer(){return this._observer}close(){if(!this._closed){S.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const T of this._producers.values())T.transportClosed();this._producers.clear();for(const T of this._consumers.values())T.transportClosed();this._consumers.clear();for(const T of this._dataProducers.values())T.transportClosed();this._dataProducers.clear();for(const T of this._dataConsumers.values())T.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new u.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:T}){if(S.debug("restartIce()"),this._closed)throw new u.InvalidStateError("closed");if(!T)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(T),"transport.restartIce()")}async updateIceServers({iceServers:T}={}){if(S.debug("updateIceServers()"),this._closed)throw new u.InvalidStateError("closed");if(!Array.isArray(T))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(T),"transport.updateIceServers()")}async produce({track:T,encodings:h,codecOptions:x,codec:R,stopTracks:P=!0,disableTrackOnPause:N=!0,zeroRtpOnPause:j=!1,onRtpSender:D,appData:L={}}={}){if(S.debug("produce() [track:%o]",T),this._closed)throw new u.InvalidStateError("closed");if(!T)throw new TypeError("missing track");if(this._direction!=="send")throw new u.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[T.kind])throw new u.UnsupportedError(`cannot produce ${T.kind}`);if(T.readyState==="ended")throw new u.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let M;if(h&&!Array.isArray(h))throw TypeError("encodings must be an array");h&&h.length===0?M=void 0:h&&(M=h.map(ee=>{const Q={active:!0};return ee.active===!1&&(Q.active=!1),typeof ee.dtx=="boolean"&&(Q.dtx=ee.dtx),typeof ee.scalabilityMode=="string"&&(Q.scalabilityMode=ee.scalabilityMode),typeof ee.scaleResolutionDownBy=="number"&&(Q.scaleResolutionDownBy=ee.scaleResolutionDownBy),typeof ee.maxBitrate=="number"&&(Q.maxBitrate=ee.maxBitrate),typeof ee.maxFramerate=="number"&&(Q.maxFramerate=ee.maxFramerate),typeof ee.adaptivePtime=="boolean"&&(Q.adaptivePtime=ee.adaptivePtime),typeof ee.priority=="string"&&(Q.priority=ee.priority),typeof ee.networkPriority=="string"&&(Q.networkPriority=ee.networkPriority),Q}));const{localId:I,rtpParameters:G,rtpSender:de}=await this._handler.send({track:T,encodings:M,codecOptions:x,codec:R,onRtpSender:D});try{f.validateRtpParameters(G);const{id:ee}=await new Promise((ae,_e)=>{this.safeEmit("produce",{kind:T.kind,rtpParameters:G,appData:L},ae,_e)}),Q=new _.Producer({id:ee,localId:I,rtpSender:de,track:T,rtpParameters:G,stopTracks:P,disableTrackOnPause:N,zeroRtpOnPause:j,appData:L});return this._producers.set(Q.id,Q),this.handleProducer(Q),this._observer.safeEmit("newproducer",Q),Q}catch(ee){throw this._handler.stopSending(I).catch(()=>{}),ee}},"transport.produce()").catch(M=>{if(P)try{T.stop()}catch{}throw M})}async consume({id:T,producerId:h,kind:x,rtpParameters:R,streamId:P,onRtpReceiver:N,appData:j={}}){if(S.debug("consume()"),this._closed)throw new u.InvalidStateError("closed");if(this._direction!=="recv")throw new u.UnsupportedError("not a receiving Transport");if(typeof T!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing producerId");if(x!=="audio"&&x!=="video")throw new TypeError(`invalid kind '${x}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(j&&typeof j!="object")throw new TypeError("if given, appData must be an object");const D=b.clone(R);if(!f.canReceive(D,this._extendedRtpCapabilities))throw new u.UnsupportedError("cannot consume this Producer");const L=new E({id:T,producerId:h,kind:x,rtpParameters:D,streamId:P,onRtpReceiver:N,appData:j});return this._pendingConsumerTasks.push(L),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),L.promise}async produceData({ordered:T=!0,maxPacketLifeTime:h,maxRetransmits:x,label:R="",protocol:P="",appData:N={}}={}){if(S.debug("produceData()"),this._closed)throw new u.InvalidStateError("closed");if(this._direction!=="send")throw new u.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new u.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(N&&typeof N!="object")throw new TypeError("if given, appData must be an object");return(h||x)&&(T=!1),this._awaitQueue.push(async()=>{const{dataChannel:j,sctpStreamParameters:D}=await this._handler.sendDataChannel({ordered:T,maxPacketLifeTime:h,maxRetransmits:x,label:R,protocol:P});f.validateSctpStreamParameters(D);const{id:L}=await new Promise((I,G)=>{this.safeEmit("producedata",{sctpStreamParameters:D,label:R,protocol:P,appData:N},I,G)}),M=new v.DataProducer({id:L,dataChannel:j,sctpStreamParameters:D,appData:N});return this._dataProducers.set(M.id,M),this.handleDataProducer(M),this._observer.safeEmit("newdataproducer",M),M},"transport.produceData()")}async consumeData({id:T,dataProducerId:h,sctpStreamParameters:x,label:R="",protocol:P="",appData:N={}}){if(S.debug("consumeData()"),this._closed)throw new u.InvalidStateError("closed");if(this._direction!=="recv")throw new u.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new u.UnsupportedError("SCTP not enabled by remote Transport");if(typeof T!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(N&&typeof N!="object")throw new TypeError("if given, appData must be an object");const j=b.clone(x);return f.validateSctpStreamParameters(j),this._awaitQueue.push(async()=>{const{dataChannel:D}=await this._handler.receiveDataChannel({sctpStreamParameters:j,label:R,protocol:P}),L=new w.DataConsumer({id:T,dataProducerId:h,dataChannel:D,sctpStreamParameters:j,appData:N});return this._dataConsumers.set(L.id,L),this.handleDataConsumer(L),this._observer.safeEmit("newdataconsumer",L),L},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void S.debug("createPendingConsumers() | there is no Consumer to be created");const T=[...this._pendingConsumerTasks];let h;this._pendingConsumerTasks=[];const x=[];for(const R of T){const{id:P,kind:N,rtpParameters:j,streamId:D,onRtpReceiver:L}=R.consumerOptions;x.push({trackId:P,kind:N,rtpParameters:j,streamId:D,onRtpReceiver:L})}try{const R=await this._handler.receive(x);for(let P=0;P<R.length;++P){const N=T[P],j=R[P],{id:D,producerId:L,kind:M,rtpParameters:I,appData:G}=N.consumerOptions,{localId:de,rtpReceiver:ee,track:Q}=j,ae=new g.Consumer({id:D,localId:de,producerId:L,rtpReceiver:ee,track:Q,rtpParameters:I,appData:G});this._consumers.set(ae.id,ae),this.handleConsumer(ae),this._probatorConsumerCreated||h||M!=="video"||(h=ae),this._observer.safeEmit("newconsumer",ae),N.resolve(ae)}}catch(R){for(const P of T)P.reject(R)}if(h)try{const R=f.generateProbatorRtpParameters(h.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:R}]),S.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(R){S.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",R)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void S.debug("pausePendingConsumers() | there is no Consumer to be paused");const T=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const h=T.map(x=>x.localId);await this._handler.pauseReceiving(h)}catch(h){S.error("pausePendingConsumers() | failed to pause Consumers:",h)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void S.debug("resumePendingConsumers() | there is no Consumer to be resumed");const T=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const h=T.map(x=>x.localId);await this._handler.resumeReceiving(h)}catch(h){S.error("resumePendingConsumers() | failed to resume Consumers:",h)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void S.debug("closePendingConsumers() | there is no Consumer to be closed");const T=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(T.map(h=>h.localId))}catch(h){S.error("closePendingConsumers() | failed to close Consumers:",h)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const T=this._handler;T.on("@connect",({dtlsParameters:h},x,R)=>{this._closed?R(new u.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:h},x,R)}),T.on("@icegatheringstatechange",h=>{h!==this._iceGatheringState&&(S.debug("ICE gathering state changed to %s",h),this._iceGatheringState=h,this._closed||this.safeEmit("icegatheringstatechange",h))}),T.on("@icecandidateerror",h=>{S.warn(`ICE candidate error [url:${h.url}, localAddress:${h.address}, localPort:${h.port}]: ${h.errorCode} "${h.errorText}"`),this.safeEmit("icecandidateerror",h)}),T.on("@connectionstatechange",h=>{h!==this._connectionState&&(S.debug("connection state changed to %s",h),this._connectionState=h,this._closed||this.safeEmit("connectionstatechange",h))})}handleProducer(T){T.on("@close",()=>{this._producers.delete(T.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(T.localId),"producer @close event").catch(h=>S.warn("producer.close() failed:%o",h))}),T.on("@pause",(h,x)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(T.localId),"producer @pause event").then(h).catch(x)}),T.on("@resume",(h,x)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(T.localId),"producer @resume event").then(h).catch(x)}),T.on("@replacetrack",(h,x,R)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(T.localId,h),"producer @replacetrack event").then(x).catch(R)}),T.on("@setmaxspatiallayer",(h,x,R)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(T.localId,h),"producer @setmaxspatiallayer event").then(x).catch(R)}),T.on("@setrtpencodingparameters",(h,x,R)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(T.localId,h),"producer @setrtpencodingparameters event").then(x).catch(R)}),T.on("@getstats",(h,x)=>{if(this._closed)return x(new u.InvalidStateError("closed"));this._handler.getSenderStats(T.localId).then(h).catch(x)})}handleConsumer(T){T.on("@close",()=>{this._consumers.delete(T.id),this._pendingPauseConsumers.delete(T.id),this._pendingResumeConsumers.delete(T.id),this._closed||(this._pendingCloseConsumers.set(T.id,T),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),T.on("@pause",()=>{this._pendingResumeConsumers.has(T.id)&&this._pendingResumeConsumers.delete(T.id),this._pendingPauseConsumers.set(T.id,T),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),T.on("@resume",()=>{this._pendingPauseConsumers.has(T.id)&&this._pendingPauseConsumers.delete(T.id),this._pendingResumeConsumers.set(T.id,T),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),T.on("@getstats",(h,x)=>{if(this._closed)return x(new u.InvalidStateError("closed"));this._handler.getReceiverStats(T.localId).then(h).catch(x)})}handleDataProducer(T){T.on("@close",()=>{this._dataProducers.delete(T.id)})}handleDataConsumer(T){T.on("@close",()=>{this._dataConsumers.delete(T.id)})}}l.Transport=O},5602:d=>{var l=d.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(o){return o.encoding?"rtpmap:%d %s/%s/%s":o.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(o){return o.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(o){return o.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(o){return"extmap:%d"+(o.direction?"/%s":"%v")+(o["encrypt-uri"]?" %s":"%v")+" %s"+(o.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(o){return o.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(o){var p="candidate:%s %d %s %d %s %d typ %s";return p+=o.raddr!=null?" raddr %s rport %d":"%v%v",p+=o.tcptype!=null?" tcptype %s":"%v",o.generation!=null&&(p+=" generation %d"),p+=o["network-id"]!=null?" network-id %d":"%v",p+=o["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(o){var p="ssrc:%d";return o.attribute!=null&&(p+=" %s",o.value!=null&&(p+=":%s")),p}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(o){return o.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(o){return o.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(o){return"imageattr:%s %s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(o){return"simulcast:%s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(o){return"ts-refclk:%s"+(o.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(o){var p="mediaclk:";return p+=o.id!=null?"id=%s %s":"%v%s",p+=o.mediaClockValue!=null?"=%s":"",p+=o.rateNumerator!=null?" rate=%s":"",p+=o.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(l).forEach(function(o){l[o].forEach(function(p){p.reg||(p.reg=/(.*)/),p.format||(p.format="%s")})})},5765:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Safari12=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(5938),_=o(4256),g=o(4893),v=o(521),w=o(1305),S=o(3303),E=new y.Logger("Safari12"),O={OS:1024,MIS:1024};class C extends v.HandlerInterface{constructor(){super();we(this,"_closed",!1);we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_mapMidTransceiver",new Map);we(this,"_sendStream",new MediaStream);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new C}get name(){return"Safari12"}close(){if(E.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{h.addTransceiver("audio"),h.addTransceiver("video");const x=await h.createOffer();try{h.close()}catch{}const R=p.parse(x.sdp),P=b.extractRtpCapabilities({sdpObject:R});return _.addNackSupportForOpus(P),P}catch(x){try{h.close()}catch{}throw x}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:h,iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N,iceServers:j,iceTransportPolicy:D,additionalSettings:L,proprietaryConstraints:M,extendedRtpCapabilities:I}){this.assertNotClosed(),E.debug("run()"),this._direction=h,this._remoteSdp=new w.RemoteSdp({iceParameters:x,iceCandidates:R,dtlsParameters:P,sctpParameters:N}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",I),video:u.getSendingRtpParameters("video",I)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",I),video:u.getSendingRemoteRtpParameters("video",I)},P.role&&P.role!=="auto"&&(this._forcedLocalDtlsRole=P.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:j??[],iceTransportPolicy:D??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",G=>{this.emit("@icecandidateerror",G)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(h){this.assertNotClosed(),E.debug("updateIceServers()");const x=this._pc.getConfiguration();x.iceServers=h,this._pc.setConfiguration(x)}async restartIce(h){if(this.assertNotClosed(),E.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),this._transportReady)if(this._direction==="send"){const x=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const R={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",R),await this._pc.setRemoteDescription(R)}else{const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:x,codecOptions:R,codec:P,onRtpSender:N}){this.assertNotClosed(),this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",h.kind,h.id);const j=m.clone(this._sendingRtpParametersByKind[h.kind]);j.codecs=u.reduceCodecs(j.codecs,P);const D=m.clone(this._sendingRemoteRtpParametersByKind[h.kind]);D.codecs=u.reduceCodecs(D.codecs,P);const L=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream]});N&&N(M.sender);let I,G=await this._pc.createOffer(),de=p.parse(G.sdp);de.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de});const ee=(0,S.parse)((x??[{}])[0].scalabilityMode);x&&x.length>1&&(E.debug("send() | enabling legacy simulcast"),de=p.parse(G.sdp),I=de.media[L.idx],f.addLegacySimulcast({offerMediaObject:I,numStreams:x.length}),G={type:"offer",sdp:p.write(de)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",G),await this._pc.setLocalDescription(G);const Q=M.mid;if(j.mid=Q,de=p.parse(this._pc.localDescription.sdp),I=de.media[L.idx],j.rtcp.cname=b.getCname({offerMediaObject:I}),j.encodings=f.getRtpEncodings({offerMediaObject:I}),x)for(let _e=0;_e<j.encodings.length;++_e)x[_e]&&Object.assign(j.encodings[_e],x[_e]);if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _e of j.encodings)_e.scalabilityMode?_e.scalabilityMode=`L1T${ee.temporalLayers}`:_e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:L.reuseMid,offerRtpParameters:j,answerRtpParameters:D,codecOptions:R});const ae={type:"answer",sdp:this._remoteSdp.getSdp()};return E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ae),await this._pc.setRemoteDescription(ae),this._mapMidTransceiver.set(Q,M),{localId:Q,rtpParameters:j,rtpSender:M.sender}}async stopSending(h){if(this.assertSendDirection(),this._closed)return;E.debug("stopSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");if(x.sender.replaceTrack(null),this._pc.removeTrack(x.sender),this._remoteSdp.closeMediaSection(x.mid))try{x.stop()}catch{}const R=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("pauseSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="inactive",this._remoteSdp.pauseMediaSection(h);const R=await this._pc.createOffer();E.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),E.debug("resumeSending() [localId:%s]",h);const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");x.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const R=await this._pc.createOffer();E.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R);const P={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",P),await this._pc.setRemoteDescription(P)}async replaceTrack(h,x){this.assertNotClosed(),this.assertSendDirection(),x?E.debug("replaceTrack() [localId:%s, track.id:%s]",h,x.id):E.debug("replaceTrack() [localId:%s, no track]",h);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");await R.sender.replaceTrack(x)}async setMaxSpatialLayer(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{D.active=L<=x}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async setRtpEncodingParameters(h,x){this.assertNotClosed(),this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,x);const R=this._mapMidTransceiver.get(h);if(!R)throw new Error("associated RTCRtpTransceiver not found");const P=R.sender.getParameters();P.encodings.forEach((D,L)=>{P.encodings[L]={...D,...x}}),await R.sender.setParameters(P),this._remoteSdp.muxMediaSectionSimulcast(h,P.encodings);const N=await this._pc.createOffer();E.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N);const j={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:x,maxRetransmits:R,label:P,protocol:N}){this.assertNotClosed(),this.assertSendDirection();const j={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:x,maxRetransmits:R,protocol:N};E.debug("sendDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(P,j);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),M=p.parse(L.sdp),I=M.media.find(de=>de.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:I});const G={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setRemoteDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:j.id,ordered:j.ordered,maxPacketLifeTime:j.maxPacketLifeTime,maxRetransmits:j.maxRetransmits}}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const x=[],R=new Map;for(const D of h){const{trackId:L,kind:M,rtpParameters:I,streamId:G}=D;E.debug("receive() [trackId:%s, kind:%s]",L,M);const de=I.mid??String(this._mapMidTransceiver.size);R.set(L,de),this._remoteSdp.receive({mid:de,kind:M,offerRtpParameters:I,streamId:G??I.rtcp.cname,trackId:L})}const P={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",P),await this._pc.setRemoteDescription(P);for(const D of h){const{trackId:L,onRtpReceiver:M}=D;if(M){const I=R.get(L),G=this._pc.getTransceivers().find(de=>de.mid===I);if(!G)throw new Error("transceiver not found");M(G.receiver)}}let N=await this._pc.createAnswer();const j=p.parse(N.sdp);for(const D of h){const{trackId:L,rtpParameters:M}=D,I=R.get(L),G=j.media.find(de=>String(de.mid)===I);b.applyCodecParameters({offerRtpParameters:M,answerMediaObject:G})}N={type:"answer",sdp:p.write(j)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",N),await this._pc.setLocalDescription(N);for(const D of h){const{trackId:L}=D,M=R.get(L),I=this._pc.getTransceivers().find(G=>G.mid===M);if(!I)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,I),x.push({localId:M,track:I.receiver.track,rtpReceiver:I.receiver})}return x}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const P of h){E.debug("stopReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(N.mid)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const P of h)this._mapMidTransceiver.delete(P)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("pauseReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="inactive",this._remoteSdp.pauseMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const P of h){E.debug("resumeReceiving() [localId:%s]",P);const N=this._mapMidTransceiver.get(P);if(!N)throw new Error("associated RTCRtpTransceiver not found");N.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(P)}const x={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const R=await this._pc.createAnswer();E.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R)}async getReceiverStats(h){this.assertNotClosed(),this.assertRecvDirection();const x=this._mapMidTransceiver.get(h);if(!x)throw new Error("associated RTCRtpTransceiver not found");return x.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:x,protocol:R}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D}=h,L={negotiated:!0,id:P,ordered:N,maxPacketLifeTime:j,maxRetransmits:D,protocol:R};E.debug("receiveDataChannel() [options:%o]",L);const M=this._pc.createDataChannel(x,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const I={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",I),await this._pc.setRemoteDescription(I);const G=await this._pc.createAnswer();if(!this._transportReady){const de=p.parse(G.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:de})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",G),await this._pc.setLocalDescription(G),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:x}){x||(x=p.parse(this._pc.localDescription.sdp));const R=b.extractDtlsParameters({sdpObject:x});R.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((P,N)=>{this.safeEmit("@connect",{dtlsParameters:R},P,N)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new g.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Safari12=C},5862:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FakeEventTarget=void 0,l.FakeEventTarget=class{constructor(){we(this,"listeners",{})}addEventListener(o,p,y={}){var m;p&&((m=this.listeners)[o]??(m[o]=[]),this.listeners[o].push({callback:p,once:y.once===!0}))}removeEventListener(o,p){this.listeners[o]&&(this.listeners[o]=this.listeners[o].filter(y=>y.callback!==p))}dispatchEvent(o){if(!o||typeof o.type!="string")throw new Error("invalid event object");const p=this.listeners[o.type];if(!p)return!0;for(const y of[...p]){try{y.callback.call(this,o)}catch(m){setTimeout(()=>{throw m},0)}y.once&&this.removeEventListener(o.type,y.callback)}return!o.defaultPrevented}}},5938:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRtpEncodings=function({offerMediaObject:o}){const p=new Set;for(const u of o.ssrcs??[]){const b=u.id;p.add(b)}if(p.size===0)throw new Error("no a=ssrc lines found");const y=new Map;for(const u of o.ssrcGroups??[]){if(u.semantics!=="FID")continue;let[b,f]=u.ssrcs.split(/\s+/);b=Number(b),f=Number(f),p.has(b)&&(p.delete(b),p.delete(f),y.set(b,f))}for(const u of p)y.set(u,null);const m=[];for(const[u,b]of y){const f={ssrc:u};b&&(f.rtx={ssrc:b}),m.push(f)}return m},l.addLegacySimulcast=function({offerMediaObject:o,numStreams:p}){if(p<=1)throw new TypeError("numStreams must be greater than 1");const y=(o.ssrcs??[]).find(S=>S.attribute==="msid");if(!y)throw new Error("a=ssrc line with msid information not found");const[m,u]=y.value.split(" "),b=Number(y.id);let f;(o.ssrcGroups??[]).some(S=>{if(S.semantics!=="FID")return!1;const E=S.ssrcs.split(/\s+/);return Number(E[0])===b&&(f=Number(E[1]),!0)});const _=o.ssrcs.find(S=>S.attribute==="cname");if(!_)throw new Error("a=ssrc line with cname information not found");const g=_.value,v=[],w=[];for(let S=0;S<p;++S)v.push(b+S),f&&w.push(f+S);o.ssrcGroups=[],o.ssrcs=[],o.ssrcGroups.push({semantics:"SIM",ssrcs:v.join(" ")});for(const S of v)o.ssrcs.push({id:S,attribute:"cname",value:g}),o.ssrcs.push({id:S,attribute:"msid",value:`${m} ${u}`});for(let S=0;S<w.length;++S){const E=v[S],O=w[S];o.ssrcs.push({id:O,attribute:"cname",value:g}),o.ssrcs.push({id:O,attribute:"msid",value:`${m} ${u}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${E} ${O}`})}}},5953:function(d,l,o){var p;d.exports=(p=o(9021),o(3240),function(y){var m=p,u=m.lib,b=u.WordArray,f=u.Hasher,_=m.x64.Word,g=m.algo,v=[],w=[],S=[];(function(){for(var C=1,k=0,T=0;T<24;T++){v[C+5*k]=(T+1)*(T+2)/2%64;var h=(2*C+3*k)%5;C=k%5,k=h}for(C=0;C<5;C++)for(k=0;k<5;k++)w[C+5*k]=k+(2*C+3*k)%5*5;for(var x=1,R=0;R<24;R++){for(var P=0,N=0,j=0;j<7;j++){if(1&x){var D=(1<<j)-1;D<32?N^=1<<D:P^=1<<D-32}128&x?x=x<<1^113:x<<=1}S[R]=_.create(P,N)}})();var E=[];(function(){for(var C=0;C<25;C++)E[C]=_.create()})();var O=g.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var C=this._state=[],k=0;k<25;k++)C[k]=new _.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(C,k){for(var T=this._state,h=this.blockSize/2,x=0;x<h;x++){var R=C[k+2*x],P=C[k+2*x+1];R=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8),P=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),(ue=T[x]).high^=P,ue.low^=R}for(var N=0;N<24;N++){for(var j=0;j<5;j++){for(var D=0,L=0,M=0;M<5;M++)D^=(ue=T[j+5*M]).high,L^=ue.low;var I=E[j];I.high=D,I.low=L}for(j=0;j<5;j++){var G=E[(j+4)%5],de=E[(j+1)%5],ee=de.high,Q=de.low;for(D=G.high^(ee<<1|Q>>>31),L=G.low^(Q<<1|ee>>>31),M=0;M<5;M++)(ue=T[j+5*M]).high^=D,ue.low^=L}for(var ae=1;ae<25;ae++){var _e=(ue=T[ae]).high,Se=ue.low,ie=v[ae];ie<32?(D=_e<<ie|Se>>>32-ie,L=Se<<ie|_e>>>32-ie):(D=Se<<ie-32|_e>>>64-ie,L=_e<<ie-32|Se>>>64-ie);var $e=E[w[ae]];$e.high=D,$e.low=L}var je=E[0],se=T[0];for(je.high=se.high,je.low=se.low,j=0;j<5;j++)for(M=0;M<5;M++){var ue=T[ae=j+5*M],Ce=E[ae],He=E[(j+1)%5+5*M],$t=E[(j+2)%5+5*M];ue.high=Ce.high^~He.high&$t.high,ue.low=Ce.low^~He.low&$t.low}ue=T[0];var nr=S[N];ue.high^=nr.high,ue.low^=nr.low}},_doFinalize:function(){var C=this._data,k=C.words,T=(this._nDataBytes,8*C.sigBytes),h=32*this.blockSize;k[T>>>5]|=1<<24-T%32,k[(y.ceil((T+1)/h)*h>>>5)-1]|=128,C.sigBytes=4*k.length,this._process();for(var x=this._state,R=this.cfg.outputLength/8,P=R/8,N=[],j=0;j<P;j++){var D=x[j],L=D.high,M=D.low;L=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),M=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),N.push(M),N.push(L)}return new b.init(N,R)},clone:function(){for(var C=f.clone.call(this),k=C._state=this._state.slice(0),T=0;T<25;T++)k[T]=k[T].clone();return C}});m.SHA3=f._createHelper(O),m.HmacSHA3=f._createHmacHelper(O)}(Math),p.SHA3)},6004:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Device=void 0,l.detectDevice=N;const p=o(2109),y=o(2994),m=o(3953),u=o(4893),b=o(1765),f=o(8046),_=o(5601),g=o(2183),v=o(11),w=o(5535),S=o(8155),E=o(7402),O=o(2292),C=o(1767),k=o(5765),T=o(9676),h=o(8633),x=o(4039),R=o(9352),P=new y.Logger("Device");function N(j){var D,L,M,I;if(!j&&typeof navigator=="object"&&navigator.product==="ReactNative")return P.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void P.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(P.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(P.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(j||typeof navigator=="object"&&typeof navigator.userAgent=="string"){j??(j=navigator.userAgent);const G=new p.UAParser(j);P.debug("detectDevice() | browser detected [userAgent:%s, parsed:%o]",j,G.getResult());const de=G.getBrowser(),ee=(D=de.name)==null?void 0:D.toLowerCase(),Q=parseInt(de.major??"0"),ae=G.getEngine(),_e=(L=ae.name)==null?void 0:L.toLowerCase(),Se=G.getOS(),ie=(M=Se.name)==null?void 0:M.toLowerCase(),$e=parseFloat(Se.version??"0"),je=G.getDevice(),se=(I=je.model)==null?void 0:I.toLowerCase(),ue=ie==="ios"||se==="ipad",Ce=ee&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(ee),He=ee&&["firefox","mobile firefox","mobile focus"].includes(ee),$t=ee&&["safari","mobile safari"].includes(ee),nr=ee&&["edge"].includes(ee);if((Ce||nr)&&!ue&&Q>=111)return"Chrome111";if(Ce&&!ue&&Q>=74||nr&&!ue&&Q>=88)return"Chrome74";if(Ce&&!ue&&Q>=70)return"Chrome70";if(Ce&&!ue&&Q>=67)return"Chrome67";if(Ce&&!ue&&Q>=55)return"Chrome55";if(He&&!ue&&Q>=120)return"Firefox120";if(He&&!ue&&Q>=60)return"Firefox60";if(He&&ue&&$e>=14.3||$t&&Q>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if($t&&Q>=11)return"Safari11";if(nr&&!ue&&Q>=11&&Q<=18)return"Edge11";if(_e==="webkit"&&ue&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(_e==="blink"){const Ct=j.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(Ct){const cr=Number(Ct[1]);return cr>=111?"Chrome111":cr>=74?"Chrome74":cr>=70?"Chrome70":cr>=67?"Chrome67":"Chrome55"}return"Chrome111"}P.warn("detectDevice() | browser not supported [name:%s, version:%s]",ee,Q)}else P.warn("detectDevice() | unknown device")}l.Device=class{constructor({handlerName:j,handlerFactory:D}={}){we(this,"_handlerFactory");we(this,"_handlerName");we(this,"_loaded",!1);we(this,"_extendedRtpCapabilities");we(this,"_recvRtpCapabilities");we(this,"_canProduceByKind");we(this,"_sctpCapabilities");we(this,"_observer",new m.EnhancedEventEmitter);if(P.debug("constructor()"),j&&D)throw new TypeError("just one of handlerName or handlerInterface can be given");if(D)this._handlerFactory=D;else{if(j)P.debug("constructor() | handler given: %s",j);else{if(!(j=N()))throw new u.UnsupportedError("device not supported");P.debug("constructor() | detected handler: %s",j)}switch(j){case"Chrome111":this._handlerFactory=g.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=v.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=w.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=S.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=E.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=O.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=C.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=k.Safari12.createFactory();break;case"Safari11":this._handlerFactory=T.Safari11.createFactory();break;case"Edge11":this._handlerFactory=h.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=x.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=R.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${j}"`)}}const L=this._handlerFactory();this._handlerName=L.name,L.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:j}){let D;P.debug("load() [routerRtpCapabilities:%o]",j);try{if(this._loaded)throw new u.InvalidStateError("already loaded");const L=b.clone(j);f.validateRtpCapabilities(L),D=this._handlerFactory();const M=await D.getNativeRtpCapabilities();P.debug("load() | got native RTP capabilities:%o",M);const I=b.clone(M);f.validateRtpCapabilities(I),this._extendedRtpCapabilities=f.getExtendedRtpCapabilities(I,L),P.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=f.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=f.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=f.getRecvRtpCapabilities(this._extendedRtpCapabilities),f.validateRtpCapabilities(this._recvRtpCapabilities),P.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await D.getNativeSctpCapabilities(),P.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),f.validateSctpCapabilities(this._sctpCapabilities),P.debug("load() succeeded"),this._loaded=!0,D.close()}catch(L){throw D&&D.close(),L}}canProduce(j){if(!this._loaded)throw new u.InvalidStateError("not loaded");if(j!=="audio"&&j!=="video")throw new TypeError(`invalid kind "${j}"`);return this._canProduceByKind[j]}createSendTransport({id:j,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae}){return P.debug("createSendTransport()"),this.createTransport({direction:"send",id:j,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae})}createRecvTransport({id:j,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae}){return P.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:j,iceParameters:D,iceCandidates:L,dtlsParameters:M,sctpParameters:I,iceServers:G,iceTransportPolicy:de,additionalSettings:ee,proprietaryConstraints:Q,appData:ae})}createTransport({direction:j,id:D,iceParameters:L,iceCandidates:M,dtlsParameters:I,sctpParameters:G,iceServers:de,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:ae,appData:_e}){if(!this._loaded)throw new u.InvalidStateError("not loaded");if(typeof D!="string")throw new TypeError("missing id");if(typeof L!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(M))throw new TypeError("missing iceCandidates");if(typeof I!="object")throw new TypeError("missing dtlsParameters");if(G&&typeof G!="object")throw new TypeError("wrong sctpParameters");if(_e&&typeof _e!="object")throw new TypeError("if given, appData must be an object");const Se=new _.Transport({direction:j,id:D,iceParameters:L,iceCandidates:M,dtlsParameters:I,sctpParameters:G,iceServers:de,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:ae,appData:_e,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Se),Se}}},6011:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.unsafeStringify=void 0;const p=o(9746),y=[];for(let u=0;u<256;++u)y.push((u+256).toString(16).slice(1));function m(u,b=0){return(y[u[b+0]]+y[u[b+1]]+y[u[b+2]]+y[u[b+3]]+"-"+y[u[b+4]]+y[u[b+5]]+"-"+y[u[b+6]]+y[u[b+7]]+"-"+y[u[b+8]]+y[u[b+9]]+"-"+y[u[b+10]]+y[u[b+11]]+y[u[b+12]]+y[u[b+13]]+y[u[b+14]]+y[u[b+15]]).toLowerCase()}l.unsafeStringify=m,l.default=function(u,b=0){const f=m(u,b);if(!(0,p.default)(f))throw TypeError("Stringified UUID is invalid");return f}},6298:function(d,l,o){var p;d.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var y=p,m=y.lib.StreamCipher,u=y.algo,b=[],f=[],_=[],g=u.Rabbit=m.extend({_doReset:function(){for(var w=this._key.words,S=this.cfg.iv,E=0;E<4;E++)w[E]=16711935&(w[E]<<8|w[E]>>>24)|4278255360&(w[E]<<24|w[E]>>>8);var O=this._X=[w[0],w[3]<<16|w[2]>>>16,w[1],w[0]<<16|w[3]>>>16,w[2],w[1]<<16|w[0]>>>16,w[3],w[2]<<16|w[1]>>>16],C=this._C=[w[2]<<16|w[2]>>>16,4294901760&w[0]|65535&w[1],w[3]<<16|w[3]>>>16,4294901760&w[1]|65535&w[2],w[0]<<16|w[0]>>>16,4294901760&w[2]|65535&w[3],w[1]<<16|w[1]>>>16,4294901760&w[3]|65535&w[0]];for(this._b=0,E=0;E<4;E++)v.call(this);for(E=0;E<8;E++)C[E]^=O[E+4&7];if(S){var k=S.words,T=k[0],h=k[1],x=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),R=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),P=x>>>16|4294901760&R,N=R<<16|65535&x;for(C[0]^=x,C[1]^=P,C[2]^=R,C[3]^=N,C[4]^=x,C[5]^=P,C[6]^=R,C[7]^=N,E=0;E<4;E++)v.call(this)}},_doProcessBlock:function(w,S){var E=this._X;v.call(this),b[0]=E[0]^E[5]>>>16^E[3]<<16,b[1]=E[2]^E[7]>>>16^E[5]<<16,b[2]=E[4]^E[1]>>>16^E[7]<<16,b[3]=E[6]^E[3]>>>16^E[1]<<16;for(var O=0;O<4;O++)b[O]=16711935&(b[O]<<8|b[O]>>>24)|4278255360&(b[O]<<24|b[O]>>>8),w[S+O]^=b[O]},blockSize:4,ivSize:2});function v(){for(var w=this._X,S=this._C,E=0;E<8;E++)f[E]=S[E];for(S[0]=S[0]+1295307597+this._b|0,S[1]=S[1]+3545052371+(S[0]>>>0<f[0]>>>0?1:0)|0,S[2]=S[2]+886263092+(S[1]>>>0<f[1]>>>0?1:0)|0,S[3]=S[3]+1295307597+(S[2]>>>0<f[2]>>>0?1:0)|0,S[4]=S[4]+3545052371+(S[3]>>>0<f[3]>>>0?1:0)|0,S[5]=S[5]+886263092+(S[4]>>>0<f[4]>>>0?1:0)|0,S[6]=S[6]+1295307597+(S[5]>>>0<f[5]>>>0?1:0)|0,S[7]=S[7]+3545052371+(S[6]>>>0<f[6]>>>0?1:0)|0,this._b=S[7]>>>0<f[7]>>>0?1:0,E=0;E<8;E++){var O=w[E]+S[E],C=65535&O,k=O>>>16,T=((C*C>>>17)+C*k>>>15)+k*k,h=((4294901760&O)*O|0)+((65535&O)*O|0);_[E]=T^h}w[0]=_[0]+(_[7]<<16|_[7]>>>16)+(_[6]<<16|_[6]>>>16)|0,w[1]=_[1]+(_[0]<<8|_[0]>>>24)+_[7]|0,w[2]=_[2]+(_[1]<<16|_[1]>>>16)+(_[0]<<16|_[0]>>>16)|0,w[3]=_[3]+(_[2]<<8|_[2]>>>24)+_[1]|0,w[4]=_[4]+(_[3]<<16|_[3]>>>16)+(_[2]<<16|_[2]>>>16)|0,w[5]=_[5]+(_[4]<<8|_[4]>>>24)+_[3]|0,w[6]=_[6]+(_[5]<<16|_[5]>>>16)+(_[4]<<16|_[4]>>>16)|0,w[7]=_[7]+(_[6]<<8|_[6]>>>24)+_[5]|0}y.Rabbit=m._createHelper(g)}(),p.Rabbit)},6308:function(d,l,o){var p,y,m,u,b,f;d.exports=(f=o(9021),o(3009),y=(p=f).lib.WordArray,m=p.algo,u=m.SHA256,b=m.SHA224=u.extend({_doReset:function(){this._hash=new y.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var _=u._doFinalize.call(this);return _.sigBytes-=4,_}}),p.SHA224=u._createHelper(b),p.HmacSHA224=u._createHmacHelper(b),f.SHA224)},6356:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(6011),y=o(1425),m=o(6568);l.default=function(u,b,f){u??(u={}),f??(f=0);let _=(0,y.default)({...u,_v6:!0},new Uint8Array(16));if(_=(0,m.default)(_),b){for(let g=0;g<16;g++)b[f+g]=_[g];return b}return(0,p.unsafeStringify)(_)}},6372:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.mode.CTRGladman=function(){var y=p.lib.BlockCipherMode.extend();function m(f){if(255&~(f>>24))f+=16777216;else{var _=f>>16&255,g=f>>8&255,v=255&f;_===255?(_=0,g===255?(g=0,v===255?v=0:++v):++g):++_,f=0,f+=_<<16,f+=g<<8,f+=v}return f}function u(f){return(f[0]=m(f[0]))===0&&(f[1]=m(f[1])),f}var b=y.Encryptor=y.extend({processBlock:function(f,_){var g=this._cipher,v=g.blockSize,w=this._iv,S=this._counter;w&&(S=this._counter=w.slice(0),this._iv=void 0),u(S);var E=S.slice(0);g.encryptBlock(E,0);for(var O=0;O<v;O++)f[_+O]^=E[O]}});return y.Decryptor=b,y}(),p.mode.CTRGladman)},6440:function(d,l,o){var p;d.exports=(p=o(9021),function(){if(typeof ArrayBuffer=="function"){var y=p.lib.WordArray,m=y.init,u=y.init=function(b){if(b instanceof ArrayBuffer&&(b=new Uint8Array(b)),(b instanceof Int8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)&&(b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength)),b instanceof Uint8Array){for(var f=b.byteLength,_=[],g=0;g<f;g++)_[g>>>2]|=b[g]<<24-g%4*8;m.call(this,_,f)}else m.apply(this,arguments)};u.prototype=y}}(),p.lib.WordArray)},6568:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(1797),y=o(6011);l.default=function(m){const u=function(b){return Uint8Array.of((15&b[6])<<4|b[7]>>4&15,(15&b[7])<<4|(240&b[4])>>4,(15&b[4])<<4|(240&b[5])>>4,(15&b[5])<<4|(240&b[0])>>4,(15&b[0])<<4|(240&b[1])>>4,(15&b[1])<<4|(240&b[2])>>4,96|15&b[2],b[3],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}(typeof m=="string"?(0,p.default)(m):m);return typeof m=="string"?(0,y.unsafeStringify)(u):u}},6585:d=>{var l=1e3,o=60*l,p=60*o,y=24*p,m=7*y,u=365.25*y;function b(f,_,g,v){var w=_>=1.5*g;return Math.round(f/g)+" "+v+(w?"s":"")}d.exports=function(f,_){_=_||{};var g=typeof f;if(g==="string"&&f.length>0)return function(v){if(!((v=String(v)).length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(w){var S=parseFloat(w[1]);switch((w[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return S*u;case"weeks":case"week":case"w":return S*m;case"days":case"day":case"d":return S*y;case"hours":case"hour":case"hrs":case"hr":case"h":return S*p;case"minutes":case"minute":case"mins":case"min":case"m":return S*o;case"seconds":case"second":case"secs":case"sec":case"s":return S*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return S;default:return}}}}(f);if(g==="number"&&isFinite(f))return _.long?function(v){var w=Math.abs(v);return w>=y?b(v,w,y,"day"):w>=p?b(v,w,p,"hour"):w>=o?b(v,w,o,"minute"):w>=l?b(v,w,l,"second"):v+" ms"}(f):function(v){var w=Math.abs(v);return w>=y?Math.round(v/y)+"d":w>=p?Math.round(v/p)+"h":w>=o?Math.round(v/o)+"m":w>=l?Math.round(v/l)+"s":v+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},6697:(d,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6746:(d,l,o)=>{o.d(l,{KS:()=>y,fo:()=>p});var p=Object.freeze({SetKey:"setKey",RatchetRequest:"ratchetRequest",KeyRatcheted:"keyRatcheted"}),y=Object.freeze({ParticipantEncryptionStatusChanged:"participantEncryptionStatusChanged",EncryptionError:"encryptionError",E2EEStateChange:"e2eeStateChange"})},6880:function(d){d.exports=function(l){var o={};function p(y){if(o[y])return o[y].exports;var m=o[y]={i:y,l:!1,exports:{}};return l[y].call(m.exports,m,m.exports,p),m.l=!0,m.exports}return p.m=l,p.c=o,p.d=function(y,m,u){p.o(y,m)||Object.defineProperty(y,m,{enumerable:!0,get:u})},p.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},p.t=function(y,m){if(1&m&&(y=p(y)),8&m||4&m&&typeof y=="object"&&y&&y.__esModule)return y;var u=Object.create(null);if(p.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:y}),2&m&&typeof y!="string")for(var b in y)p.d(u,b,(function(f){return y[f]}).bind(null,b));return u},p.n=function(y){var m=y&&y.__esModule?function(){return y.default}:function(){return y};return p.d(m,"a",m),m},p.o=function(y,m){return Object.prototype.hasOwnProperty.call(y,m)},p.p="",p(p.s=90)}({17:function(l,o,p){o.__esModule=!0,o.default=void 0;var y=p(18),m=function(){function u(){}return u.getFirstMatch=function(b,f){var _=f.match(b);return _&&_.length>0&&_[1]||""},u.getSecondMatch=function(b,f){var _=f.match(b);return _&&_.length>1&&_[2]||""},u.matchAndReturnConst=function(b,f,_){if(b.test(f))return _},u.getWindowsVersionName=function(b){switch(b){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},u.getMacOSVersionName=function(b){var f=b.split(".").splice(0,2).map(function(_){return parseInt(_,10)||0});if(f.push(0),f[0]===10)switch(f[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},u.getAndroidVersionName=function(b){var f=b.split(".").splice(0,2).map(function(_){return parseInt(_,10)||0});if(f.push(0),!(f[0]===1&&f[1]<5))return f[0]===1&&f[1]<6?"Cupcake":f[0]===1&&f[1]>=6?"Donut":f[0]===2&&f[1]<2?"Eclair":f[0]===2&&f[1]===2?"Froyo":f[0]===2&&f[1]>2?"Gingerbread":f[0]===3?"Honeycomb":f[0]===4&&f[1]<1?"Ice Cream Sandwich":f[0]===4&&f[1]<4?"Jelly Bean":f[0]===4&&f[1]>=4?"KitKat":f[0]===5?"Lollipop":f[0]===6?"Marshmallow":f[0]===7?"Nougat":f[0]===8?"Oreo":f[0]===9?"Pie":void 0},u.getVersionPrecision=function(b){return b.split(".").length},u.compareVersions=function(b,f,_){_===void 0&&(_=!1);var g=u.getVersionPrecision(b),v=u.getVersionPrecision(f),w=Math.max(g,v),S=0,E=u.map([b,f],function(O){var C=w-u.getVersionPrecision(O),k=O+new Array(C+1).join(".0");return u.map(k.split("."),function(T){return new Array(20-T.length).join("0")+T}).reverse()});for(_&&(S=w-Math.min(g,v)),w-=1;w>=S;){if(E[0][w]>E[1][w])return 1;if(E[0][w]===E[1][w]){if(w===S)return 0;w-=1}else if(E[0][w]<E[1][w])return-1}},u.map=function(b,f){var _,g=[];if(Array.prototype.map)return Array.prototype.map.call(b,f);for(_=0;_<b.length;_+=1)g.push(f(b[_]));return g},u.find=function(b,f){var _,g;if(Array.prototype.find)return Array.prototype.find.call(b,f);for(_=0,g=b.length;_<g;_+=1){var v=b[_];if(f(v,_))return v}},u.assign=function(b){for(var f,_,g=b,v=arguments.length,w=new Array(v>1?v-1:0),S=1;S<v;S++)w[S-1]=arguments[S];if(Object.assign)return Object.assign.apply(Object,[b].concat(w));var E=function(){var O=w[f];typeof O=="object"&&O!==null&&Object.keys(O).forEach(function(C){g[C]=O[C]})};for(f=0,_=w.length;f<_;f+=1)E();return b},u.getBrowserAlias=function(b){return y.BROWSER_ALIASES_MAP[b]},u.getBrowserTypeByAlias=function(b){return y.BROWSER_MAP[b]||""},u}();o.default=m,l.exports=o.default},18:function(l,o,p){o.__esModule=!0,o.ENGINE_MAP=o.OS_MAP=o.PLATFORMS_MAP=o.BROWSER_MAP=o.BROWSER_ALIASES_MAP=void 0,o.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},o.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},o.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},o.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},o.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(l,o,p){o.__esModule=!0,o.default=void 0;var y,m=(y=p(91))&&y.__esModule?y:{default:y},u=p(18);function b(_,g){for(var v=0;v<g.length;v++){var w=g[v];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(_,w.key,w)}}var f=function(){function _(){}var g,v,w;return _.getParser=function(S,E){if(E===void 0&&(E=!1),typeof S!="string")throw new Error("UserAgent should be a string");return new m.default(S,E)},_.parse=function(S){return new m.default(S).getResult()},g=_,w=[{key:"BROWSER_MAP",get:function(){return u.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return u.ENGINE_MAP}},{key:"OS_MAP",get:function(){return u.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return u.PLATFORMS_MAP}}],(v=null)&&b(g.prototype,v),w&&b(g,w),_}();o.default=f,l.exports=o.default},91:function(l,o,p){o.__esModule=!0,o.default=void 0;var y=_(p(92)),m=_(p(93)),u=_(p(94)),b=_(p(95)),f=_(p(17));function _(v){return v&&v.__esModule?v:{default:v}}var g=function(){function v(S,E){if(E===void 0&&(E=!1),S==null||S==="")throw new Error("UserAgent parameter can't be empty");this._ua=S,this.parsedResult={},E!==!0&&this.parse()}var w=v.prototype;return w.getUA=function(){return this._ua},w.test=function(S){return S.test(this._ua)},w.parseBrowser=function(){var S=this;this.parsedResult.browser={};var E=f.default.find(y.default,function(O){if(typeof O.test=="function")return O.test(S);if(O.test instanceof Array)return O.test.some(function(C){return S.test(C)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.browser=E.describe(this.getUA())),this.parsedResult.browser},w.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},w.getBrowserName=function(S){return S?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},w.getBrowserVersion=function(){return this.getBrowser().version},w.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},w.parseOS=function(){var S=this;this.parsedResult.os={};var E=f.default.find(m.default,function(O){if(typeof O.test=="function")return O.test(S);if(O.test instanceof Array)return O.test.some(function(C){return S.test(C)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.os=E.describe(this.getUA())),this.parsedResult.os},w.getOSName=function(S){var E=this.getOS().name;return S?String(E).toLowerCase()||"":E||""},w.getOSVersion=function(){return this.getOS().version},w.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},w.getPlatformType=function(S){S===void 0&&(S=!1);var E=this.getPlatform().type;return S?String(E).toLowerCase()||"":E||""},w.parsePlatform=function(){var S=this;this.parsedResult.platform={};var E=f.default.find(u.default,function(O){if(typeof O.test=="function")return O.test(S);if(O.test instanceof Array)return O.test.some(function(C){return S.test(C)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.platform=E.describe(this.getUA())),this.parsedResult.platform},w.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},w.getEngineName=function(S){return S?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},w.parseEngine=function(){var S=this;this.parsedResult.engine={};var E=f.default.find(b.default,function(O){if(typeof O.test=="function")return O.test(S);if(O.test instanceof Array)return O.test.some(function(C){return S.test(C)});throw new Error("Browser's test function is not valid")});return E&&(this.parsedResult.engine=E.describe(this.getUA())),this.parsedResult.engine},w.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},w.getResult=function(){return f.default.assign({},this.parsedResult)},w.satisfies=function(S){var E=this,O={},C=0,k={},T=0;if(Object.keys(S).forEach(function(L){var M=S[L];typeof M=="string"?(k[L]=M,T+=1):typeof M=="object"&&(O[L]=M,C+=1)}),C>0){var h=Object.keys(O),x=f.default.find(h,function(L){return E.isOS(L)});if(x){var R=this.satisfies(O[x]);if(R!==void 0)return R}var P=f.default.find(h,function(L){return E.isPlatform(L)});if(P){var N=this.satisfies(O[P]);if(N!==void 0)return N}}if(T>0){var j=Object.keys(k),D=f.default.find(j,function(L){return E.isBrowser(L,!0)});if(D!==void 0)return this.compareVersion(k[D])}},w.isBrowser=function(S,E){E===void 0&&(E=!1);var O=this.getBrowserName().toLowerCase(),C=S.toLowerCase(),k=f.default.getBrowserTypeByAlias(C);return E&&k&&(C=k.toLowerCase()),C===O},w.compareVersion=function(S){var E=[0],O=S,C=!1,k=this.getBrowserVersion();if(typeof k=="string")return S[0]===">"||S[0]==="<"?(O=S.substr(1),S[1]==="="?(C=!0,O=S.substr(2)):E=[],S[0]===">"?E.push(1):E.push(-1)):S[0]==="="?O=S.substr(1):S[0]==="~"&&(C=!0,O=S.substr(1)),E.indexOf(f.default.compareVersions(k,O,C))>-1},w.isOS=function(S){return this.getOSName(!0)===String(S).toLowerCase()},w.isPlatform=function(S){return this.getPlatformType(!0)===String(S).toLowerCase()},w.isEngine=function(S){return this.getEngineName(!0)===String(S).toLowerCase()},w.is=function(S,E){return E===void 0&&(E=!1),this.isBrowser(S,E)||this.isOS(S)||this.isPlatform(S)},w.some=function(S){var E=this;return S===void 0&&(S=[]),S.some(function(O){return E.is(O)})},v}();o.default=g,l.exports=o.default},92:function(l,o,p){o.__esModule=!0,o.default=void 0;var y,m=(y=p(17))&&y.__esModule?y:{default:y},u=/version\/(\d+(\.?_?\d+)+)/i,b=[{test:[/googlebot/i],describe:function(f){var _={name:"Googlebot"},g=m.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/opera/i],describe:function(f){var _={name:"Opera"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/opr\/|opios/i],describe:function(f){var _={name:"Opera"},g=m.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/SamsungBrowser/i],describe:function(f){var _={name:"Samsung Internet for Android"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/Whale/i],describe:function(f){var _={name:"NAVER Whale Browser"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/MZBrowser/i],describe:function(f){var _={name:"MZ Browser"},g=m.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/focus/i],describe:function(f){var _={name:"Focus"},g=m.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/swing/i],describe:function(f){var _={name:"Swing"},g=m.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/coast/i],describe:function(f){var _={name:"Opera Coast"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(f){var _={name:"Opera Touch"},g=m.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/yabrowser/i],describe:function(f){var _={name:"Yandex Browser"},g=m.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/ucbrowser/i],describe:function(f){var _={name:"UC Browser"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/Maxthon|mxios/i],describe:function(f){var _={name:"Maxthon"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/epiphany/i],describe:function(f){var _={name:"Epiphany"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/puffin/i],describe:function(f){var _={name:"Puffin"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/sleipnir/i],describe:function(f){var _={name:"Sleipnir"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/k-meleon/i],describe:function(f){var _={name:"K-Meleon"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/micromessenger/i],describe:function(f){var _={name:"WeChat"},g=m.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/qqbrowser/i],describe:function(f){var _={name:/qqbrowserlite/i.test(f)?"QQ Browser Lite":"QQ Browser"},g=m.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/msie|trident/i],describe:function(f){var _={name:"Internet Explorer"},g=m.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/\sedg\//i],describe:function(f){var _={name:"Microsoft Edge"},g=m.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/edg([ea]|ios)/i],describe:function(f){var _={name:"Microsoft Edge"},g=m.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/vivaldi/i],describe:function(f){var _={name:"Vivaldi"},g=m.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/seamonkey/i],describe:function(f){var _={name:"SeaMonkey"},g=m.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/sailfish/i],describe:function(f){var _={name:"Sailfish"},g=m.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,f);return g&&(_.version=g),_}},{test:[/silk/i],describe:function(f){var _={name:"Amazon Silk"},g=m.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/phantom/i],describe:function(f){var _={name:"PhantomJS"},g=m.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/slimerjs/i],describe:function(f){var _={name:"SlimerJS"},g=m.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var _={name:"BlackBerry"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var _={name:"WebOS Browser"},g=m.default.getFirstMatch(u,f)||m.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/bada/i],describe:function(f){var _={name:"Bada"},g=m.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/tizen/i],describe:function(f){var _={name:"Tizen"},g=m.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/qupzilla/i],describe:function(f){var _={name:"QupZilla"},g=m.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/firefox|iceweasel|fxios/i],describe:function(f){var _={name:"Firefox"},g=m.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/electron/i],describe:function(f){var _={name:"Electron"},g=m.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/MiuiBrowser/i],describe:function(f){var _={name:"Miui"},g=m.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/chromium/i],describe:function(f){var _={name:"Chromium"},g=m.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,f)||m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/chrome|crios|crmo/i],describe:function(f){var _={name:"Chrome"},g=m.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/GSA/i],describe:function(f){var _={name:"Google Search"},g=m.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:function(f){var _=!f.test(/like android/i),g=f.test(/android/i);return _&&g},describe:function(f){var _={name:"Android Browser"},g=m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/playstation 4/i],describe:function(f){var _={name:"PlayStation 4"},g=m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/safari|applewebkit/i],describe:function(f){var _={name:"Safari"},g=m.default.getFirstMatch(u,f);return g&&(_.version=g),_}},{test:[/.*/i],describe:function(f){var _=f.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:m.default.getFirstMatch(_,f),version:m.default.getSecondMatch(_,f)}}}];o.default=b,l.exports=o.default},93:function(l,o,p){o.__esModule=!0,o.default=void 0;var y,m=(y=p(17))&&y.__esModule?y:{default:y},u=p(18),b=[{test:[/Roku\/DVP/],describe:function(f){var _=m.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,f);return{name:u.OS_MAP.Roku,version:_}}},{test:[/windows phone/i],describe:function(f){var _=m.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.WindowsPhone,version:_}}},{test:[/windows /i],describe:function(f){var _=m.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,f),g=m.default.getWindowsVersionName(_);return{name:u.OS_MAP.Windows,version:_,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(f){var _={name:u.OS_MAP.iOS},g=m.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,f);return g&&(_.version=g),_}},{test:[/macintosh/i],describe:function(f){var _=m.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,f).replace(/[_\s]/g,"."),g=m.default.getMacOSVersionName(_),v={name:u.OS_MAP.MacOS,version:_};return g&&(v.versionName=g),v}},{test:[/(ipod|iphone|ipad)/i],describe:function(f){var _=m.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,f).replace(/[_\s]/g,".");return{name:u.OS_MAP.iOS,version:_}}},{test:function(f){var _=!f.test(/like android/i),g=f.test(/android/i);return _&&g},describe:function(f){var _=m.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,f),g=m.default.getAndroidVersionName(_),v={name:u.OS_MAP.Android,version:_};return g&&(v.versionName=g),v}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var _=m.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,f),g={name:u.OS_MAP.WebOS};return _&&_.length&&(g.version=_),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var _=m.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,f)||m.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,f)||m.default.getFirstMatch(/\bbb(\d+)/i,f);return{name:u.OS_MAP.BlackBerry,version:_}}},{test:[/bada/i],describe:function(f){var _=m.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.Bada,version:_}}},{test:[/tizen/i],describe:function(f){var _=m.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.Tizen,version:_}}},{test:[/linux/i],describe:function(){return{name:u.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:u.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(f){var _=m.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,f);return{name:u.OS_MAP.PlayStation4,version:_}}}];o.default=b,l.exports=o.default},94:function(l,o,p){o.__esModule=!0,o.default=void 0;var y,m=(y=p(17))&&y.__esModule?y:{default:y},u=p(18),b=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(f){var _=m.default.getFirstMatch(/(can-l01)/i,f)&&"Nova",g={type:u.PLATFORMS_MAP.mobile,vendor:"Huawei"};return _&&(g.model=_),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(f){var _=f.test(/ipod|iphone/i),g=f.test(/like (ipod|iphone)/i);return _&&!g},describe:function(f){var _=m.default.getFirstMatch(/(ipod|iphone)/i,f);return{type:u.PLATFORMS_MAP.mobile,vendor:"Apple",model:_}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName(!0)==="blackberry"},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(f){return f.getBrowserName(!0)==="bada"},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName()==="windows phone"},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(f){var _=Number(String(f.getOSVersion()).split(".")[0]);return f.getOSName(!0)==="android"&&_>=3},describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(f){return f.getOSName(!0)==="android"},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getOSName(!0)==="macos"},describe:function(){return{type:u.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(f){return f.getOSName(!0)==="windows"},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="linux"},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="playstation 4"},describe:function(){return{type:u.PLATFORMS_MAP.tv}}},{test:function(f){return f.getOSName(!0)==="roku"},describe:function(){return{type:u.PLATFORMS_MAP.tv}}}];o.default=b,l.exports=o.default},95:function(l,o,p){o.__esModule=!0,o.default=void 0;var y,m=(y=p(17))&&y.__esModule?y:{default:y},u=p(18),b=[{test:function(f){return f.getBrowserName(!0)==="microsoft edge"},describe:function(f){if(/\sedg\//i.test(f))return{name:u.ENGINE_MAP.Blink};var _=m.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,f);return{name:u.ENGINE_MAP.EdgeHTML,version:_}}},{test:[/trident/i],describe:function(f){var _={name:u.ENGINE_MAP.Trident},g=m.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:function(f){return f.test(/presto/i)},describe:function(f){var _={name:u.ENGINE_MAP.Presto},g=m.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:function(f){var _=f.test(/gecko/i),g=f.test(/like gecko/i);return _&&!g},describe:function(f){var _={name:u.ENGINE_MAP.Gecko},g=m.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:u.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(f){var _={name:u.ENGINE_MAP.WebKit},g=m.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,f);return g&&(_.version=g),_}}];o.default=b,l.exports=o.default}})},6939:function(d,l,o){var p,y,m;d.exports=(m=o(9021),o(7165),m.mode.CTR=(p=m.lib.BlockCipherMode.extend(),y=p.Encryptor=p.extend({processBlock:function(u,b){var f=this._cipher,_=f.blockSize,g=this._iv,v=this._counter;g&&(v=this._counter=g.slice(0),this._iv=void 0);var w=v.slice(0);f.encryptBlock(w,0),v[_-1]=v[_-1]+1|0;for(var S=0;S<_;S++)u[b+S]^=w[S]}}),p.Decryptor=y,p),m.mode.CTR)},7007:d=>{var l,o=typeof Reflect=="object"?Reflect:null,p=o&&typeof o.apply=="function"?o.apply:function(C,k,T){return Function.prototype.apply.call(C,k,T)};l=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var y=Number.isNaN||function(C){return C!=C};function m(){m.init.call(this)}d.exports=m,d.exports.once=function(C,k){return new Promise(function(T,h){function x(P){C.removeListener(k,R),h(P)}function R(){typeof C.removeListener=="function"&&C.removeListener("error",x),T([].slice.call(arguments))}O(C,k,R,{once:!0}),k!=="error"&&function(P,N,j){typeof P.on=="function"&&O(P,"error",N,j)}(C,x,{once:!0})})},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var u=10;function b(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function f(C){return C._maxListeners===void 0?m.defaultMaxListeners:C._maxListeners}function _(C,k,T,h){var x,R,P,N;if(b(T),(R=C._events)===void 0?(R=C._events=Object.create(null),C._eventsCount=0):(R.newListener!==void 0&&(C.emit("newListener",k,T.listener?T.listener:T),R=C._events),P=R[k]),P===void 0)P=R[k]=T,++C._eventsCount;else if(typeof P=="function"?P=R[k]=h?[T,P]:[P,T]:h?P.unshift(T):P.push(T),(x=f(C))>0&&P.length>x&&!P.warned){P.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=C,j.type=k,j.count=P.length,N=j,console&&console.warn&&console.warn(N)}return C}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(C,k,T){var h={fired:!1,wrapFn:void 0,target:C,type:k,listener:T},x=g.bind(h);return x.listener=T,h.wrapFn=x,x}function w(C,k,T){var h=C._events;if(h===void 0)return[];var x=h[k];return x===void 0?[]:typeof x=="function"?T?[x.listener||x]:[x]:T?function(R){for(var P=new Array(R.length),N=0;N<P.length;++N)P[N]=R[N].listener||R[N];return P}(x):E(x,x.length)}function S(C){var k=this._events;if(k!==void 0){var T=k[C];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function E(C,k){for(var T=new Array(k),h=0;h<k;++h)T[h]=C[h];return T}function O(C,k,T,h){if(typeof C.on=="function")h.once?C.once(k,T):C.on(k,T);else{if(typeof C.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(k,function x(R){h.once&&C.removeEventListener(k,x),T(R)})}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");u=C}}),m.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},m.prototype.getMaxListeners=function(){return f(this)},m.prototype.emit=function(C){for(var k=[],T=1;T<arguments.length;T++)k.push(arguments[T]);var h=C==="error",x=this._events;if(x!==void 0)h=h&&x.error===void 0;else if(!h)return!1;if(h){var R;if(k.length>0&&(R=k[0]),R instanceof Error)throw R;var P=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw P.context=R,P}var N=x[C];if(N===void 0)return!1;if(typeof N=="function")p(N,this,k);else{var j=N.length,D=E(N,j);for(T=0;T<j;++T)p(D[T],this,k)}return!0},m.prototype.addListener=function(C,k){return _(this,C,k,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(C,k){return _(this,C,k,!0)},m.prototype.once=function(C,k){return b(k),this.on(C,v(this,C,k)),this},m.prototype.prependOnceListener=function(C,k){return b(k),this.prependListener(C,v(this,C,k)),this},m.prototype.removeListener=function(C,k){var T,h,x,R,P;if(b(k),(h=this._events)===void 0)return this;if((T=h[C])===void 0)return this;if(T===k||T.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete h[C],h.removeListener&&this.emit("removeListener",C,T.listener||k));else if(typeof T!="function"){for(x=-1,R=T.length-1;R>=0;R--)if(T[R]===k||T[R].listener===k){P=T[R].listener,x=R;break}if(x<0)return this;x===0?T.shift():function(N,j){for(;j+1<N.length;j++)N[j]=N[j+1];N.pop()}(T,x),T.length===1&&(h[C]=T[0]),h.removeListener!==void 0&&this.emit("removeListener",C,P||k)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(C){var k,T,h;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[C]),this;if(arguments.length===0){var x,R=Object.keys(T);for(h=0;h<R.length;++h)(x=R[h])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(k=T[C])=="function")this.removeListener(C,k);else if(k!==void 0)for(h=k.length-1;h>=0;h--)this.removeListener(C,k[h]);return this},m.prototype.listeners=function(C){return w(this,C,!0)},m.prototype.rawListeners=function(C){return w(this,C,!1)},m.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):S.call(C,k)},m.prototype.listenerCount=S,m.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]}},7080:(d,l,o)=>{o.d(l,{q:()=>y,s:()=>p});var p={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},y={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},7165:function(d,l,o){var p;d.exports=(p=o(9021),o(9506),void(p.lib.Cipher||function(y){var m=p,u=m.lib,b=u.Base,f=u.WordArray,_=u.BufferedBlockAlgorithm,g=m.enc,v=(g.Utf8,g.Base64),w=m.algo.EvpKDF,S=u.Cipher=_.extend({cfg:b.extend(),createEncryptor:function(N,j){return this.create(this._ENC_XFORM_MODE,N,j)},createDecryptor:function(N,j){return this.create(this._DEC_XFORM_MODE,N,j)},init:function(N,j,D){this.cfg=this.cfg.extend(D),this._xformMode=N,this._key=j,this.reset()},reset:function(){_.reset.call(this),this._doReset()},process:function(N){return this._append(N),this._process()},finalize:function(N){return N&&this._append(N),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function N(j){return typeof j=="string"?P:x}return function(j){return{encrypt:function(D,L,M){return N(L).encrypt(j,D,L,M)},decrypt:function(D,L,M){return N(L).decrypt(j,D,L,M)}}}}()}),E=(u.StreamCipher=S.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),m.mode={}),O=u.BlockCipherMode=b.extend({createEncryptor:function(N,j){return this.Encryptor.create(N,j)},createDecryptor:function(N,j){return this.Decryptor.create(N,j)},init:function(N,j){this._cipher=N,this._iv=j}}),C=E.CBC=function(){var N=O.extend();function j(D,L,M){var I,G=this._iv;G?(I=G,this._iv=y):I=this._prevBlock;for(var de=0;de<M;de++)D[L+de]^=I[de]}return N.Encryptor=N.extend({processBlock:function(D,L){var M=this._cipher,I=M.blockSize;j.call(this,D,L,I),M.encryptBlock(D,L),this._prevBlock=D.slice(L,L+I)}}),N.Decryptor=N.extend({processBlock:function(D,L){var M=this._cipher,I=M.blockSize,G=D.slice(L,L+I);M.decryptBlock(D,L),j.call(this,D,L,I),this._prevBlock=G}}),N}(),k=(m.pad={}).Pkcs7={pad:function(N,j){for(var D=4*j,L=D-N.sigBytes%D,M=L<<24|L<<16|L<<8|L,I=[],G=0;G<L;G+=4)I.push(M);var de=f.create(I,L);N.concat(de)},unpad:function(N){var j=255&N.words[N.sigBytes-1>>>2];N.sigBytes-=j}},T=(u.BlockCipher=S.extend({cfg:S.cfg.extend({mode:C,padding:k}),reset:function(){var N;S.reset.call(this);var j=this.cfg,D=j.iv,L=j.mode;this._xformMode==this._ENC_XFORM_MODE?N=L.createEncryptor:(N=L.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==N?this._mode.init(this,D&&D.words):(this._mode=N.call(L,this,D&&D.words),this._mode.__creator=N)},_doProcessBlock:function(N,j){this._mode.processBlock(N,j)},_doFinalize:function(){var N,j=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(j.pad(this._data,this.blockSize),N=this._process(!0)):(N=this._process(!0),j.unpad(N)),N},blockSize:4}),u.CipherParams=b.extend({init:function(N){this.mixIn(N)},toString:function(N){return(N||this.formatter).stringify(this)}})),h=(m.format={}).OpenSSL={stringify:function(N){var j=N.ciphertext,D=N.salt;return(D?f.create([1398893684,1701076831]).concat(D).concat(j):j).toString(v)},parse:function(N){var j,D=v.parse(N),L=D.words;return L[0]==1398893684&&L[1]==1701076831&&(j=f.create(L.slice(2,4)),L.splice(0,4),D.sigBytes-=16),T.create({ciphertext:D,salt:j})}},x=u.SerializableCipher=b.extend({cfg:b.extend({format:h}),encrypt:function(N,j,D,L){L=this.cfg.extend(L);var M=N.createEncryptor(D,L),I=M.finalize(j),G=M.cfg;return T.create({ciphertext:I,key:D,iv:G.iv,algorithm:N,mode:G.mode,padding:G.padding,blockSize:N.blockSize,formatter:L.format})},decrypt:function(N,j,D,L){return L=this.cfg.extend(L),j=this._parse(j,L.format),N.createDecryptor(D,L).finalize(j.ciphertext)},_parse:function(N,j){return typeof N=="string"?j.parse(N,this):N}}),R=(m.kdf={}).OpenSSL={execute:function(N,j,D,L,M){if(L||(L=f.random(8)),M)I=w.create({keySize:j+D,hasher:M}).compute(N,L);else var I=w.create({keySize:j+D}).compute(N,L);var G=f.create(I.words.slice(j),4*D);return I.sigBytes=4*j,T.create({key:I,iv:G,salt:L})}},P=u.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:R}),encrypt:function(N,j,D,L){var M=(L=this.cfg.extend(L)).kdf.execute(D,N.keySize,N.ivSize,L.salt,L.hasher);L.iv=M.iv;var I=x.encrypt.call(this,N,j,M.key,L);return I.mixIn(M),I},decrypt:function(N,j,D,L){L=this.cfg.extend(L),j=this._parse(j,L.format);var M=L.kdf.execute(D,N.keySize,N.ivSize,j.salt,L.hasher);return L.iv=M.iv,x.decrypt.call(this,N,j,M.key,L)}})}()))},7193:function(d,l,o){var p;d.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var y=p,m=y.lib.StreamCipher,u=y.algo,b=u.RC4=m.extend({_doReset:function(){for(var g=this._key,v=g.words,w=g.sigBytes,S=this._S=[],E=0;E<256;E++)S[E]=E;E=0;for(var O=0;E<256;E++){var C=E%w,k=v[C>>>2]>>>24-C%4*8&255;O=(O+S[E]+k)%256;var T=S[E];S[E]=S[O],S[O]=T}this._i=this._j=0},_doProcessBlock:function(g,v){g[v]^=f.call(this)},keySize:8,ivSize:0});function f(){for(var g=this._S,v=this._i,w=this._j,S=0,E=0;E<4;E++){w=(w+g[v=(v+1)%256])%256;var O=g[v];g[v]=g[w],g[w]=O,S|=g[(g[v]+g[w])%256]<<24-8*E}return this._i=v,this._j=w,S}y.RC4=m._createHelper(b);var _=u.RC4Drop=b.extend({cfg:b.cfg.extend({drop:192}),_doReset:function(){b._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)f.call(this)}});y.RC4Drop=m._createHelper(_)}(),p.RC4)},7363:(d,l,o)=>{var p=o(5020),y=o(3804),m=o(5602);l.grammar=m,l.write=y,l.parse=p.parse,l.parseParams=p.parseParams,l.parseFmtpConfig=p.parseFmtpConfig,l.parsePayloads=p.parsePayloads,l.parseRemoteCandidates=p.parseRemoteCandidates,l.parseImageAttributes=p.parseImageAttributes,l.parseSimulcastStreamList=p.parseSimulcastStreamList},7402:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Chrome55=void 0;const p=o(7363),y=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),_=o(4496),g=o(521),v=o(1305),w=new y.Logger("Chrome55"),S={OS:1024,MIS:1024};class E extends g.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdTrack",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new E}get name(){return"Chrome55"}close(){if(w.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){w.debug("getNativeRtpCapabilities()");const k=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const T=await k.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{k.close()}catch{}const h=p.parse(T.sdp);return f.extractRtpCapabilities({sdpObject:h})}catch(T){try{k.close()}catch{}throw T}}async getNativeSctpCapabilities(){return w.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:k,iceParameters:T,iceCandidates:h,dtlsParameters:x,sctpParameters:R,iceServers:P,iceTransportPolicy:N,additionalSettings:j,proprietaryConstraints:D,extendedRtpCapabilities:L}){w.debug("run()"),this._direction=k,this._remoteSdp=new v.RemoteSdp({iceParameters:T,iceCandidates:h,dtlsParameters:x,sctpParameters:R,planB:!0}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",L),video:b.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",L),video:b.getSendingRemoteRtpParameters("video",L)},x.role&&x.role!=="auto"&&(this._forcedLocalDtlsRole=x.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...j},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(w.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(k){w.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=k,this._pc.setConfiguration(T)}async restartIce(k){if(w.debug("restartIce()"),this._remoteSdp.updateIceParameters(k),this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});w.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const h={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();w.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:k,encodings:T,codecOptions:h,codec:x}){this.assertSendDirection(),w.debug("send() [kind:%s, track.id:%s]",k.kind,k.id),x&&w.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(k),this._pc.addStream(this._sendStream);let R,P=await this._pc.createOffer(),N=p.parse(P.sdp);N.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const j=u.clone(this._sendingRtpParametersByKind[k.kind]);j.codecs=b.reduceCodecs(j.codecs);const D=u.clone(this._sendingRemoteRtpParametersByKind[k.kind]);if(D.codecs=b.reduceCodecs(D.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),k.kind==="video"&&T&&T.length>1&&(w.debug("send() | enabling simulcast"),N=p.parse(P.sdp),R=N.media.find(I=>I.type==="video"),_.addLegacySimulcast({offerMediaObject:R,track:k,numStreams:T.length}),P={type:"offer",sdp:p.write(N)}),w.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),N=p.parse(this._pc.localDescription.sdp),R=N.media.find(I=>I.type===k.kind),j.rtcp.cname=f.getCname({offerMediaObject:R}),j.encodings=_.getRtpEncodings({offerMediaObject:R,track:k}),T)for(let I=0;I<j.encodings.length;++I)T[I]&&Object.assign(j.encodings[I],T[I]);if(j.encodings.length>1&&j.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const I of j.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:R,offerRtpParameters:j,answerRtpParameters:D,codecOptions:h});const L={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const M=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(M,k),{localId:M,rtpParameters:j}}async stopSending(k){this.assertSendDirection(),w.debug("stopSending() [localId:%s]",k);const T=this._mapSendLocalIdTrack.get(k);if(!T)throw new Error("track not found");this._mapSendLocalIdTrack.delete(k),this._sendStream.removeTrack(T),this._pc.addStream(this._sendStream);const h=await this._pc.createOffer();w.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(R){if(this._sendStream.getTracks().length===0)return void w.warn("stopSending() | ignoring expected error due no sending tracks: %s",R.toString());throw R}if(this._pc.signalingState==="stable")return;const x={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async pauseSending(k){}async resumeSending(k){}async replaceTrack(k,T){throw new m.UnsupportedError("not implemented")}async setMaxSpatialLayer(k,T){throw new m.UnsupportedError(" not implemented")}async setRtpEncodingParameters(k,T){throw new m.UnsupportedError("not supported")}async getSenderStats(k){throw new m.UnsupportedError("not implemented")}async sendDataChannel({ordered:k,maxPacketLifeTime:T,maxRetransmits:h,label:x,protocol:R}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:k,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:h,protocol:R};w.debug("sendDataChannel() [options:%o]",P);const N=this._pc.createDataChannel(x,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),D=p.parse(j.sdp),L=D.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),w.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const M={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(k){this.assertRecvDirection();const T=[];for(const P of k){const{trackId:N,kind:j,rtpParameters:D,streamId:L}=P;w.debug("receive() [trackId:%s, kind:%s]",N,j);const M=j;this._remoteSdp.receive({mid:M,kind:j,offerRtpParameters:D,streamId:L??D.rtcp.cname,trackId:N})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let x=await this._pc.createAnswer();const R=p.parse(x.sdp);for(const P of k){const{kind:N,rtpParameters:j}=P,D=N,L=R.media.find(M=>String(M.mid)===D);f.applyCodecParameters({offerRtpParameters:j,answerMediaObject:L})}x={type:"answer",sdp:p.write(R)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:R}),w.debug("receive() | calling pc.setLocalDescription() [answer:%o]",x),await this._pc.setLocalDescription(x);for(const P of k){const{kind:N,trackId:j,rtpParameters:D}=P,L=N,M=j,I=P.streamId??D.rtcp.cname,G=this._pc.getRemoteStreams().find(de=>de.id===I).getTrackById(M);if(!G)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(M,{mid:L,rtpParameters:D}),T.push({localId:M,track:G})}return T}async stopReceiving(k){this.assertRecvDirection();for(const x of k){w.debug("stopReceiving() [localId:%s]",x);const{mid:R,rtpParameters:P}=this._mapRecvLocalIdInfo.get(x)??{};this._mapRecvLocalIdInfo.delete(x),this._remoteSdp.planBStopReceiving({mid:R,offerRtpParameters:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();w.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(k){}async resumeReceiving(k){}async getReceiverStats(k){throw new m.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:k,label:T,protocol:h}){this.assertRecvDirection();const{streamId:x,ordered:R,maxPacketLifeTime:P,maxRetransmits:N}=k,j={negotiated:!0,id:x,ordered:R,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:N,protocol:h};w.debug("receiveDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(T,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const M=await this._pc.createAnswer();if(!this._transportReady){const I=p.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}w.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:k,localSdpObject:T}){T||(T=p.parse(this._pc.localDescription.sdp));const h=f.extractDtlsParameters({sdpObject:T});h.role=k,this._remoteSdp.updateDtlsRole(k==="client"?"server":"client"),await new Promise((x,R)=>{this.safeEmit("@connect",{dtlsParameters:h},x,R)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Chrome55=E},7504:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DataProducer=void 0;const p=o(2994),y=o(3953),m=o(4893),u=new p.Logger("DataProducer");class b extends y.EnhancedEventEmitter{constructor({id:g,dataChannel:v,sctpStreamParameters:w,appData:S}){super();we(this,"_id");we(this,"_dataChannel");we(this,"_closed",!1);we(this,"_sctpStreamParameters");we(this,"_appData");we(this,"_observer",new y.EnhancedEventEmitter);u.debug("constructor()"),this._id=g,this._dataChannel=v,this._sctpStreamParameters=w,this._appData=S??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(g){this._dataChannel.bufferedAmountLowThreshold=g}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(u.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(u.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(g){if(u.debug("send()"),this._closed)throw new m.InvalidStateError("closed");this._dataChannel.send(g)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(u.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",g=>{if(this._closed)return;let{error:v}=g;v||(v=new Error("unknown DataChannel error")),v.errorDetail==="sctp-failure"?u.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",v.sctpCauseCode,v.message):u.error('DataChannel "error" event: %o',v),this.safeEmit("error",v)}),this._dataChannel.addEventListener("close",()=>{this._closed||(u.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||u.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}l.DataProducer=b},7628:function(d,l,o){var p;d.exports=(p=o(9021),o(754),o(4636),o(9506),o(7165),function(){var y=p,m=y.lib,u=m.WordArray,b=m.BlockCipher,f=y.algo,_=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],w=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],S=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],E=f.DES=b.extend({_doReset:function(){for(var T=this._key.words,h=[],x=0;x<56;x++){var R=_[x]-1;h[x]=T[R>>>5]>>>31-R%32&1}for(var P=this._subKeys=[],N=0;N<16;N++){var j=P[N]=[],D=v[N];for(x=0;x<24;x++)j[x/6|0]|=h[(g[x]-1+D)%28]<<31-x%6,j[4+(x/6|0)]|=h[28+(g[x+24]-1+D)%28]<<31-x%6;for(j[0]=j[0]<<1|j[0]>>>31,x=1;x<7;x++)j[x]=j[x]>>>4*(x-1)+3;j[7]=j[7]<<5|j[7]>>>27}var L=this._invSubKeys=[];for(x=0;x<16;x++)L[x]=P[15-x]},encryptBlock:function(T,h){this._doCryptBlock(T,h,this._subKeys)},decryptBlock:function(T,h){this._doCryptBlock(T,h,this._invSubKeys)},_doCryptBlock:function(T,h,x){this._lBlock=T[h],this._rBlock=T[h+1],O.call(this,4,252645135),O.call(this,16,65535),C.call(this,2,858993459),C.call(this,8,16711935),O.call(this,1,1431655765);for(var R=0;R<16;R++){for(var P=x[R],N=this._lBlock,j=this._rBlock,D=0,L=0;L<8;L++)D|=w[L][((j^P[L])&S[L])>>>0];this._lBlock=j,this._rBlock=N^D}var M=this._lBlock;this._lBlock=this._rBlock,this._rBlock=M,O.call(this,1,1431655765),C.call(this,8,16711935),C.call(this,2,858993459),O.call(this,16,65535),O.call(this,4,252645135),T[h]=this._lBlock,T[h+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function O(T,h){var x=(this._lBlock>>>T^this._rBlock)&h;this._rBlock^=x,this._lBlock^=x<<T}function C(T,h){var x=(this._rBlock>>>T^this._lBlock)&h;this._lBlock^=x,this._rBlock^=x<<T}y.DES=b._createHelper(E);var k=f.TripleDES=b.extend({_doReset:function(){var T=this._key.words;if(T.length!==2&&T.length!==4&&T.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var h=T.slice(0,2),x=T.length<4?T.slice(0,2):T.slice(2,4),R=T.length<6?T.slice(0,2):T.slice(4,6);this._des1=E.createEncryptor(u.create(h)),this._des2=E.createEncryptor(u.create(x)),this._des3=E.createEncryptor(u.create(R))},encryptBlock:function(T,h){this._des1.encryptBlock(T,h),this._des2.decryptBlock(T,h),this._des3.encryptBlock(T,h)},decryptBlock:function(T,h){this._des3.decryptBlock(T,h),this._des2.encryptBlock(T,h),this._des1.decryptBlock(T,h)},keySize:6,ivSize:2,blockSize:2});y.TripleDES=b._createHelper(k)}(),p.TripleDES)},7654:(d,l,o)=>{var p="__lodash_hash_undefined__",y="[object Function]",m="[object GeneratorFunction]",u=/^\[object .+?Constructor\]$/,b=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,f=typeof self=="object"&&self&&self.Object===Object&&self,_=b||f||Function("return this")(),g,v=Array.prototype,w=Function.prototype,S=Object.prototype,E=_["__core-js_shared__"],O=(g=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",C=w.toString,k=S.hasOwnProperty,T=S.toString,h=RegExp("^"+C.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=v.splice,R=G(_,"Map"),P=G(Object,"create");function N(Q){var ae=-1,_e=Q?Q.length:0;for(this.clear();++ae<_e;){var Se=Q[ae];this.set(Se[0],Se[1])}}function j(Q){var ae=-1,_e=Q?Q.length:0;for(this.clear();++ae<_e;){var Se=Q[ae];this.set(Se[0],Se[1])}}function D(Q){var ae=-1,_e=Q?Q.length:0;for(this.clear();++ae<_e;){var Se=Q[ae];this.set(Se[0],Se[1])}}function L(Q,ae){for(var _e,Se,ie=Q.length;ie--;)if((_e=Q[ie][0])===(Se=ae)||_e!=_e&&Se!=Se)return ie;return-1}function M(Q){if(!ee(Q)||(ae=Q,O&&O in ae))return!1;var ae,_e=function(Se){var ie=ee(Se)?T.call(Se):"";return ie==y||ie==m}(Q)||function(Se){var ie=!1;if(Se!=null&&typeof Se.toString!="function")try{ie=!!(Se+"")}catch{}return ie}(Q)?h:u;return _e.test(function(Se){if(Se!=null){try{return C.call(Se)}catch{}try{return Se+""}catch{}}return""}(Q))}function I(Q,ae){var _e,Se,ie=Q.__data__;return((Se=typeof(_e=ae))=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?_e!=="__proto__":_e===null)?ie[typeof ae=="string"?"string":"hash"]:ie.map}function G(Q,ae){var _e=function(Se,ie){return Se==null?void 0:Se[ie]}(Q,ae);return M(_e)?_e:void 0}function de(Q,ae){if(typeof Q!="function"||ae&&typeof ae!="function")throw new TypeError("Expected a function");var _e=function(){var Se=arguments,ie=ae?ae.apply(this,Se):Se[0],$e=_e.cache;if($e.has(ie))return $e.get(ie);var je=Q.apply(this,Se);return _e.cache=$e.set(ie,je),je};return _e.cache=new(de.Cache||D),_e}function ee(Q){var ae=typeof Q;return!!Q&&(ae=="object"||ae=="function")}N.prototype.clear=function(){this.__data__=P?P(null):{}},N.prototype.delete=function(Q){return this.has(Q)&&delete this.__data__[Q]},N.prototype.get=function(Q){var ae=this.__data__;if(P){var _e=ae[Q];return _e===p?void 0:_e}return k.call(ae,Q)?ae[Q]:void 0},N.prototype.has=function(Q){var ae=this.__data__;return P?ae[Q]!==void 0:k.call(ae,Q)},N.prototype.set=function(Q,ae){return this.__data__[Q]=P&&ae===void 0?p:ae,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(Q){var ae=this.__data__,_e=L(ae,Q);return!(_e<0)&&(_e==ae.length-1?ae.pop():x.call(ae,_e,1),!0)},j.prototype.get=function(Q){var ae=this.__data__,_e=L(ae,Q);return _e<0?void 0:ae[_e][1]},j.prototype.has=function(Q){return L(this.__data__,Q)>-1},j.prototype.set=function(Q,ae){var _e=this.__data__,Se=L(_e,Q);return Se<0?_e.push([Q,ae]):_e[Se][1]=ae,this},D.prototype.clear=function(){this.__data__={hash:new N,map:new(R||j),string:new N}},D.prototype.delete=function(Q){return I(this,Q).delete(Q)},D.prototype.get=function(Q){return I(this,Q).get(Q)},D.prototype.has=function(Q){return I(this,Q).has(Q)},D.prototype.set=function(Q,ae){return I(this,Q).set(Q,ae),this},de.Cache=D,d.exports=de},7800:(d,l,o)=>{o.d(l,{A:()=>y});var p=o(3145);function y(m,u){if(m){if(typeof m=="string")return(0,p.A)(m,u);var b={}.toString.call(m).slice(8,-1);return b==="Object"&&m.constructor&&(b=m.constructor.name),b==="Map"||b==="Set"?Array.from(m):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?(0,p.A)(m,u):void 0}}},7833:(d,l,o)=>{l.formatArgs=function(y){if(y[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+y[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;y.splice(1,0,m,"color: inherit");let u=0,b=0;y[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(b=u))}),y.splice(b,0,m)},l.save=function(y){try{y?l.storage.setItem("debug",y):l.storage.removeItem("debug")}catch{}},l.load=function(){let y;try{y=l.storage.getItem("debug")||l.storage.getItem("DEBUG")}catch{}return!y&&typeof process<"u"&&"env"in process&&(y=r.DEBUG),y},l.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let y;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(y=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(y[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},l.storage=function(){try{return localStorage}catch{}}(),l.destroy=(()=>{let y=!1;return()=>{y||(y=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),d.exports=o(736)(l);const{formatters:p}=d.exports;p.j=function(y){try{return JSON.stringify(y)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}},8046:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.validateRtpCapabilities=function(h){if(typeof h!="object")throw new TypeError("caps is not an object");if(h.codecs&&!Array.isArray(h.codecs))throw new TypeError("caps.codecs is not an array");h.codecs||(h.codecs=[]);for(const x of h.codecs)_(x);if(h.headerExtensions&&!Array.isArray(h.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");h.headerExtensions||(h.headerExtensions=[]);for(const x of h.headerExtensions)v(x)},l.validateRtpParameters=f,l.validateSctpStreamParameters=function(h){if(typeof h!="object")throw new TypeError("params is not an object");if(typeof h.streamId!="number")throw new TypeError("missing params.streamId");let x=!1;if(typeof h.ordered=="boolean"?x=!0:h.ordered=!0,h.maxPacketLifeTime&&typeof h.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(h.maxRetransmits&&typeof h.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(h.maxPacketLifeTime&&h.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(x&&h.ordered&&(h.maxPacketLifeTime||h.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(x||!h.maxPacketLifeTime&&!h.maxRetransmits||(h.ordered=!1),h.label&&typeof h.label!="string")throw new TypeError("invalid params.label");if(h.protocol&&typeof h.protocol!="string")throw new TypeError("invalid params.protocol")},l.validateSctpCapabilities=function(h){if(typeof h!="object")throw new TypeError("caps is not an object");if(!h.numStreams||typeof h.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(x){if(typeof x!="object")throw new TypeError("numStreams is not an object");if(typeof x.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof x.MIS!="number")throw new TypeError("missing numStreams.MIS")})(h.numStreams)},l.getExtendedRtpCapabilities=function(h,x){const R={codecs:[],headerExtensions:[]};for(const P of x.codecs??[]){if(O(P))continue;const N=(h.codecs??[]).find(D=>C(D,P,{strict:!0,modify:!0}));if(!N)continue;const j={mimeType:N.mimeType,kind:N.kind,clockRate:N.clockRate,channels:N.channels,localPayloadType:N.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:P.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:N.parameters,remoteParameters:P.parameters,rtcpFeedback:T(N,P)};R.codecs.push(j)}for(const P of R.codecs){const N=h.codecs.find(D=>O(D)&&D.parameters.apt===P.localPayloadType),j=x.codecs.find(D=>O(D)&&D.parameters.apt===P.remotePayloadType);N&&j&&(P.localRtxPayloadType=N.preferredPayloadType,P.remoteRtxPayloadType=j.preferredPayloadType)}for(const P of x.headerExtensions){const N=h.headerExtensions.find(D=>k(D,P));if(!N)continue;const j={kind:P.kind,uri:P.uri,sendId:N.preferredId,recvId:P.preferredId,encrypt:N.preferredEncrypt,direction:"sendrecv"};switch(P.direction){case"sendrecv":j.direction="sendrecv";break;case"recvonly":j.direction="sendonly";break;case"sendonly":j.direction="recvonly";break;case"inactive":j.direction="inactive"}R.headerExtensions.push(j)}return R},l.getRecvRtpCapabilities=function(h){const x={codecs:[],headerExtensions:[]};for(const R of h.codecs){const P={mimeType:R.mimeType,kind:R.kind,preferredPayloadType:R.remotePayloadType,clockRate:R.clockRate,channels:R.channels,parameters:R.localParameters,rtcpFeedback:R.rtcpFeedback};if(x.codecs.push(P),!R.remoteRtxPayloadType)continue;const N={mimeType:`${R.kind}/rtx`,kind:R.kind,preferredPayloadType:R.remoteRtxPayloadType,clockRate:R.clockRate,parameters:{apt:R.remotePayloadType},rtcpFeedback:[]};x.codecs.push(N)}for(const R of h.headerExtensions){if(R.direction!=="sendrecv"&&R.direction!=="recvonly")continue;const P={kind:R.kind,uri:R.uri,preferredId:R.recvId,preferredEncrypt:R.encrypt,direction:R.direction};x.headerExtensions.push(P)}return x},l.getSendingRtpParameters=function(h,x){const R={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const P of x.codecs){if(P.kind!==h)continue;const N={mimeType:P.mimeType,payloadType:P.localPayloadType,clockRate:P.clockRate,channels:P.channels,parameters:P.localParameters,rtcpFeedback:P.rtcpFeedback};if(R.codecs.push(N),P.localRtxPayloadType){const j={mimeType:`${P.kind}/rtx`,payloadType:P.localRtxPayloadType,clockRate:P.clockRate,parameters:{apt:P.localPayloadType},rtcpFeedback:[]};R.codecs.push(j)}}for(const P of x.headerExtensions){if(P.kind&&P.kind!==h||P.direction!=="sendrecv"&&P.direction!=="sendonly")continue;const N={uri:P.uri,id:P.sendId,encrypt:P.encrypt,parameters:{}};R.headerExtensions.push(N)}return R},l.getSendingRemoteRtpParameters=function(h,x){const R={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const P of x.codecs){if(P.kind!==h)continue;const N={mimeType:P.mimeType,payloadType:P.localPayloadType,clockRate:P.clockRate,channels:P.channels,parameters:P.remoteParameters,rtcpFeedback:P.rtcpFeedback};if(R.codecs.push(N),P.localRtxPayloadType){const j={mimeType:`${P.kind}/rtx`,payloadType:P.localRtxPayloadType,clockRate:P.clockRate,parameters:{apt:P.localPayloadType},rtcpFeedback:[]};R.codecs.push(j)}}for(const P of x.headerExtensions){if(P.kind&&P.kind!==h||P.direction!=="sendrecv"&&P.direction!=="sendonly")continue;const N={uri:P.uri,id:P.sendId,encrypt:P.encrypt,parameters:{}};R.headerExtensions.push(N)}if(R.headerExtensions.some(P=>P.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const P of R.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(N=>N.type!=="goog-remb");else if(R.headerExtensions.some(P=>P.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const P of R.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(N=>N.type!=="transport-cc");else for(const P of R.codecs)P.rtcpFeedback=(P.rtcpFeedback??[]).filter(N=>N.type!=="transport-cc"&&N.type!=="goog-remb");return R},l.reduceCodecs=function(h,x){const R=[];if(x){for(let P=0;P<h.length;++P)if(C(h[P],x,{strict:!0})){R.push(h[P]),O(h[P+1])&&R.push(h[P+1]);break}if(R.length===0)throw new TypeError("no matching codec found")}else R.push(h[0]),O(h[1])&&R.push(h[1]);return R},l.generateProbatorRtpParameters=function(h){f(h=y.clone(h));const x={mid:m,codecs:[],headerExtensions:[],encodings:[{ssrc:u}],rtcp:{cname:"probator"}};return x.codecs.push(h.codecs[0]),x.codecs[0].payloadType=b,x.headerExtensions=h.headerExtensions,x},l.canSend=function(h,x){return x.codecs.some(R=>R.kind===h)},l.canReceive=function(h,x){if(f(h),h.codecs.length===0)return!1;const R=h.codecs[0];return x.codecs.some(P=>P.remotePayloadType===R.payloadType)};const p=o(3200),y=o(1765),m="probator",u=1234,b=127;function f(h){if(typeof h!="object")throw new TypeError("params is not an object");if(h.mid&&typeof h.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(h.codecs))throw new TypeError("missing params.codecs");for(const x of h.codecs)w(x);if(h.headerExtensions&&!Array.isArray(h.headerExtensions))throw new TypeError("params.headerExtensions is not an array");h.headerExtensions||(h.headerExtensions=[]);for(const x of h.headerExtensions)S(x);if(h.encodings&&!Array.isArray(h.encodings))throw new TypeError("params.encodings is not an array");h.encodings||(h.encodings=[]);for(const x of h.encodings)E(x);if(h.rtcp&&typeof h.rtcp!="object")throw new TypeError("params.rtcp is not an object");h.rtcp||(h.rtcp={}),function(x){if(typeof x!="object")throw new TypeError("rtcp is not an object");if(x.cname&&typeof x.cname!="string")throw new TypeError("invalid rtcp.cname");x.reducedSize&&typeof x.reducedSize=="boolean"||(x.reducedSize=!0)}(h.rtcp)}function _(h){const x=new RegExp("^(audio|video)/(.+)","i");if(typeof h!="object")throw new TypeError("codec is not an object");if(!h.mimeType||typeof h.mimeType!="string")throw new TypeError("missing codec.mimeType");const R=x.exec(h.mimeType);if(!R)throw new TypeError("invalid codec.mimeType");if(h.kind=R[1].toLowerCase(),h.preferredPayloadType&&typeof h.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof h.clockRate!="number")throw new TypeError("missing codec.clockRate");h.kind==="audio"?typeof h.channels!="number"&&(h.channels=1):delete h.channels,h.parameters&&typeof h.parameters=="object"||(h.parameters={});for(const P of Object.keys(h.parameters)){let N=h.parameters[P];if(N===void 0&&(h.parameters[P]="",N=""),typeof N!="string"&&typeof N!="number")throw new TypeError(`invalid codec parameter [key:${P}s, value:${N}]`);if(P==="apt"&&typeof N!="number")throw new TypeError("invalid codec apt parameter")}h.rtcpFeedback&&Array.isArray(h.rtcpFeedback)||(h.rtcpFeedback=[]);for(const P of h.rtcpFeedback)g(P)}function g(h){if(typeof h!="object")throw new TypeError("fb is not an object");if(!h.type||typeof h.type!="string")throw new TypeError("missing fb.type");h.parameter&&typeof h.parameter=="string"||(h.parameter="")}function v(h){if(typeof h!="object")throw new TypeError("ext is not an object");if(h.kind!=="audio"&&h.kind!=="video")throw new TypeError("invalid ext.kind");if(!h.uri||typeof h.uri!="string")throw new TypeError("missing ext.uri");if(typeof h.preferredId!="number")throw new TypeError("missing ext.preferredId");if(h.preferredEncrypt&&typeof h.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(h.preferredEncrypt||(h.preferredEncrypt=!1),h.direction&&typeof h.direction!="string")throw new TypeError("invalid ext.direction");h.direction||(h.direction="sendrecv")}function w(h){const x=new RegExp("^(audio|video)/(.+)","i");if(typeof h!="object")throw new TypeError("codec is not an object");if(!h.mimeType||typeof h.mimeType!="string")throw new TypeError("missing codec.mimeType");const R=x.exec(h.mimeType);if(!R)throw new TypeError("invalid codec.mimeType");if(typeof h.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof h.clockRate!="number")throw new TypeError("missing codec.clockRate");R[1].toLowerCase()==="audio"?typeof h.channels!="number"&&(h.channels=1):delete h.channels,h.parameters&&typeof h.parameters=="object"||(h.parameters={});for(const P of Object.keys(h.parameters)){let N=h.parameters[P];if(N===void 0&&(h.parameters[P]="",N=""),typeof N!="string"&&typeof N!="number")throw new TypeError(`invalid codec parameter [key:${P}s, value:${N}]`);if(P==="apt"&&typeof N!="number")throw new TypeError("invalid codec apt parameter")}h.rtcpFeedback&&Array.isArray(h.rtcpFeedback)||(h.rtcpFeedback=[]);for(const P of h.rtcpFeedback)g(P)}function S(h){if(typeof h!="object")throw new TypeError("ext is not an object");if(!h.uri||typeof h.uri!="string")throw new TypeError("missing ext.uri");if(typeof h.id!="number")throw new TypeError("missing ext.id");if(h.encrypt&&typeof h.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");h.encrypt||(h.encrypt=!1),h.parameters&&typeof h.parameters=="object"||(h.parameters={});for(const x of Object.keys(h.parameters)){let R=h.parameters[x];if(R===void 0&&(h.parameters[x]="",R=""),typeof R!="string"&&typeof R!="number")throw new TypeError("invalid header extension parameter")}}function E(h){if(typeof h!="object")throw new TypeError("encoding is not an object");if(h.ssrc&&typeof h.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(h.rid&&typeof h.rid!="string")throw new TypeError("invalid encoding.rid");if(h.rtx&&typeof h.rtx!="object")throw new TypeError("invalid encoding.rtx");if(h.rtx&&typeof h.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(h.dtx&&typeof h.dtx=="boolean"||(h.dtx=!1),h.scalabilityMode&&typeof h.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function O(h){return!!h&&/.+\/rtx$/i.test(h.mimeType)}function C(h,x,{strict:R=!1,modify:P=!1}={}){const N=h.mimeType.toLowerCase();if(N!==x.mimeType.toLowerCase()||h.clockRate!==x.clockRate||h.channels!==x.channels)return!1;switch(N){case"video/h264":if(R){if((h.parameters["packetization-mode"]??0)!==(x.parameters["packetization-mode"]??0)||!p.isSameProfile(h.parameters,x.parameters))return!1;let j;try{j=p.generateProfileLevelIdStringForAnswer(h.parameters,x.parameters)}catch{return!1}P&&(j?(h.parameters["profile-level-id"]=j,x.parameters["profile-level-id"]=j):(delete h.parameters["profile-level-id"],delete x.parameters["profile-level-id"]))}break;case"video/vp9":if(R&&(h.parameters["profile-id"]??0)!==(x.parameters["profile-id"]??0))return!1}return!0}function k(h,x){return(!h.kind||!x.kind||h.kind===x.kind)&&h.uri===x.uri}function T(h,x){const R=[];for(const P of h.rtcpFeedback??[]){const N=(x.rtcpFeedback??[]).find(j=>j.type===P.type&&(j.parameter===P.parameter||!j.parameter&&!P.parameter));N&&R.push(N)}return R}},8056:function(d,l,o){var p;d.exports=(p=o(9021),function(){var y=p,m=y.lib,u=m.WordArray,b=m.Hasher,f=y.algo,_=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),v=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),w=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),S=u.create([0,1518500249,1859775393,2400959708,2840853838]),E=u.create([1352829926,1548603684,1836072691,2053994217,0]),O=f.RIPEMD160=b.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,N){for(var j=0;j<16;j++){var D=N+j,L=P[D];P[D]=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8)}var M,I,G,de,ee,Q,ae,_e,Se,ie,$e,je=this._hash.words,se=S.words,ue=E.words,Ce=_.words,He=g.words,$t=v.words,nr=w.words;for(Q=M=je[0],ae=I=je[1],_e=G=je[2],Se=de=je[3],ie=ee=je[4],j=0;j<80;j+=1)$e=M+P[N+Ce[j]]|0,$e+=j<16?C(I,G,de)+se[0]:j<32?k(I,G,de)+se[1]:j<48?T(I,G,de)+se[2]:j<64?h(I,G,de)+se[3]:x(I,G,de)+se[4],$e=($e=R($e|=0,$t[j]))+ee|0,M=ee,ee=de,de=R(G,10),G=I,I=$e,$e=Q+P[N+He[j]]|0,$e+=j<16?x(ae,_e,Se)+ue[0]:j<32?h(ae,_e,Se)+ue[1]:j<48?T(ae,_e,Se)+ue[2]:j<64?k(ae,_e,Se)+ue[3]:C(ae,_e,Se)+ue[4],$e=($e=R($e|=0,nr[j]))+ie|0,Q=ie,ie=Se,Se=R(_e,10),_e=ae,ae=$e;$e=je[1]+G+Se|0,je[1]=je[2]+de+ie|0,je[2]=je[3]+ee+Q|0,je[3]=je[4]+M+ae|0,je[4]=je[0]+I+_e|0,je[0]=$e},_doFinalize:function(){var P=this._data,N=P.words,j=8*this._nDataBytes,D=8*P.sigBytes;N[D>>>5]|=128<<24-D%32,N[14+(D+64>>>9<<4)]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),P.sigBytes=4*(N.length+1),this._process();for(var L=this._hash,M=L.words,I=0;I<5;I++){var G=M[I];M[I]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8)}return L},clone:function(){var P=b.clone.call(this);return P._hash=this._hash.clone(),P}});function C(P,N,j){return P^N^j}function k(P,N,j){return P&N|~P&j}function T(P,N,j){return(P|~N)^j}function h(P,N,j){return P&j|N&~j}function x(P,N,j){return P^(N|~j)}function R(P,N){return P<<N|P>>>32-N}y.RIPEMD160=b._createHelper(O),y.HmacRIPEMD160=b._createHmacHelper(O)}(),p.RIPEMD160)},8057:function(d,l,o){var p=this&&this.__createBinding||(Object.create?function(m,u,b,f){f===void 0&&(f=b);var _=Object.getOwnPropertyDescriptor(u,b);_&&!("get"in _?!u.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return u[b]}}),Object.defineProperty(m,f,_)}:function(m,u,b,f){f===void 0&&(f=b),m[f]=u[b]}),y=this&&this.__exportStar||function(m,u){for(var b in m)b==="default"||Object.prototype.hasOwnProperty.call(u,b)||p(u,m,b)};Object.defineProperty(l,"__esModule",{value:!0}),y(o(6004),l),y(o(5601),l),y(o(9792),l),y(o(3518),l),y(o(7504),l),y(o(9166),l),y(o(5370),l),y(o(4160),l),y(o(521),l),y(o(4893),l)},8124:function(d,l,o){var p;d.exports=(p=o(9021),o(7165),p.pad.NoPadding={pad:function(){},unpad:function(){}},p.pad.NoPadding)},8155:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Chrome67=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(4496),_=o(521),g=o(1305),v=new y.Logger("Chrome67"),w={OS:1024,MIS:1024};class S extends _.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdRtpSender",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new S}get name(){return"Chrome67"}close(){if(v.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const k=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const T=p.parse(k.sdp);return b.extractRtpCapabilities({sdpObject:T})}catch(k){try{C.close()}catch{}throw k}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:w}}run({direction:C,iceParameters:k,iceCandidates:T,dtlsParameters:h,sctpParameters:x,iceServers:R,iceTransportPolicy:P,additionalSettings:N,proprietaryConstraints:j,extendedRtpCapabilities:D}){v.debug("run()"),this._direction=C,this._remoteSdp=new g.RemoteSdp({iceParameters:k,iceCandidates:T,dtlsParameters:h,sctpParameters:x,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",D),video:u.getSendingRtpParameters("video",D)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",D),video:u.getSendingRemoteRtpParameters("video",D)},h.role&&h.role!=="auto"&&(this._forcedLocalDtlsRole=h.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:R??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",L=>{this.emit("@icecandidateerror",L)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){v.debug("updateIceServers()");const k=this._pc.getConfiguration();k.iceServers=C,this._pc.setConfiguration(k)}async restartIce(C){if(v.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const k=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const T={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const k={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const T=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:k,codecOptions:T,codec:h}){this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),h&&v.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addTrack(C,this._sendStream);let x,R=await this._pc.createOffer(),P=p.parse(R.sdp);P.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const N=m.clone(this._sendingRtpParametersByKind[C.kind]);N.codecs=u.reduceCodecs(N.codecs);const j=m.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(j.codecs=u.reduceCodecs(j.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),C.kind==="video"&&k&&k.length>1&&(v.debug("send() | enabling simulcast"),P=p.parse(R.sdp),x=P.media.find(I=>I.type==="video"),f.addLegacySimulcast({offerMediaObject:x,track:C,numStreams:k.length}),R={type:"offer",sdp:p.write(P)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R),P=p.parse(this._pc.localDescription.sdp),x=P.media.find(I=>I.type===C.kind),N.rtcp.cname=b.getCname({offerMediaObject:x}),N.encodings=f.getRtpEncodings({offerMediaObject:x,track:C}),k)for(let I=0;I<N.encodings.length;++I)k[I]&&Object.assign(N.encodings[I],k[I]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const I of N.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:x,offerRtpParameters:N,answerRtpParameters:j,codecOptions:T});const D={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D);const L=String(this._nextSendLocalId);this._nextSendLocalId++;const M=this._pc.getSenders().find(I=>I.track===C);return this._mapSendLocalIdRtpSender.set(L,M),{localId:L,rtpParameters:N,rtpSender:M}}async stopSending(C){this.assertSendDirection(),v.debug("stopSending() [localId:%s]",C);const k=this._mapSendLocalIdRtpSender.get(C);if(!k)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(k),k.track&&this._sendStream.removeTrack(k.track),this._mapSendLocalIdRtpSender.delete(C);const T=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T);try{await this._pc.setLocalDescription(T)}catch(x){if(this._sendStream.getTracks().length===0)return void v.warn("stopSending() | ignoring expected error due no sending tracks: %s",x.toString());throw x}if(this._pc.signalingState==="stable")return;const h={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,k){this.assertSendDirection(),k?v.debug("replaceTrack() [localId:%s, track.id:%s]",C,k.id):v.debug("replaceTrack() [localId:%s, no track]",C);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.track;await T.replaceTrack(k),h&&this._sendStream.removeTrack(h),k&&this._sendStream.addTrack(k)}async setMaxSpatialLayer(C,k){this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,k);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((x,R)=>{x.active=R<=k}),await T.setParameters(h)}async setRtpEncodingParameters(C,k){this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,k);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((x,R)=>{h.encodings[R]={...x,...k}}),await T.setParameters(h)}async getSenderStats(C){this.assertSendDirection();const k=this._mapSendLocalIdRtpSender.get(C);if(!k)throw new Error("associated RTCRtpSender not found");return k.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:k,maxRetransmits:T,label:h,protocol:x}){this.assertSendDirection();const R={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:k,maxRetransmitTime:k,maxRetransmits:T,protocol:x};v.debug("sendDataChannel() [options:%o]",R);const P=this._pc.createDataChannel(h,R);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%w.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),j=p.parse(N.sdp),D=j.media.find(M=>M.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:D});const L={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:P,sctpStreamParameters:{streamId:R.id,ordered:R.ordered,maxPacketLifeTime:R.maxPacketLifeTime,maxRetransmits:R.maxRetransmits}}}async receive(C){this.assertRecvDirection();const k=[];for(const R of C){const{trackId:P,kind:N,rtpParameters:j,streamId:D}=R;v.debug("receive() [trackId:%s, kind:%s]",P,N);const L=N;this._remoteSdp.receive({mid:L,kind:N,offerRtpParameters:j,streamId:D??j.rtcp.cname,trackId:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);let h=await this._pc.createAnswer();const x=p.parse(h.sdp);for(const R of C){const{kind:P,rtpParameters:N}=R,j=P,D=x.media.find(L=>String(L.mid)===j);b.applyCodecParameters({offerRtpParameters:N,answerMediaObject:D})}h={type:"answer",sdp:p.write(x)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h);for(const R of C){const{kind:P,trackId:N,rtpParameters:j}=R,D=N,L=P,M=this._pc.getReceivers().find(I=>I.track&&I.track.id===D);if(!M)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(D,{mid:L,rtpParameters:j,rtpReceiver:M}),k.push({localId:D,track:M.track,rtpReceiver:M})}return k}async stopReceiving(C){this.assertRecvDirection();for(const h of C){v.debug("stopReceiving() [localId:%s]",h);const{mid:x,rtpParameters:R}=this._mapRecvLocalIdInfo.get(h)??{};this._mapRecvLocalIdInfo.delete(h),this._remoteSdp.planBStopReceiving({mid:x,offerRtpParameters:R})}const k={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const T=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async pauseReceiving(C){}async resumeReceiving(C){}async getReceiverStats(C){this.assertRecvDirection();const{rtpReceiver:k}=this._mapRecvLocalIdInfo.get(C)??{};if(!k)throw new Error("associated RTCRtpReceiver not found");return k.getStats()}async receiveDataChannel({sctpStreamParameters:C,label:k,protocol:T}){this.assertRecvDirection();const{streamId:h,ordered:x,maxPacketLifeTime:R,maxRetransmits:P}=C,N={negotiated:!0,id:h,ordered:x,maxPacketLifeTime:R,maxRetransmitTime:R,maxRetransmits:P,protocol:T};v.debug("receiveDataChannel() [options:%o]",N);const j=this._pc.createDataChannel(k,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const D={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const L=await this._pc.createAnswer();if(!this._transportReady){const M=p.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:C,localSdpObject:k}){k||(k=p.parse(this._pc.localDescription.sdp));const T=b.extractDtlsParameters({sdpObject:k});T.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((h,x)=>{this.safeEmit("@connect",{dtlsParameters:T},h,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Chrome67=S},8274:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Logger=void 0;const p=o(7833),y="awaitqueue";l.Logger=class{constructor(m){we(this,"_debug");we(this,"_warn");we(this,"_error");m?(this._debug=p(`${y}:${m}`),this._warn=p(`${y}:WARN:${m}`),this._error=p(`${y}:ERROR:${m}`)):(this._debug=p(y),this._warn=p(`${y}:WARN`),this._error=p(`${y}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8278:(d,l,o)=>{o.d(l,{Ag:()=>u,Wm:()=>b,sn:()=>f,tr:()=>g});var p=o(467),y=o(4756),m=o.n(y);o(1806);function u(){return window.RTCRtpSender!==void 0&&window.RTCRtpSender.prototype.createEncodedStreams!==void 0||b()}function b(){return window.RTCRtpScriptTransform!==void 0}function f(w){return _.apply(this,arguments)}function _(){return(_=(0,p.A)(m().mark(function w(S){var E,O;return m().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return E=new TextEncoder,C.next=3,crypto.subtle.importKey("raw",E.encode(S),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 3:return O=C.sent,C.abrupt("return",O);case 5:case"end":return C.stop()}},w)}))).apply(this,arguments)}function g(w){return v.apply(this,arguments)}function v(){return(v=(0,p.A)(m().mark(function w(S){var E;return m().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,crypto.subtle.importKey("raw",S,"HKDF",!1,["deriveBits","deriveKey"]);case 2:return E=O.sent,O.abrupt("return",E);case 4:case"end":return O.stop()}},w)}))).apply(this,arguments)}},8286:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(3779),y=o(2291),m=o(6011);l.default=function(u,b,f){var g;if(p.default.randomUUID&&!b&&!u)return p.default.randomUUID();const _=(u=u||{}).random??((g=u.rng)==null?void 0:g.call(u))??(0,y.default)();if(_.length<16)throw new Error("Random bytes length must be >= 16");if(_[6]=15&_[6]|64,_[8]=63&_[8]|128,b){if((f=f||0)<0||f+16>b.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);for(let v=0;v<16;++v)b[f+v]=_[v];return b}return(0,m.unsafeStringify)(_)}},8454:function(d,l,o){var p,y;d.exports=(y=o(9021),o(7165),y.mode.ECB=((p=y.lib.BlockCipherMode.extend()).Encryptor=p.extend({processBlock:function(m,u){this._cipher.encryptBlock(m,u)}}),p.Decryptor=p.extend({processBlock:function(m,u){this._cipher.decryptBlock(m,u)}}),p),y.mode.ECB)},8624:(d,l,o)=>{o.r(l),o.d(l,{DOMException:()=>R,Headers:()=>g,Request:()=>k,Response:()=>h,fetch:()=>P});var p=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||o.g!==void 0&&o.g||{},y={searchParams:"URLSearchParams"in p,iterable:"Symbol"in p&&"iterator"in Symbol,blob:"FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in p,arrayBuffer:"ArrayBuffer"in p};if(y.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(N){return N&&m.indexOf(Object.prototype.toString.call(N))>-1};function b(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function f(N){return typeof N!="string"&&(N=String(N)),N}function _(N){var j={next:function(){var D=N.shift();return{done:D===void 0,value:D}}};return y.iterable&&(j[Symbol.iterator]=function(){return j}),j}function g(N){this.map={},N instanceof g?N.forEach(function(j,D){this.append(D,j)},this):Array.isArray(N)?N.forEach(function(j){if(j.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+j.length);this.append(j[0],j[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(j){this.append(j,N[j])},this)}function v(N){if(!N._noBody)return N.bodyUsed?Promise.reject(new TypeError("Already read")):void(N.bodyUsed=!0)}function w(N){return new Promise(function(j,D){N.onload=function(){j(N.result)},N.onerror=function(){D(N.error)}})}function S(N){var j=new FileReader,D=w(j);return j.readAsArrayBuffer(N),D}function E(N){if(N.slice)return N.slice(0);var j=new Uint8Array(N.byteLength);return j.set(new Uint8Array(N)),j.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(N){var j;this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:y.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:y.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:y.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():y.arrayBuffer&&y.blob&&(j=N)&&DataView.prototype.isPrototypeOf(j)?(this._bodyArrayBuffer=E(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||u(N))?this._bodyArrayBuffer=E(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var N=v(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=v(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(y.blob)return this.blob().then(S);throw new Error("could not read as ArrayBuffer")},this.text=function(){var N,j,D,L,M,I=v(this);if(I)return I;if(this._bodyBlob)return N=this._bodyBlob,j=new FileReader,D=w(j),L=/charset=([A-Za-z0-9_-]+)/.exec(N.type),M=L?L[1]:"utf-8",j.readAsText(N,M),D;if(this._bodyArrayBuffer)return Promise.resolve(function(G){for(var de=new Uint8Array(G),ee=new Array(de.length),Q=0;Q<de.length;Q++)ee[Q]=String.fromCharCode(de[Q]);return ee.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}g.prototype.append=function(N,j){N=b(N),j=f(j);var D=this.map[N];this.map[N]=D?D+", "+j:j},g.prototype.delete=function(N){delete this.map[b(N)]},g.prototype.get=function(N){return N=b(N),this.has(N)?this.map[N]:null},g.prototype.has=function(N){return this.map.hasOwnProperty(b(N))},g.prototype.set=function(N,j){this.map[b(N)]=f(j)},g.prototype.forEach=function(N,j){for(var D in this.map)this.map.hasOwnProperty(D)&&N.call(j,this.map[D],D,this)},g.prototype.keys=function(){var N=[];return this.forEach(function(j,D){N.push(D)}),_(N)},g.prototype.values=function(){var N=[];return this.forEach(function(j){N.push(j)}),_(N)},g.prototype.entries=function(){var N=[];return this.forEach(function(j,D){N.push([D,j])}),_(N)},y.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);var C=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function k(N,j){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var D,L,M=(j=j||{}).body;if(N instanceof k){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,j.headers||(this.headers=new g(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,M||N._bodyInit==null||(M=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=j.credentials||this.credentials||"same-origin",!j.headers&&this.headers||(this.headers=new g(j.headers)),this.method=(D=j.method||this.method||"GET",L=D.toUpperCase(),C.indexOf(L)>-1?L:D),this.mode=j.mode||this.mode||null,this.signal=j.signal||this.signal||function(){if("AbortController"in p)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),!(this.method!=="GET"&&this.method!=="HEAD"||j.cache!=="no-store"&&j.cache!=="no-cache")){var I=/([?&])_=[^&]*/;I.test(this.url)?this.url=this.url.replace(I,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function T(N){var j=new FormData;return N.trim().split("&").forEach(function(D){if(D){var L=D.split("="),M=L.shift().replace(/\+/g," "),I=L.join("=").replace(/\+/g," ");j.append(decodeURIComponent(M),decodeURIComponent(I))}}),j}function h(N,j){if(!(this instanceof h))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(j||(j={}),this.type="default",this.status=j.status===void 0?200:j.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=j.statusText===void 0?"":""+j.statusText,this.headers=new g(j.headers),this.url=j.url||"",this._initBody(N)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},O.call(k.prototype),O.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},h.error=function(){var N=new h(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var x=[301,302,303,307,308];h.redirect=function(N,j){if(x.indexOf(j)===-1)throw new RangeError("Invalid status code");return new h(null,{status:j,headers:{location:N}})};var R=p.DOMException;try{new R}catch{(R=function(j,D){this.message=j,this.name=D;var L=Error(j);this.stack=L.stack}).prototype=Object.create(Error.prototype),R.prototype.constructor=R}function P(N,j){return new Promise(function(D,L){var M=new k(N,j);if(M.signal&&M.signal.aborted)return L(new R("Aborted","AbortError"));var I=new XMLHttpRequest;function G(){I.abort()}if(I.onload=function(){var ee,Q,ae={statusText:I.statusText,headers:(ee=I.getAllResponseHeaders()||"",Q=new g,ee.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(Se){return Se.indexOf(`
`)===0?Se.substr(1,Se.length):Se}).forEach(function(Se){var ie=Se.split(":"),$e=ie.shift().trim();if($e){var je=ie.join(":").trim();try{Q.append($e,je)}catch(se){console.warn("Response "+se.message)}}}),Q)};M.url.indexOf("file://")===0&&(I.status<200||I.status>599)?ae.status=200:ae.status=I.status,ae.url="responseURL"in I?I.responseURL:ae.headers.get("X-Request-URL");var _e="response"in I?I.response:I.responseText;setTimeout(function(){D(new h(_e,ae))},0)},I.onerror=function(){setTimeout(function(){L(new TypeError("Network request failed"))},0)},I.ontimeout=function(){setTimeout(function(){L(new TypeError("Network request timed out"))},0)},I.onabort=function(){setTimeout(function(){L(new R("Aborted","AbortError"))},0)},I.open(M.method,function(ee){try{return ee===""&&p.location.href?p.location.href:ee}catch{return ee}}(M.url),!0),M.credentials==="include"?I.withCredentials=!0:M.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&(y.blob?I.responseType="blob":y.arrayBuffer&&(I.responseType="arraybuffer")),j&&typeof j.headers=="object"&&!(j.headers instanceof g||p.Headers&&j.headers instanceof p.Headers)){var de=[];Object.getOwnPropertyNames(j.headers).forEach(function(ee){de.push(b(ee)),I.setRequestHeader(ee,f(j.headers[ee]))}),M.headers.forEach(function(ee,Q){de.indexOf(Q)===-1&&I.setRequestHeader(Q,ee)})}else M.headers.forEach(function(ee,Q){I.setRequestHeader(Q,ee)});M.signal&&(M.signal.addEventListener("abort",G),I.onreadystatechange=function(){I.readyState===4&&M.signal.removeEventListener("abort",G)}),I.send(M._bodyInit===void 0?null:M._bodyInit)})}P.polyfill=!0,p.fetch||(p.fetch=P,p.Headers=g,p.Request=k,p.Response=h)},8633:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Edge11=void 0;const p=o(2994),y=o(4893),m=o(1765),u=o(8046),b=o(8751),f=o(521),_=new p.Logger("Edge11");class g extends f.HandlerInterface{constructor(){super();we(this,"_sendingRtpParametersByKind");we(this,"_remoteIceParameters");we(this,"_remoteIceCandidates");we(this,"_remoteDtlsParameters");we(this,"_iceGatherer");we(this,"_iceTransport");we(this,"_dtlsTransport");we(this,"_rtpSenders",new Map);we(this,"_rtpReceivers",new Map);we(this,"_nextSendLocalId",0);we(this,"_cname");we(this,"_transportReady",!1)}static createFactory(){return()=>new g}get name(){return"Edge11"}close(){_.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const S of this._rtpSenders.values())try{S.stop()}catch{}for(const S of this._rtpReceivers.values())try{S.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return _.debug("getNativeRtpCapabilities()"),b.getCapabilities()}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:S,iceParameters:E,iceCandidates:O,dtlsParameters:C,sctpParameters:k,iceServers:T,iceTransportPolicy:h,additionalSettings:x,proprietaryConstraints:R,extendedRtpCapabilities:P}){_.debug("run()"),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",P),video:u.getSendingRtpParameters("video",P)},this._remoteIceParameters=E,this._remoteIceCandidates=O,this._remoteDtlsParameters=C,this._cname=`CNAME-${m.generateRandomNumber()}`,this.setIceGatherer({iceServers:T,iceTransportPolicy:h}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(S){throw new y.UnsupportedError("not supported")}async restartIce(S){if(_.debug("restartIce()"),this._remoteIceParameters=S,this._transportReady){_.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,S,"controlling");for(const E of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(E);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:S,encodings:E,codecOptions:O,codec:C}){_.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),_.debug("send() | calling new RTCRtpSender()");const k=new RTCRtpSender(S,this._dtlsTransport),T=m.clone(this._sendingRtpParametersByKind[S.kind]);T.codecs=u.reduceCodecs(T.codecs,C);const h=T.codecs.some(P=>/.+\/rtx$/i.test(P.mimeType));E||(E=[{}]);for(const P of E)P.ssrc=m.generateRandomNumber(),h&&(P.rtx={ssrc:m.generateRandomNumber()});T.encodings=E,T.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const x=b.mangleRtpParameters(T);_.debug("send() | calling rtpSender.send() [params:%o]",x),await k.send(x);const R=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(R,k),{localId:R,rtpParameters:T,rtpSender:k}}async stopSending(S){_.debug("stopSending() [localId:%s]",S);const E=this._rtpSenders.get(S);if(!E)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(S);try{_.debug("stopSending() | calling rtpSender.stop()"),E.stop()}catch(O){throw _.warn("stopSending() | rtpSender.stop() failed:%o",O),O}}async pauseSending(S){}async resumeSending(S){}async replaceTrack(S,E){E?_.debug("replaceTrack() [localId:%s, track.id:%s]",S,E.id):_.debug("replaceTrack() [localId:%s, no track]",S);const O=this._rtpSenders.get(S);if(!O)throw new Error("RTCRtpSender not found");O.setTrack(E)}async setMaxSpatialLayer(S,E){_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",S,E);const O=this._rtpSenders.get(S);if(!O)throw new Error("RTCRtpSender not found");const C=O.getParameters();C.encodings.forEach((k,T)=>{k.active=T<=E}),await O.setParameters(C)}async setRtpEncodingParameters(S,E){_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",S,E);const O=this._rtpSenders.get(S);if(!O)throw new Error("RTCRtpSender not found");const C=O.getParameters();C.encodings.forEach((k,T)=>{C.encodings[T]={...k,...E}}),await O.setParameters(C)}async getSenderStats(S){const E=this._rtpSenders.get(S);if(!E)throw new Error("RTCRtpSender not found");return E.getStats()}async sendDataChannel(S){throw new y.UnsupportedError("not implemented")}async receive(S){const E=[];for(const O of S){const{trackId:C,kind:k}=O;_.debug("receive() [trackId:%s, kind:%s]",C,k)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const O of S){const{trackId:C,kind:k,rtpParameters:T}=O;_.debug("receive() | calling new RTCRtpReceiver()");const h=new RTCRtpReceiver(this._dtlsTransport,k);h.addEventListener("error",P=>{_.error('rtpReceiver "error" event [event:%o]',P)});const x=b.mangleRtpParameters(T);_.debug("receive() | calling rtpReceiver.receive() [params:%o]",x),await h.receive(x);const R=C;this._rtpReceivers.set(R,h),E.push({localId:R,track:h.track,rtpReceiver:h})}return E}async stopReceiving(S){for(const E of S){_.debug("stopReceiving() [localId:%s]",E);const O=this._rtpReceivers.get(E);if(!O)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(E);try{_.debug("stopReceiving() | calling rtpReceiver.stop()"),O.stop()}catch(C){_.warn("stopReceiving() | rtpReceiver.stop() failed:%o",C)}}}async pauseReceiving(S){}async resumeReceiving(S){}async getReceiverStats(S){const E=this._rtpReceivers.get(S);if(!E)throw new Error("RTCRtpReceiver not found");return E.getStats()}async receiveDataChannel(S){throw new y.UnsupportedError("not implemented")}setIceGatherer({iceServers:S,iceTransportPolicy:E}){const O=new RTCIceGatherer({iceServers:S??[],gatherPolicy:E??"all"});O.addEventListener("error",C=>{_.error('iceGatherer "error" event [event:%o]',C)});try{O.gather()}catch(C){_.debug("setIceGatherer() | iceGatherer.gather() failed: %s",C.toString())}this._iceGatherer=O}setIceTransport(){const S=new RTCIceTransport(this._iceGatherer);S.addEventListener("statechange",()=>{switch(S.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),S.addEventListener("icestatechange",()=>{switch(S.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),S.addEventListener("candidatepairchange",E=>{_.debug('iceTransport "candidatepairchange" event [pair:%o]',E.pair)}),this._iceTransport=S}setDtlsTransport(){const S=new RTCDtlsTransport(this._iceTransport);S.addEventListener("statechange",()=>{_.debug('dtlsTransport "statechange" event [state:%s]',S.state)}),S.addEventListener("dtlsstatechange",()=>{_.debug('dtlsTransport "dtlsstatechange" event [state:%s]',S.state),S.state==="closed"&&this.emit("@connectionstatechange","closed")}),S.addEventListener("error",E=>{_.error('dtlsTransport "error" event [event:%o]',E)}),this._dtlsTransport=S}async setupTransport({localDtlsRole:S}){_.debug("setupTransport()");const E=this._dtlsTransport.getLocalParameters();E.role=S,await new Promise((O,C)=>{this.safeEmit("@connect",{dtlsParameters:E},O,C)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const O of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(O);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(O=>O.algorithm==="sha-256"||O.algorithm==="sha-384"||O.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}l.Edge11=g},8751:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getCapabilities=function(){const y=RTCRtpReceiver.getCapabilities(),m=p.clone(y);for(const u of m.codecs??[]){if(u.channels=u.numChannels,delete u.numChannels,u.mimeType=u.mimeType??`${u.kind}/${u.name}`,u.parameters){const b=u.parameters;b.apt&&(b.apt=Number(b.apt)),b["packetization-mode"]&&(b["packetization-mode"]=Number(b["packetization-mode"]))}for(const b of u.rtcpFeedback??[])b.parameter||(b.parameter="")}return m},l.mangleRtpParameters=function(y){const m=p.clone(y);m.mid&&(m.muxId=m.mid,delete m.mid);for(const u of m.codecs)u.channels&&(u.numChannels=u.channels,delete u.channels),u.mimeType&&!u.name&&(u.name=u.mimeType.split("/")[1]),delete u.mimeType;return m};const p=o(1765)},8876:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AwaitQueueRemovedTaskError=l.AwaitQueueStoppedError=l.AwaitQueue=void 0;var p=o(9275);Object.defineProperty(l,"AwaitQueue",{enumerable:!0,get:function(){return p.AwaitQueue}});var y=o(4253);Object.defineProperty(l,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return y.AwaitQueueStoppedError}}),Object.defineProperty(l,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return y.AwaitQueueRemovedTaskError}})},9021:function(d,l,o){var p;d.exports=(p=p||function(y,m){var u;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(u=globalThis.crypto),!u&&typeof window<"u"&&window.msCrypto&&(u=window.msCrypto),!u&&o.g!==void 0&&o.g.crypto&&(u=o.g.crypto),!u)try{u=o(477)}catch{}var b=function(){if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function h(){}return function(x){var R;return h.prototype=x,R=new h,h.prototype=null,R}}(),_={},g=_.lib={},v=g.Base={extend:function(h){var x=f(this);return h&&x.mixIn(h),x.hasOwnProperty("init")&&this.init!==x.init||(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var x in h)h.hasOwnProperty(x)&&(this[x]=h[x]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}},w=g.WordArray=v.extend({init:function(h,x){h=this.words=h||[],this.sigBytes=x!=m?x:4*h.length},toString:function(h){return(h||E).stringify(this)},concat:function(h){var x=this.words,R=h.words,P=this.sigBytes,N=h.sigBytes;if(this.clamp(),P%4)for(var j=0;j<N;j++){var D=R[j>>>2]>>>24-j%4*8&255;x[P+j>>>2]|=D<<24-(P+j)%4*8}else for(var L=0;L<N;L+=4)x[P+L>>>2]=R[L>>>2];return this.sigBytes+=N,this},clamp:function(){var h=this.words,x=this.sigBytes;h[x>>>2]&=4294967295<<32-x%4*8,h.length=y.ceil(x/4)},clone:function(){var h=v.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var x=[],R=0;R<h;R+=4)x.push(b());return new w.init(x,h)}}),S=_.enc={},E=S.Hex={stringify:function(h){for(var x=h.words,R=h.sigBytes,P=[],N=0;N<R;N++){var j=x[N>>>2]>>>24-N%4*8&255;P.push((j>>>4).toString(16)),P.push((15&j).toString(16))}return P.join("")},parse:function(h){for(var x=h.length,R=[],P=0;P<x;P+=2)R[P>>>3]|=parseInt(h.substr(P,2),16)<<24-P%8*4;return new w.init(R,x/2)}},O=S.Latin1={stringify:function(h){for(var x=h.words,R=h.sigBytes,P=[],N=0;N<R;N++){var j=x[N>>>2]>>>24-N%4*8&255;P.push(String.fromCharCode(j))}return P.join("")},parse:function(h){for(var x=h.length,R=[],P=0;P<x;P++)R[P>>>2]|=(255&h.charCodeAt(P))<<24-P%4*8;return new w.init(R,x)}},C=S.Utf8={stringify:function(h){try{return decodeURIComponent(escape(O.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return O.parse(unescape(encodeURIComponent(h)))}},k=g.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=C.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var x,R=this._data,P=R.words,N=R.sigBytes,j=this.blockSize,D=N/(4*j),L=(D=h?y.ceil(D):y.max((0|D)-this._minBufferSize,0))*j,M=y.min(4*L,N);if(L){for(var I=0;I<L;I+=j)this._doProcessBlock(P,I);x=P.splice(0,L),R.sigBytes-=M}return new w.init(x,M)},clone:function(){var h=v.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),T=(g.Hasher=k.extend({cfg:v.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){return h&&this._append(h),this._doFinalize()},blockSize:16,_createHelper:function(h){return function(x,R){return new h.init(R).finalize(x)}},_createHmacHelper:function(h){return function(x,R){return new T.HMAC.init(h,R).finalize(x)}}}),_.algo={});return _}(Math),p)},9027:(d,l,o)=>{o.d(l,{$:()=>p});var p={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{resolution:{width:640,height:360},frameRate:30,bitrates:{high:4e5,medium:2e5,low:1e5}},h480p_15fps:{resolution:{width:854,height:480},frameRate:15,bitrates:{high:3e5,medium:15e4,low:75e3}},h480p_30fps:{resolution:{width:854,height:480},frameRate:30,bitrates:{high:5e5,medium:25e4,low:125e3}},h720p_5fps:{resolution:{width:1280,height:720},frameRate:5,bitrates:{high:4e5,medium:2e5,low:1e5}},h720p_15fps:{resolution:{width:1280,height:720},frameRate:15,bitrates:{high:1e6,medium:5e5,low:25e4}},h720p_30fps:{resolution:{width:1280,height:720},frameRate:30,bitrates:{high:15e5,medium:75e4,low:375e3}},h1080p_15fps:{resolution:{width:1920,height:1080},frameRate:15,bitrates:{high:15e5,medium:75e4,low:3e5}},h1080p_30fps:{resolution:{width:1920,height:1080},frameRate:30,bitrates:{high:2e6,medium:1e6,low:5e5}}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},9166:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DataConsumer=void 0;const p=o(2994),y=o(3953),m=new p.Logger("DataConsumer");class u extends y.EnhancedEventEmitter{constructor({id:_,dataProducerId:g,dataChannel:v,sctpStreamParameters:w,appData:S}){super();we(this,"_id");we(this,"_dataProducerId");we(this,"_dataChannel");we(this,"_closed",!1);we(this,"_sctpStreamParameters");we(this,"_appData");we(this,"_observer",new y.EnhancedEventEmitter);m.debug("constructor()"),this._id=_,this._dataProducerId=g,this._dataChannel=v,this._sctpStreamParameters=w,this._appData=S??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(_){this._dataChannel.binaryType=_}get appData(){return this._appData}set appData(_){this._appData=_}get observer(){return this._observer}close(){this._closed||(m.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(m.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(m.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",_=>{if(this._closed)return;let{error:g}=_;g||(g=new Error("unknown DataChannel error")),g.errorDetail==="sctp-failure"?m.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",g.sctpCauseCode,g.message):m.error('DataChannel "error" event: %o',g),this.safeEmit("error",g)}),this._dataChannel.addEventListener("close",()=>{this._closed||(m.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",_=>{this._closed||this.safeEmit("message",_.data)})}}l.DataConsumer=u},9275:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AwaitQueue=void 0;const p=o(8274),y=o(4253),m=new p.Logger("AwaitQueue");l.AwaitQueue=class{constructor(){we(this,"pendingTasks",new Map);we(this,"nextTaskId",0);we(this,"stopping",!1);m.debug("constructor()")}get size(){return this.pendingTasks.size}async push(u,b){if(b=b??u.name,m.debug(`push() [name:${b}]`),typeof u!="function")throw new TypeError("given task is not a function");if(b)try{Object.defineProperty(u,"name",{value:b})}catch{}return new Promise((f,_)=>{const g={id:this.nextTaskId++,task:u,name:b,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:v=>{if(g.completed)return;g.completed=!0,this.pendingTasks.delete(g.id),m.debug(`resolving task [name:${g.name}]`),f(v);const[w]=this.pendingTasks.values();w&&!w.executedAt&&this.execute(w)},reject:v=>{if(!g.completed&&(g.completed=!0,this.pendingTasks.delete(g.id),m.debug(`rejecting task [name:${g.name}]: %s`,String(v)),_(v),!this.stopping)){const[w]=this.pendingTasks.values();w&&!w.executedAt&&this.execute(w)}}};this.pendingTasks.set(g.id,g),this.pendingTasks.size===1&&this.execute(g)})}stop(){m.debug("stop()"),this.stopping=!0;for(const u of this.pendingTasks.values())m.debug(`stop() | stopping task [name:${u.name}]`),u.reject(new y.AwaitQueueStoppedError);this.stopping=!1}remove(u){m.debug(`remove() [taskIdx:${u}]`);const b=Array.from(this.pendingTasks.values())[u];b?b.reject(new y.AwaitQueueRemovedTaskError):m.debug(`stop() | no task with given idx [taskIdx:${u}]`)}dump(){const u=Date.now();let b=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:b++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:u-f.enqueuedAt,executionTime:f.executedAt?u-f.executedAt:0}))}async execute(u){if(m.debug(`execute() [name:${u.name}]`),u.executedAt)throw new Error("task already being executed");u.executedAt=Date.now();try{const b=await u.task();u.resolve(b)}catch(b){u.reject(b)}}}},9352:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ReactNative=void 0;const p=o(7363),y=o(2994),m=o(4893),u=o(1765),b=o(8046),f=o(5544),_=o(4496),g=o(521),v=o(1305),w=new y.Logger("ReactNative"),S={OS:1024,MIS:1024};class E extends g.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdTrack",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new E}get name(){return"ReactNative"}close(){if(w.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){w.debug("getNativeRtpCapabilities()");const k=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const T=await k.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{k.close()}catch{}const h=p.parse(T.sdp);return f.extractRtpCapabilities({sdpObject:h})}catch(T){try{k.close()}catch{}throw T}}async getNativeSctpCapabilities(){return w.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:k,iceParameters:T,iceCandidates:h,dtlsParameters:x,sctpParameters:R,iceServers:P,iceTransportPolicy:N,additionalSettings:j,proprietaryConstraints:D,extendedRtpCapabilities:L}){w.debug("run()"),this._direction=k,this._remoteSdp=new v.RemoteSdp({iceParameters:T,iceCandidates:h,dtlsParameters:x,sctpParameters:R,planB:!0}),this._sendingRtpParametersByKind={audio:b.getSendingRtpParameters("audio",L),video:b.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:b.getSendingRemoteRtpParameters("audio",L),video:b.getSendingRemoteRtpParameters("video",L)},x.role&&x.role!=="auto"&&(this._forcedLocalDtlsRole=x.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:P??[],iceTransportPolicy:N??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...j},D),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(w.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(k){w.debug("updateIceServers()");const T=this._pc.getConfiguration();T.iceServers=k,this._pc.setConfiguration(T)}async restartIce(k){if(w.debug("restartIce()"),this._remoteSdp.updateIceParameters(k),this._transportReady)if(this._direction==="send"){const T=await this._pc.createOffer({iceRestart:!0});w.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",T),await this._pc.setLocalDescription(T);const h={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const T={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();w.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:k,encodings:T,codecOptions:h,codec:x}){this.assertSendDirection(),w.debug("send() [kind:%s, track.id:%s]",k.kind,k.id),x&&w.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(k),this._pc.addStream(this._sendStream);let R,P=await this._pc.createOffer(),N=p.parse(P.sdp);N.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const j=u.clone(this._sendingRtpParametersByKind[k.kind]);j.codecs=b.reduceCodecs(j.codecs);const D=u.clone(this._sendingRemoteRtpParametersByKind[k.kind]);if(D.codecs=b.reduceCodecs(D.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),k.kind==="video"&&T&&T.length>1&&(w.debug("send() | enabling simulcast"),N=p.parse(P.sdp),R=N.media.find(I=>I.type==="video"),_.addLegacySimulcast({offerMediaObject:R,track:k,numStreams:T.length}),P={type:"offer",sdp:p.write(N)}),w.debug("send() | calling pc.setLocalDescription() [offer:%o]",P),await this._pc.setLocalDescription(P),N=p.parse(this._pc.localDescription.sdp),R=N.media.find(I=>I.type===k.kind),j.rtcp.cname=f.getCname({offerMediaObject:R}),j.encodings=_.getRtpEncodings({offerMediaObject:R,track:k}),T)for(let I=0;I<j.encodings.length;++I)T[I]&&Object.assign(j.encodings[I],T[I]);if(j.encodings.length>1&&(j.codecs[0].mimeType.toLowerCase()==="video/vp8"||j.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const I of j.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:R,offerRtpParameters:j,answerRtpParameters:D,codecOptions:h});const L={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const M=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(M,k),{localId:M,rtpParameters:j}}async stopSending(k){this.assertSendDirection(),w.debug("stopSending() [localId:%s]",k);const T=this._mapSendLocalIdTrack.get(k);if(!T)throw new Error("track not found");this._mapSendLocalIdTrack.delete(k),this._sendStream.removeTrack(T),this._pc.addStream(this._sendStream);const h=await this._pc.createOffer();w.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(R){if(this._sendStream.getTracks().length===0)return void w.warn("stopSending() | ignoring expected error due no sending tracks: %s",R.toString());throw R}if(this._pc.signalingState==="stable")return;const x={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x)}async pauseSending(k){}async resumeSending(k){}async replaceTrack(k,T){throw new m.UnsupportedError("not implemented")}async setMaxSpatialLayer(k,T){throw new m.UnsupportedError("not implemented")}async setRtpEncodingParameters(k,T){throw new m.UnsupportedError("not implemented")}async getSenderStats(k){throw new m.UnsupportedError("not implemented")}async sendDataChannel({ordered:k,maxPacketLifeTime:T,maxRetransmits:h,label:x,protocol:R}){this.assertSendDirection();const P={negotiated:!0,id:this._nextSendSctpStreamId,ordered:k,maxPacketLifeTime:T,maxRetransmitTime:T,maxRetransmits:h,protocol:R};w.debug("sendDataChannel() [options:%o]",P);const N=this._pc.createDataChannel(x,P);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),D=p.parse(j.sdp),L=D.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),w.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const M={type:"answer",sdp:this._remoteSdp.getSdp()};w.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:P.id,ordered:P.ordered,maxPacketLifeTime:P.maxPacketLifeTime,maxRetransmits:P.maxRetransmits}}}async receive(k){this.assertRecvDirection();const T=[],h=new Map;for(const N of k){const{trackId:j,kind:D,rtpParameters:L}=N;w.debug("receive() [trackId:%s, kind:%s]",j,D);const M=D;let I=N.streamId??L.rtcp.cname;w.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),I+=`-hack-${u.generateRandomNumber()}`,h.set(j,I),this._remoteSdp.receive({mid:M,kind:D,offerRtpParameters:L,streamId:I,trackId:j})}const x={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);let R=await this._pc.createAnswer();const P=p.parse(R.sdp);for(const N of k){const{kind:j,rtpParameters:D}=N,L=j,M=P.media.find(I=>String(I.mid)===L);f.applyCodecParameters({offerRtpParameters:D,answerMediaObject:M})}R={type:"answer",sdp:p.write(P)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),w.debug("receive() | calling pc.setLocalDescription() [answer:%o]",R),await this._pc.setLocalDescription(R);for(const N of k){const{kind:j,trackId:D,rtpParameters:L}=N,M=D,I=j,G=h.get(D),de=this._pc.getRemoteStreams().find(ee=>ee.id===G).getTrackById(M);if(!de)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(M,{mid:I,rtpParameters:L}),T.push({localId:M,track:de})}return T}async stopReceiving(k){this.assertRecvDirection();for(const x of k){w.debug("stopReceiving() [localId:%s]",x);const{mid:R,rtpParameters:P}=this._mapRecvLocalIdInfo.get(x)??{};this._mapRecvLocalIdInfo.delete(x),this._remoteSdp.planBStopReceiving({mid:R,offerRtpParameters:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);const h=await this._pc.createAnswer();w.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(k){}async resumeReceiving(k){}async getReceiverStats(k){throw new m.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:k,label:T,protocol:h}){this.assertRecvDirection();const{streamId:x,ordered:R,maxPacketLifeTime:P,maxRetransmits:N}=k,j={negotiated:!0,id:x,ordered:R,maxPacketLifeTime:P,maxRetransmitTime:P,maxRetransmits:N,protocol:h};w.debug("receiveDataChannel() [options:%o]",j);const D=this._pc.createDataChannel(T,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};w.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const M=await this._pc.createAnswer();if(!this._transportReady){const I=p.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}w.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:D}}async setupTransport({localDtlsRole:k,localSdpObject:T}){T||(T=p.parse(this._pc.localDescription.sdp));const h=f.extractDtlsParameters({sdpObject:T});h.role=k,this._remoteSdp.updateDtlsRole(k==="client"?"server":"client"),await new Promise((x,R)=>{this.safeEmit("@connect",{dtlsParameters:h},x,R)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.ReactNative=E},9506:function(d,l,o){var p,y,m,u,b,f,_,g;d.exports=(g=o(9021),o(5471),o(1025),y=(p=g).lib,m=y.Base,u=y.WordArray,b=p.algo,f=b.MD5,_=b.EvpKDF=m.extend({cfg:m.extend({keySize:4,hasher:f,iterations:1}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,w){for(var S,E=this.cfg,O=E.hasher.create(),C=u.create(),k=C.words,T=E.keySize,h=E.iterations;k.length<T;){S&&O.update(S),S=O.update(v).finalize(w),O.reset();for(var x=1;x<h;x++)S=O.finalize(S),O.reset();C.concat(S)}return C.sigBytes=4*T,C}}),p.EvpKDF=function(v,w,S){return _.create(S).compute(v,w)},g.EvpKDF)},9557:function(d,l,o){var p,y,m,u,b,f,_,g;d.exports=(g=o(9021),o(3240),o(1380),y=(p=g).x64,m=y.Word,u=y.WordArray,b=p.algo,f=b.SHA512,_=b.SHA384=f.extend({_doReset:function(){this._hash=new u.init([new m.init(3418070365,3238371032),new m.init(1654270250,914150663),new m.init(2438529370,812702999),new m.init(355462360,4144912697),new m.init(1731405415,4290775857),new m.init(2394180231,1750603025),new m.init(3675008525,1694076839),new m.init(1203062813,3204075428)])},_doFinalize:function(){var v=f._doFinalize.call(this);return v.sigBytes-=16,v}}),p.SHA384=f._createHelper(_),p.HmacSHA384=f._createHmacHelper(_),g.SHA384)},9596:d=>{var l,o=typeof Reflect=="object"?Reflect:null,p=o&&typeof o.apply=="function"?o.apply:function(C,k,T){return Function.prototype.apply.call(C,k,T)};l=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:function(C){return Object.getOwnPropertyNames(C)};var y=Number.isNaN||function(C){return C!=C};function m(){m.init.call(this)}d.exports=m,d.exports.once=function(C,k){return new Promise(function(T,h){function x(P){C.removeListener(k,R),h(P)}function R(){typeof C.removeListener=="function"&&C.removeListener("error",x),T([].slice.call(arguments))}O(C,k,R,{once:!0}),k!=="error"&&function(P,N,j){typeof P.on=="function"&&O(P,"error",N,j)}(C,x,{once:!0})})},m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var u=10;function b(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}function f(C){return C._maxListeners===void 0?m.defaultMaxListeners:C._maxListeners}function _(C,k,T,h){var x,R,P,N;if(b(T),(R=C._events)===void 0?(R=C._events=Object.create(null),C._eventsCount=0):(R.newListener!==void 0&&(C.emit("newListener",k,T.listener?T.listener:T),R=C._events),P=R[k]),P===void 0)P=R[k]=T,++C._eventsCount;else if(typeof P=="function"?P=R[k]=h?[T,P]:[P,T]:h?P.unshift(T):P.push(T),(x=f(C))>0&&P.length>x&&!P.warned){P.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=C,j.type=k,j.count=P.length,N=j,console&&console.warn&&console.warn(N)}return C}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(C,k,T){var h={fired:!1,wrapFn:void 0,target:C,type:k,listener:T},x=g.bind(h);return x.listener=T,h.wrapFn=x,x}function w(C,k,T){var h=C._events;if(h===void 0)return[];var x=h[k];return x===void 0?[]:typeof x=="function"?T?[x.listener||x]:[x]:T?function(R){for(var P=new Array(R.length),N=0;N<P.length;++N)P[N]=R[N].listener||R[N];return P}(x):E(x,x.length)}function S(C){var k=this._events;if(k!==void 0){var T=k[C];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function E(C,k){for(var T=new Array(k),h=0;h<k;++h)T[h]=C[h];return T}function O(C,k,T,h){if(typeof C.on=="function")h.once?C.once(k,T):C.on(k,T);else{if(typeof C.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C);C.addEventListener(k,function x(R){h.once&&C.removeEventListener(k,x),T(R)})}}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");u=C}}),m.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||y(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},m.prototype.getMaxListeners=function(){return f(this)},m.prototype.emit=function(C){for(var k=[],T=1;T<arguments.length;T++)k.push(arguments[T]);var h=C==="error",x=this._events;if(x!==void 0)h=h&&x.error===void 0;else if(!h)return!1;if(h){var R;if(k.length>0&&(R=k[0]),R instanceof Error)throw R;var P=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw P.context=R,P}var N=x[C];if(N===void 0)return!1;if(typeof N=="function")p(N,this,k);else{var j=N.length,D=E(N,j);for(T=0;T<j;++T)p(D[T],this,k)}return!0},m.prototype.addListener=function(C,k){return _(this,C,k,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(C,k){return _(this,C,k,!0)},m.prototype.once=function(C,k){return b(k),this.on(C,v(this,C,k)),this},m.prototype.prependOnceListener=function(C,k){return b(k),this.prependListener(C,v(this,C,k)),this},m.prototype.removeListener=function(C,k){var T,h,x,R,P;if(b(k),(h=this._events)===void 0)return this;if((T=h[C])===void 0)return this;if(T===k||T.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete h[C],h.removeListener&&this.emit("removeListener",C,T.listener||k));else if(typeof T!="function"){for(x=-1,R=T.length-1;R>=0;R--)if(T[R]===k||T[R].listener===k){P=T[R].listener,x=R;break}if(x<0)return this;x===0?T.shift():function(N,j){for(;j+1<N.length;j++)N[j]=N[j+1];N.pop()}(T,x),T.length===1&&(h[C]=T[0]),h.removeListener!==void 0&&this.emit("removeListener",C,P||k)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(C){var k,T,h;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[C]),this;if(arguments.length===0){var x,R=Object.keys(T);for(h=0;h<R.length;++h)(x=R[h])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(k=T[C])=="function")this.removeListener(C,k);else if(k!==void 0)for(h=k.length-1;h>=0;h--)this.removeListener(C,k[h]);return this},m.prototype.listeners=function(C){return w(this,C,!0)},m.prototype.rawListeners=function(C){return w(this,C,!1)},m.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):S.call(C,k)},m.prototype.listenerCount=S,m.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]}},9633:(d,l,o)=>{o.d(l,{l:()=>k});var p=o(467),y=o(3029),m=o(2901),u=o(388),b=o(3954),f=o(5501),_=o(4756),g=o.n(_),v=o(7007),w=o(1806),S=o(6746),E=o(8278);function O(T,h,x){return h=(0,b.A)(h),(0,u.A)(T,C()?Reflect.construct(h,x||[],(0,b.A)(T).constructor):h.apply(T,x))}function C(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C=function(){return!!T})()}var k=function(T){function h(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,y.A)(this,h),O(this,h,[Object.assign(Object.assign({},R),{sharedKey:!0,ratchetWindowSize:0,failureTolerance:-1})])}return(0,f.A)(h,T),(0,m.A)(h,[{key:"setSharedKey",value:(x=(0,p.A)(g().mark(function R(P){var N;return g().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(typeof P!="string"){j.next=6;break}return j.next=3,(0,E.sn)(P);case 3:j.t0=j.sent,j.next=9;break;case 6:return j.next=8,(0,E.tr)(P);case 8:j.t0=j.sent;case 9:N=j.t0,this.onSetEncryptionKey(N);case 11:case"end":return j.stop()}},R,this)})),function(R){return x.apply(this,arguments)})}]);var x}(function(T){function h(){var x,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,y.A)(this,h),(x=O(this,h)).onKeyRatcheted=function(P,N){console.debug("key ratcheted event received",{material:P,keyIndex:N})},x.keyInfoMap=new Map,x.options=Object.assign(Object.assign({},w.T4),R),x.on(S.fo.KeyRatcheted,x.onKeyRatcheted),x}return(0,f.A)(h,T),(0,m.A)(h,[{key:"onSetEncryptionKey",value:function(x,R,P){var N={key:x,participantIdentity:R,keyIndex:P};if(!this.options.sharedKey&&!R)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(R??"shared","-").concat(P??0),N),this.emit(S.fo.SetKey,N)}},{key:"getKeys",value:function(){return Array.from(this.keyInfoMap.values())}},{key:"getOptions",value:function(){return this.options}},{key:"ratchetKey",value:function(x,R){this.emit(S.fo.RatchetRequest,x,R)}}])}(v.EventEmitter))},9676:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Safari11=void 0;const p=o(7363),y=o(2994),m=o(1765),u=o(8046),b=o(5544),f=o(4496),_=o(521),g=o(1305),v=new y.Logger("Safari11"),w={OS:1024,MIS:1024};class S extends _.HandlerInterface{constructor(){super();we(this,"_direction");we(this,"_remoteSdp");we(this,"_sendingRtpParametersByKind");we(this,"_sendingRemoteRtpParametersByKind");we(this,"_forcedLocalDtlsRole");we(this,"_pc");we(this,"_sendStream",new MediaStream);we(this,"_mapSendLocalIdRtpSender",new Map);we(this,"_nextSendLocalId",0);we(this,"_mapRecvLocalIdInfo",new Map);we(this,"_hasDataChannelMediaSection",!1);we(this,"_nextSendSctpStreamId",0);we(this,"_transportReady",!1)}static createFactory(){return()=>new S}get name(){return"Safari11"}close(){if(v.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const C=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const k=await C.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{C.close()}catch{}const T=p.parse(k.sdp);return b.extractRtpCapabilities({sdpObject:T})}catch(k){try{C.close()}catch{}throw k}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:w}}run({direction:C,iceParameters:k,iceCandidates:T,dtlsParameters:h,sctpParameters:x,iceServers:R,iceTransportPolicy:P,additionalSettings:N,proprietaryConstraints:j,extendedRtpCapabilities:D}){v.debug("run()"),this._direction=C,this._remoteSdp=new g.RemoteSdp({iceParameters:k,iceCandidates:T,dtlsParameters:h,sctpParameters:x,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",D),video:u.getSendingRtpParameters("video",D)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",D),video:u.getSendingRemoteRtpParameters("video",D)},h.role&&h.role!=="auto"&&(this._forcedLocalDtlsRole=h.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:R??[],iceTransportPolicy:P??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...N},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",L=>{this.emit("@icecandidateerror",L)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(C){v.debug("updateIceServers()");const k=this._pc.getConfiguration();k.iceServers=C,this._pc.setConfiguration(k)}async restartIce(C){if(v.debug("restartIce()"),this._remoteSdp.updateIceParameters(C),this._transportReady)if(this._direction==="send"){const k=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",k),await this._pc.setLocalDescription(k);const T={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",T),await this._pc.setRemoteDescription(T)}else{const k={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const T=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}}async getTransportStats(){return this._pc.getStats()}async send({track:C,encodings:k,codecOptions:T,codec:h}){this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),h&&v.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addTrack(C,this._sendStream);let x,R=await this._pc.createOffer(),P=p.parse(R.sdp);P.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();const N=m.clone(this._sendingRtpParametersByKind[C.kind]);N.codecs=u.reduceCodecs(N.codecs);const j=m.clone(this._sendingRemoteRtpParametersByKind[C.kind]);if(j.codecs=u.reduceCodecs(j.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:P}),C.kind==="video"&&k&&k.length>1&&(v.debug("send() | enabling simulcast"),P=p.parse(R.sdp),x=P.media.find(I=>I.type==="video"),f.addLegacySimulcast({offerMediaObject:x,track:C,numStreams:k.length}),R={type:"offer",sdp:p.write(P)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",R),await this._pc.setLocalDescription(R),P=p.parse(this._pc.localDescription.sdp),x=P.media.find(I=>I.type===C.kind),N.rtcp.cname=b.getCname({offerMediaObject:x}),N.encodings=f.getRtpEncodings({offerMediaObject:x,track:C}),k)for(let I=0;I<N.encodings.length;++I)k[I]&&Object.assign(N.encodings[I],k[I]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const I of N.encodings)I.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:x,offerRtpParameters:N,answerRtpParameters:j,codecOptions:T});const D={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D);const L=String(this._nextSendLocalId);this._nextSendLocalId++;const M=this._pc.getSenders().find(I=>I.track===C);return this._mapSendLocalIdRtpSender.set(L,M),{localId:L,rtpParameters:N,rtpSender:M}}async stopSending(C){this.assertSendDirection();const k=this._mapSendLocalIdRtpSender.get(C);if(!k)throw new Error("associated RTCRtpSender not found");k.track&&this._sendStream.removeTrack(k.track),this._mapSendLocalIdRtpSender.delete(C);const T=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",T);try{await this._pc.setLocalDescription(T)}catch(x){if(this._sendStream.getTracks().length===0)return void v.warn("stopSending() | ignoring expected error due no sending tracks: %s",x.toString());throw x}if(this._pc.signalingState==="stable")return;const h={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}async pauseSending(C){}async resumeSending(C){}async replaceTrack(C,k){this.assertSendDirection(),k?v.debug("replaceTrack() [localId:%s, track.id:%s]",C,k.id):v.debug("replaceTrack() [localId:%s, no track]",C);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.track;await T.replaceTrack(k),h&&this._sendStream.removeTrack(h),k&&this._sendStream.addTrack(k)}async setMaxSpatialLayer(C,k){this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",C,k);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((x,R)=>{x.active=R<=k}),await T.setParameters(h)}async setRtpEncodingParameters(C,k){this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",C,k);const T=this._mapSendLocalIdRtpSender.get(C);if(!T)throw new Error("associated RTCRtpSender not found");const h=T.getParameters();h.encodings.forEach((x,R)=>{h.encodings[R]={...x,...k}}),await T.setParameters(h)}async getSenderStats(C){this.assertSendDirection();const k=this._mapSendLocalIdRtpSender.get(C);if(!k)throw new Error("associated RTCRtpSender not found");return k.getStats()}async sendDataChannel({ordered:C,maxPacketLifeTime:k,maxRetransmits:T,label:h,protocol:x}){this.assertSendDirection();const R={negotiated:!0,id:this._nextSendSctpStreamId,ordered:C,maxPacketLifeTime:k,maxRetransmits:T,protocol:x};v.debug("sendDataChannel() [options:%o]",R);const P=this._pc.createDataChannel(h,R);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%w.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),j=p.parse(N.sdp),D=j.media.find(M=>M.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:j}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:D});const L={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:P,sctpStreamParameters:{streamId:R.id,ordered:R.ordered,maxPacketLifeTime:R.maxPacketLifeTime,maxRetransmits:R.maxRetransmits}}}async receive(C){this.assertRecvDirection();const k=[];for(const R of C){const{trackId:P,kind:N,rtpParameters:j,streamId:D}=R;v.debug("receive() [trackId:%s, kind:%s]",P,N);const L=N;this._remoteSdp.receive({mid:L,kind:N,offerRtpParameters:j,streamId:D??j.rtcp.cname,trackId:P})}const T={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",T),await this._pc.setRemoteDescription(T);let h=await this._pc.createAnswer();const x=p.parse(h.sdp);for(const R of C){const{kind:P,rtpParameters:N}=R,j=P,D=x.media.find(L=>String(L.mid)===j);b.applyCodecParameters({offerRtpParameters:N,answerMediaObject:D})}h={type:"answer",sdp:p.write(x)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h);for(const R of C){const{kind:P,trackId:N,rtpParameters:j}=R,D=P,L=N,M=this._pc.getReceivers().find(I=>I.track&&I.track.id===L);if(!M)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(L,{mid:D,rtpParameters:j,rtpReceiver:M}),k.push({localId:L,track:M.track,rtpReceiver:M})}return k}async stopReceiving(C){this.assertRecvDirection();for(const h of C){v.debug("stopReceiving() [localId:%s]",h);const{mid:x,rtpParameters:R}=this._mapRecvLocalIdInfo.get(h)??{};this._mapRecvLocalIdInfo.delete(h),this._remoteSdp.planBStopReceiving({mid:x,offerRtpParameters:R})}const k={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",k),await this._pc.setRemoteDescription(k);const T=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",T),await this._pc.setLocalDescription(T)}async getReceiverStats(C){this.assertRecvDirection();const{rtpReceiver:k}=this._mapRecvLocalIdInfo.get(C)??{};if(!k)throw new Error("associated RTCRtpReceiver not found");return k.getStats()}async pauseReceiving(C){}async resumeReceiving(C){}async receiveDataChannel({sctpStreamParameters:C,label:k,protocol:T}){this.assertRecvDirection();const{streamId:h,ordered:x,maxPacketLifeTime:R,maxRetransmits:P}=C,N={negotiated:!0,id:h,ordered:x,maxPacketLifeTime:R,maxRetransmits:P,protocol:T};v.debug("receiveDataChannel() [options:%o]",N);const j=this._pc.createDataChannel(k,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const D={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",D),await this._pc.setRemoteDescription(D);const L=await this._pc.createAnswer();if(!this._transportReady){const M=p.parse(L.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setLocalDescription(L),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:C,localSdpObject:k}){k||(k=p.parse(this._pc.localDescription.sdp));const T=b.extractDtlsParameters({sdpObject:k});T.role=C,this._remoteSdp.updateDtlsRole(C==="client"?"server":"client"),await new Promise((h,x)=>{this.safeEmit("@connect",{dtlsParameters:T},h,x)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}l.Safari11=S},9746:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0});const p=o(6697);l.default=function(y){return typeof y=="string"&&p.default.test(y)}},9792:(d,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Producer=void 0;const p=o(2994),y=o(3953),m=o(4893),u=new p.Logger("Producer");class b extends y.EnhancedEventEmitter{constructor({id:g,localId:v,rtpSender:w,track:S,rtpParameters:E,stopTracks:O,disableTrackOnPause:C,zeroRtpOnPause:k,appData:T}){super();we(this,"_id");we(this,"_localId");we(this,"_closed",!1);we(this,"_rtpSender");we(this,"_track");we(this,"_kind");we(this,"_rtpParameters");we(this,"_paused");we(this,"_maxSpatialLayer");we(this,"_stopTracks");we(this,"_disableTrackOnPause");we(this,"_zeroRtpOnPause");we(this,"_appData");we(this,"_observer",new y.EnhancedEventEmitter);u.debug("constructor()"),this._id=g,this._localId=v,this._rtpSender=w,this._track=S,this._kind=S.kind,this._rtpParameters=E,this._paused=!!C&&!S.enabled,this._maxSpatialLayer=void 0,this._stopTracks=O,this._disableTrackOnPause=C,this._zeroRtpOnPause=k,this._appData=T??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(u.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(u.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new m.InvalidStateError("closed");return new Promise((g,v)=>{this.safeEmit("@getstats",g,v)})}pause(){u.debug("pause()"),this._closed?u.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((g,v)=>{this.safeEmit("@pause",g,v)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){u.debug("resume()"),this._closed?u.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((g,v)=>{this.safeEmit("@resume",g,v)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:g}){if(u.debug("replaceTrack() [track:%o]",g),this._closed){if(g&&this._stopTracks)try{g.stop()}catch{}throw new m.InvalidStateError("closed")}if(g&&g.readyState==="ended")throw new m.InvalidStateError("track ended");g!==this._track?(await new Promise((v,w)=>{this.safeEmit("@replacetrack",g,v,w)}),this.destroyTrack(),this._track=g,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):u.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(g){if(this._closed)throw new m.InvalidStateError("closed");if(this._kind!=="video")throw new m.UnsupportedError("not a video Producer");if(typeof g!="number")throw new TypeError("invalid spatialLayer");g!==this._maxSpatialLayer&&(await new Promise((v,w)=>{this.safeEmit("@setmaxspatiallayer",g,v,w)}).catch(()=>{}),this._maxSpatialLayer=g)}async setRtpEncodingParameters(g){if(this._closed)throw new m.InvalidStateError("closed");if(typeof g!="object")throw new TypeError("invalid params");await new Promise((v,w)=>{this.safeEmit("@setrtpencodingparameters",g,v,w)})}onTrackEnded(){u.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}l.Producer=b}},s={};function i(d){var l=s[d];if(l!==void 0)return l.exports;var o=s[d]={exports:{}};return n[d].call(o.exports,o,o.exports,i),o.exports}i.amdO={},i.n=d=>{var l=d&&d.__esModule?()=>d.default:()=>d;return i.d(l,{a:l}),l},i.d=(d,l)=>{for(var o in l)i.o(l,o)&&!i.o(d,o)&&Object.defineProperty(d,o,{enumerable:!0,get:l[o]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(d,l)=>Object.prototype.hasOwnProperty.call(d,l),i.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var c={};return(()=>{i.r(c),i.d(c,{CameraDeviceInfo:()=>qu,DeviceInfo:()=>fl,ExternalE2EEKeyProvider:()=>_a.l,MicrophoneDeviceInfo:()=>hd,VideoSDK:()=>Ns,ZujoSDK:()=>Oi});var d=i(2284),l=i(467),o=i(3029),p=i(2901),y=i(4467),m=i(4756),u=i.n(m),b=i(6880),f=i.n(b);function _(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function g(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?_(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):_(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}function v(F){return"Minified Redux error #"+F+"; visit https://redux.js.org/Errors?code="+F+" for the full message or use the non-minified dev environment for full errors. "}var w=typeof Symbol=="function"&&Symbol.observable||"@@observable",S=function(){return Math.random().toString(36).substring(7).split("").join(".")},E={INIT:"@@redux/INIT"+S(),REPLACE:"@@redux/REPLACE"+S(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+S()}};function O(F){if(typeof F!="object"||F===null)return!1;for(var U=F;Object.getPrototypeOf(U)!==null;)U=Object.getPrototypeOf(U);return Object.getPrototypeOf(F)===U}function C(F,U,W){var Z;if(typeof U=="function"&&typeof W=="function"||typeof W=="function"&&typeof arguments[3]=="function")throw new Error(v(0));if(typeof U=="function"&&W===void 0&&(W=U,U=void 0),W!==void 0){if(typeof W!="function")throw new Error(v(1));return W(C)(F,U)}if(typeof F!="function")throw new Error(v(2));var le=F,ne=U,me=[],ye=me,be=!1;function ke(){ye===me&&(ye=me.slice())}function Ae(){if(be)throw new Error(v(3));return ne}function ce(ve){if(typeof ve!="function")throw new Error(v(4));if(be)throw new Error(v(5));var J=!0;return ke(),ye.push(ve),function(){if(J){if(be)throw new Error(v(6));J=!1,ke();var X=ye.indexOf(ve);ye.splice(X,1),me=null}}}function xe(ve){if(!O(ve))throw new Error(v(7));if(ve.type===void 0)throw new Error(v(8));if(be)throw new Error(v(9));try{be=!0,ne=le(ne,ve)}finally{be=!1}for(var J=me=ye,X=0;X<J.length;X++)(0,J[X])();return ve}return xe({type:E.INIT}),(Z={dispatch:xe,subscribe:ce,getState:Ae,replaceReducer:function(ve){if(typeof ve!="function")throw new Error(v(10));le=ve,xe({type:E.REPLACE})}})[w]=function(){var ve,J=ce;return(ve={subscribe:function(X){if(typeof X!="object"||X===null)throw new Error(v(11));function he(){X.next&&X.next(Ae())}return he(),{unsubscribe:J(he)}}})[w]=function(){return this},ve},Z}function k(){for(var F=arguments.length,U=new Array(F),W=0;W<F;W++)U[W]=arguments[W];return U.length===0?function(Z){return Z}:U.length===1?U[0]:U.reduce(function(Z,le){return function(){return Z(le.apply(void 0,arguments))}})}function T(){for(var F=arguments.length,U=new Array(F),W=0;W<F;W++)U[W]=arguments[W];return function(Z){return function(){var le=Z.apply(void 0,arguments),ne=function(){throw new Error(v(15))},me={getState:le.getState,dispatch:function(){return ne.apply(void 0,arguments)}},ye=U.map(function(be){return be(me)});return ne=k.apply(void 0,ye)(le.dispatch),g(g({},le),{},{dispatch:ne})}}}function h(F){return function(U){var W=U.dispatch,Z=U.getState;return function(le){return function(ne){return typeof ne=="function"?ne(W,Z,F):le(ne)}}}}var x=h();x.withExtraArgument=h;const R=x;var P=i(2211),N=i.n(P);function j(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function D(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?j(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):j(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var L={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const M=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_URL":var W=U.payload.url;return D(D({},F),{},{url:W});case"SET_ROOM_STATE":var Z=U.payload.state;return D(D({},F),{},Z==="connected"?{state:Z}:{state:Z,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var le=U.payload.peerId;return D(D({},F),{},{activeSpeakerId:le});case"SET_ROOM_STATS_PEER_ID":var ne=U.payload.peerId;return F.statsPeerId===ne?D(D({},F),{},{statsPeerId:null}):D(D({},F),{},{statsPeerId:ne});case"SET_FACE_DETECTION":var me=U.payload;return D(D({},F),{},{faceDetection:me});case"REMOVE_PEER":var ye=U.payload.peerId,be=D({},F);return ye&&ye===F.activeSpeakerId&&(be.activeSpeakerId=null),ye&&ye===F.statsPeerId&&(be.statsPeerId=null),be;default:return F}};function I(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function G(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?I(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):I(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var de={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const ee=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?G(G({},F),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):F;case"SET_ME":var W=U.payload,Z=W.peerId,le=W.displayName,ne=W.displayNameSet,me=W.device;return G(G({},F),{},{id:Z,displayName:le,displayNameSet:ne,device:me});case"SET_MEDIA_CAPABILITIES":var ye=U.payload,be=ye.canSendMic,ke=ye.canSendWebcam;return G(G({},F),{},{canSendMic:be,canSendWebcam:ke});case"SET_CAN_CHANGE_WEBCAM":var Ae=U.payload;return G(G({},F),{},{canChangeWebcam:Ae});case"SET_WEBCAM_IN_PROGRESS":var ce=U.payload.flag;return G(G({},F),{},{webcamInProgress:ce});case"SET_SHARE_IN_PROGRESS":var xe=U.payload.flag;return G(G({},F),{},{shareInProgress:xe});case"SET_DISPLAY_NAME":var ve=U.payload.displayName;return ve||(ve=F.displayName),G(G({},F),{},{displayName:ve,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var J=U.payload.enabled;return G(G({},F),{},{audioOnly:J});case"SET_AUDIO_ONLY_IN_PROGRESS":var X=U.payload.flag;return G(G({},F),{},{audioOnlyInProgress:X});case"SET_AUDIO_MUTED_STATE":var he=U.payload.enabled;return G(G({},F),{},{audioMuted:he});case"SET_RESTART_ICE_IN_PROGRESS":var Oe=U.payload.flag;return G(G({},F),{},{restartIceInProgress:Oe});default:return F}};function Q(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function ae(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?Q(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):Q(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var _e={};const Se=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_e,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_PRODUCER":var W=U.payload.producer;return ae(ae({},F),{},(0,y.A)({},W.id,W));case"REMOVE_PRODUCER":var Z=U.payload.producerId,le=ae({},F);return delete le[Z],le;case"SET_PRODUCER_PAUSED":var ne=U.payload.producerId,me=ae(ae({},F[ne]),{},{paused:!0});return ae(ae({},F),{},(0,y.A)({},ne,me));case"SET_PRODUCER_RESUMED":var ye=U.payload.producerId,be=ae(ae({},F[ye]),{},{paused:!1});return ae(ae({},F),{},(0,y.A)({},ye,be));case"SET_PRODUCER_TRACK":var ke=U.payload,Ae=ke.producerId,ce=ke.track,xe=ae(ae({},F[Ae]),{},{track:ce});return ae(ae({},F),{},(0,y.A)({},Ae,xe));case"SET_PRODUCER_SCORE":var ve=U.payload,J=ve.producerId,X=ve.score,he=F[J];if(!he)return F;var Oe=ae(ae({},he),{},{score:X});return ae(ae({},F),{},(0,y.A)({},J,Oe));default:return F}};function ie(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function $e(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?ie(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):ie(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var je={};const se=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:je,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_DATA_PRODUCER":var W=U.payload.dataProducer;return $e($e({},F),{},(0,y.A)({},W.id,W));case"REMOVE_DATA_PRODUCER":var Z=U.payload.dataProducerId,le=$e({},F);return delete le[Z],le;default:return F}};var ue=i(5458);function Ce(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function He(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?Ce(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):Ce(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var $t={};function nr(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Ct(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?nr(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):nr(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var cr={};function br(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function jt(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?br(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):br(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}var nn={},Dt=[];const Xt=function(F){for(var U=Object.keys(F),W={},Z=0;Z<U.length;Z++){var le=U[Z];typeof F[le]=="function"&&(W[le]=F[le])}var ne,me=Object.keys(W);try{(function(ye){Object.keys(ye).forEach(function(be){var ke=ye[be];if(ke(void 0,{type:E.INIT})===void 0)throw new Error(v(12));if(ke(void 0,{type:E.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(v(13))})})(W)}catch(ye){ne=ye}return function(ye,be){if(ye===void 0&&(ye={}),ne)throw ne;for(var ke=!1,Ae={},ce=0;ce<me.length;ce++){var xe=me[ce],ve=W[xe],J=ye[xe],X=ve(J,be);if(X===void 0)throw be&&be.type,new Error(v(14));Ae[xe]=X,ke=ke||X!==J}return(ke=ke||me.length!==Object.keys(ye).length)?Ae:ye}}({room:M,me:ee,producers:Se,dataProducers:se,peers:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$t,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_PEER":var W=U.payload.peer;return He(He({},F),{},(0,y.A)({},W.id,W));case"REMOVE_PEER":var Z=U.payload.peerId,le=He({},F);return delete le[Z],le;case"SET_PEER_DISPLAY_NAME":var ne=U.payload,me=ne.displayName,ye=F[ne.peerId];if(!ye)throw new Error("no Peer found");var be=He(He({},ye),{},{displayName:me});return He(He({},F),{},(0,y.A)({},be.id,be));case"ADD_CONSUMER":var ke=U.payload,Ae=ke.consumer,ce=F[ke.peerId];if(!ce)return He({},F);var xe=[].concat((0,ue.A)(ce.consumers),[Ae.id]),ve=He(He({},ce),{},{consumers:xe});return He(He({},F),{},(0,y.A)({},ve.id,ve));case"REMOVE_CONSUMER":var J=U.payload,X=J.consumerId,he=F[J.peerId];if(!he)return F;var Oe=he.consumers.indexOf(X);if(Oe===-1)return He({},F);var Ie=he.consumers.slice();Ie.splice(Oe,1);var wt=He(He({},he),{},{consumers:Ie});return He(He({},F),{},(0,y.A)({},wt.id,wt));case"ADD_DATA_CONSUMER":var ut=U.payload,et=ut.dataConsumer,Qt=ut.peerId;if(!Qt)return F;var Fe=F[Qt];if(!Fe)return He({},F);var Ee=[].concat((0,ue.A)(Fe.dataConsumers),[et.id]),Qe=He(He({},Fe),{},{dataConsumers:Ee});return He(He({},F),{},(0,y.A)({},Qe.id,Qe));case"REMOVE_DATA_CONSUMER":var ze=U.payload,Ht=ze.dataConsumerId,yr=ze.peerId;if(!yr)return F;var At=F[yr];if(!At)return F;var Hr=At.dataConsumers.indexOf(Ht);if(Hr===-1)return He({},F);var Cn=At.dataConsumers.slice();Cn.splice(Hr,1);var tn=He(He({},At),{},{dataConsumers:Cn});return He(He({},F),{},(0,y.A)({},tn.id,tn));default:return F}},consumers:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cr,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_CONSUMER":var W=U.payload.consumer;return Ct(Ct({},F),{},(0,y.A)({},W.id,W));case"REMOVE_CONSUMER":var Z=U.payload.consumerId,le=Ct({},F);return delete le[Z],le;case"SET_CONSUMER_PAUSED":var ne,me=U.payload,ye=me.consumerId,be=me.originator,ke=F[ye];return ne=Ct(Ct({},ke),{},be==="local"?{locallyPaused:!0,paused:!0}:{remotelyPaused:!0,paused:!0}),Ct(Ct({},F),{},(0,y.A)({},ye,ne));case"SET_CONSUMER_RESUMED":var Ae,ce=U.payload,xe=ce.consumerId,ve=ce.originator,J=F[xe];return Ae=Ct(Ct({},J),{},ve==="local"?{locallyPaused:!1,paused:!1}:{remotelyPaused:!1,paused:!1}),Ct(Ct({},F),{},(0,y.A)({},xe,Ae));case"SET_CONSUMER_CURRENT_LAYERS":var X=U.payload,he=X.consumerId,Oe=X.spatialLayer,Ie=X.temporalLayer,wt=Ct(Ct({},F[he]),{},{currentSpatialLayer:Oe,currentTemporalLayer:Ie});return Ct(Ct({},F),{},(0,y.A)({},he,wt));case"SET_CONSUMER_PREFERRED_LAYERS":var ut=U.payload,et=ut.consumerId,Qt=ut.spatialLayer,Fe=ut.temporalLayer,Ee=Ct(Ct({},F[et]),{},{preferredSpatialLayer:Qt,preferredTemporalLayer:Fe});return Ct(Ct({},F),{},(0,y.A)({},et,Ee));case"SET_CONSUMER_PRIORITY":var Qe=U.payload,ze=Qe.consumerId,Ht=Qe.priority,yr=Ct(Ct({},F[ze]),{},{priority:Ht});return Ct(Ct({},F),{},(0,y.A)({},ze,yr));case"SET_CONSUMER_TRACK":var At=U.payload,Hr=At.consumerId,Cn=At.track,tn=Ct(Ct({},F[Hr]),{},{track:Cn});return Ct(Ct({},F),{},(0,y.A)({},Hr,tn));case"SET_CONSUMER_SCORE":var Ms=U.payload,cn=Ms.consumerId,As=Ms.score,hc=F[cn];if(!hc)return F;var Al=Ct(Ct({},hc),{},{score:As});return Ct(Ct({},F),{},(0,y.A)({},cn,Al));default:return F}},dataConsumers:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"SET_ROOM_STATE":return U.payload.state==="closed"?{}:F;case"ADD_DATA_CONSUMER":var W=U.payload.dataConsumer;return jt(jt({},F),{},(0,y.A)({},W.id,W));case"REMOVE_DATA_CONSUMER":var Z=U.payload.dataConsumerId,le=jt({},F);return delete le[Z],le;default:return F}},notifications:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dt,U=arguments.length>1?arguments[1]:void 0;switch(U.type){case"ADD_NOTIFICATION":var W=U.payload.notification;return[].concat((0,ue.A)(F),[W]);case"REMOVE_NOTIFICATION":var Z=U.payload.notificationId;return F.filter(function(le){return le.id!==Z});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return F}}});var Gr=i(1919),dn=i(7007),Mr=i(296),Yr=(i(1919).default,(0,p.A)(function F(){(0,o.A)(this,F),this.roomClient=null})),un=new(function(){function F(){(0,o.A)(this,F),F.instance||(F.instance=new Yr)}return(0,p.A)(F,[{key:"getInstance",value:function(){return F.instance}}])}());Object.freeze(un);var Lt=un.getInstance(),pn=function(){return(0,p.A)(function F(U){(0,o.A)(this,F),(0,y.A)(this,"pausedBy",void 0),this.id=U.id,this.kind=U.track.kind,this.codec=U.codec,this.track=U.track,this.producerOrConsumer=U.instance,U.appData&&U.appData.share===!0&&U.track.kind==="video"&&(this.kind="share"),U.appData&&U.appData.share===!0&&U.track.kind==="audio"&&(this.kind="shareAudio"),this.rtpSender=U.rtpSender,this.rtpReceiver=U.rtpReceiver},[{key:"pause",value:function(){Lt.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Lt.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}])}(),sn=i(1803);function zr(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Lr(F,U){var W=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!W){if(Array.isArray(F)||(W=function(be,ke){if(be){if(typeof be=="string")return xn(be,ke);var Ae={}.toString.call(be).slice(8,-1);return Ae==="Object"&&be.constructor&&(Ae=be.constructor.name),Ae==="Map"||Ae==="Set"?Array.from(be):Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae)?xn(be,ke):void 0}}(F))||U){W&&(F=W);var Z=0,le=function(){};return{s:le,n:function(){return Z>=F.length?{done:!0}:{done:!1,value:F[Z++]}},e:function(be){throw be},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,me=!0,ye=!1;return{s:function(){W=W.call(F)},n:function(){var be=W.next();return me=be.done,be},e:function(be){ye=!0,ne=be},f:function(){try{me||W.return==null||W.return()}finally{if(ye)throw ne}}}}function xn(F,U){(U==null||U>F.length)&&(U=F.length);for(var W=0,Z=Array(U);W<U;W++)Z[W]=F[W];return Z}var Xr="stream-enabled",Pn="stream-disabled",Sn="media-status-changed",In="video-quality-changed",Nn="stream-paused",Wt="stream-resumed",Mn="producer-added",ss="producer-removed",hn="consumer-added",or="consumer-removed",Ye="e2ee-state-change",Me=function(){return(0,p.A)(function ne(me){var ye=this;(0,o.A)(this,ne),(0,y.A)(this,"captureImage",(0,l.A)(u().mark(function be(){var ke,Ae,ce,xe,ve,J,X,he,Oe=arguments;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:Ae=(ke=Oe.length>0&&Oe[0]!==void 0?Oe[0]:{}).height,ce=ke.width,Ie.prev=1,xe=(0,ue.A)(ye.streams.values()),ve=Lr(xe),Ie.prev=4,X=u().mark(function wt(){var ut,et,Qt,Fe,Ee;return u().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if((ut=J.value).kind!="video"){Qe.next=19;break}return Qe.prev=2,(et=new MediaStream).addTrack(ut.track),(Qt=document.createElement("video")).srcObject=et,Qt.playsInline=!0,(Fe=document.createElement("canvas")).id="canvasId",Qe.next=12,new Promise(function(ze,Ht){Qt.addEventListener("loadeddata",(0,l.A)(u().mark(function yr(){var At,Hr,Cn,tn,Ms,cn;return u().wrap(function(As){for(;;)switch(As.prev=As.next){case 0:return At=Qt.videoWidth,Hr=Qt.videoHeight,Cn=16/9,Ae==null&&ce==null&&(Ae=Hr,ce=At),Ae==null&&Ae==null||(Ae<=0||Ae>Hr)&&(Ae=Hr),ce==null&&ce==null||(ce<=0||ce>At)&&(ce=At),Ae==null&&(Ae=ce/Cn),ce==null&&(ce=Ae*Cn),Fe.width=ce,Fe.height=Ae,As.prev=9,As.next=12,Qt.play();case 12:document.body.appendChild(Qt),tn=(Fe.width-At*Cn)/2,Ms=(Fe.height-Hr*Cn)/2,Fe.getContext("2d").clearRect(0,0,tn/2,Ms/2),Fe.getContext("2d").drawImage(Qt,0,0),cn=Fe.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(Fe),document.body.removeChild(Fe),document.body.removeChild(Qt),ze(cn),As.next=28;break;case 24:As.prev=24,As.t0=As.catch(9),Ht(As.t0),console.log("error in video",As.t0);case 28:case"end":return As.stop()}},yr,null,[[9,24]])})))});case 12:return Ee=Qe.sent,Qe.abrupt("return",{v:Ee});case 16:Qe.prev=16,Qe.t0=Qe.catch(2),console.error("err on image capture",Qe.t0);case 19:case"end":return Qe.stop()}},wt,null,[[2,16]])}),ve.s();case 7:if((J=ve.n()).done){Ie.next=14;break}return Ie.delegateYield(X(),"t0",9);case 9:if(!(he=Ie.t0)){Ie.next=12;break}return Ie.abrupt("return",he.v);case 12:Ie.next=7;break;case 14:Ie.next=19;break;case 16:Ie.prev=16,Ie.t1=Ie.catch(4),ve.e(Ie.t1);case 19:return Ie.prev=19,ve.f(),Ie.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:Ie.prev=25,Ie.t2=Ie.catch(1),console.error("Error in captureImage::",Ie.t2),Lt.roomClient._videosdkLogs&&Lt.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:Ie.t2.message}});case 29:case"end":return Ie.stop()}},be,null,[[1,25],[4,16,19,22]])}))),this.id=me.id,this.displayName=me.displayName,this.streams=new Map,this.quality="low",this.screenShareQuality="high",this.local=me.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=me.mode,this.metaData=me.metaData,this.eventEmitter=new dn.EventEmitter,this.participantVideoElements=new Map,this.participantAudioElements=new Map,this.videoVisible=!1,this.height=null,this.width=null,this.resizeObserver=null},[{key:"_setPinState",value:function(ne){ne.cam!=null&&(this.pinState.cam=ne.cam),ne.share!=null&&(this.pinState.share=ne.share)}},{key:"remove",value:function(){Lt.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Lt.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Lt.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Lt.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Lt.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(ne){if(ne){this.streams.set(ne.id,ne),ne.kind!=="video"||this.local||Lt.roomClient.setConsumerQuality(ne.id,this.quality);var me=new MediaStream;me.addTrack(ne.track);try{if(["video","share"].includes(ne.kind)){var ye=this.participantVideoElements.get(ne.kind);if(ye){var be={display:"block",objectFit:ne.kind==="share"?"contain":"cover",width:"100%"};Object.assign(ye.style,be),ye.srcObject=me,ye.play().catch(function(Ae){console.error("Failed to play ".concat(ne.kind," stream:"),Ae)}),(ne.kind==="share"||ne.kind==="video"&&this.videoVisible)&&ne.resume()}}if((ne.kind==="audio"||ne.kind==="shareAudio")&&!this.local){var ke=this.participantAudioElements.get(ne.kind);ke&&(ke.srcObject=me,ke.play().catch(function(Ae){console.error("Failed to play ".concat(ne.kind," audio:"),Ae)}))}this.eventEmitter.emit(Xr,ne),ne.kind==="video"&&!this.local&&this.height&&this.width&&this.setViewPort(this.width,this.height)}catch(Ae){console.error("Error in addStream:",Ae)}}else console.warn("Attempted to add null/undefined stream")}},{key:"updateStream",value:function(ne){this.streams.set(ne.id,ne),this.eventEmitter.emit(Xr,ne)}},{key:"deleteStream",value:function(ne){var me=this.streams.get(ne);if(me!=null){this.streams.delete(ne);var ye={video:{collection:this.participantVideoElements,type:"video"},share:{collection:this.participantVideoElements,type:"share"},audio:{collection:this.participantAudioElements,type:"audio"},shareAudio:{collection:this.participantAudioElements,type:"shareAudio"}}[me.kind];if(ye){var be=ye.collection.get(ye.type);be&&(be.style.display="none")}return this.eventEmitter.emit(Pn,me),me}}},{key:"streamResumed",value:function(ne){this.streams.get(ne)}},{key:"streamPaused",value:function(ne){this.streams.get(ne)}},{key:"updateParticipantMediaState",value:function(ne,me){ne=="audio"?this.micOn=me:ne=="video"&&(this.webcamOn=me),this.eventEmitter.emit(Sn,{peerId:this.id,kind:ne,newStatus:me})}},{key:"handleParticipantPause",value:function(ne){if(ne!=null&&ne.consumerId){var me=this.streams.get(ne.consumerId);me?me.pausedBy="SUB_MANAGER":console.warn("Stream with consumerId ".concat(ne.consumerId," not found."))}this.eventEmitter.emit(Nn,{kind:ne==null?void 0:ne.kind,reason:ne==null?void 0:ne.reason})}},{key:"handleParticipantResume",value:function(ne){if(ne!=null&&ne.consumerId){var me=this.streams.get(ne.consumerId);me?me.pausedBy=void 0:console.warn("Stream with consumerId ".concat(ne.consumerId," not found."))}this.eventEmitter.emit(Wt,{kind:ne==null?void 0:ne.kind,reason:ne==null?void 0:ne.reason})}},{key:"handleE2EEStateChange",value:function(ne){ne==null||delete ne.peerId,this.eventEmitter.emit(Ye,ne)}},{key:"videoQualityChanged",value:function(ne,me){this.eventEmitter.emit(In,{peerId:this.id,prevQuality:ne,currentQuality:me})}},{key:"setQuality",value:function(ne){if(!this.local){if(typeof document<"u"&&this.resizeObserver){var me=document.querySelector("#f-".concat(this.id));me&&this.resizeObserver.unobserve(me)}this.quality=ne,(0,ue.A)(this.streams.entries()).forEach(function(ye){var be=ye[1];be.kind==="video"&&Lt.roomClient.setConsumerQuality(be.id,ne)})}}},{key:"setScreenShareQuality",value:function(ne){this.local||(this.screenShareQuality=ne,this.streams.forEach(function(me){me.kind==="share"&&Lt.roomClient.setConsumerScreenShareQuality(me.id,ne)}))}},{key:"setViewPort",value:function(ne,me){(0,ue.A)(this.streams.entries()).forEach(function(ye){var be=ye[1];be.kind==="video"&&Lt.roomClient.setViewPort(be.producerOrConsumer,ne,me)})}},{key:"pin",value:function(ne){switch(ne){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Lt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(ne){switch(ne){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Lt.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(le=(0,l.A)(u().mark(function ne(me){var ye,be,ke;return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return ye=me.meetingId,be=me.payload,ke=me.token,Ae.next=3,Lt.roomClient.switchPeerRoom({peerId:this.id,roomId:ye,payload:be,token:ke});case 3:case"end":return Ae.stop()}},ne,this)})),function(ne){return le.apply(this,arguments)})},{key:"getVideoStats",value:(Z=(0,l.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!this.local){ce.next=6;break}return ce.next=3,Lt.roomClient.getVideoRemoteStats();case 3:return ce.abrupt("return",ce.sent);case 6:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=8,ye.s();case 10:if((be=ye.n()).done){ce.next=18;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="video"){ce.next=16;break}return ce.next=15,Lt.roomClient.getConsumerRemoteStats(Ae);case 15:return ce.abrupt("return",ce.sent);case 16:ce.next=10;break;case 18:ce.next=23;break;case 20:ce.prev=20,ce.t0=ce.catch(8),ye.e(ce.t0);case 23:return ce.prev=23,ye.f(),ce.finish(23);case 26:case"end":return ce.stop()}},ne,this,[[8,20,23,26]])})),function(){return Z.apply(this,arguments)})},{key:"getShareStats",value:(W=(0,l.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!this.local){ce.next=6;break}return ce.next=3,Lt.roomClient.getShareRemoteStats();case 3:return ce.abrupt("return",ce.sent);case 6:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=8,ye.s();case 10:if((be=ye.n()).done){ce.next=18;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="share"){ce.next=16;break}return ce.next=15,Lt.roomClient.getConsumerRemoteStats(Ae);case 15:return ce.abrupt("return",ce.sent);case 16:ce.next=10;break;case 18:ce.next=23;break;case 20:ce.prev=20,ce.t0=ce.catch(8),ye.e(ce.t0);case 23:return ce.prev=23,ye.f(),ce.finish(23);case 26:case"end":return ce.stop()}},ne,this,[[8,20,23,26]])})),function(){return W.apply(this,arguments)})},{key:"getShareAudioStats",value:(U=(0,l.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!this.local){ce.next=6;break}return ce.next=3,Lt.roomClient.getShareAudioRemoteStats();case 3:return ce.abrupt("return",ce.sent);case 6:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=8,ye.s();case 10:if((be=ye.n()).done){ce.next=18;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="shareAudio"){ce.next=16;break}return ce.next=15,Lt.roomClient.getConsumerRemoteStats(Ae);case 15:return ce.abrupt("return",ce.sent);case 16:ce.next=10;break;case 18:ce.next=23;break;case 20:ce.prev=20,ce.t0=ce.catch(8),ye.e(ce.t0);case 23:return ce.prev=23,ye.f(),ce.finish(23);case 26:case"end":return ce.stop()}},ne,this,[[8,20,23,26]])})),function(){return U.apply(this,arguments)})},{key:"getAudioStats",value:(F=(0,l.A)(u().mark(function ne(){var me,ye,be,ke,Ae;return u().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(this.micOn){ce.next=2;break}return ce.abrupt("return",[]);case 2:if(!this.local){ce.next=8;break}return ce.next=5,Lt.roomClient.getAudioRemoteStats();case 5:return ce.abrupt("return",ce.sent);case 8:me=(0,ue.A)(this.streams.entries()),ye=Lr(me),ce.prev=10,ye.s();case 12:if((be=ye.n()).done){ce.next=20;break}if(ke=(0,Mr.A)(be.value,2),Ae=ke[0],ke[1].kind!="audio"){ce.next=18;break}return ce.next=17,Lt.roomClient.getConsumerRemoteStats(Ae);case 17:return ce.abrupt("return",ce.sent);case 18:ce.next=12;break;case 20:ce.next=25;break;case 22:ce.prev=22,ce.t0=ce.catch(10),ye.e(ce.t0);case 25:return ce.prev=25,ye.f(),ce.finish(25);case 28:case"end":return ce.stop()}},ne,this,[[10,22,25,28]])})),function(){return F.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Lt.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Lt.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Lt.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Lt.roomClient.stopConsumingMicStreams(this.id)}},{key:"renderVideo",value:function(ne){for(var me,ye=this,be=ne.type,ke=be===void 0?"video":be,Ae=ne.maxQuality,ce=Ae===void 0?"auto":Ae,xe=ne.videostyle,ve=xe===void 0?{}:xe,J=ne.containerStyle,X=J===void 0?{}:J,he=0,Oe=(0,ue.A)(this.streams.values());he<Oe.length;he++){var Ie=Oe[he];Ie.kind==ke&&(me=new MediaStream).addTrack(Ie.track)}if(this.participantVideoElements.get(ke)){if(me){var wt=this.participantVideoElements.get(ke);wt&&(wt.srcObject=me,wt.play().catch(function(Qe){return console.error("videoElem.play() failed",Qe)}))}return this.participantVideoElements.get(ke)}try{var ut=document.createElement("div");ut.classList.add("video-container","participant-video-".concat(this.id)),ut.setAttribute("id","f-".concat(this.id).concat(ke==="share"?"-share":"")),ut.style.setProperty("position","relative"),Object.assign(ut.style,X);var et=document.createElement("video");if(et.setAttribute("id","v-".concat(this.id).concat(ke==="share"?"-share":"")),et.setAttribute("playsinline",""),et.setAttribute("webkit-playsinline",""),et.setAttribute("x5-playsinline",""),et.playsinline=!0,et.muted=!0,et.autoplay=!0,et.onerror=function(Qe){console.log(Qe,"participant video error")},Object.assign(et.style,function(Qe){for(var ze=1;ze<arguments.length;ze++){var Ht=arguments[ze]!=null?arguments[ze]:{};ze%2?zr(Object(Ht),!0).forEach(function(yr){(0,y.A)(Qe,yr,Ht[yr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(Ht)):zr(Object(Ht)).forEach(function(yr){Object.defineProperty(Qe,yr,Object.getOwnPropertyDescriptor(Ht,yr))})}return Qe}({width:"100%",height:"100%",objectFit:ke==="share"?"contain":"cover"},ve)),me&&(et.srcObject=me,et.play().then(function(Qe){console.log("videoElem.play() success",Qe)}).catch(function(Qe){return console.error("videoElem.play() failed",Qe)})),ut.appendChild(et),this.participantVideoElements.set(ke,et),this.videoVisible=!1,!this.local&&ke==="video"){var Qt=(0,sn.sg)(function(Qe){if(Qe.length!=0)if(Qe[Qe.length-1].intersectionRatio>0){ye.videoVisible=!0;for(var ze=0,Ht=(0,ue.A)(ye.streams.values());ze<Ht.length;ze++){var yr=Ht[ze];yr.kind=="video"&&yr.pausedBy!=="SUB_MANAGER"&&yr.paused&&yr.resume()}}else{ye.videoVisible=!1;for(var At=0,Hr=(0,ue.A)(ye.streams.values());At<Hr.length;At++){var Cn=Hr[At];Cn.kind=="video"&&Cn.pause()}}},500);if(new IntersectionObserver(Qt,{root:null,rootMargin:"0px",threshold:0}).observe(ut),ce=="auto"&&ke==="video"){var Fe=(0,sn.sg)(function(Qe){var ze=Qe[0].contentRect,Ht=ze.width,yr=ze.height;Ht>0&&yr>0&&(ye.height=yr,ye.width=Ht,ye.setViewPort(Ht,yr))},500),Ee=new ResizeObserver(Fe);Ee.observe(ut),this.resizeObserver=Ee}}return ke!=="video"||ce==="auto"||this.local||this.setQuality(ce),ut}catch(Qe){console.log("Render video Exception",Qe)}}},{key:"renderAudio",value:function(ne){var me=ne.type,ye=me===void 0?"audio":me;if(this.local)return null;try{if(this.participantAudioElements.get(ye)){var be=this.participantAudioElements.get(ye),ke=this.getAudioStream(ye);return ke&&be&&(be.srcObject=ke,be.play().catch(function(xe){return console.error("Failed to play existing audio:",xe)})),be}var Ae=document.createElement("audio");Ae.setAttribute("id","a-".concat(this.id,"-").concat(ye)),Ae.autoplay=!1,Ae.playsInline=!0,Ae.controls=!1,Ae.style.display="none",Ae.onerror=function(xe){return console.log("Audio element error:",xe)};var ce=this.getAudioStream(ye);return ce&&(Ae.srcObject=ce,Ae.play().catch(function(xe){return console.error("Failed to play new audio:",xe)})),this.participantAudioElements.set(ye,Ae),Ae}catch(xe){return console.error("Render audio exception:",xe),null}}},{key:"getAudioStream",value:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"audio",me=(0,ue.A)(this.streams.values()).find(function(be){return be.kind===ne});if(me){var ye=new MediaStream;return ye.addTrack(me.track),me.resume(),ye}return null}},{key:"addProducer",value:function(ne){this.eventEmitter.emit(Mn,ne)}},{key:"removeProducer",value:function(ne){this.eventEmitter.emit(ss,ne)}},{key:"addConsumer",value:function(ne){this.eventEmitter.emit(hn,ne)}},{key:"removeConsumer",value:function(ne){this.eventEmitter.emit(or,ne)}},{key:"on",value:function(ne,me){switch(ne){case Xr:case Pn:case Sn:case In:case Nn:case Wt:case Mn:case ss:case hn:case or:case Ye:this.eventEmitter.on(ne,me);break;default:throw new Error("Invalid event type from participant onn")}}},{key:"off",value:function(ne,me){switch(ne){case Xr:case Pn:case Sn:case In:case Nn:case Wt:case Mn:case ss:case hn:case or:case Ye:this.eventEmitter.off(ne,me);break;default:throw new Error("Invalid event type from participant off")}}}]);var F,U,W,Z,le}(),ot=i(388),Le=i(3954),lt=i(5501),lr={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"},De=i(2107);function Zt(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zt=function(){return!!F})()}function Vt(F,U,W){_r(F,U),U.set(F,W)}function _r(F,U){if(U.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fr(F,U){return F.get(Xe(F,U))}function Pr(F,U,W){return F.set(Xe(F,U),W),W}function Xe(F,U,W){if(typeof F=="function"?F===U:F.has(U))return arguments.length<3?U:W;throw new TypeError("Private element is not present on this object")}var Kt="stream-enabled",Tt="stream-disabled",zt="character-joined",Fr="character-left",Nr="media-status-changed",Vr="video-quality-changed",Er="character-state-changed",xr="character-message",Jr="user-message",Qn="data",is="error",Ks=new WeakMap,Gs=new WeakMap,mi=new WeakMap,Ci=new WeakMap,gi=new WeakMap,as=new WeakMap,os=new WeakMap,zi=new WeakSet,Rt=function(F){function U(be){var ke,Ae,ce,xe;return(0,o.A)(this,U),Ae=this,ce=U,xe=[{id:be.id,displayName:be.displayName,mode:De.nI.SEND_AND_RECV,metaData:be.metaData}],ce=(0,Le.A)(ce),function(ve,J){_r(ve,J),J.add(ve)}(ke=(0,ot.A)(Ae,Zt()?Reflect.construct(ce,xe||[],(0,Le.A)(Ae).constructor):ce.apply(Ae,xe)),zi),Vt(ke,Ks,void 0),Vt(ke,Gs,void 0),Vt(ke,mi,void 0),Vt(ke,Ci,void 0),Vt(ke,gi,void 0),Vt(ke,as,void 0),Vt(ke,os,void 0),(0,y.A)(ke,"captureImage",(0,l.A)(u().mark(function ve(){var J,X=arguments;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:throw(J=X.length>0&&X[0]!==void 0?X[0]:{}).height,J.width,new Error("captureImage method is not supported on character");case 2:case"end":return he.stop()}},ve)}))),Pr(gi,ke,be.interactionId||null),ke.id=be.id||null,Pr(Ks,ke,be.characterRole),Pr(Gs,ke,be.characterMode),Pr(mi,ke,be.knowledgeBases||[]),ke.displayName=be.displayName,Pr(Ci,ke,be.language),Pr(as,ke,be.state||lr.CHARACTER_LISTENING),Pr(os,ke,be.roomClient),ke}return(0,lt.A)(U,F),(0,p.A)(U,[{key:"join",value:(ye=(0,l.A)(u().mark(function be(){var ke;return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,fr(os,this).joinCharacter({interactionId:fr(gi,this),characterId:this.id,characterRole:fr(Ks,this),displayName:this.displayName,characterMode:fr(Gs,this),knowledgeBases:fr(mi,this),language:fr(Ci,this),metaData:this.metaData});case 2:(ke=Ae.sent)&&(this.id=ke.characterId,this.displayName=ke.displayName,Pr(Gs,this,ke.characterMode),Pr(Ks,this,ke.characterRole),Pr(gi,this,ke.interactionId),Pr(mi,this,ke.knowledgeBases),Pr(Ci,this,ke.language),fr(os,this)._eventEmitter.emit("INIT_CHARACTER",this));case 4:case"end":return Ae.stop()}},be,this)})),function(){return ye.apply(this,arguments)})},{key:"leave",value:(me=(0,l.A)(u().mark(function be(){return u().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,fr(os,this).removeCharacter();case 2:case"end":return ke.stop()}},be,this)})),function(){return me.apply(this,arguments)})},{key:"remove",value:(ne=(0,l.A)(u().mark(function be(){return u().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return ke.stop()}},be)})),function(){return ne.apply(this,arguments)})},{key:"sendMessage",value:(le=(0,l.A)(u().mark(function be(ke){return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,fr(os,this).sendCharacterMessage({interactionId:fr(gi,this),text:ke});case 2:case"end":return Ae.stop()}},be,this)})),function(be){return le.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(be){Object.keys(lr).includes(be.status)&&(Xe(zi,this,ir).call(this,be.status),this.eventEmitter.emit(Er,be))}},{key:"handleCharacterMessage",value:function(be){this.eventEmitter.emit(xr,be)}},{key:"interrupt",value:(Z=(0,l.A)(u().mark(function be(){return u().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,fr(os,this).interruptCharacter({interactionId:fr(gi,this)});case 2:case"end":return ke.stop()}},be,this)})),function(){return Z.apply(this,arguments)})},{key:"handleUserMessage",value:function(be){this.eventEmitter.emit(Jr,be)}},{key:"handleCharacterData",value:function(be){var ke=be.topic,Ae=be.data;this.eventEmitter.emit(Qn,ke,Ae)}},{key:"handleCharacterError",value:function(be){var ke=be.data;this.eventEmitter.listenerCount(is)>0&&this.eventEmitter.emit(is,ke)}},{key:"enableMic",value:function(){fr(os,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){fr(os,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){fr(os,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){fr(os,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(be){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(W=(0,l.A)(u().mark(function be(ke){return u().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:throw ke.meetingId,ke.payload,ke.token,new Error("switchTo method is not supported on character");case 2:case"end":return Ae.stop()}},be)})),function(be){return W.apply(this,arguments)})},{key:"pin",value:function(be){throw new Error("pin method is not supported on character")}},{key:"on",value:function(be,ke){switch(be){case Kt:case Tt:case zt:case Fr:case Nr:case Vr:case Er:case xr:case Jr:case Qn:case is:this.eventEmitter.on(be,ke);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(be,ke){switch(be){case Kt:case Tt:case zt:case Fr:case Nr:case Vr:case Er:case xr:case Jr:case Qn:case is:this.eventEmitter.off(be,ke);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return fr(as,this)}},{key:"knowledgeBases",get:function(){return fr(mi,this)}},{key:"characterMode",get:function(){return fr(Gs,this)}},{key:"characterRole",get:function(){return fr(Ks,this)}},{key:"interactionId",get:function(){return fr(gi,this)}},{key:"language",get:function(){return fr(Ci,this)}}]);var W,Z,le,ne,me,ye}(Me);function ir(F){Pr(as,this,F)}function Gt(F,U,W){(function(Z,le){if(le.has(Z))throw new TypeError("Cannot initialize the same private elements twice on an object")})(F,U),U.set(F,W)}function Rn(F,U,W){if(typeof F=="function"?F===U:F.has(U))return arguments.length<3?U:W;throw new TypeError("Private element is not present on this object")}var ur=new WeakMap,Sr=function(){return(0,p.A)(function U(W,Z){var le,ne,me,ye=W.id,be=W.displayName;(0,o.A)(this,U),Gt(this,ur,void 0),this.id=ye,this.displayName=be,ne=this,me=Z,(le=ur).set(Rn(le,ne),me)},[{key:"switchTo",value:(F=(0,l.A)(u().mark(function U(W){var Z,le,ne;return u().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return Z=W.meetingId,le=W.payload,ne=W.token,me.next=3,Lt.roomClient.connectionSwitchPeerRoom({roomId:Z,connectionRoomId:(ye=ur,be=this,ye.get(Rn(ye,be))),payload:le,peerId:this.id,token:ne});case 3:case"end":return me.stop()}var ye,be},U,this)})),function(U){return F.apply(this,arguments)})}]);var F}(),fn="participant-joined",Tr="participant-left",Rr="chat-message",an=function(){return(0,p.A)(function U(W,Z){var le=this;(0,o.A)(this,U),this.eventEmitter=new dn.EventEmitter,this.id=W,this.participants=new Map,Z.forEach(function(ne){le.participants.set(ne.id,new Sr(ne,le.id))})},[{key:"participantJoin",value:function(U){var W=new Sr(U,this.id);this.participants.set(U.id,W),this.eventEmitter.emit(fn,W)}},{key:"participantLeft",value:function(U){this.participants.delete(U),this.eventEmitter.emit(Tr,U)}},{key:"sendChatMessage",value:function(U){Lt.roomClient.connectionSendChatMessage({roomId:this.id,message:U})}},{key:"sendChatMessageEvent",value:function(U){var W=U.participantId,Z=U.message;this.eventEmitter.emit(Rr,{participantId:W,message:Z})}},{key:"end",value:(F=(0,l.A)(u().mark(function U(){return u().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Lt.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return W.stop()}},U,this)})),function(){return F.apply(this,arguments)})},{key:"on",value:function(U,W){switch(U){case fn:case Tr:case Rr:this.eventEmitter.on(U,W);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(U,W){switch(U){case fn:case Tr:case Rr:this.eventEmitter.off(U,W);break;default:throw new Error("Invalid event type")}}}]);var F}(),Ts=function(){return(0,p.A)(function F(U){var W=U.roomId,Z=U.peers,le=U.payload;(0,o.A)(this,F),this.id=W,this.payload=le,this.meeting=new an(W,Z)},[{key:"close",value:function(){Lt.roomClient.closeConnection(this.id)}}])}();function An(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Ln(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?An(Object(W),!0).forEach(function(Z){(0,y.A)(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):An(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}function Ys(F,U){if(U.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xs(F,U){return F.get(Hi(F,U))}function Hi(F,U,W){if(typeof F=="function"?F===U:F.has(U))return arguments.length<3?U:W;throw new TypeError("Private element is not present on this object")}var Js="error",wa="meeting-joined",ii="meeting-left",$a="participant-mode-changed",uo="participant-joined",Uo="participant-left",Vo="speaker-changed",qi="presenter-changed",$o="main-participant-changed",rl="chat-message",nl="entry-requested",Wo="entry-responded",zo="recording-state-changed",sl="recording-started",Ho="recording-stopped",dr="livestream-state-changed",qo="livestream-started",Ko="livestream-stopped",ra="hls-state-changed",gr="hls-started",il="hls-stopped",Go="whiteboard-started",al="whiteboard-stopped",ol="video-state-changed",cl="video-seeked",Bs="mic-requested",ll="webcam-requested",Yo="stream-enabled",Ti="stream-disabled",po="pin-state-changed",na="connection-open",Jo="connection-close",Qo="switch-meeting",dl="meeting-state-changed",Xo="paused-all-streams",ho="resumed-all-streams",ul="transcription-state-changed",pl="transcription-text",fo="character-joined",sa="character-left",mo="media-relay-started",Zo="media-relay-stopped",ec="media-relay-error",Wa="media-relay-request-response",xt="media-relay-request-received",te=new WeakMap,at=new WeakSet,pr=function(){return(0,p.A)(function J(X,he,Oe){var Ie,wt,ut,et,Qt,Fe=this;(0,o.A)(this,J),Ys(Ie=this,wt=at),wt.add(Ie),function(Ee,Qe,ze){Ys(Ee,Qe),Qe.set(Ee,ze)}(this,te,void 0),(0,y.A)(this,"pubSub",{publish:(Qt=(0,l.A)(u().mark(function Ee(Qe,ze,Ht,yr){return u().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(yr==null){At.next=3;break}if((0,d.A)(yr)=="object"){At.next=3;break}throw new Error('"payload" can only be object.');case 3:return At.next=5,Fe.roomClient.pubsubPublish(Qe,ze,Ht,yr);case 5:case"end":return At.stop()}},Ee)})),function(Ee,Qe,ze,Ht){return Qt.apply(this,arguments)}),subscribe:(et=(0,l.A)(u().mark(function Ee(Qe,ze){var Ht;return u().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(!xs(te,Fe).listeners(Qe).includes(ze)){yr.next=2;break}return yr.abrupt("return");case 2:return yr.next=4,Fe.roomClient.pubsubSubscribe(Qe);case 4:return Ht=yr.sent,xs(te,Fe).on(Qe,ze),yr.abrupt("return",Ht);case 7:case"end":return yr.stop()}},Ee)})),function(Ee,Qe){return et.apply(this,arguments)}),unsubscribe:(ut=(0,l.A)(u().mark(function Ee(Qe,ze){return u().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:if(xs(te,Fe).off(Qe,ze),xs(te,Fe).listeners(Qe).length!=0){Ht.next=4;break}return Ht.next=4,Fe.roomClient.pubsubUnsubscribe(Qe);case 4:case"end":return Ht.stop()}},Ee)})),function(Ee,Qe){return ut.apply(this,arguments)})}),(0,y.A)(this,"uploadBase64File",function(){var Ee=(0,l.A)(u().mark(function Qe(ze){var Ht,yr,At,Hr,Cn,tn,Ms;return u().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(Ht=ze.base64Data,yr=ze.token,At=ze.fileName,cn.prev=1,Ht&&yr&&At){cn.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Hr="https://".concat(Fe.baseUrl,"/base64-upload?roomId=").concat(Fe.id),Cn={fileName:At,base64Data:Ht},cn.next=8,fetch(Hr,{method:"POST",body:JSON.stringify(Cn),headers:{"Content-Type":"application/json",Authorization:yr}});case 8:return tn=cn.sent,cn.next=11,tn.json();case 11:return Ms=cn.sent,cn.abrupt("return",Ms.url);case 15:cn.prev=15,cn.t0=cn.catch(1),console.error("Error while Uploading Base64 File::",cn.t0),Fe.roomClient._videosdkLogs&&Fe.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:cn.t0.message}});case 19:case"end":return cn.stop()}},Qe,null,[[1,15]])}));return function(Qe){return Ee.apply(this,arguments)}}()),(0,y.A)(this,"fetchBase64File",function(){var Ee=(0,l.A)(u().mark(function Qe(ze){var Ht,yr,At,Hr,Cn;return u().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(Ht=ze.url,yr=ze.token,tn.prev=1,Ht&&yr){tn.next=4;break}throw new Error("please provide url and token");case 4:return tn.next=6,fetch(Ht,{headers:{Authorization:yr}});case 6:return At=tn.sent,tn.next=9,At.arrayBuffer();case 9:return Hr=tn.sent,Cn=window.btoa(new Uint8Array(Hr).reduce(function(Ms,cn){return Ms+String.fromCharCode(cn)},"")),tn.abrupt("return",Cn);case 14:tn.prev=14,tn.t0=tn.catch(1),console.error("Error while fetching Base64 File::",tn.t0),Fe.roomClient._videosdkLogs&&Fe.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:tn.t0.message}});case 18:case"end":return tn.stop()}},Qe,null,[[1,14]])}));return function(Qe){return Ee.apply(this,arguments)}}()),this.id=X,this.roomClient=Oe,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=he,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new dn.EventEmitter,function(Ee,Qe,ze){Ee.set(Hi(Ee,Qe),ze)}(te,this,new dn.EventEmitter),this.eventEmitter.setMaxListeners(9999),xs(te,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(Ee){return Fe.handleError(Ee)}),this.roomClient.on("ADD_PEER",function(Ee){return Fe.handlePeerAdd(Ee)}),this.roomClient.on("REMOVE_PEER",function(Ee){return Fe.handlePeerRemove(Ee)}),this.roomClient.on("ADD_PRODUCER",function(Ee){return Fe.handleProducerAdd(Ee)}),this.roomClient.on("UPDATE_PRODUCER",function(Ee){return Fe.handleUpdateProducer(Ee)}),this.roomClient.on("REMOVE_PRODUCER",function(Ee){return Fe.handleProducerRemove(Ee)}),this.roomClient.on("ADD_CONSUMER",function(Ee){return Fe.handleConsumerAdd(Ee)}),this.roomClient.on("REMOVE_CONSUMER",function(Ee){return Fe.handleConsumerRemove(Ee)}),this.roomClient.on("CONSUMER_RESUMED",function(Ee){return Fe.handleConsumerResume(Ee)}),this.roomClient.on("CONSUMER_PAUSED",function(Ee){return Fe.handleConsumerPause(Ee)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(Ee){return Fe.handleParticipantMediaStateChanged(Ee)}),this.roomClient.on("CHAT_MESSAGE",function(Ee){return Fe.handleNewChatMessage(Ee)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(Ee){return Fe.handleSpeakerChange(Ee)}),this.roomClient.on("ENTRY_REQUESTED",function(Ee){return Fe.handleEntryRequested(Ee)}),this.roomClient.on("ENTRY_RESPONDED",function(Ee){return Fe.handleEntryResponded(Ee)}),this.roomClient.on("MEETING_JOINED",function(Ee){return Fe.handleMeetingJoined(Ee)}),this.roomClient.on("MEETING_LEFT",function(Ee){return Fe.handleMeetingLeft(Ee)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(Ee){Fe.handleRecordingStateChanged(Ee)}),this.roomClient.on("RECORDING_STARTED",function(Ee){return Fe.handleRecordingStarted(Ee)}),this.roomClient.on("RECORDING_STOPPED",function(Ee){return Fe.handleRecordingStopped(Ee)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(Ee){Fe.handleLivestreamStateChanged(Ee)}),this.roomClient.on("LIVESTREAM_STARTED",function(Ee){return Fe.handleLivestreamStarted(Ee)}),this.roomClient.on("LIVESTREAM_STOPPED",function(Ee){return Fe.handleLivestreamStopped(Ee)}),this.roomClient.on("HLS_STATE_CHANGED",function(Ee){Fe.handleHlsStateChanged(Ee)}),this.roomClient.on("HLS_STARTED",function(Ee){Fe.handleHlsStarted(Ee)}),this.roomClient.on("HLS_STOPPED",function(Ee){Fe.handleHlsStopped(Ee)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(Ee){Fe.handleTranscriptionStateChanged(Ee)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(Ee){Fe.handleTranscriptionText(Ee)}),this.roomClient.on("SUB_MANAGER_RESUMED",function(Ee){Fe.handleParticipantResumeBySubManager(Ee)}),this.roomClient.on("SUB_MANAGER_PAUSED",function(Ee){Fe.handleParticipantPausedBySubManager(Ee)}),this.roomClient.on("WHITEBOARD_STARTED",function(Ee){return Fe.handleWhiteboardStarted(Ee)}),this.roomClient.on("WHITEBOARD_STOPPED",function(Ee){return Fe.handleWhiteboardStopped(Ee)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(Ee){return Fe.handleVideoStateChanged(Ee)}),this.roomClient.on("VIDEO_SEEKED",function(Ee){return Fe.handleVideoSeeked(Ee)}),this.roomClient.on("PIN_STATE_CHANGED",function(Ee){Fe.handlePinStateChanged(Ee)}),this.roomClient.on("MIC_REQUESTED",function(Ee){return Fe.handleMicRequested(Ee)}),this.roomClient.on("WEBCAM_REQUESTED",function(Ee){return Fe.handleWebcamRequested(Ee)}),this.roomClient.on("CONNECTION_OPEN",function(Ee){return Fe.handleConnectionOpen(Ee)}),this.roomClient.on("CONNECTION_CLOSE",function(Ee){return Fe.handleConnectionClose(Ee)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(Ee){return Fe.handleConnectionParticipantJoin(Ee)}),this.roomClient.on("SWITCH_ROOM",function(Ee){return Fe.handleSwitchMeeting(Ee)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(Ee){return Fe.handleConnectionChatMessage(Ee)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(Ee){Fe.handleConnectionParticipantLeft(Ee)}),this.roomClient.on("PUBSUB_MESSAGE",function(Ee){return Hi(at,Fe,Xn).call(Fe,Ee)}),this.roomClient.on("PEER_MODE_CHANGED",function(Ee){return Hi(at,Fe,Fn).call(Fe,Ee)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(Ee){return Fe.handleMeetingStateChanged(Ee)}),this.roomClient.on("ALL_CONSUMERS_PAUSED",function(Ee){return Fe.handleConsumersPaused(Ee)}),this.roomClient.on("ALL_CONSUMERS_RESUMED",function(Ee){return Fe.handleConsumersResumed(Ee)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(Ee){return Fe.handleVideoQualityChanged(Ee)}),this.roomClient.on("ADD_CHARACTER",function(Ee){return Fe.handleAddCharacter(Ee)}),this.roomClient.on("INIT_CHARACTER",function(Ee){return Fe.handleInitCharacter(Ee)}),this.roomClient.on("REMOVE_CHARACTER",function(Ee){return Fe.handleRemoveCharacter(Ee)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(Ee){return Fe.handleCharacterStateChanged(Ee)}),this.roomClient.on("CHARACTER_MESSAGE",function(Ee){return Fe.handleCharacterMessage(Ee)}),this.roomClient.on("USER_MESSAGE",function(Ee){return Fe.handleUserMessage(Ee)}),this.roomClient.on("CHARACTER_DATA",function(Ee){return Fe.handleOnCharacterData(Ee)}),this.roomClient.on("CHARACTER_ERROR",function(Ee){return Fe.handleOnCharacterError(Ee)}),this.roomClient.on("E2EE_STATE_CHANGE",function(Ee){return Fe.handleE2EEStateChange(Ee)}),this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING",function(){return Fe.handleOnRemoveCurrentMeetingParticipant()}),this.roomClient.on("MEDIA_RELAY_STARTED",function(Ee){return Fe.handleMediaRelayStart(Ee)}),this.roomClient.on("MEDIA_RELAY_STOPPED",function(Ee){return Fe.handleMediaRelayStop(Ee)}),this.roomClient.on("MEDIA_RELAY_ERROR",function(Ee){return Fe.handleMediaRelayError(Ee)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE",function(Ee){return Fe.handleMediaRelayRequestResponse(Ee)}),this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED",function(Ee){return Fe.handleMediaRelayRequest(Ee)})},[{key:"isE2EEEnabled",get:function(){return this.roomClient.isE2EEEnabled}},{key:"handleError",value:function(J){this.eventEmitter.listenerCount(Js)>0&&this.eventEmitter.emit(Js,J)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(J){this.roomClient.changeMode(J)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(J,X){this.roomClient.respondEntry(J,X)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(J)}},{key:"publishAudio",value:(ve=(0,l.A)(u().mark(function J(){var X,he=arguments;return u().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return X=he.length>0&&he[0]!==void 0?he[0]:void 0,Oe.next=3,this.roomClient.enableMic(X);case 3:return Oe.abrupt("return");case 4:case"end":return Oe.stop()}},J,this)})),function(){return ve.apply(this,arguments)})},{key:"unpublishAudio",value:(xe=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.disableMic();case 2:return X.abrupt("return");case 3:case"end":return X.stop()}},J,this)})),function(){return xe.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(J)}},{key:"publishVideo",value:(ce=(0,l.A)(u().mark(function J(){var X,he=arguments;return u().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return X=he.length>0&&he[0]!==void 0?he[0]:void 0,this.roomClient.enableWebcam(X),Oe.abrupt("return");case 3:case"end":return Oe.stop()}},J,this)})),function(){return ce.apply(this,arguments)})},{key:"unpublishVideo",value:(Ae=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return this.roomClient.disableWebcam(),X.abrupt("return");case 2:case"end":return X.stop()}},J,this)})),function(){return Ae.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(J)}},{key:"pubblishScreenShare",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(J)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(J){this.roomClient.sendChatMessage(J);var X={text:J,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(X)}},{key:"pauseAllStreams",value:function(J){this.roomClient.pauseAllConsumers(J)}},{key:"resumeAllStreams",value:function(J){this.roomClient.resumeAllConsumers(J)}},{key:"startRecording",value:function(J,X,he,Oe){this.roomClient.startRecording(J,X,he,Oe)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(J){this.roomClient.startTranscription(J)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(J,X){this.roomClient.startLivestream(J,X)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(ke=(0,l.A)(u().mark(function J(X,he){return u().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,this.roomClient.startHls(X,he);case 2:case"end":return Oe.stop()}},J,this)})),function(J,X){return ke.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(J){if(!J.interactionId&&!J.id)throw new Error("InteractionId or id is required");return new Rt(Ln(Ln({},J),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(be=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.getMics();case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},J,this)})),function(){return be.apply(this,arguments)})},{key:"getWebcams",value:(ye=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.getWebcams();case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},J,this)})),function(){return ye.apply(this,arguments)})},{key:"changeMic",value:function(J){this.roomClient.changeMic(J)}},{key:"changeWebcam",value:function(J){this.roomClient.changeWebcam(J)}},{key:"replaceWebcamStream",value:function(J){this.roomClient.replaceWebcamStream(J)}},{key:"setWebcamQuality",value:function(J){this.roomClient.setWebcamQuality(J)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(J){var X=J.link;this.roomClient.startVideo({link:X})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(J){var X=J.currentTime;this.roomClient.pauseVideo(X)}},{key:"seekVideo",value:function(J){var X=J.currentTime;this.roomClient.seekVideo(X)}},{key:"handlePeerAdd",value:function(J){var X=J.peer,he=new Me(X);this.participants.set(he.id,he),this.eventEmitter.emit(uo,he),this.participants.size===1&&this.updateMainParticipant(he.id)}},{key:"handlePeerRemove",value:function(J){var X=J.peerId,he=this.participants.get(X);he!=null&&(this.participants.delete(X),this.eventEmitter.emit(Uo,he),this.activePresenterId===he.id&&(this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId)),this.mainParticipantId===he.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(J){var X=J.producer,he={id:X.id,rtpSender:X.rtpSender};this.localParticipant.addProducer(he);var Oe=new pn(X);this.localParticipant.addStream(Oe),Oe.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(qi,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(J){var X=J.producer,he=new pn(X);this.localParticipant.updateStream(he)}},{key:"handleProducerRemove",value:function(J){var X=J.producerId;this.localParticipant.removeProducer(X);var he=this.localParticipant.deleteStream(X);if(he&&he.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId);var Oe=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Oe||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(J){var X=J.consumer,he=J.peerId,Oe=this.participants.get(he)||this.characters.get(he);if(Oe){var Ie={id:X.id,rtpReceiver:X.rtpReceiver};Oe.addConsumer(Ie);var wt=new pn(X);Oe.addStream(wt),this.eventEmitter.emit(Yo,wt),wt.kind==="share"&&(this.activePresenterId=Oe.id,this.eventEmitter.emit(qi,this.activePresenterId),this.updateMainParticipant(Oe.id))}}},{key:"handleConsumerResume",value:function(J){var X=J.consumerId,he=J.peerId,Oe=this.participants.get(he);Oe&&Oe.streamResumed(X)}},{key:"handleConsumerPause",value:function(J){var X=J.consumerId,he=J.peerId,Oe=this.participants.get(he);Oe&&Oe.streamPaused(X)}},{key:"handleConsumerRemove",value:function(J){var X=J.consumerId,he=J.peerId,Oe=this.participants.get(he)||this.characters.get(he);if(Oe!=null&&Oe){Oe.removeConsumer(X);var Ie=Oe.deleteStream(X);if(this.eventEmitter.emit(Ti,Ie),Ie&&Ie.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId);var wt=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||wt||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(J){var X=J.peerId,he=J.kind,Oe=J.newState,Ie=this.participants.get(X)||this.characters.get(X);this.localParticipant.id==X&&(Ie=this.localParticipant),Ie&&Ie&&(he=="audio"?Ie.micOn=Oe:he=="video"&&(Ie.webcamOn=Oe),Ie.updateParticipantMediaState(he,Oe))}},{key:"handleParticipantPausedBySubManager",value:function(J){var X=this.participants.get(J.peerId);X&&X&&X.handleParticipantPause(J)}},{key:"handleParticipantResumeBySubManager",value:function(J){var X=this.participants.get(J.peerId);X&&X&&X.handleParticipantResume(J)}},{key:"handleSpeakerChange",value:function(J){var X=J.peerId;this.activeSpeakerId!==X&&(this.activeSpeakerId=X,this.eventEmitter.emit(Vo,X),X&&X!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&X!==this.mainParticipantId&&this.updateMainParticipant(X))}},{key:"handleNewChatMessage",value:function(J){var X=J.senderId,he={senderId:X,text:J.text,timestamp:J.timestamp};if(this.localParticipant.id===X)he.senderName=this.localParticipant.displayName;else{var Oe=this.participants.get(X);Oe&&(he.senderName=Oe.displayName)}this.messages.push(he),this.eventEmitter.emit(rl,he)}},{key:"updateMainParticipant",value:function(J){this.mainParticipantId=J;var X=null;X=J===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit($o,X)}},{key:"handleEntryRequested",value:function(J){var X=this,he=J.id,Oe=J.name;this.eventEmitter.emit(nl,{participantId:he,name:Oe,allow:function(){X.roomClient.respondEntry(he,"allowed")},deny:function(){X.roomClient.respondEntry(he,"denied")}})}},{key:"handleEntryResponded",value:function(J){var X=J.id,he=J.decision;this.eventEmitter.emit(Wo,X,he)}},{key:"handleMeetingJoined",value:function(J){var X=J.peers,he=J.poll,Oe=J.messages,Ie=J.baseUrl,wt=J.switchRoomId;typeof wt=="string"&&(this.id=wt),this.baseUrl=Ie,Oe.length>0&&(this.messages=Oe),this.eventEmitter.emit(wa,{switchRoomId:wt||null,peers:X,poll:he,messages:Oe})}},{key:"handleMeetingLeft",value:function(J){this.eventEmitter.emit(ii,J)}},{key:"handleRecordingStateChanged",value:function(J){this.recordingState=J.status,this.eventEmitter.emit(zo,J)}},{key:"handleLivestreamStateChanged",value:function(J){this.livestreamState=J.status,this.eventEmitter.emit(dr,J)}},{key:"handleHlsStateChanged",value:function(J){this.hlsState=J.status,J.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:J.downstreamUrl,playbackHlsUrl:J.playbackHlsUrl,livestreamUrl:J.livestreamUrl}:J.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(ra,J)}},{key:"handleTranscriptionStateChanged",value:function(J){this.transcriptionState=J.status,this.eventEmitter.emit(ul,J)}},{key:"handleTranscriptionText",value:function(J){this.eventEmitter.emit(pl,J)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(sl)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(Ho)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(qo)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(Ko)}},{key:"handleHlsStarted",value:function(J){this.eventEmitter.emit(gr,J)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(il)}},{key:"handleWhiteboardStarted",value:function(J){this.eventEmitter.emit(Go,J)}},{key:"handleWhiteboardStopped",value:function(J){(function(X){if(X==null)throw new TypeError("Cannot destructure "+X)})(J),this.eventEmitter.emit(al)}},{key:"handleAddCharacter",value:function(J){var X,he=J.id,Oe=(X=this.characters.get(he))!==null&&X!==void 0?X:new Rt(Ln(Ln({},J),{},{state:lr.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(he,Oe),this.eventEmitter.emit(fo,Oe),Oe.eventEmitter.emit(fo)}},{key:"handleInitCharacter",value:function(J){this.characters.set(J.id,J)}},{key:"handleRemoveCharacter",value:function(J){var X=J.id;if(this.characters.has(X)){var he=this.characters.get(X);this.eventEmitter.emit(sa,he),he.eventEmitter.emit(sa),this.characters.delete(X)}}},{key:"handleCharacterStateChanged",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterStateChanged(J)}},{key:"handleCharacterMessage",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterMessage(J)}},{key:"handleUserMessage",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleUserMessage(J)}},{key:"handleOnCharacterData",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterData(J)}},{key:"handleOnCharacterError",value:function(J){var X=J.id;this.characters.has(X)&&this.characters.get(X).handleCharacterError(J)}},{key:"handleOnRemoveCurrentMeetingParticipant",value:function(){var J=this;(0,ue.A)(this.participants.keys()).forEach(function(X){X!==J.localParticipant.id&&J.handlePeerRemove({peerId:X})})}},{key:"handleVideoStateChanged",value:function(J){this.eventEmitter.emit(ol,J)}},{key:"handleVideoSeeked",value:function(J){var X=J.currentTime;this.eventEmitter.emit(cl,{currentTime:X})}},{key:"handlePinStateChanged",value:function(J){var X=J.peerId,he=J.state,Oe=J.pinnedBy;this.eventEmitter.emit(po,{participantId:X,state:he,pinnedBy:Oe})}},{key:"handleMeetingStateChanged",value:function(J){var X=J.state;this.eventEmitter.emit(dl,{state:X})}},{key:"handleConsumersPaused",value:function(J){var X=J.kind;this.eventEmitter.emit(Xo,{kind:X})}},{key:"handleConsumersResumed",value:function(J){var X=J.kind;this.eventEmitter.emit(ho,{kind:X})}},{key:"handleVideoQualityChanged",value:function(J){var X=J.peerId,he=J.prevQuality,Oe=J.currentQuality,Ie=this.participants.get(X)||this.characters.get(X);Ie&&Ie&&Ie.videoQualityChanged(he,Oe)}},{key:"handleMicRequested",value:function(J){var X=this,he=J.peerId;this.eventEmitter.emit(Bs,{participantId:he,accept:function(){return X.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(J){var X=this,he=J.peerId;this.eventEmitter.emit(ll,{participantId:he,accept:function(){return X.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(J){var X=J.roomId,he=J.peer,Oe=this.connections.get(X);Oe!=null&&Oe.meeting.participantJoin(he)}},{key:"handleConnectionParticipantLeft",value:function(J){var X=J.roomId,he=J.peerId,Oe=this.connections.get(X);Oe!=null&&Oe.meeting.participantLeft(he)}},{key:"handleConnectionOpen",value:function(J){var X=J.peers,he=J.roomId,Oe=J.payload,Ie=new Ts({roomId:he,peers:X,payload:Oe});this.connections.set(Ie.id,Ie),this.eventEmitter.emit(na,Ie)}},{key:"handleConnectionClose",value:function(J){var X=J.roomId;this.connections.get(X)!=null&&(this.connections.delete(X),this.eventEmitter.emit(Jo,X))}},{key:"handleMediaRelayError",value:function(J){var X=J.meetingId,he=J.error;this.eventEmitter.emit(ec,{meetingId:X,error:he})}},{key:"handleMediaRelayRequest",value:function(J){var X=this,he=J.peerId,Oe=J.meetingId,Ie=J.displayName;this.eventEmitter.emit(xt,{participantId:he,meetingId:Oe,displayName:Ie,accept:function(){return X.roomClient.handleRelayRequestResponse({decision:"allowed",meetingId:Oe,peerId:he})},reject:function(){return X.roomClient.handleRelayRequestResponse({decision:"denied",meetingId:Oe,peerId:he})}})}},{key:"handleMediaRelayRequestResponse",value:function(J){var X=J.decision,he=J.decidedBy,Oe=J.meetingId;this.eventEmitter.emit(Wa,{decision:X,decidedBy:he,meetingId:Oe})}},{key:"handleMediaRelayStart",value:function(J){var X=J.meetingId;this.eventEmitter.emit(mo,{meetingId:X})}},{key:"handleMediaRelayStop",value:function(J){var X=J.meetingId,he=J.reason;this.eventEmitter.emit(Zo,{meetingId:X,reason:he})}},{key:"requestMediaRelay",value:(me=(0,l.A)(u().mark(function J(X){var he,Oe,Ie;return u().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(he=X.destinationMeetingId,Oe=X.token,Ie=X.kinds,he){wt.next=3;break}throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay.");case 3:return wt.next=5,this.roomClient.requestMediaRelay(he,Oe,Ie);case 5:case"end":return wt.stop()}},J,this)})),function(J){return me.apply(this,arguments)})},{key:"stopMediaRelay",value:(ne=(0,l.A)(u().mark(function J(X){return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(X){he.next=2;break}throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay.");case 2:return he.next=4,this.roomClient.stopMediaRelay(X);case 4:case"end":return he.stop()}},J,this)})),function(J){return ne.apply(this,arguments)})},{key:"enableAdaptiveSubscription",value:(le=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.enableAdaptiveSubscription();case 2:case"end":return X.stop()}},J,this)})),function(){return le.apply(this,arguments)})},{key:"disableAdaptiveSubscription",value:(Z=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.disableAdaptiveSubscription();case 2:case"end":return X.stop()}},J,this)})),function(){return Z.apply(this,arguments)})},{key:"enableE2EE",value:(W=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.toggleE2EEEnabled(!0);case 2:case"end":return X.stop()}},J,this)})),function(){return W.apply(this,arguments)})},{key:"disableE2EE",value:(U=(0,l.A)(u().mark(function J(){return u().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.roomClient.toggleE2EEEnabled(!1);case 2:case"end":return X.stop()}},J,this)})),function(){return U.apply(this,arguments)})},{key:"handleSwitchMeeting",value:function(J){var X=J.roomId,he=J.token,Oe=J.payload,Ie=J.peerId,wt=J.connectionPeerId,ut=J.connectionRoomId,et=Ie?{meetingId:X,payload:Oe,token:he,participantId:Ie}:{meetingId:X,payload:Oe,token:he,connectionParticipantId:wt,connectionMeetingId:ut};this.eventEmitter.emit(Qo,et)}},{key:"handleConnectionChatMessage",value:function(J){var X=J.roomId,he=J.peerId,Oe=J.message,Ie=this.connections.get(X);Ie!=null&&Ie.meeting.sendChatMessageEvent({participantId:he,message:Oe})}},{key:"handleE2EEStateChange",value:function(J){var X=J.peerId,he=this.localParticipant.id==X?this.localParticipant:this.participants.get(X)||this.characters.get(X);he&&he&&he.handleE2EEStateChange(J)}},{key:"connectTo",value:(F=(0,l.A)(u().mark(function J(X){var he,Oe;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return he=X.meetingId,Oe=X.payload,Ie.next=3,this.roomClient.openConnection({roomId:he,payload:Oe});case 3:case"end":return Ie.stop()}},J,this)})),function(J){return F.apply(this,arguments)})},{key:"switchTo",value:function(J){var X=J.meetingId,he=J.token;if(!X||typeof X!="string"||X.trim()==="")throw new Error("Invalid meetingId: must be a non-empty string");this.roomClient.switchTo({meetingId:X,token:he,participantId:this.localParticipant.id})}},{key:"selectedCameraDevice",get:function(){var J;return(J=this.roomClient._webcam)===null||J===void 0?void 0:J.device}},{key:"selectedMicrophoneDevice",get:function(){var J;return(J=this.roomClient._mic)===null||J===void 0?void 0:J.device}},{key:"on",value:function(J,X){switch(J){case uo:case Uo:case Vo:case qi:case $o:case rl:case nl:case Wo:case zo:case sl:case Ho:case dr:case qo:case Ko:case gr:case il:case ra:case ul:case pl:case Yo:case Ti:case Go:case al:case fo:case sa:case wa:case ii:case ol:case cl:case Bs:case ll:case po:case na:case Jo:case Qo:case dl:case $a:case Xo:case ho:case mo:case Zo:case ec:case xt:case Wa:case Js:this.eventEmitter.on(J,X);break;default:throw new Error("Invalid event type "+J)}}},{key:"off",value:function(J,X){switch(J){case uo:case Uo:case Vo:case qi:case $o:case rl:case nl:case Wo:case zo:case sl:case Ho:case dr:case qo:case Ko:case ra:case gr:case il:case ul:case pl:case Yo:case Ti:case Go:case al:case fo:case sa:case wa:case ii:case ol:case cl:case Bs:case ll:case po:case na:case Jo:case Qo:case dl:case Js:case mo:case Zo:case ec:case xt:case Wa:case $a:case Xo:case ho:this.eventEmitter.off(J,X);break;default:throw new Error("Invalid event type.")}}}]);var F,U,W,Z,le,ne,me,ye,be,ke,Ae,ce,xe,ve}();function Xn(F){var U=F.topic,W=F.message,Z=F.senderId,le=F.timestamp,ne=F.senderName,me=F.id,ye=F.payload;U&&W&&xs(te,this).emit(U,{message:W,senderId:Z,timestamp:le,topic:U,senderName:ne,id:me,payload:ye})}function Fn(F){var U=F.peerId,W=F.mode;U===this.localParticipant.id?this.localParticipant.mode=W:this.participants.get(U).mode=W,this.activePresenterId!==this.localParticipant.id||(0,De.kR)(W)||(this.activePresenterId=null,this.eventEmitter.emit(qi,this.activePresenterId)),this.eventEmitter.emit($a,{participantId:U,mode:W})}var vr=i(7080),zu=i(5071),pd=i(4973),tc=i(9027);function hl(F,U,W){return U=(0,Le.A)(U),(0,ot.A)(F,Hu()?Reflect.construct(U,W||[],(0,Le.A)(F).constructor):U.apply(F,W))}function Hu(){try{var F=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hu=function(){return!!F})()}var fl=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),hl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}((0,p.A)(function F(U,W,Z,le){(0,o.A)(this,F),this.deviceId=U,this.groupId=W,this.kind=Z,this.label=le})),qu=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),hl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}(fl),hd=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),hl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}(fl),Jh=function(F){function U(W,Z,le,ne){return(0,o.A)(this,U),hl(this,U,[W,Z,le,ne])}return(0,lt.A)(U,F),(0,p.A)(U)}(fl),Us={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},cs=(i(328),i(7654));function Pi(F,U){return F==null||U==null?NaN:F<U?-1:F>U?1:F>=U?0:NaN}function Qh(F,U){return F==null||U==null?NaN:U<F?-1:U>F?1:U>=F?0:NaN}function Xh(F){let U,W,Z;function le(ne,me,ye=0,be=ne.length){if(ye<be){if(U(me,me)!==0)return be;do{const ke=ye+be>>>1;W(ne[ke],me)<0?ye=ke+1:be=ke}while(ye<be)}return ye}return F.length!==2?(U=Pi,W=(ne,me)=>Pi(F(ne),me),Z=(ne,me)=>F(ne)-me):(U=F===Pi||F===Qh?F:Ke,W=F,Z=F),{left:le,center:function(ne,me,ye=0,be=ne.length){const ke=le(ne,me,ye,be-1);return ke>ye&&Z(ne[ke-1],me)>-Z(ne[ke],me)?ke-1:ke},right:function(ne,me,ye=0,be=ne.length){if(ye<be){if(U(me,me)!==0)return be;do{const ke=ye+be>>>1;W(ne[ke],me)<=0?ye=ke+1:be=ke}while(ye<be)}return ye}}}function Ke(){return 0}const Ku=Xh(Pi),Gu=Ku.right,Ev=(Xh(function(F){return F===null?NaN:+F}).center,Gu);function Zh(F,U){switch(arguments.length){case 0:break;case 1:this.range(F);break;default:this.range(U).domain(F)}return this}function ia(){var F,U=[.5],W=[0,1],Z=1;function le(ne){return ne!=null&&ne<=ne?W[Ev(U,ne,0,Z)]:F}return le.domain=function(ne){return arguments.length?(U=Array.from(ne),Z=Math.min(U.length,W.length-1),le):U.slice()},le.range=function(ne){return arguments.length?(W=Array.from(ne),Z=Math.min(U.length,W.length-1),le):W.slice()},le.invertExtent=function(ne){var me=W.indexOf(ne);return[U[me-1],U[me]]},le.unknown=function(ne){return arguments.length?(F=ne,le):F},le.copy=function(){return ia().domain(U).range(W).unknown(F)},Zh.apply(le,arguments)}function Ve(F,U){var W=Object.keys(F);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(F);U&&(Z=Z.filter(function(le){return Object.getOwnPropertyDescriptor(F,le).enumerable})),W.push.apply(W,Z)}return W}function Ni(F){for(var U=1;U<arguments.length;U++){var W=arguments[U]!=null?arguments[U]:{};U%2?Ve(Object(W),!0).forEach(function(Z){q(F,Z,W[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(W)):Ve(Object(W)).forEach(function(Z){Object.defineProperty(F,Z,Object.getOwnPropertyDescriptor(W,Z))})}return F}function ai(F,U){if(!(F instanceof U))throw new TypeError("Cannot call a class as a function")}function Rv(F,U){for(var W=0;W<U.length;W++){var Z=U[W];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(F,gs(Z.key),Z)}}function Qs(F,U,W){return U&&Rv(F.prototype,U),Object.defineProperty(F,"prototype",{writable:!1}),F}function q(F,U,W){return(U=gs(U))in F?Object.defineProperty(F,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):F[U]=W,F}function B(F,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(U&&U.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),U&&Y(F,U)}function V(F){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},V(F)}function Y(F,U){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,Z){return W.__proto__=Z,W},Y(F,U)}function ge(F,U){if(F==null)return{};var W,Z,le=function(me,ye){if(me==null)return{};var be,ke,Ae={},ce=Object.keys(me);for(ke=0;ke<ce.length;ke++)be=ce[ke],ye.indexOf(be)>=0||(Ae[be]=me[be]);return Ae}(F,U);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(F);for(Z=0;Z<ne.length;Z++)W=ne[Z],U.indexOf(W)>=0||Object.prototype.propertyIsEnumerable.call(F,W)&&(le[W]=F[W])}return le}function Te(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function rt(F){var U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var W,Z=V(F);if(U){var le=V(this).constructor;W=Reflect.construct(Z,arguments,le)}else W=Z.apply(this,arguments);return function(ne,me){if(me&&(typeof me=="object"||typeof me=="function"))return me;if(me!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Te(ne)}(this,W)}}function dt(F,U){for(;!Object.prototype.hasOwnProperty.call(F,U)&&(F=V(F))!==null;);return F}function qe(){return qe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(F,U,W){var Z=dt(F,U);if(Z){var le=Object.getOwnPropertyDescriptor(Z,U);return le.get?le.get.call(arguments.length<3?F:W):le.value}},qe.apply(this,arguments)}function Yt(F,U,W,Z){return Yt=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(le,ne,me,ye){var be,ke=dt(le,ne);if(ke){if((be=Object.getOwnPropertyDescriptor(ke,ne)).set)return be.set.call(ye,me),!0;if(!be.writable)return!1}if(be=Object.getOwnPropertyDescriptor(ye,ne)){if(!be.writable)return!1;be.value=me,Object.defineProperty(ye,ne,be)}else q(ye,ne,me);return!0},Yt(F,U,W,Z)}function ct(F,U,W,Z,le){if(!Yt(F,U,W,Z||F)&&le)throw new TypeError("failed to set property");return W}function Pt(F,U){return function(W){if(Array.isArray(W))return W}(F)||function(W,Z){var le=W==null?null:typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(le!=null){var ne,me,ye,be,ke=[],Ae=!0,ce=!1;try{if(ye=(le=le.call(W)).next,Z===0){if(Object(le)!==le)return;Ae=!1}else for(;!(Ae=(ne=ye.call(le)).done)&&(ke.push(ne.value),ke.length!==Z);Ae=!0);}catch(xe){ce=!0,me=xe}finally{try{if(!Ae&&le.return!=null&&(be=le.return(),Object(be)!==be))return}finally{if(ce)throw me}}return ke}}(F,U)||wn(F,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ar(F){return function(U){if(Array.isArray(U))return on(U)}(F)||function(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}(F)||wn(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wn(F,U){if(F){if(typeof F=="string")return on(F,U);var W=Object.prototype.toString.call(F).slice(8,-1);return W==="Object"&&F.constructor&&(W=F.constructor.name),W==="Map"||W==="Set"?Array.from(F):W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W)?on(F,U):void 0}}function on(F,U){(U==null||U>F.length)&&(U=F.length);for(var W=0,Z=new Array(U);W<U;W++)Z[W]=F[W];return Z}function gs(F){var U=function(W,Z){if(typeof W!="object"||W===null)return W;var le=W[Symbol.toPrimitive];if(le!==void 0){var ne=le.call(W,Z);if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(W)}(F,"string");return typeof U=="symbol"?U:String(U)}function Re(F,U){return function(W,Z){return Z.get?Z.get.call(W):Z.value}(F,rc(F,U,"get"))}function Ft(F,U,W){return function(Z,le,ne){if(le.set)le.set.call(Z,ne);else{if(!le.writable)throw new TypeError("attempted to set read only private field");le.value=ne}}(F,rc(F,U,"set"),W),W}function rc(F,U,W){if(!U.has(F))throw new TypeError("attempted to "+W+" private field on non-instance");return U.get(F)}function hr(F,U,W){if(!U.has(F))throw new TypeError("attempted to get private field on non-instance");return W}function Yu(F,U){if(U.has(F))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jt(F,U,W){Yu(F,U),U.set(F,W)}function Ps(F,U){Yu(F,U),U.add(F)}var ml="https://speed.cloudflare.com",Ju={autoStart:!0,downloadApiUrl:"".concat(ml,"/__down"),uploadApiUrl:"".concat(ml,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(ml,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(ml,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Qu={aimMeasurementScoring:{packetLoss:ia([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:ia([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:ia([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:ia([10,20,100,500],[10,5,0,-10,-20]),download:ia([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:ia([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},ef=function(F){var U=F.headers.get("server-timing");if(U){var W=U.match(/dur=([0-9.]+)/);if(W)return+W[1]}},tf=function(F){return F.responseStart-F.requestStart},rf=function(F){return F.responseEnd-F.responseStart},nf=function(F){return F.ping+F.payloadDownloadTime},sf=function(F){return F.ttfb},af=function(F,U){var W=F.duration,Z=F.transferSize,le=W/1e3;return le?8*(Z||1.005*+U)/le:void 0},of=function(F,U){var W=F.duration/1e3;return W?8*U*1.005/W:void 0},cf=cs(function(F){return"0".repeat(F)}),gl=new WeakMap,vl=new WeakMap,yl=new WeakMap,fd=new WeakMap,md=new WeakMap,gd=new WeakMap,bl=new WeakMap,vd=new WeakMap,go=new WeakMap,yd=new WeakMap,bd=new WeakMap,nc=new WeakMap,sc=new WeakMap,ic=new WeakMap,aa=new WeakMap,vo=new WeakMap,ac=new WeakMap,yo=new WeakMap,wl=new WeakMap,wd=new WeakMap,_d=new WeakMap,xd=new WeakMap,oc=new WeakSet,Sd=new WeakSet,cc=new WeakSet,Xu=new WeakSet;function _l(F){var U=this;F!==Re(this,nc)&&(Ft(this,nc,F),setTimeout(function(){return Re(U,fd).call(U,Re(U,nc))}))}function Zu(F,U){var W=this,Z=Re(this,go)[F],le=Z.bytes,ne=Z.dir,me=Re(this,ic),ye=me[ne].hasOwnProperty(le)?me[ne][le]:{timings:[],numMeasurements:Re(this,go).filter(function(be){var ke=be.bytes,Ae=be.dir;return le===ke&&ne===Ae}).map(function(be){return be.count}).reduce(function(be,ke){return be+ke},0)};U&&ye.timings.push(U),ye.timings=ye.timings.slice(-ye.numMeasurements),me[ne][le]=ye,U?setTimeout(function(){Re(W,gd).call(W,Ni({type:ne,bytes:le},U),me)}):Re(this,md).call(this,Re(this,go)[F],me)}function xl(){var F=this,U=Re(this,go),W=U[Re(this,aa)];if(Re(this,vo)>=W.count){var Z=Re(this,sc);if(Re(this,yo)>this.finishRequestDuration&&!W.bypassMinDuration){var le=W.dir;Re(this,sc)[le]=!0,Object.values(Re(this,sc)).every(function(X){return X})&&Re(this,bl).call(this,Re(this,ic))}Ft(this,vo,0),Ft(this,yo,-1/0),performance.clearResourceTimings();do Ft(this,aa,Re(this,aa)+1);while(Re(this,aa)<U.length&&Z[U[Re(this,aa)].dir]);if(Re(this,aa)>=U.length)return Ft(this,sc,{down:!0,up:!0}),hr(this,oc,_l).call(this,!1),void Re(this,bl).call(this,Re(this,ic));W=U[Re(this,aa)]}var ne=Re(this,aa);Re(this,vo)===0&&hr(this,Sd,Zu).call(this,ne);var me=W,ye=me.bytes,be=me.dir==="down",ke=Re(this,be?yd:bd),Ae=Object.assign({},Re(this,gl));be&&(Ae.bytes="".concat(ye));var ce,xe="".concat(ke.startsWith("http")||ke.startsWith("//")?"":window.location.origin).concat(ke,"?").concat(Object.entries(Ae).map(function(X){var he=Pt(X,2),Oe=he[0],Ie=he[1];return"".concat(Oe,"=").concat(Ie)}).join("&")),ve=Object.assign({},be?{}:{method:"POST",body:cf(ye)},Re(this,vl)),J=Ft(this,_d,fetch(xe,ve).then(function(X){if(X.ok)return X;throw Error(X.statusText)}).then(function(X){return F.getServerTime&&(ce=F.getServerTime(X)),X}).then(function(X){return X.text().then(function(he){return Re(F,yl)&&Re(F,yl).call(F,{url:xe,headers:X.headers,body:he}),he})}).then(function(X,he){if(J._cancel)he("cancelled");else{var Oe=performance.getEntriesByName(xe).slice(-1)[0],Ie={transferSize:Oe.transferSize,ttfb:tf(Oe),payloadDownloadTime:rf(Oe),serverTime:ce||-1,measTime:new Date};if(Ie.ping=Math.max(.01,Ie.ttfb-(ce||Re(F,wd))),Ie.duration=(be?nf:sf)(Ie),Ie.bps=(be?af:of)(Ie,ye),be&&ye){var wt=+ye;Ie.transferSize&&(Ie.transferSize<wt||Ie.transferSize/wt>1.05)&&console.warn("Requested ".concat(wt,"B but received ").concat(Ie.transferSize,"B (").concat(Math.round(Ie.transferSize/wt*1e4)/100,"%)."))}hr(F,Sd,Zu).call(F,ne,Ie);var ut=Ie.duration;Ft(F,yo,Re(F,yo)<0?ut:Math.min(Re(F,yo),ut)),Ft(F,vo,Re(F,vo)+1),Ft(F,ac,0),Re(F,wl)?Ft(F,xd,setTimeout(function(){return hr(F,cc,xl).call(F)},Re(F,wl))):hr(F,cc,xl).call(F)}}).catch(function(X){var he,Oe;J._cancel||(console.warn("Error fetching ".concat(xe,": ").concat(X)),Ft(F,ac,(he=Re(F,ac),Oe=he++,he)),Oe<20?hr(F,cc,xl).call(F):(Ft(F,ac,0),hr(F,oc,_l).call(F,!1),Re(F,vd).call(F,"Connection failed to ".concat(xe,". Gave up after ").concat(20," retries."))))}))}function lf(){var F=Re(this,_d);F&&(F._cancel=!0)}var ep=function(){function F(U){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=W.downloadApiUrl,le=W.uploadApiUrl,ne=W.throttleMs,me=ne===void 0?0:ne,ye=W.estimatedServerTime,be=ye===void 0?0:ye;if(ai(this,F),Ps(this,Xu),Ps(this,cc),Ps(this,Sd),Ps(this,oc),Jt(this,gl,{writable:!0,value:{}}),Jt(this,vl,{writable:!0,value:{}}),q(this,"finishRequestDuration",1e3),q(this,"getServerTime",ef),Jt(this,yl,{writable:!0,value:function(ke){return ke}}),Jt(this,fd,{writable:!0,value:function(){}}),Jt(this,md,{writable:!0,value:function(){}}),Jt(this,gd,{writable:!0,value:function(){}}),Jt(this,bl,{writable:!0,value:function(){}}),Jt(this,vd,{writable:!0,value:function(){}}),Jt(this,go,{writable:!0,value:void 0}),Jt(this,yd,{writable:!0,value:void 0}),Jt(this,bd,{writable:!0,value:void 0}),Jt(this,nc,{writable:!0,value:!1}),Jt(this,sc,{writable:!0,value:{down:!1,up:!1}}),Jt(this,ic,{writable:!0,value:{down:{},up:{}}}),Jt(this,aa,{writable:!0,value:0}),Jt(this,vo,{writable:!0,value:0}),Jt(this,ac,{writable:!0,value:0}),Jt(this,yo,{writable:!0,value:-1/0}),Jt(this,wl,{writable:!0,value:0}),Jt(this,wd,{writable:!0,value:0}),Jt(this,_d,{writable:!0,value:void 0}),Jt(this,xd,{writable:!0,value:void 0}),!U)throw new Error("Missing measurements argument");if(!Z)throw new Error("Missing downloadApiUrl argument");if(!le)throw new Error("Missing uploadApiUrl argument");Ft(this,go,U),Ft(this,yd,Z),Ft(this,bd,le),Ft(this,wl,me),Ft(this,wd,Math.max(0,be))}return Qs(F,[{key:"results",get:function(){return Re(this,ic)}},{key:"qsParams",get:function(){return Re(this,gl)},set:function(U){Ft(this,gl,U)}},{key:"fetchOptions",get:function(){return Re(this,vl)},set:function(U){Ft(this,vl,U)}},{key:"responseHook",set:function(U){Ft(this,yl,U)}},{key:"onRunningChange",set:function(U){Ft(this,fd,U)}},{key:"onNewMeasurementStarted",set:function(U){Ft(this,md,U)}},{key:"onMeasurementResult",set:function(U){Ft(this,gd,U)}},{key:"onFinished",set:function(U){Ft(this,bl,U)}},{key:"onConnectionError",set:function(U){Ft(this,vd,U)}},{key:"pause",value:function(){clearTimeout(Re(this,xd)),hr(this,Xu,lf).call(this),hr(this,oc,_l).call(this,!1)}},{key:"play",value:function(){Re(this,nc)||(hr(this,oc,_l).call(this,!0),hr(this,cc,xl).call(this))}}]),F}(),df=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Vs=new WeakMap,Ed=new WeakSet;function tp(F){var U=this;Re(this,Vs)&&(F?setTimeout(function(){return Re(U,Vs).play()},20):Re(this,Vs).pause())}var uf=function(F){B(W,F);var U=rt(W);function W(Z){var le,ne,me,ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=ye.measureParallelLatency,ke=be!==void 0&&be,Ae=ye.parallelLatencyThrottleMs,ce=Ae===void 0?100:Ae,xe=ye.downloadApiUrl,ve=ye.uploadApiUrl,J=ye.estimatedServerTime,X=J===void 0?0:J,he=ge(ye,df);return ai(this,W),Ps(Te(me=U.call(this,Z,Ni({downloadApiUrl:xe,uploadApiUrl:ve,estimatedServerTime:X},he))),Ed),Jt(Te(me),Vs,{writable:!0,value:void 0}),ke&&(Ft(Te(me),Vs,new ep([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:xe,uploadApiUrl:ve,estimatedServerTime:X,throttleMs:ce})),Re(Te(me),Vs).qsParams={during:"".concat(Z[0].dir,"load")},ct((le=Te(me),V(W.prototype)),"onRunningChange",hr(Te(me),Ed,tp),le,!0),ct((ne=Te(me),V(W.prototype)),"onConnectionError",function(){return Re(Te(me),Vs).pause()},ne,!0)),me}return Qs(W,[{key:"latencyResults",get:function(){return Re(this,Vs)&&Re(this,Vs).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(Z){Re(this,Vs)&&(Re(this,Vs).onMeasurementResult=function(le){return Z(le)})}},{key:"fetchOptions",get:function(){return qe(V(W.prototype),"fetchOptions",this)},set:function(Z){ct(V(W.prototype),"fetchOptions",Z,this,!0),Re(this,Vs)&&(Re(this,Vs).fetchOptions=Z)}},{key:"onRunningChange",set:function(Z){var le=this;ct(V(W.prototype),"onRunningChange",function(ne){hr(le,Ed,tp).call(le,ne),Z(ne)},this,!0)}},{key:"onConnectionError",set:function(Z){var le=this;ct(V(W.prototype),"onConnectionError",function(){Re(le,Vs)&&Re(le,Vs).pause(),Z.apply(void 0,arguments)},this,!0)}}]),W}(ep),pf=["measurementId","logApiUrl"],lc=new WeakMap,Sl=new WeakMap,El=new WeakMap,bo=new WeakMap,Rd=new WeakSet,kd=new WeakSet;function rp(F){Re(this,bo)&&(Ft(this,El,+F.headers.get("cf-meta-request-time")),Ft(this,Sl,F.body.slice(-300).split("___").pop()))}function np(F){if(Re(this,bo)){var U={type:F.type,bytes:F.bytes,ping:Math.round(F.ping),ttfb:Math.round(F.ttfb),payloadDownloadTime:Math.round(F.payloadDownloadTime),duration:Math.round(F.duration),transferSize:Math.round(F.transferSize),serverTime:Math.round(F.serverTime),token:Re(this,Sl),requestTime:Re(this,El),measId:Re(this,lc)};Ft(this,Sl,null),Ft(this,El,null),fetch(Re(this,bo),Ni({method:"POST",body:JSON.stringify(U)},this.fetchOptions))}}var sp=function(F){B(W,F);var U=rt(W);function W(Z){var le,ne,me,ye,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=be.measurementId,Ae=be.logApiUrl,ce=ge(be,pf);return ai(this,W),Ps(Te(ye=U.call(this,Z,ce)),kd),Ps(Te(ye),Rd),Jt(Te(ye),lc,{writable:!0,value:void 0}),Jt(Te(ye),Sl,{writable:!0,value:void 0}),Jt(Te(ye),El,{writable:!0,value:void 0}),Jt(Te(ye),bo,{writable:!0,value:void 0}),Ft(Te(ye),lc,ke),Ft(Te(ye),bo,Ae),ct((le=Te(ye),V(W.prototype)),"qsParams",Ae?{measId:Re(Te(ye),lc)}:{},le,!0),ct((ne=Te(ye),V(W.prototype)),"responseHook",function(xe){return hr(Te(ye),Rd,rp).call(Te(ye),xe)},ne,!0),ct((me=Te(ye),V(W.prototype)),"onMeasurementResult",function(xe){return hr(Te(ye),kd,np).call(Te(ye),xe)},me,!0),ye}return Qs(W,[{key:"qsParams",set:function(Z){ct(V(W.prototype),"qsParams",Re(this,bo)?Ni({measId:Re(this,lc)},Z):Z,this,!0)}},{key:"responseHook",set:function(Z){var le=this;ct(V(W.prototype),"responseHook",function(ne){Z(ne),hr(le,Rd,rp).call(le,ne)},this,!0)}},{key:"onMeasurementResult",set:function(Z){var le=this;ct(V(W.prototype),"onMeasurementResult",function(ne){for(var me=arguments.length,ye=new Array(me>1?me-1:0),be=1;be<me;be++)ye[be-1]=arguments[be];Z.apply(void 0,[ne].concat(ye)),hr(le,kd,np).call(le,ne)},this,!0)}}]),W}(uf),Rl=new WeakMap,Cd=new WeakMap,Td=new WeakMap,Pd=new WeakSet,Nd=new WeakSet,ip=new WeakSet,hf=function(){function F(U){if(ai(this,F),Ps(this,ip),Ps(this,Nd),Ps(this,Pd),Jt(this,Rl,{writable:!0,value:!1}),Jt(this,Cd,{writable:!0,value:void 0}),Jt(this,Td,{writable:!0,value:void 0}),!U)throw new Error("Missing operation to perform");Ft(this,Td,U),this.play()}return Qs(F,[{key:"pause",value:function(){hr(this,ip,ff).call(this),hr(this,Pd,ap).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Re(this,Rl)||(hr(this,Pd,ap).call(this,!0),hr(this,Nd,op).call(this))}}]),F}();function ap(F){F!==Re(this,Rl)&&Ft(this,Rl,F)}function op(){var F=this,U=Ft(this,Cd,Re(this,Td).call(this).then(function(){!U._cancel&&hr(F,Nd,op).call(F)}))}function ff(){var F=Re(this,Cd);F&&(F._cancel=!0)}var dc=new WeakMap,mf=function(){function F(){var U=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=W.download,le=W.upload;if(ai(this,F),q(this,"qsParams",{}),q(this,"fetchOptions",{}),Jt(this,dc,{writable:!0,value:[]}),!Z&&!le)throw new Error("Missing at least one of download/upload config");[[Z,"download"],[le,"upload"]].filter(function(me){return Pt(me,1)[0]}).forEach(function(me){var ye=Pt(me,2),be=ye[0],ke=ye[1],Ae=be.apiUrl,ce=be.chunkSize;if(!Ae)throw new Error("Missing ".concat(ke," apiUrl argument"));if(!ce)throw new Error("Missing ".concat(ke," chunkSize argument"))});var ne=function(me){var ye=me.apiUrl,be=me.qsParams,ke=be===void 0?{}:be,Ae=me.fetchOptions,ce=Ae===void 0?{}:Ae;return new hf(function(){var xe=Object.assign({},ke,U.qsParams),ve="".concat(ye.startsWith("http")||ye.startsWith("//")?"":window.location.origin).concat(ye,"?").concat(Object.entries(xe).map(function(X){var he=Pt(X,2),Oe=he[0],Ie=he[1];return"".concat(Oe,"=").concat(Ie)}).join("&")),J=Object.assign({},ce,U.fetchOptions);return fetch(ve,J).then(function(X){if(X.ok)return X;throw Error(X.statusText)}).then(function(X){return X.text()})})};Z&&Re(this,dc).push(ne({apiUrl:Z.apiUrl,qsParams:{bytes:"".concat(Z.chunkSize)}})),le&&Re(this,dc).push(ne({apiUrl:le.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(le.chunkSize)}}))}return Qs(F,[{key:"pause",value:function(){Re(this,dc).forEach(function(U){return U.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){Re(this,dc).forEach(function(U){return U.play()})}}]),F}(),gf=["iceServers","acceptIceCandidate","dataChannelCfg"],uc=new WeakMap,kl=new WeakMap,Cl=new WeakMap,pc=new WeakMap,Tl=new WeakMap,vf=function(){function F(){var U=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=W.iceServers,le=Z===void 0?[]:Z,ne=W.acceptIceCandidate,me=ne===void 0?function(ve){var J=ve.protocol||"";if(!J&&ve.candidate){var X=ve.candidate.split(" ");X.length>=3&&(J=X[2])}return J.toLowerCase()==="udp"}:ne,ye=W.dataChannelCfg,be=ye===void 0?{ordered:!1,maxRetransmits:0}:ye,ke=ge(W,gf);ai(this,F),q(this,"onOpen",function(){}),q(this,"onClose",function(){}),q(this,"onMessageReceived",function(){}),Jt(this,uc,{writable:!0,value:!1}),Jt(this,kl,{writable:!0,value:void 0}),Jt(this,Cl,{writable:!0,value:void 0}),Jt(this,pc,{writable:!0,value:void 0}),Jt(this,Tl,{writable:!0,value:void 0});var Ae=new RTCPeerConnection(Ni({iceServers:le},ke)),ce=new RTCPeerConnection(Ni({iceServers:le},ke)),xe=Ae.createDataChannel("channel",be);xe.onopen=function(){Ft(U,uc,!0),U.onOpen()},xe.onclose=function(){return U.close()},ce.ondatachannel=function(ve){var J=ve.channel;J.onclose=function(){return U.close()},J.onmessage=function(X){return U.onMessageReceived(X.data)},Ft(U,Tl,J)},Ae.onicecandidate=function(ve){ve.candidate&&me(ve.candidate)&&ce.addIceCandidate(ve.candidate)},ce.onicecandidate=function(ve){ve.candidate&&me(ve.candidate)&&Ae.addIceCandidate(ve.candidate)},Ae.createOffer().then(function(ve){return Ae.setLocalDescription(ve)}).then(function(){return ce.setRemoteDescription(Ae.localDescription)}).then(function(){return ce.createAnswer()}).then(function(ve){return ce.setLocalDescription(ve)}).then(function(){return Ae.setRemoteDescription(ce.localDescription)}),Ft(this,kl,Ae),Ft(this,Cl,ce),Ft(this,pc,xe),Ft(this,uc,!1)}return Qs(F,[{key:"send",value:function(U){return Re(this,pc).send(U)}},{key:"close",value:function(){return Re(this,kl)&&Re(this,kl).close(),Re(this,Cl)&&Re(this,Cl).close(),Re(this,pc)&&Re(this,pc).close(),Re(this,Tl)&&Re(this,Tl).close(),Re(this,uc)&&this.onClose(),Ft(this,uc,!1),this}}]),F}(),Ad=new WeakMap,Pl=new WeakMap,Od=new WeakMap,wo=new WeakMap,cp=new WeakMap,jd=new WeakMap,yf=function(){function F(){var U=this,W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=W.turnServerUri,le=W.turnServerCredsApi,ne=W.turnServerCredsApiParser,me=ne===void 0?function(et){return{turnServerUser:et.username,turnServerPass:et.credential}}:ne,ye=W.turnServerCredsApiIncludeCredentials,be=ye!==void 0&&ye,ke=W.turnServerUser,Ae=W.turnServerPass,ce=W.numMsgs,xe=ce===void 0?100:ce,ve=W.batchSize,J=ve===void 0?10:ve,X=W.batchWaitTime,he=X===void 0?10:X,Oe=W.responsesWaitTime,Ie=Oe===void 0?5e3:Oe,wt=W.connectionTimeout,ut=wt===void 0?5e3:wt;if(ai(this,F),Jt(this,Ad,{writable:!0,value:function(){}}),Jt(this,Pl,{writable:!0,value:function(){}}),Jt(this,Od,{writable:!0,value:function(){}}),q(this,"onMsgSent",function(){}),q(this,"onAllMsgsSent",function(){}),q(this,"onMsgReceived",function(){}),Jt(this,wo,{writable:!0,value:{}}),Jt(this,cp,{writable:!0,value:void 0}),Jt(this,jd,{writable:!0,value:void 0}),!Z)throw new Error("Missing turnServerUri argument");if(!(ke&&Ae||le))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Ft(this,jd,xe),(ke&&Ae?Promise.resolve({turnServerUser:ke,turnServerPass:Ae}):fetch(le,{credentials:be?"include":void 0}).then(function(et){return et.json()}).then(function(et){if(et.error)throw et.error;return et}).then(me)).catch(function(et){return Re(U,Ad).call(U,et)}).then(function(et){var Qt=et.turnServerUser,Fe=et.turnServerPass,Ee=Ft(U,cp,new vf({iceServers:[{urls:"turn:".concat(Z,"?transport=udp"),username:Qt,credential:Fe}],iceTransportPolicy:"relay"})),Qe=!1;setTimeout(function(){Qe||(Ee.close(),Re(U,Pl).call(U,"ICE connection timeout!"))},ut);var ze=Re(U,wo);Ee.onOpen=function(){Qe=!0;var Ht=U;(function yr(At){if(At<=xe){for(var Hr=At;Hr<=Math.min(xe,At+J-1);)ze[Hr]=!1,Ee.send(Hr),Ht.onMsgSent(Hr),Hr++;setTimeout(function(){return yr(Hr)},he)}else{Ht.onAllMsgsSent(Object.keys(ze).length);var Cn=function(){Ee.close(),Re(Ht,Od).call(Ht,Ht.results)},tn=setTimeout(Cn,Ie),Ms=Object.values(Re(Ht,wo)).filter(function(cn){return!cn}).length;Ee.onMessageReceived=function(cn){clearTimeout(tn),ze[cn]=!0,Ht.onMsgReceived(cn),--Ms<=0&&Object.values(Re(Ht,wo)).every(function(As){return As})?Cn():tn=setTimeout(Cn,Ie)}}})(1)},Ee.onMessageReceived=function(Ht){ze[Ht]=!0,U.onMsgReceived(Ht)}}).catch(function(et){return Re(U,Pl).call(U,et.toString())})}return Qs(F,[{key:"onCredentialsFailure",set:function(U){Ft(this,Ad,U)}},{key:"onConnectionError",set:function(U){Ft(this,Pl,U)}},{key:"onFinished",set:function(U){Ft(this,Od,U)}},{key:"results",get:function(){var U=Re(this,jd),W=Object.keys(Re(this,wo)).length,Z=Object.entries(Re(this,wo)).filter(function(le){return!Pt(le,2)[1]}).map(function(le){return+Pt(le,1)[0]});return{totalMessages:U,numMessagesSent:W,packetLoss:Z.length/W,lostMessages:Z}}}]),F}(),bf=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],oi=new WeakMap,wf=function(F){B(W,F);var U=rt(W);function W(){var Z,le,ne,me,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=ye.downloadChunkSize,ke=ye.uploadChunkSize,Ae=ye.downloadApiUrl,ce=ye.uploadApiUrl,xe=ge(ye,bf);return ai(this,W),Jt(Te(me=U.call(this,xe)),oi,{writable:!0,value:void 0}),(be||ke)&&(Ft(Te(me),oi,new mf({download:be?{apiUrl:Ae,chunkSize:be}:null,upload:ke?{apiUrl:ce,chunkSize:ke}:null})),ct((Z=Te(me),V(W.prototype)),"onCredentialsFailure",ct((ne=Te(me),V(W.prototype)),"onConnectionError",ct((le=Te(me),V(W.prototype)),"onFinished",function(){return Re(Te(me),oi).stop()},le,!0),ne,!0),Z,!0)),me}return Qs(W,[{key:"qsParams",set:function(Z){Re(this,oi)&&(Re(this,oi).qsParams=Z)}},{key:"fetchOptions",set:function(Z){Re(this,oi)&&(Re(this,oi).fetchOptions=Z)}},{key:"onCredentialsFailure",set:function(Z){var le=this;ct(V(W.prototype),"onCredentialsFailure",function(){Z.apply(void 0,arguments),Re(le,oi)&&Re(le,oi).stop()},this,!0)}},{key:"onConnectionError",set:function(Z){var le=this;ct(V(W.prototype),"onConnectionError",function(){Z.apply(void 0,arguments),Re(le,oi)&&Re(le,oi).stop()},this,!0)}},{key:"onFinished",set:function(Z){var le=this;ct(V(W.prototype),"onFinished",function(){Z.apply(void 0,arguments),Re(le,oi)&&Re(le,oi).stop()},this,!0)}}]),W}(yf),_f=["reachable"],Dd=Qs(function F(U){var W=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=Z.timeout,ne=le===void 0?-1:le,me=Z.fetchOptions,ye=me===void 0?{}:me;ai(this,F),q(this,"onFinished",function(){});var be=!1,ke=function(Ae){var ce=Ae.reachable,xe=ge(Ae,_f);be||(be=!0,W.onFinished(Ni({targetUrl:U,reachable:ce},xe)))};fetch(U,ye).then(function(Ae){ke({reachable:!0,response:Ae})}).catch(function(Ae){ke({reachable:!1,error:Ae})}),ne>0&&setTimeout(function(){return ke({reachable:!1,error:"Request timeout"})},ne)}),lp=function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!F.length)return 0;var W=F.slice().sort(function(me,ye){return me-ye}),Z=(F.length-1)*U,le=Z%1;if(le===0)return W[Math.round(Z)];var ne=[Math.floor,Math.ceil].map(function(me){return W[me(Z)]});return ne[0]+(ne[1]-ne[0])*le},za=new WeakMap,Nl=new WeakMap,xf=function(){function F(U){var W=this;ai(this,F),q(this,"getLatencyPoints",function(Z){return Z.timings.map(function(le){return le.ping})}),q(this,"getLatency",function(Z){return lp(W.getLatencyPoints(Z),Re(W,za).latencyPercentile)}),q(this,"getBandwidthPoints",function(Z){return Object.entries(Z).map(function(le){var ne=Pt(le,2),me=ne[0];return ne[1].timings.map(function(ye){var be=ye.bps,ke=ye.duration,Ae=ye.ping,ce=ye.measTime,xe=ye.serverTime,ve=ye.transferSize;return{bytes:+me,bps:be,duration:ke,ping:Ae,measTime:ce,serverTime:xe,transferSize:ve}})}).flat()}),q(this,"getBandwidth",function(Z){return lp(W.getBandwidthPoints(Z).filter(function(le){return le.duration>=Re(W,za).bandwidthMinRequestDuration}).map(function(le){return le.bps}).filter(function(le){return le}),Re(W,za).bandwidthPercentile)}),q(this,"getLoadedLatency",function(Z){return W.getLatency({timings:Re(W,Nl).call(W,Z)})}),q(this,"getLoadedJitter",function(Z){return W.getJitter({timings:Re(W,Nl).call(W,Z)})}),q(this,"getLoadedLatencyPoints",function(Z){return W.getLatencyPoints({timings:Re(W,Nl).call(W,Z)})}),q(this,"getPacketLoss",function(Z){return Z.packetLoss}),q(this,"getPacketLossDetails",function(Z){return Z}),q(this,"getReachability",function(Z){return!!Z.reachable}),q(this,"getReachabilityDetails",function(Z){return{host:Z.host,reachable:Z.reachable}}),Jt(this,za,{writable:!0,value:void 0}),Jt(this,Nl,{writable:!0,value:function(Z){return Object.values(Z).filter(function(le){return le.timings.length&&Math.min.apply(Math,ar(le.timings.map(function(ne){return ne.duration})))>=Re(W,za).loadedRequestMinDuration}).map(function(le){return le.sideLatency||[]}).flat().slice(-Re(W,za).loadedLatencyMaxPoints)}}),Ft(this,za,U)}return Qs(F,[{key:"getJitter",value:function(U){var W=this.getLatencyPoints(U);return W.length<2?null:W.reduce(function(Z,le){var ne=Z.sumDeltas,me=ne===void 0?0:ne,ye=Z.prevLatency;return{sumDeltas:me+(ye!==void 0?Math.abs(ye-le):0),prevLatency:le}},{}).sumDeltas/(W.length-1)}}]),F}(),Sf=["bad","poor","average","good","great"],re={loadedLatencyIncrease:function(F){return F.latency&&(F.downLoadedLatency||F.upLoadedLatency)?Math.max(F.downLoadedLatency,F.upLoadedLatency)-F.latency:void 0}},$={packetLoss:0},z=new WeakMap,H=function(){function F(U){ai(this,F),Jt(this,z,{writable:!0,value:void 0}),Ft(this,z,U)}return Qs(F,[{key:"getScores",value:function(U){var W=Object.assign.apply(Object,ar(Object.entries(Re(this,z).aimMeasurementScoring).map(function(Z){var le=Pt(Z,2),ne=le[0],me=le[1],ye=re.hasOwnProperty(ne)?re[ne](U):U[ne];return ye===void 0?$.hasOwnProperty(ne)?q({},ne,$[ne]):{}:q({},ne,ye===void 0?0:+me(ye))})));return Object.assign.apply(Object,[{}].concat(ar(Object.entries(Re(this,z).aimExperiencesDefs).filter(function(Z){return Pt(Z,2)[1].input.every(function(le){return W.hasOwnProperty(le)})}).map(function(Z){var le,ne=Pt(Z,2),me=ne[0],ye=ne[1],be=ye.input,ke=ye.pointThresholds,Ae=Math.max(0,(le=be.map(function(xe){return W[xe]}),le.reduce(function(xe,ve){return xe+ve},0))),ce=ia(ke,[0,1,2,3,4])(Ae);return q({},me,{points:Ae,classificationIdx:ce,classificationName:Sf[ce]})}))))}}]),F}(),K=new WeakMap,oe=new WeakMap,fe=new WeakMap,Pe=new WeakMap,Ne=new WeakMap,ft=new WeakMap,Ze=new WeakMap,ht=new WeakMap,mt=function(){function F(U){var W=this;ai(this,F),q(this,"raw",void 0),q(this,"getUnloadedLatency",function(){return Re(W,Pe).call(W,"getLatency","latency")}),q(this,"getUnloadedJitter",function(){return Re(W,Pe).call(W,"getJitter","latency")}),q(this,"getUnloadedLatencyPoints",function(){return Re(W,Pe).call(W,"getLatencyPoints","latency",[])}),q(this,"getDownLoadedLatency",function(){return Re(W,Pe).call(W,"getLoadedLatency","download")}),q(this,"getDownLoadedJitter",function(){return Re(W,Pe).call(W,"getLoadedJitter","download")}),q(this,"getDownLoadedLatencyPoints",function(){return Re(W,Pe).call(W,"getLoadedLatencyPoints","download",[])}),q(this,"getUpLoadedLatency",function(){return Re(W,Pe).call(W,"getLoadedLatency","upload")}),q(this,"getUpLoadedJitter",function(){return Re(W,Pe).call(W,"getLoadedJitter","upload")}),q(this,"getUpLoadedLatencyPoints",function(){return Re(W,Pe).call(W,"getLoadedLatencyPoints","upload",[])}),q(this,"getDownloadBandwidth",function(){return Re(W,Pe).call(W,"getBandwidth","download")}),q(this,"getDownloadBandwidthPoints",function(){return Re(W,Pe).call(W,"getBandwidthPoints","download",[])}),q(this,"getUploadBandwidth",function(){return Re(W,Pe).call(W,"getBandwidth","upload")}),q(this,"getUploadBandwidthPoints",function(){return Re(W,Pe).call(W,"getBandwidthPoints","upload",[])}),q(this,"getPacketLoss",function(){return Re(W,Pe).call(W,"getPacketLoss","packetLoss")}),q(this,"getPacketLossDetails",function(){return Re(W,Pe).call(W,"getPacketLossDetails","packetLoss",void 0,!0)}),q(this,"getScores",function(){return Re(W,fe).getScores(W.getSummary())}),Jt(this,K,{writable:!0,value:void 0}),Jt(this,oe,{writable:!0,value:void 0}),Jt(this,fe,{writable:!0,value:void 0}),Jt(this,Pe,{writable:!0,value:function(Z,le){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,me=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return W.raw.hasOwnProperty(le)&&W.raw[le].started?me&&W.raw[le].error?{error:W.raw[le].error}:Re(W,oe)[Z](W.raw[le].results):ne}}),Jt(this,Ne,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachability","v4Reachability")}}),Jt(this,ft,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachabilityDetails","v4Reachability")}}),Jt(this,Ze,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachability","v6Reachability")}}),Jt(this,ht,{writable:!0,value:function(){return Re(W,Pe).call(W,"getReachabilityDetails","v6Reachability")}}),Ft(this,K,U),this.clear(),Ft(this,oe,new xf(Re(this,K))),Ft(this,fe,new H(Re(this,K)))}return Qs(F,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(U){return U.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(ar(ar(new Set(Re(this,K).measurements.map(function(U){return U.type}))).map(function(U){return q({},U,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var U={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:Re(this,Ne),v6Reachability:Re(this,Ze)};return Object.assign.apply(Object,ar(Object.entries(U).map(function(W){var Z=Pt(W,2),le=Z[0],ne=(0,Z[1])();return ne===void 0?{}:q({},le,ne)})))}}]),F}(),pe=function(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return F&&Math.round(F*Math.pow(10,U))/Math.pow(10,U)},gt=function(F){return F.map(function(U){return pe(U,2)})},it=function(F){return F.map(function(U){return{bytes:+U.bytes,bps:pe(U.bps)}})},We={latencyMs:["getUnloadedLatencyPoints",gt],download:["getDownloadBandwidthPoints",it],upload:["getUploadBandwidthPoints",it],downLoadedLatencyMs:["getDownLoadedLatencyPoints",gt],upLoadedLatencyMs:["getUpLoadedLatencyPoints",gt],packetLoss:["getPacketLossDetails",function(F){return F.error?void 0:{numMessages:F.numMessagesSent,lossRatio:pe(F.packetLoss,4)}}]},Ue=function(F,U){var W=U.apiUrl,Z={};Object.entries(We).forEach(function(ne){var me=Pt(ne,2),ye=me[0],be=Pt(me[1],2),ke=be[0],Ae=be[1],ce=Ae===void 0?function(ve){return ve}:Ae,xe=F[ke]();xe&&(Z[ye]=ce(xe))});var le=F.getScores();le&&(Z.scores=Object.assign.apply(Object,[{}].concat(ar(Object.entries(le).map(function(ne){var me,ye=Pt(ne,2),be=ye[0],ke=ye[1];return q({},be,{points:(me=ke).points,classification:me.classificationName})}))))),fetch(W,{method:"POST",body:JSON.stringify(Z)})},Be=["type"],vt=["numPackets"],Je=["bytes"],yt=["latency","latencyUnderLoad","download","upload"],kt=function(){return"".concat(Math.round(1e16*Math.random()))},It=new WeakMap,Et=new WeakMap,bt=new WeakMap,sr=new WeakMap,Bt=new WeakMap,Ut=new WeakMap,Ar=new WeakMap,kn=new WeakMap,Zr=new WeakMap,Wr=new WeakMap,On=new WeakMap,Bn=new WeakSet,Zn=new WeakSet,Or=new WeakSet,jn=new WeakSet,Hn=new WeakSet,es=new WeakSet,en=new WeakSet,Ss=function(){function F(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ai(this,F),Ps(this,en),Ps(this,es),Ps(this,Hn),Ps(this,jn),Ps(this,Or),Ps(this,Zn),Ps(this,Bn),q(this,"onRunningChange",function(){}),q(this,"onResultsChange",function(){}),Jt(this,It,{writable:!0,value:function(){}}),Jt(this,Et,{writable:!0,value:function(){}}),Jt(this,bt,{writable:!0,value:void 0}),Jt(this,sr,{writable:!0,value:void 0}),Jt(this,Bt,{writable:!0,value:kt()}),Jt(this,Ut,{writable:!0,value:-1}),Jt(this,Ar,{writable:!0,value:void 0}),Jt(this,kn,{writable:!0,value:1e6}),Jt(this,Zr,{writable:!0,value:1e6}),Jt(this,Wr,{writable:!0,value:!1}),Jt(this,On,{writable:!0,value:!1}),Ft(this,bt,Object.assign({},Ju,U,Qu)),Ft(this,sr,new mt(Re(this,bt))),Re(this,bt).autoStart&&this.play()}return Qs(F,[{key:"results",get:function(){return Re(this,sr)}},{key:"isRunning",get:function(){return Re(this,Wr)}},{key:"isFinished",get:function(){return Re(this,On)}},{key:"onFinish",set:function(U){Ft(this,It,U)}},{key:"onError",set:function(U){Ft(this,Et,U)}},{key:"pause",value:function(){yt.includes(hr(this,Or,ts).call(this))&&Re(this,Ar).pause(),hr(this,Bn,Un).call(this,!1)}},{key:"play",value:function(){Re(this,Wr)||(hr(this,Bn,Un).call(this,!0),hr(this,en,mn).call(this))}},{key:"restart",value:function(){hr(this,Hn,mr).call(this),this.play()}}]),F}();function Un(F){F!==Re(this,Wr)&&(Ft(this,Wr,F),this.onRunningChange(Re(this,Wr)))}function er(F){var U=this;F!==Re(this,On)&&(Ft(this,On,F),F&&setTimeout(function(){return Re(U,It).call(U,U.results)}))}function ts(){return Re(this,Ut)<0||Re(this,Ut)>=Re(this,bt).measurements.length?null:Re(this,bt).measurements[Re(this,Ut)].type}function St(){return Re(this,sr).raw[hr(this,Or,ts).call(this)]||void 0}function mr(){hr(this,es,yn).call(this),Ft(this,Bt,kt()),Ft(this,Ut,-1),Ft(this,Ar,void 0),hr(this,Bn,Un).call(this,!1),hr(this,Zn,er).call(this,!1),Re(this,sr).clear()}function yn(){var F=Re(this,Ar);F&&(F.onFinished=F.onConnectionError=F.onFail=F.onMsgReceived=F.onCredentialsFailure=F.onMeasurementResult=function(){},yt.includes(hr(this,Or,ts).call(this))&&F.pause())}function mn(){var F,U=this;if(!(yt.includes(hr(this,Or,ts).call(this))&&hr(this,jn,St).call(this)&&hr(this,jn,St).call(this).started)||hr(this,jn,St).call(this).finished||hr(this,jn,St).call(this).finishedCurrentRound||hr(this,jn,St).call(this).error){if(Ft(this,Ut,(F=Re(this,Ut),++F)),Re(this,Ut)>=Re(this,bt).measurements.length)return hr(this,Bn,Un).call(this,!1),void hr(this,Zn,er).call(this,!0);var W,Z=Re(this,bt).measurements[Re(this,Ut)],le=Z.type,ne=ge(Z,Be),me=hr(this,jn,St).call(this),ye=Re(this,bt),be=ye.downloadApiUrl,ke=ye.uploadApiUrl,Ae=ye.estimatedServerTime;switch(le){case"v4Reachability":case"v6Reachability":(W=new Dd("https://".concat(ne.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(ut){me.finished=!0,me.results=Ni({host:ne.host},ut),U.onResultsChange({type:le}),hr(U,en,mn).call(U)};break;case"rpki":(W=new Dd("https://".concat(Re(this,bt).rpkiInvalidHost),{timeout:5e3})).onFinished=function(ut){(ut.response?ut.response.json():Promise.resolve()).then(function(et){me.finished=!0,me.results=Ni({host:Re(U,bt).rpkiInvalidHost,filteringInvalids:!ut.reachable},et?{asn:et.asn,name:et.name}:{}),U.onResultsChange({type:le}),hr(U,en,mn).call(U)})};break;case"nxdomain":(W=new Dd("https://".concat(ne.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(ut){me.finished=!0,me.results={host:ne.nxhost,reachable:ut.reachable},U.onResultsChange({type:le}),hr(U,en,mn).call(U)};break;case"packetLoss":case"packetLossUnderLoad":me.finished=!1;var ce=ne.numPackets,xe=ge(ne,vt),ve=Re(this,bt),J=ve.turnServerUri,X=ve.turnServerCredsApiUrl,he=ve.turnServerUser,Oe=ve.turnServerPass,Ie=ve.includeCredentials;(W=new wf(Ni({turnServerUri:J,turnServerCredsApi:X,turnServerCredsApiIncludeCredentials:Ie,turnServerUser:he,turnServerPass:Oe,numMsgs:ce,downloadChunkSize:ne.loadDown?Re(this,kn):void 0,uploadChunkSize:ne.loadUp?Re(this,Zr):void 0,downloadApiUrl:be,uploadApiUrl:ke},xe))).onMsgReceived=function(){me.results=Object.assign({},W.results),U.onResultsChange({type:le})},W.onFinished=function(){me.finished=!0,U.onResultsChange({type:le}),hr(U,en,mn).call(U)},W.onConnectionError=function(ut){me.error=ut,U.onResultsChange({type:le}),Re(U,Et).call(U,"Connection error while measuring packet loss: ".concat(ut)),hr(U,en,mn).call(U)},W.onCredentialsFailure=function(){me.error="unable to get turn server credentials",U.onResultsChange({type:le}),Re(U,Et).call(U,"Error while measuring packet loss: unable to get turn server credentials."),hr(U,en,mn).call(U)};break;case"latency":case"latencyUnderLoad":me.finished=!1,(W=new sp([{dir:"down",bytes:0,count:ne.numPackets,bypassMinDuration:!0}],{downloadApiUrl:be,uploadApiUrl:ke,estimatedServerTime:Ae,logApiUrl:Re(this,bt).logMeasurementApiUrl,measurementId:Re(this,Bt),downloadChunkSize:ne.loadDown?Re(this,kn):void 0,uploadChunkSize:ne.loadUp?Re(this,Zr):void 0})).fetchOptions={credentials:Re(this,bt).includeCredentials?"include":void 0},W.onMeasurementResult=W.onNewMeasurementStarted=function(ut,et){me.results=Object.assign({},et.down[0]),U.onResultsChange({type:le})},W.onFinished=function(){me.finished=!0,U.onResultsChange({type:le}),Re(U,Wr)&&hr(U,en,mn).call(U)},W.onConnectionError=function(ut){me.error=ut,U.onResultsChange({type:le}),Re(U,Et).call(U,"Connection error while measuring latency: ".concat(ut)),hr(U,en,mn).call(U)},W.play();break;case"download":case"upload":if(me.finished||me.error)hr(this,en,mn).call(this);else{delete me.finishedCurrentRound;var wt=Re(this,bt)["measure".concat(le==="download"?"Down":"Up","loadLoadedLatency")];(W=new sp([Ni({dir:le==="download"?"down":"up"},ne)],{downloadApiUrl:be,uploadApiUrl:ke,estimatedServerTime:Ae,logApiUrl:Re(this,bt).logMeasurementApiUrl,measurementId:Re(this,Bt),measureParallelLatency:wt,parallelLatencyThrottleMs:Re(this,bt).loadedLatencyThrottle})).fetchOptions={credentials:Re(this,bt).includeCredentials?"include":void 0},W.finishRequestDuration=Re(this,bt).bandwidthFinishRequestDuration,W.onNewMeasurementStarted=function(ut){var et=ut.count,Qt=ut.bytes,Fe=me.results=Object.assign({},me.results);!Fe.hasOwnProperty(Qt)&&(Fe[Qt]={timings:[],numMeasurements:0,sideLatency:wt?[]:void 0}),Fe[Qt].numMeasurements-Fe[Qt].timings.length!==et&&(Fe[Qt].numMeasurements+=et,U.onResultsChange({type:le}))},W.onMeasurementResult=function(ut){var et=ut.bytes,Qt=ge(ut,Je);me.results[et].timings.push(Qt),me.results=Object.assign({},me.results),U.onResultsChange({type:le})},W.onParallelLatencyResult=function(ut){me.results[ne.bytes].sideLatency.push(ut),me.results=Object.assign({},me.results),U.onResultsChange({type:le})},W.onFinished=function(ut){var et=!Re(U,bt).measurements.slice(Re(U,Ut)+1).map(function(Ee){return Ee.type}).includes(le),Qt=Math.min.apply(Math,ar(Object.values(le==="download"?ut.down:ut.up).slice(-1)[0].timings.map(function(Ee){return Ee.duration})));if(et||!ne.bypassMinDuration&&Qt>Re(U,bt).bandwidthFinishRequestDuration){me.finished=!0,U.onResultsChange({type:le});var Fe=.5*Object.keys(me.results).map(function(Ee){return+Ee}).sort(function(Ee,Qe){return Qe-Ee})[0];le==="download"&&Ft(U,kn,Fe),le==="upload"&&Ft(U,Zr,Fe)}else me.finishedCurrentRound=!0;Re(U,Wr)&&hr(U,en,mn).call(U)},W.onConnectionError=function(ut){me.error=ut,U.onResultsChange({type:le}),Re(U,Et).call(U,"Connection error while measuring ".concat(le,": ").concat(ut)),hr(U,en,mn).call(U)},W.play()}}Ft(this,Ar,W),me.started=!0,this.onResultsChange({type:le})}else Re(this,Ar).play()}var bn=new WeakMap,qn=new WeakMap,vi=function(F){B(W,F);var U=rt(W);function W(Z){var le,ne;ai(this,W);for(var me=arguments.length,ye=new Array(me>1?me-1:0),be=1;be<me;be++)ye[be-1]=arguments[be];return Jt(Te(ne=U.call.apply(U,[this,Z].concat(ye))),bn,{writable:!0,value:void 0}),Jt(Te(ne),qn,{writable:!0,value:function(ke){Re(Te(ne),bn)&&Ue(ke,{apiUrl:Re(Te(ne),bn)})}}),ct((le=Te(ne),V(W.prototype)),"onFinish",Re(Te(ne),qn),le,!0),Ft(Te(ne),bn,Object.assign({},Ju,Z,Qu).logAimApiUrl),ne}return Qs(W,[{key:"onFinish",set:function(Z){var le=this;ct(V(W.prototype),"onFinish",function(ne){Z(ne),Re(le,qn).call(le,ne)},this,!0)}}]),W}(Ss),_a=i(9633);function Ai(F,U){var W=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!W){if(Array.isArray(F)||(W=function(be,ke){if(be){if(typeof be=="string")return oa(be,ke);var Ae={}.toString.call(be).slice(8,-1);return Ae==="Object"&&be.constructor&&(Ae=be.constructor.name),Ae==="Map"||Ae==="Set"?Array.from(be):Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae)?oa(be,ke):void 0}}(F))||U){W&&(F=W);var Z=0,le=function(){};return{s:le,n:function(){return Z>=F.length?{done:!0}:{done:!1,value:F[Z++]}},e:function(be){throw be},f:le}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,me=!0,ye=!1;return{s:function(){W=W.call(F)},n:function(){var be=W.next();return me=be.done,be},e:function(be){ye=!0,ne=be},f:function(){try{me||W.return==null||W.return()}finally{if(ye)throw ne}}}}function oa(F,U){(U==null||U>F.length)&&(U=F.length);for(var W=0,Z=Array(U);W<U;W++)Z[W]=F[W];return Z}var ca=[R],$s=!1,Ns=function(){return(0,p.A)(function ce(){(0,o.A)(this,ce),(0,y.A)(this,"keyProvider",null)},null,[{key:"setKeyProvider",value:function(ce){this.keyProvider=ce}},{key:"getKeyProvider",value:function(){return this.keyProvider}},{key:"config",value:function(ce){if(!ce)throw new Error("'token' is empty, please provide it in config");this.apiKey=ce;var xe=C(Xt,void 0,T.apply(void 0,ca));window.STORE=xe,Gr.default.init({store:xe})}},{key:"getCameras",value:(Ae=(0,l.A)(u().mark(function ce(){var xe,ve,J,X;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,xe=navigator.userAgent.includes("Firefox"),ve=[],!xe){he.next=8;break}return he.next=6,new Promise(function(Oe,Ie){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var wt=(0,l.A)(u().mark(function ut(et){var Qt;return u().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,navigator.mediaDevices.enumerateDevices();case 2:Qt=Fe.sent,ve=Qt.filter(function(Ee){return Ee.kind==="videoinput"}).map(function(Ee){return new qu(Ee.deviceId,Ee.groupId,Ee.kind,Ee.label)}),Oe(ve),et.getTracks().forEach(function(Ee){return Ee.stop()});case 6:case"end":return Fe.stop()}},ut)}));return function(ut){return wt.apply(this,arguments)}}()).catch(function(wt){console.error("Error in getCameras()",wt),Ie(wt)})});case 6:he.next=12;break;case 8:return he.next=10,navigator.mediaDevices.enumerateDevices();case 10:J=he.sent,ve=J.filter(function(Oe){return Oe.kind==="videoinput"}).map(function(Oe){return new qu(Oe.deviceId,Oe.groupId,Oe.kind,Oe.label)});case 12:return he.abrupt("return",ve);case 15:he.prev=15,he.t0=he.catch(0),X=he.t0.message,he.t0 instanceof TypeError&&he.t0.name==="TypeError"&&(X=vr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(X));case 20:case"end":return he.stop()}},ce,null,[[0,15]])})),function(){return Ae.apply(this,arguments)})},{key:"getMicrophones",value:(ke=(0,l.A)(u().mark(function ce(){var xe,ve,J,X;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,xe=navigator.userAgent.includes("Firefox"),ve=[],!xe){he.next=8;break}return he.next=6,new Promise(function(Oe,Ie){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var wt=(0,l.A)(u().mark(function ut(et){var Qt;return u().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,navigator.mediaDevices.enumerateDevices();case 2:Qt=Fe.sent,ve=Qt.filter(function(Ee){return Ee.kind==="audioinput"}).map(function(Ee){return new hd(Ee.deviceId,Ee.groupId,Ee.kind,Ee.label)}),Oe(ve),et.getTracks().forEach(function(Ee){return Ee.stop()});case 6:case"end":return Fe.stop()}},ut)}));return function(ut){return wt.apply(this,arguments)}}()).catch(function(wt){console.error("Error in getMicrophones()",wt),Ie(wt)})});case 6:he.next=12;break;case 8:return he.next=10,navigator.mediaDevices.enumerateDevices();case 10:J=he.sent,ve=J.filter(function(Oe){return Oe.kind==="audioinput"}).map(function(Oe){return new hd(Oe.deviceId,Oe.groupId,Oe.kind,Oe.label)});case 12:return he.abrupt("return",ve);case 15:he.prev=15,he.t0=he.catch(0),X=he.t0.message,he.t0 instanceof TypeError&&he.t0.name==="TypeError"&&(X=vr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(X));case 20:case"end":return he.stop()}},ce,null,[[0,15]])})),function(){return ke.apply(this,arguments)})},{key:"getPlaybackDevices",value:(be=(0,l.A)(u().mark(function ce(){var xe,ve,J,X;return u().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(he.prev=0,xe=navigator.userAgent.includes("Firefox"),ve=[],!xe){he.next=8;break}return he.next=6,new Promise(function(Oe,Ie){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var wt=(0,l.A)(u().mark(function ut(et){var Qt;return u().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,navigator.mediaDevices.enumerateDevices();case 2:Qt=Fe.sent,ve=Qt.filter(function(Ee){return Ee.kind==="audiooutput"}).map(function(Ee){return new Jh(Ee.deviceId,Ee.groupId,Ee.kind,Ee.label)}),Oe(ve),et.getTracks().forEach(function(Ee){return Ee.stop()});case 6:case"end":return Fe.stop()}},ut)}));return function(ut){return wt.apply(this,arguments)}}()).catch(function(wt){console.error("Error in getPlaybackDevices()",wt),Ie(wt)})});case 6:he.next=12;break;case 8:return he.next=10,navigator.mediaDevices.enumerateDevices();case 10:J=he.sent,ve=J.filter(function(Oe){return Oe.kind==="audiooutput"}).map(function(Oe){return new Jh(Oe.deviceId,Oe.groupId,Oe.kind,Oe.label)});case 12:return he.abrupt("return",ve);case 15:he.prev=15,he.t0=he.catch(0),X=he.t0.message,he.t0 instanceof TypeError&&he.t0.name==="TypeError"&&(X="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(X));case 20:case"end":return he.stop()}},ce,null,[[0,15]])})),function(){return be.apply(this,arguments)})},{key:"getDevices",value:(ye=(0,l.A)(u().mark(function ce(){var xe,ve,J,X,he,Oe;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.prev=0,Ie.next=3,navigator.mediaDevices.enumerateDevices();case 3:xe=Ie.sent,ve=[],J=Ai(xe);try{for(J.s();!(X=J.n()).done;)he=X.value,ve.push(new fl(he.deviceId,he.groupId,he.kind,he.label))}catch(wt){J.e(wt)}finally{J.f()}return Ie.abrupt("return",ve);case 10:Ie.prev=10,Ie.t0=Ie.catch(0),Oe=Ie.t0.message,Ie.t0 instanceof TypeError&&(Oe=Ie.t0.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":Ie.t0.message),console.error("An error occurred in getDevices(), ".concat(Oe));case 15:case"end":return Ie.stop()}},ce,null,[[0,10]])})),function(){return ye.apply(this,arguments)})},{key:"on",value:function(ce,xe){if(ce!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(ce,xe)}},{key:"addDeviceChangeEvent",value:function(){var ce=this;if(!$s){this.getDevices().then(function(ve){ce.devices=ve});try{navigator.mediaDevices.addEventListener("devicechange",function(){var ve=(0,l.A)(u().mark(function J(X){var he,Oe,Ie,wt,ut;return u().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return he=ce.devices,et.next=3,ce.getDevices();case 3:ce.devices=et.sent,Oe=new Array,Ie=Ai(ce.devices),et.prev=6,ut=u().mark(function Qt(){var Fe;return u().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:Fe=wt.value,he.filter(function(Qe){return Qe.deviceId==Fe.deviceId&&Qe.kind==Fe.kind}).length==0?Oe.push(Fe):he=he.filter(function(Qe){return!(Qe.deviceId==Fe.deviceId&&Qe.kind==Fe.kind)});case 3:case"end":return Ee.stop()}},Qt)}),Ie.s();case 9:if((wt=Ie.n()).done){et.next=13;break}return et.delegateYield(ut(),"t0",11);case 11:et.next=9;break;case 13:et.next=18;break;case 15:et.prev=15,et.t1=et.catch(6),Ie.e(et.t1);case 18:return et.prev=18,Ie.f(),et.finish(18);case 21:Oe.length!=0&&ce.eventEmitter.emit("device-changed",{devices:ce.devices}),he.length!=0&&ce.eventEmitter.emit("device-changed",{devices:ce.devices});case 23:case"end":return et.stop()}},J,null,[[6,15,18,21]])}));return function(J){return ve.apply(this,arguments)}}()),$s=!0}catch(ve){var xe=ve.message;ve instanceof TypeError&&(xe=ve.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":ve.message),console.error("An error occurred in device-change event, ".concat(xe))}}}},{key:"off",value:function(ce,xe){if(ce!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(ce,xe)}},{key:"checkPermissions",value:(me=(0,l.A)(u().mark(function ce(xe){var ve,J,X,he,Oe;return u().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(xe||(xe=Us.AUDIO_AND_VIDEO),ve=new Map,!xe.includes(Us.AUDIO)&&!xe.includes(Us.AUDIO_AND_VIDEO)){Ie.next=15;break}return J=!0,Ie.prev=4,Ie.next=7,navigator.permissions.query({name:"microphone"});case 7:(X=Ie.sent).state!="prompt"&&X.state!="denied"||(J=!1),Ie.next=14;break;case 11:throw Ie.prev=11,Ie.t0=Ie.catch(4),Error("Browser does not support microphone permission check");case 14:ve.set(Us.AUDIO,J);case 15:if(!xe.includes(Us.VIDEO)&&!xe.includes(Us.AUDIO_AND_VIDEO)){Ie.next=28;break}return he=!0,Ie.prev=17,Ie.next=20,navigator.permissions.query({name:"camera"});case 20:(Oe=Ie.sent).state!="prompt"&&Oe.state!="denied"||(he=!1),Ie.next=27;break;case 24:throw Ie.prev=24,Ie.t1=Ie.catch(17),Error("Browser does not support camera permission check");case 27:ve.set(Us.VIDEO,he);case 28:return Ie.abrupt("return",ve);case 29:case"end":return Ie.stop()}},ce,null,[[4,11],[17,24]])})),function(ce){return me.apply(this,arguments)})},{key:"requestPermission",value:(ne=(0,l.A)(u().mark(function ce(xe){var ve,J,X,he,Oe,Ie,wt,ut,et,Qt,Fe,Ee,Qe;return u().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(xe||(xe=Us.AUDIO_AND_VIDEO),ve=new Map,!xe.includes(Us.AUDIO_AND_VIDEO)){ze.next=32;break}return X={audio:!0,video:!0},he=!0,ze.prev=5,ze.next=8,navigator.mediaDevices.getUserMedia(X);case 8:J=ze.sent,ze.next=30;break;case 11:if(ze.prev=11,ze.t0=ze.catch(5),!(ze.t0 instanceof DOMException)){ze.next=27;break}ze.t1=ze.t0.name,ze.next=ze.t1==="NotAllowedError"?17:ze.t1==="NotReadableError"?19:ze.t1==="NotFoundError"?21:24;break;case 17:return ze.t0.message==="Permission denied by system"&&(Oe=vr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",25);case 19:return Oe=Ws(ze.t0,"video"),ze.abrupt("break",25);case 21:return Oe=vr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Oe=vr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",25);case 24:Oe=ze.t0.message;case 25:ze.next=28;break;case 27:Oe=ze.t0 instanceof TypeError&&ze.t0.name==="TypeError"?vr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:ze.t0.message;case 28:he=!1,Oe&&console.error("An error occurred in request permission, ".concat(Oe));case 30:J&&setTimeout(function(){J.getTracks().forEach(function(Ht){Ht.stop()})},100),ve.set(Us.AUDIO_AND_VIDEO,he);case 32:if(!xe.includes(Us.VIDEO)){ze.next=62;break}return wt={audio:!1,video:!0},ut=!0,ze.prev=35,ze.next=38,navigator.mediaDevices.getUserMedia(wt);case 38:Ie=ze.sent,ze.next=60;break;case 41:if(ze.prev=41,ze.t2=ze.catch(35),!(ze.t2 instanceof DOMException)){ze.next=57;break}ze.t3=ze.t2.name,ze.next=ze.t3==="NotAllowedError"?47:ze.t3==="NotReadableError"?49:ze.t3==="NotFoundError"?51:54;break;case 47:return ze.t2.message==="Permission denied by system"&&(et=vr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",55);case 49:return et=Ws(ze.t2,"video"),ze.abrupt("break",55);case 51:return et=vr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(et=vr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",55);case 54:et=ze.t2.message;case 55:ze.next=58;break;case 57:et=ze.t2 instanceof TypeError&&ze.t2.name==="TypeError"?vr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:ze.t2.message;case 58:ut=!1,et&&console.error("An error occurred in request permission, ".concat(et));case 60:Ie&&Ie.getTracks().forEach(function(Ht){Ht.stop()}),ve.set(Us.VIDEO,ut);case 62:if(!xe.includes(Us.AUDIO)){ze.next=92;break}return Fe={audio:!0,video:!1},Ee=!0,ze.prev=65,ze.next=68,navigator.mediaDevices.getUserMedia(Fe);case 68:Qt=ze.sent,ze.next=90;break;case 71:if(ze.prev=71,ze.t4=ze.catch(65),!(ze.t4 instanceof DOMException)){ze.next=87;break}ze.t5=ze.t4.name,ze.next=ze.t5==="NotAllowedError"?77:ze.t5==="NotReadableError"?79:ze.t5==="NotFoundError"?81:84;break;case 77:return ze.t4.message==="Permission denied by system"&&(Qe=vr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",85);case 79:return Qe=Ws(ze.t4,"audio"),ze.abrupt("break",85);case 81:return Qe=vr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Qe=vr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",85);case 84:Qe=ze.t4.message;case 85:ze.next=88;break;case 87:Qe=ze.t4 instanceof TypeError&&ze.t4.name==="TypeError"?vr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:ze.t4.message;case 88:Ee=!1,Qe&&console.error("An error occurred in request permission, ".concat(Qe));case 90:Qt&&Qt.getTracks().forEach(function(Ht){Ht.stop()}),ve.set(Us.AUDIO,Ee);case 92:return ze.abrupt("return",ve);case 93:case"end":return ze.stop()}},ce,null,[[5,11],[35,41],[65,71]])})),function(ce){return ne.apply(this,arguments)})},{key:"isInt",value:function(ce){return typeof ce=="number"&&ce%1==0}},{key:"getNetworkStats",value:(le=(0,l.A)(u().mark(function ce(){var xe,ve,J,X,he,Oe,Ie=arguments;return u().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return ve=(xe=Ie.length>0&&Ie[0]!==void 0?Ie[0]:{}).timeoutDuration,J=xe.baseUrl,X=J===void 0?"api.videosdk.live":J,ve&&this.isInt(ve)||(ve=6e4),he=new Promise(function(ut,et){setTimeout(function(){et("Not able to get NetworkStats due to timeout")},ve)}),Oe=new Promise(function(ut,et){if(navigator.onLine){var Qt=new vi({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}],uploadApiUrl:"https://".concat(X,"/test-upload-speed"),downloadApiUrl:"https://".concat(X,"/test-download-speed")});Qt.isRunning?(Qt.onFinish=function(Fe){ut({downloadSpeed:parseFloat(Number(Fe.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Fe.getUploadBandwidth()/1048576).toFixed(2))})},Qt.onError=function(Fe){et("Not able to get NetworkStats")}):et("Not able to get NetworkStats")}else et("Not able to get NetworkStats due to no Network")}),wt.abrupt("return",Promise.race([Oe,he]));case 5:case"end":return wt.stop()}},ce,this)})),function(){return le.apply(this,arguments)})},{key:"checkConnection",value:(Z=(0,l.A)(u().mark(function ce(){var xe,ve,J,X,he,Oe,Ie=arguments;return u().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return ve=(xe=Ie.length>0&&Ie[0]!==void 0?Ie[0]:{}).timeoutDuration,J=xe.baseUrl,X=J===void 0?"api.videosdk.live":J,ve&&this.isInt(ve)||(ve=6e4),he=new Promise(function(ut,et){setTimeout(function(){et("TimeoutError: NetworkStats timeout")},ve)}),Oe=new Promise(function(ut,et){navigator.onLine?fetch("https://".concat(X,"/ping")).then(function(Qt){Qt.text().then(function(Fe){Fe=="pong"?ut("Connection established"):et("ConnectionError: Server unreachable")})}).catch(function(Qt){et("ConnectionError: Server unreachable")}):et("NetworkError: Offline")}),wt.abrupt("return",Promise.race([Oe,he]));case 5:case"end":return wt.stop()}},ce,this)})),function(){return Z.apply(this,arguments)})},{key:"analytics",value:function(ce){var xe,ve,J;!ce&&navigator&&navigator.userAgent&&(ve=navigator.userAgent,delete(J=f().parse(ve)).engine);try{var X;(X=ce)!==null&&X!==void 0&&X.browserUserAgent||(ve=navigator.userAgent,delete(J=f().parse(ve)).engine)}catch{}ce&&ce.rawUserAgent&&(ve=ce.rawUserAgent,delete(J=f().parse(ve)).engine),ce||(ce={});var he={};he.sdkType=ce.sdkType||"javascript",he.sdkVersion=ce.sdkVersion||"0.2.9",he.platform=ce.platform||((xe=J)===null||xe===void 0||(xe=xe.platform)===null||xe===void 0?void 0:xe.type)||"",ce.browserUserAgent=="null"?he.browserUserAgent=void 0:he.browserUserAgent=J,ce.deviceUserAgent&&(he.deviceUserAgent=ce.deviceUserAgent),this._deviceInfo=he}},{key:"initMeeting",value:function(ce){var xe,ve=ce.meetingId,J=ce.customCameraVideoTrack,X=J===void 0?void 0:J,he=ce.customMicrophoneAudioTrack,Oe=he===void 0?void 0:he,Ie=ce.autoConsume,wt=Ie===void 0||Ie,ut=ce.preferredProtocol,et=ce.mode,Qt=ce.multiStream,Fe=Qt===void 0||Qt,Ee=ce.participantId,Qe=ce.name,ze=ce.micEnabled,Ht=ce.webcamEnabled,yr=ce.maxResolution,At=ce.metaData,Hr=ce.chatEnabled,Cn=ce.useSpartialLayerAnalytics,tn=ce.signalingBaseUrl,Ms=ce.defaultCamera,cn=ce.debugMode,As=cn===void 0||cn;if(!ve)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var hc=Ee?Ee.toString():N()({length:8}).toLowerCase(),Al=Qe||N()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof ut!="string"&&(ut="UDP_OVER_TCP"),(xe=ut)===null||xe===void 0?void 0:xe.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":ut=ut.toUpperCase();break;default:ut="UDP_OVER_TCP"}if(et||(et=De.nI.SEND_AND_RECV),et!==De.nI.SEND_AND_RECV&&et!==De.nI.SIGNALLING_ONLY&&et!==De.nI.RECV_ONLY&&et!==De.nI.VIEWER&&et!==De.nI.CONFERENCE)throw new Error('"mode" can only be either '.concat(De.nI.SEND_AND_RECV," or ").concat(De.nI.SIGNALLING_ONLY," or ").concat(De.nI.RECV_ONLY," "));if(At!=null&&(0,d.A)(At)!="object")throw new Error('"metaData" can only be object.');var dp=this._deviceInfo.sdkType==="react-native",Ef=dp?Ms?Ms==="front"?1:0:X?X.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:dp?1:0:0,up=new Gr.default({roomId:ve,peerId:hc,secret:this.apiKey,device:"unknown",displayName:Al,mode:et,useSimulcast:Fe,produce:!0,consume:!0,datachannel:Hr!==!1,micEnabled:ze!==!1,webcamEnabled:Ht!==!1,maxResolution:yr||"hd",useSpartialLayerAnalytics:Cn,_deviceInfo:this._deviceInfo,customCameraVideoTrack:X,customMicrophoneAudioTrack:Oe,autoConsume:wt,preferredProtocol:ut,signalingBaseUrl:tn,metaData:At,defaultCameraIndex:Ef,debugMode:As,keyProvider:this.keyProvider});Lt.roomClient=up;var Rf=new Me({id:hc,displayName:Al,local:!0,mode:et,metaData:At});return new pr(ve,Rf,up)}},{key:"createCameraVideoTrack",value:(W=(0,l.A)(u().mark(function ce(xe){var ve,J,X,he,Oe,Ie,wt,ut,et,Qt,Fe,Ee,Qe,ze,Ht,yr;return u().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(ve=xe.cameraId,J=ve===void 0?void 0:ve,X=xe.encoderConfig,he=X===void 0?void 0:X,Oe=xe.facingMode,Ie=Oe===void 0?void 0:Oe,wt=xe.optimizationMode,ut=wt===void 0?void 0:wt,et=xe.multiStream,Qt=et===void 0||et,!J){At.next=6;break}return At.next=4,this.getCameras();case 4:(Fe=At.sent)&&Fe.some(function(Hr){return Hr.deviceId})&&(Fe.some(function(Hr){return Hr.deviceId===J})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 6:return At.prev=6,Ee=he?tc.$.videoProfiles[he]:tc.$.videoProfiles.h360p_w640p,Qe={video:{deviceId:J||void 0,facingMode:Ie||void 0,width:Ee.width,height:Ee.height,frameRate:Ee.frameRate}},At.next=11,(0,pd.lp)(Qe);case 11:return ze=At.sent,ut&&(ze.contentHint=ut),ze.encoderConfig=he||"h360p_w640p",ze.contentHint=ut||"",ze.multiStream=Qt,ze.cameraId=J,At.abrupt("return",ze);case 20:if(At.prev=20,At.t0=At.catch(6),At.t0.name!=="SecurityError"){At.next=26;break}Ht=vr.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,At.next=46;break;case 26:if(At.t0.name!=="DOMException"){At.next=30;break}Ht=vr.q.ERROR_RN_CAMERA_NOT_FOUND.message,At.next=46;break;case 30:if(!(At.t0 instanceof DOMException)){At.next=45;break}At.t1=At.t0.name,At.next=At.t1==="NotAllowedError"?34:At.t1==="NotReadableError"?36:At.t1==="NotFoundError"?38:41;break;case 34:return Ht=ci(At.t0,"video"),At.abrupt("break",43);case 36:return Ht=Ws(At.t0,"video"),At.abrupt("break",43);case 38:return Ht=vr.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ht=vr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),At.abrupt("break",43);case 41:return Ht=At.t0.message,At.abrupt("break",43);case 43:At.next=46;break;case 45:At.t0.message=="getUserMedia is not implemented in this browser"?(yr=vr.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,Ht=yr.message):Ht=At.t0.message;case 46:console.error("An error occurred in creating video track, ".concat(Ht));case 47:case"end":return At.stop()}},ce,this,[[6,20]])})),function(ce){return W.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(U=(0,l.A)(u().mark(function ce(xe){var ve,J,X,he,Oe,Ie,wt,ut,et,Qt,Fe;return u().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return ve=xe.encoderConfig,J=ve===void 0?void 0:ve,X=xe.optimizationMode,he=X===void 0?void 0:X,Oe=xe.withAudio,Ie=Oe===void 0?"enable":Oe,wt=xe.multiStream,ut=wt!==void 0&&wt,et=J?tc.$.screenShareProfiles[J]:tc.$.screenShareProfiles.h720p_15fps,Qt={audio:Ie==="enable",video:{width:et.resolution.width,height:et.resolution.height,frameRate:et.frameRate}},Ee.next=5,(0,pd.Zu)(Qt);case 5:return Fe=Ee.sent,he&&(Fe.contentHint=he),Fe.multiStream=ut,Ee.abrupt("return",Fe);case 9:case"end":return Ee.stop()}},ce)})),function(ce){return U.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(F=(0,l.A)(u().mark(function ce(xe){var ve,J,X,he,Oe,Ie,wt,ut,et,Qt,Fe,Ee;return u().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(ve=xe.noiseConfig,J=ve===void 0?void 0:ve,X=xe.encoderConfig,he=X===void 0?void 0:X,Oe=xe.microphoneId,!(Ie=Oe===void 0?void 0:Oe)){Qe.next=6;break}return Qe.next=4,this.getMicrophones();case 4:(wt=Qe.sent)&&wt.some(function(ze){return ze.deviceId})&&(wt.some(function(ze){return ze.deviceId===Ie})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 6:return Qe.prev=6,ut=he?tc.$.audioProfiles[he]:tc.$.audioProfiles.speech_standard,et={audio:{deviceId:Ie,sampleRate:ut.sampleRate,echoCancellation:J?J&&J.acousticEchoCancellation:ut.echoCancellation,autoGainControl:J?J&&J.autoGainControl:ut.autoGainControl,noiseSuppression:J?J&&J.noiseSuppression:ut.noiseSuppression,channelCount:ut.channelCount}},Qe.next=11,(0,pd.lp)(et);case 11:return(Qt=Qe.sent).encoderConfig=he||"speech_standard",Qt.microphoneId=Ie,Qe.abrupt("return",Qt);case 17:if(Qe.prev=17,Qe.t0=Qe.catch(6),Qe.t0.name!=="SecurityError"){Qe.next=23;break}Fe=vr.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,Qe.next=43;break;case 23:if(Qe.t0.name!=="DOMException"){Qe.next=27;break}Fe=vr.q.ERROR_RN_MIC_NOT_FOUND.message,Qe.next=43;break;case 27:if(!(Qe.t0 instanceof DOMException)){Qe.next=42;break}Qe.t1=Qe.t0.name,Qe.next=Qe.t1==="NotAllowedError"?31:Qe.t1==="NotReadableError"?33:Qe.t1==="NotFoundError"?35:38;break;case 31:return Fe=ci(Qe.t0,"audio"),Qe.abrupt("break",40);case 33:return Fe=Ws(Qe.t0,"audio"),Qe.abrupt("break",40);case 35:return Fe=vr.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Fe=vr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Qe.abrupt("break",40);case 38:return Fe=Qe.t0.message,Qe.abrupt("break",40);case 40:Qe.next=43;break;case 42:Qe.t0.message=="getUserMedia is not implemented in this browser"?(Ee=vr.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,Fe=Ee.message):Fe=Qe.t0.message;case 43:console.error("An error occurred in creating audio track, ".concat(Fe));case 44:case"end":return Qe.stop()}},ce,this,[[6,17]])})),function(ce){return F.apply(this,arguments)})}]);var F,U,W,Z,le,ne,me,ye,be,ke,Ae}();function ci(F,U){return(F.message==="Permission denied"||F.message==="Permission dismissed"?U==="video"?vr.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:vr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:F.message.includes("The request is not allowed by the user agent")?U==="video"?vr.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:vr.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:F.message==="Permission denied by system"?U==="video"?vr.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:vr.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:U==="video"?vr.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:vr.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Ws(F,U){return(F.message==="Device in use"?U==="video"?vr.q.ERROR_CAMERA_IN_USE:vr.q.ERROR_MICROPHONE_IN_USE:U==="video"?vr.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:vr.q.ERROR_MICROPHONE_IN_USE).message}(0,y.A)(Ns,"devices",[]),(0,y.A)(Ns,"eventEmitter",new dn),(0,y.A)(Ns,"Constants",{errors:vr.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:lr,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:zu.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:De.nI,permission:Us});var Oi=Ns})(),c})())})(L6);var Ml=L6.exports;function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(null,arguments)}var jr="videosdk-live-react-sdk",st={"participant-joined":jr+"-participant-joined","participant-left":jr+"-participant-left","speaker-changed":jr+"-speaker-changed","presenter-changed":jr+"-presenter-changed","main-participant-changed":jr+"-main-participant-changed","entry-requested":jr+"-entry-requested","entry-responded":jr+"-entry-responded","recording-started":jr+"-recording-started","recording-stopped":jr+"-recording-stopped","chat-message":jr+"-chat-message","meeting-joined":jr+"-meeting-joined","meeting-left":jr+"-meeting-left","live-stream-started":jr+"-live-stream-started","live-stream-stopped":jr+"-live-stream-stopped","video-state-changed":jr+"-video-state-changed","video-seeked":jr+"-video-seeked","webcam-requested":jr+"-webcam-requested","mic-requested":jr+"-mic-requested","pin-state-changed":jr+"-pin-state-changed","connection-open":jr+"-connection-open","connection-close":jr+"-connection-close","switch-meeting":jr+"-switch-meeting",error:jr+"-error","hls-started":jr+"-hls-started","hls-stopped":jr+"-hls-stopped","hls-state-changed":jr+"-hls-state-changed","recording-state-changed":jr+"-recording-state-changed","livestream-state-changed":jr+"-livestream-state-changed","meeting-state-changed":jr+"-meeting-state-changed","participant-mode-changed":jr+"-participant-mode-changed","transcription-state-changed":jr+"-transcription-state-changed","transcription-text":jr+"-transcription-text","character-joined":jr+"-character-joined","character-left":jr+"-character-left","whiteboard-started":jr+"-whiteboard-started","whiteboard-stopped":jr+"-whiteboard-stopped","paused-all-streams":jr+"-paused-all-streams","resumed-all-streams":jr+"-resumed-all-streams","media-relay-started":jr+"-media-relay-started","media-relay-stopped":jr+"-media-relay-stopped","media-relay-error":jr+"-media-relay-error","media-relay-request-response":jr+"-media-relay-request-response","media-relay-request-received":jr+"-media-relay-request-received"},tt=new uK;tt.setMaxListeners(9999);var F6=A.createContext(),B6=function(t){var r=t===void 0?{}:t,n=r.onParticipantJoined,s=n===void 0?function(){}:n,i=r.onParticipantLeft,c=i===void 0?function(){}:i,d=r.onSpeakerChanged,l=d===void 0?function(){}:d,o=r.onPresenterChanged,p=o===void 0?function(){}:o,y=r.onMainParticipantChanged,m=y===void 0?function(){}:y,u=r.onEntryRequested,b=u===void 0?function(){}:u,f=r.onEntryResponded,_=f===void 0?function(){}:f,g=r.onPausedAllStreams,v=g===void 0?function(){}:g,w=r.onResumedAllStreams,S=w===void 0?function(){}:w,E=r.onRecordingStarted,O=E===void 0?function(){}:E,C=r.onRecordingStopped,k=C===void 0?function(){}:C,T=r.onChatMessage,h=T===void 0?function(){}:T,x=r.onMeetingJoined,R=x===void 0?function(){}:x,P=r.onMeetingLeft,N=P===void 0?function(){}:P,j=r.onLiveStreamStarted,D=j===void 0?function(){}:j,L=r.onLiveStreamStopped,M=L===void 0?function(){}:L,I=r.onVideoStateChanged,G=I===void 0?function(){}:I,de=r.onVideoSeeked,ee=de===void 0?function(){}:de,Q=r.onWebcamRequested,ae=Q===void 0?function(){}:Q,_e=r.onMicRequested,Se=_e===void 0?function(){}:_e,ie=r.onPinStateChanged,$e=ie===void 0?function(){}:ie,je=r.onConnectionOpen,se=je===void 0?function(){}:je,ue=r.onConnetionClose,Ce=ue===void 0?function(){}:ue,He=r.onSwitchMeeting,$t=He===void 0?function(){}:He,nr=r.onError,Ct=nr===void 0?function(){}:nr,cr=r.onHlsStarted,br=cr===void 0?function(){}:cr,jt=r.onHlsStopped,nn=jt===void 0?function(){}:jt,Dt=r.onHlsStateChanged,Xt=Dt===void 0?function(){}:Dt,Gr=r.onRecordingStateChanged,dn=Gr===void 0?function(){}:Gr,Mr=r.onLivestreamStateChanged,Yr=Mr===void 0?function(){}:Mr,un=r.onMeetingStateChanged,Lt=un===void 0?function(){}:un,pn=r.onParticipantModeChanged,sn=pn===void 0?function(){}:pn,zr=r.onCharacterJoined,Lr=zr===void 0?function(){}:zr,xn=r.onCharacterLeft,Xr=xn===void 0?function(){}:xn,Pn=r.onMediaRelayStarted,Sn=Pn===void 0?function(){}:Pn,In=r.onMediaRelayStopped,Nn=In===void 0?function(){}:In,Wt=r.onMediaRelayError,Mn=Wt===void 0?function(){}:Wt,ss=r.onMediaRelayRequestResponse,hn=ss===void 0?function(){}:ss,or=r.onMediaRelayRequestReceived,Ye=or===void 0?function(){}:or;return A.useEffect(function(){return tt.on(st["participant-joined"],s),tt.on(st["participant-left"],c),tt.on(st["speaker-changed"],l),tt.on(st["presenter-changed"],p),tt.on(st["main-participant-changed"],m),tt.on(st["entry-requested"],b),tt.on(st["entry-responded"],_),tt.on(st["paused-all-streams"],v),tt.on(st["resumed-all-streams"],S),tt.on(st["recording-started"],O),tt.on(st["recording-stopped"],k),tt.on(st["chat-message"],h),tt.on(st["meeting-joined"],R),tt.on(st["meeting-left"],N),tt.on(st["live-stream-started"],D),tt.on(st["live-stream-stopped"],M),tt.on(st["video-state-changed"],G),tt.on(st["video-seeked"],ee),tt.on(st["webcam-requested"],ae),tt.on(st["mic-requested"],Se),tt.on(st["pin-state-changed"],$e),tt.on(st["connection-open"],se),tt.on(st["connection-close"],Ce),tt.on(st["switch-meeting"],$t),tt.on(st.error,Ct),tt.on(st["hls-started"],br),tt.on(st["hls-stopped"],nn),tt.on(st["hls-state-changed"],Xt),tt.on(st["recording-state-changed"],dn),tt.on(st["livestream-state-changed"],Yr),tt.on(st["meeting-state-changed"],Lt),tt.on(st["participant-mode-changed"],sn),tt.on(st["character-joined"],Lr),tt.on(st["character-left"],Xr),tt.on(st["media-relay-started"],Sn),tt.on(st["media-relay-stopped"],Nn),tt.on(st["media-relay-error"],Mn),tt.on(st["media-relay-request-response"],hn),tt.on(st["media-relay-request-received"],Ye),function(){tt.off(st["meeting-state-changed"],Lt),tt.off(st["participant-joined"],s),tt.off(st["participant-left"],c),tt.off(st["speaker-changed"],l),tt.off(st["presenter-changed"],p),tt.off(st["main-participant-changed"],m),tt.off(st["entry-requested"],b),tt.off(st["entry-responded"],_),tt.off(st["paused-all-streams"],v),tt.off(st["resumed-all-streams"],S),tt.off(st["recording-started"],O),tt.off(st["recording-stopped"],k),tt.off(st["chat-message"],h),tt.off(st["meeting-joined"],R),tt.off(st["meeting-left"],N),tt.off(st["live-stream-started"],D),tt.off(st["live-stream-stopped"],M),tt.off(st["video-state-changed"],G),tt.off(st["video-seeked"],ee),tt.off(st["webcam-requested"],ae),tt.off(st["mic-requested"],Se),tt.off(st["pin-state-changed"],$e),tt.off(st["connection-open"],se),tt.off(st["connection-close"],Ce),tt.off(st["switch-meeting"],$t),tt.off(st.error,Ct),tt.off(st["hls-started"],br),tt.off(st["hls-stopped"],nn),tt.off(st["hls-state-changed"],Xt),tt.off(st["recording-state-changed"],dn),tt.off(st["livestream-state-changed"],Yr),tt.off(st["participant-mode-changed"],sn),tt.off(st["character-joined"],Lr),tt.off(st["character-left"],Xr),tt.off(st["media-relay-started"],Sn),tt.off(st["media-relay-stopped"],Nn),tt.off(st["media-relay-error"],Mn),tt.off(st["media-relay-request-response"],hn),tt.off(st["media-relay-request-received"],Ye)}},[]),A.useContext(F6)},pK="0.3.11",hK=function(t){var r=t.children,n=t.config,s=t.token,i=t.joinWithoutUserInteraction,c=t.reinitialiseMeetingOnConfigChange,d=t.deviceInfo,l=t.keyProvider,o=A.useState(null),p=o[0],y=o[1],m=A.useState(null),u=m[0],b=m[1],f=A.useState(null),_=f[0],g=f[1],v=A.useState(null),w=v[0],S=v[1],E=A.useState(null),O=E[0],C=E[1],k=A.useState(!1),T=k[0],h=k[1],x=A.useState(!1),R=x[0],P=x[1],N=A.useState(!1),j=N[0],D=N[1],L=A.useState(!1),M=L[0],I=L[1],G=A.useState([]),de=G[0],ee=G[1],Q=A.useState(new Map),ae=Q[0],_e=Q[1],Se=A.useState(new Map),ie=Se[0],$e=Se[1],je=A.useState(new Map),se=je[0],ue=je[1],Ce=A.useState(!1),He=Ce[0],$t=Ce[1],nr=A.useState(new Map),Ct=nr[0],cr=nr[1],br=A.useState(!1),jt=br[0],nn=br[1],Dt=A.useState(!1),Xt=Dt[0],Gr=Dt[1],dn=A.useState("RECORDING_STOPPED"),Mr=dn[0],Yr=dn[1],un=A.useState("LIVESTREAM_STOPPED"),Lt=un[0],pn=un[1],sn=A.useState("HLS_STOPPED"),zr=sn[0],Lr=sn[1],xn=A.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Xr=xn[0],Pn=xn[1],Sn=A.useState("TRANSCRIPTION_STOPPED"),In=Sn[0],Nn=Sn[1],Wt=A.useRef(),Mn=A.useRef(),ss=A.useRef(),hn=A.useRef(),or=A.useRef(),Ye=A.useRef(l),Me=A.useRef(n),ot=A.useRef(s),Le=A.useRef(!1),lt=A.useRef(),lr=A.useMemo(function(){return c},[]);A.useEffect(function(){Wt.current=p},[p]),A.useEffect(function(){Mn.current=T},[T]),A.useEffect(function(){ss.current=R},[R]),A.useEffect(function(){hn.current=j},[j]),A.useEffect(function(){or.current=M},[M]),A.useEffect(function(){Me.current=n},[n]),A.useEffect(function(){ot.current=s},[s]),A.useEffect(function(){lt.current=Xt},[Xt]);var De=function(){y(null),b(null),g(null),S(null),C(null),h(!1),P(!1),D(!1),I(!1),ee([]),$t(!1),_e(new Map),$e(new Map),ue(new Map),cr(new Map),nn(!1),Gr(!1),Yr("RECORDING_STOPPED"),pn("LIVESTREAM_STOPPED"),Lr("HLS_STOPPED"),Nn("TRANSCRIPTION_STOPPED"),Pn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Zt=function(te){_e(function(at){at.set(te.id,te);var pr=new Map(at);return pr}),tt.emit(st["participant-joined"],te)},Vt=function(te){_e(function(at){at.delete(te.id);var pr=new Map(at);return pr}),tt.emit(st["participant-left"],te)},_r=function(te){var at,pr;C(te),D(te===(Wt==null||(at=Wt.current)===null||at===void 0||(pr=at.localParticipant)===null||pr===void 0?void 0:pr.id)),tt.emit(st["presenter-changed"],te)},fr=function(te){g(te),tt.emit(st["main-participant-changed"],te)},Pr=function(te){S(te),tt.emit(st["speaker-changed"],te)},Xe=function(te){ee(function(at){return[].concat(at,[te])}),tt.emit(st["chat-message"],te)},Kt=function(te){tt.emit(st["entry-requested"],te)},Tt=function(te,at){tt.emit(st["entry-responded"],te,at)},zt=function(){I(!0),tt.emit(st["recording-started"])},Fr=function(){I(!1),tt.emit(st["recording-stopped"])},Nr=function(te){te.track.readyState==="live"&&(te.kind==="video"?P(!0):te.kind==="audio"&&h(!0))},Vr=function(te){te.kind==="video"?P(!1):te.kind==="audio"&&h(!1)},Er=function(te){$t(!0),tt.emit(st["live-stream-started"],te)},xr=function(){$t(!1),tt.emit(st["live-stream-stopped"])},Jr=function(te){Gr(!0),tt.emit(st["hls-started"],te)},Qn=function(){Gr(!1),tt.emit(st["hls-stopped"])},is=function(te){tt.emit(st["video-state-changed"],te)},Ks=function(te){tt.emit(st["video-seeked"],te)},Gs=function(te){tt.emit(st["webcam-requested"],te)},mi=function(te){tt.emit(st["mic-requested"],te)},Ci=function(te){te.switchRoomId?(ee(function(at){return[].concat(at,te.messages)}),tt.emit(st["meeting-joined"],te)):(Le.current=!0,ee(function(at){return[].concat(at,te.messages)}),tt.emit(st["meeting-joined"],te),nn(!0))},gi=function(){tt.emit(st["meeting-left"]);var te=Wt.current;if(te){var at;typeof(te==null?void 0:te.off)=="function"&&(te.off("meeting-state-changed",Tr),te.off("participant-joined",Zt),te.off("participant-left",Vt),te.off("presenter-changed",_r),te.off("main-participant-changed",fr),te.off("speaker-changed",Pr),te.off("entry-requested",Kt),te.off("entry-responded",Tt),te.off("chat-message",Xe),te.off("recording-started",zt),te.off("recording-stopped",Fr),te.off("meeting-joined",Ci),te.off("meeting-left",gi),te.off("livestream-started",Er),te.off("livestream-stopped",xr),te.off("video-state-changed",is),te.off("video-seeked",Ks),te.off("webcam-requested",Gs),te.off("mic-requested",mi),te.off("pin-state-changed",as),te.off("paused-all-streams",os),te.off("resumed-all-streams",zi),te.off("connection-open",Rt),te.off("connection-close",ir),te.off("switch-meeting",Gt),te.off("error",Rn),te.off("hls-started",Jr),te.off("hls-stopped",Qn),te.off("recording-state-changed",ur),te.off("livestream-state-changed",Sr),te.off("hls-state-changed",fn),te.off("participant-mode-changed",xs),te.off("whiteboard-stopped",An),te.off("whiteboard-started",Ts),te.off("transcription-state-changed",Rr),te.off("character-joined",Ln),te.off("character-left",Ys)),typeof(te==null||(at=te.localParticipant)===null||at===void 0?void 0:at.off)=="function"&&(te.localParticipant.off("stream-enabled",Nr),te.localParticipant.off("stream-disabled",Vr)),De()}},as=function(te){var at=te.participantId,pr=te.state,Xn=te.pinnedBy;ue(function(Fn){!pr.cam&&!pr.share?Fn.delete(at):Fn.set(at,pr);var vr=new Map(Fn);return vr}),tt.emit(st["pin-state-changed"],{participantId:at,state:pr,pinnedBy:Xn})},os=function(te){var at=te.kind;tt.emit(st["paused-all-streams"],{kind:at})},zi=function(te){var at=te.kind;tt.emit(st["resumed-all-streams"],{kind:at})},Rt=function(te){cr(function(at){at.set(te.id,te);var pr=new Map(at);return pr}),tt.emit(st["connection-open"],te)},ir=function(te){cr(function(at){at.delete(te);var pr=new Map(at);return pr}),tt.emit(st["connection-close"],te)},Gt=function(te){tt.emit(st["switch-meeting"],te)},Rn=function(te){tt.emit(st.error,te)},ur=function(te){Yr(te==null?void 0:te.status),tt.emit(st["recording-state-changed"],te)},Sr=function(te){pn(te==null?void 0:te.status),tt.emit(st["livestream-state-changed"],te)},fn=function(te){Lr(te==null?void 0:te.status),(te==null?void 0:te.status)=="HLS_PLAYABLE"?Pn({downstreamUrl:te==null?void 0:te.downstreamUrl,playbackHlsUrl:te==null?void 0:te.playbackHlsUrl,livestreamUrl:te==null?void 0:te.livestreamUrl}):(te==null?void 0:te.status)=="HLS_STOPPED"&&Pn({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),tt.emit(st["hls-state-changed"],te)},Tr=function(te){tt.emit(st["meeting-state-changed"],te)},Rr=function(te){Nn(te==null?void 0:te.status),tt.emit(st["transcription-state-changed"],te)},an=function(te){tt.emit(st["transcription-text"],te)},Ts=function(te){tt.emit(st["whiteboard-started"],te)},An=function(te){tt.emit(st["whiteboard-stopped"],te)},Ln=function(te){$e(function(at){at.set(te.id,te);var pr=new Map(at);return pr}),tt.emit(st["character-joined"],te)},Ys=function(te){$e(function(at){at.delete(te.id);var pr=new Map(at);return pr}),tt.emit(st["character-left"],te)},xs=function(te){var at,pr;_e(function(Xn){var Fn=Xn.get(te.participantId);Fn.mode=te.mode,Xn.set(Fn.id,Fn);var vr=new Map(Xn);return vr}),te.participantId===(Wt==null||(at=Wt.current)===null||at===void 0||(pr=at.localParticipant)===null||pr===void 0?void 0:pr.id)&&b(function(Xn){return Xn.mode=te.mode,Xn}),tt.emit(st["participant-mode-changed"],te)},Hi=function(te){tt.emit(st["media-relay-started"],te)},Js=function(te){tt.emit(st["media-relay-stopped"],te)},wa=function(te){tt.emit(st["media-relay-error"],te)},ii=function(te){tt.emit(st["media-relay-request-response"],te)},$a=function(te){tt.emit(st["media-relay-request-received"],te)},uo=function(){var te=Ml.VideoSDK&&Ml.VideoSDK.initMeeting(Me.current);y(te);var at=te.localParticipant,pr=te.participants,Xn=te.characters;pr.set(at.id,at),_e(pr),$e(Xn),b(at),te.on("meeting-state-changed",Tr),te.on("participant-joined",Zt),te.on("participant-left",Vt),te.on("presenter-changed",_r),te.on("main-participant-changed",fr),te.on("speaker-changed",Pr),te.on("entry-requested",Kt),te.on("entry-responded",Tt),te.on("chat-message",Xe),te.on("recording-started",zt),te.on("recording-stopped",Fr),te.on("meeting-joined",Ci),te.on("meeting-left",gi),te.on("livestream-started",Er),te.on("livestream-stopped",xr),te.on("video-state-changed",is),te.on("video-seeked",Ks),te.on("webcam-requested",Gs),te.on("mic-requested",mi),te.on("pin-state-changed",as),te.on("paused-all-streams",os),te.on("resumed-all-streams",zi),te.on("connection-open",Rt),te.on("connection-close",ir),te.on("switch-meeting",Gt),te.on("error",Rn),te.on("hls-started",Jr),te.on("hls-stopped",Qn),te.on("recording-state-changed",ur),te.on("livestream-state-changed",Sr),te.on("hls-state-changed",fn),te.on("participant-mode-changed",xs),te.on("transcription-state-changed",Rr),te.on("transcription-text",an),te.on("whiteboard-started",Ts),te.on("whiteboard-stopped",An),te.on("character-joined",Ln),te.on("character-left",Ys),te.on("media-relay-started",Hi),te.on("media-relay-stopped",Js),te.on("media-relay-error",wa),te.on("media-relay-request-response",ii),te.on("media-relay-request-received",$a),te.localParticipant.on("stream-enabled",Nr),te.localParticipant.on("stream-disabled",Vr),te.join()},Uo=function(){var te=Wt.current;te&&te.leave()},Vo=function(){var te=Wt.current;te&&te.end()},qi=function(te){var at=Wt.current;at&&at.pauseAllStreams(te)},$o=function(te){var at=Wt.current;at&&at.resumeAllStreams(te)},rl=function(te,at,pr,Xn){var Fn=Wt.current;Fn&&Fn.startRecording(te,at,pr,Xn)},nl=function(){var te=Wt.current;if(te){var at=or.current;at&&te.stopRecording()}},Wo=function(te){te===void 0&&(te=void 0);var at=Wt.current;at&&at.unmuteMic(te)},zo=function(){var te=Wt.current;te&&te.muteMic()},sl=function(te){te===void 0&&(te=void 0);var at=Mn.current;at?zo():Wo(te)},Ho=function(){var te=Wt.current;te&&te.disableWebcam()},dr=function(te){te===void 0&&(te=void 0);var at=Wt.current;at&&at.enableWebcam(te)},qo=function(te){te===void 0&&(te=void 0);var at=ss.current;at?Ho():dr(te)},Ko=function(te){var at=te.meetingId,pr=te.token,Xn=Wt.current;Xn&&Xn.switchTo({meetingId:at,token:pr})},ra=function(){var te=Wt.current;te&&te.disableScreenShare()},gr=function(te){te===void 0&&(te=void 0);var at=Wt.current;at&&at.enableScreenShare(te)},il=function(te){te===void 0&&(te=void 0);var at=hn.current;at?ra():gr(te)},Go=function(te){var at=Wt.current;at&&at.changeMode(te)},al=function(te){var at=Wt.current;at&&at.sendChatMessage(te)},ol=function(te,at){var pr=Wt.current;pr&&pr.respondEntry(te,at)},cl=function(){try{var te=Wt.current;return Promise.resolve(function(){if(te)return Promise.resolve(te.getMics())}())}catch(at){return Promise.reject(at)}},Bs=function(){try{var te=Wt.current;return Promise.resolve(function(){if(te)return Promise.resolve(te.getWebcams())}())}catch(at){return Promise.reject(at)}},ll=function(te){var at=Wt.current;at&&at.changeWebcam(te)},Yo=function(te){var at=Wt.current;at&&at.replaceWebcamStream(te)},Ti=function(te){var at=Wt.current;at&&at.changeMic(te)},po=function(te){var at=te.link,pr=Wt.current;pr&&pr.startVideo({link:at})},na=function(){var te=Wt.current;te&&te.stopVideo()},Jo=function(){var te=Wt.current;te&&te.resumeVideo()},Qo=function(te){var at=te.currentTime,pr=Wt.current;pr&&pr.pauseVideo({currentTime:at})},dl=function(){var te=Wt.current;te&&te.enableAdaptiveSubscription()},Xo=function(){var te=Wt.current;te&&te.disableAdaptiveSubscription()},ho=function(te){var at=te.destinationMeetingId,pr=te.token,Xn=te.kinds,Fn=Wt.current;Fn&&Fn.requestMediaRelay({destinationMeetingId:at,token:pr,kinds:Xn})},ul=function(te){var at=Wt.current;at&&at.stopMediaRelay(te)},pl=function(te){var at=te.currentTime,pr=Wt.current;pr&&pr.seekVideo({currentTime:at})},fo=function(te,at){var pr=Wt.current;pr&&pr.startLivestream(te,at)},sa=function(){var te=Wt.current;te&&te.stopLivestream()},mo=function(te){var at=te.meetingId,pr=te.payload;try{var Xn=Wt.current,Fn=function(){if(Xn)return Promise.resolve(Xn.connectTo({meetingId:at,payload:pr})).then(function(){})}();return Promise.resolve(Fn&&Fn.then?Fn.then(function(){}):void 0)}catch(vr){return Promise.reject(vr)}},Zo=function(te,at){var pr=Wt.current;pr&&pr.startHls(te,at)},ec=function(){var te=Wt.current;te&&te.stopHls()},Wa=function(){Ml.VideoSDK.config(ot.current),Ye.current&&Ml.VideoSDK.setKeyProvider(Ye.current),d?Ml.VideoSDK.analytics(d):Ml.VideoSDK.analytics({sdkType:"react-web",sdkVersion:pK}),i&&uo()};return A.useEffect(function(){Wa()},[]),A.useEffect(function(){lr&&Le.current&&(Uo(),Wa(),!i&&uo())},[n.meetingId,s,lr]),pt.createElement(F6.Provider,{value:{meetingId:p==null?void 0:p.id,meeting:p,baseUrl:p==null?void 0:p.baseUrl,localParticipant:u,mainParticipant:_,activeSpeakerId:w,participants:ae,characters:ie,presenterId:O,localMicOn:T,localWebcamOn:R,localScreenShareOn:j,messages:de,isRecording:M,isLiveStreaming:He,pinnedParticipants:se,connections:Ct,isHls:Xt,recordingState:Mr,livestreamState:Lt,hlsState:zr,hlsUrls:Xr,transcriptionState:In,isMeetingJoined:jt,selectedCameraDevice:p==null?void 0:p.selectedCameraDevice,selectedMicrophoneDevice:p==null?void 0:p.selectedMicrophoneDevice,join:uo,leave:Uo,end:Vo,pauseAllStreams:qi,resumeAllStreams:$o,startRecording:rl,stopRecording:nl,sendChatMessage:al,respondEntry:ol,muteMic:zo,unmuteMic:Wo,toggleMic:sl,disableWebcam:Ho,enableWebcam:dr,toggleWebcam:qo,disableScreenShare:ra,enableScreenShare:gr,toggleScreenShare:il,switchTo:Ko,getMics:cl,getWebcams:Bs,changeWebcam:ll,replaceWebcamStream:Yo,changeMic:Ti,changeMode:Go,startVideo:po,stopVideo:na,resumeVideo:Jo,pauseVideo:Qo,seekVideo:pl,startLivestream:fo,stopLivestream:sa,connectTo:mo,startHls:Zo,stopHls:ec,enableAdaptiveSubscription:dl,disableAdaptiveSubscription:Xo,requestMediaRelay:ho,stopMediaRelay:ul}},r)},fK=function(t,r){var n={},s=n.onStreamEnabled,i=s===void 0?function(){}:s,c=n.onStreamDisabled,d=c===void 0?function(){}:c,l=n.onMediaStatusChanged,o=l===void 0?function(){}:l,p=n.onVideoQualityChanged,y=p===void 0?function(){}:p,m=n.onStreamPaused,u=m===void 0?function(){}:m,b=n.onStreamResumed,f=b===void 0?function(){}:b,_=n.onProducerAdded,g=_===void 0?function(){}:_,v=n.onProducerRemoved,w=v===void 0?function(){}:v,S=n.onConsumerAdded,E=S===void 0?function(){}:S,O=n.onConsumerRemoved,C=O===void 0?function(){}:O,k=A.useState(null),T=k[0],h=k[1],x=A.useState(null),R=x[0],P=x[1],N=A.useState(null),j=N[0],D=N[1],L=A.useState(null),M=L[0],I=L[1],G=B6(),de=A.useMemo(function(){var or,Ye=G==null?void 0:G.participants,Me=G==null?void 0:G.localParticipant,ot=G==null?void 0:G.activeSpeakerId,Le=G==null?void 0:G.mainParticipant,lt=(G==null||(or=G.pinnedParticipants)===null||or===void 0?void 0:or.get(t))||{cam:!1,share:!1};return{participants:Ye,localParticipant:Me,activeSpeakerId:ot,mainParticipant:Le,pinState:lt}},[G]),ee=de.participants,Q=de.localParticipant,ae=de.activeSpeakerId,_e=de.mainParticipant,Se=de.pinState,ie=ee==null?void 0:ee.get(t),$e=A.useState(ie==null?void 0:ie.webcamOn),je=$e[0],se=$e[1],ue=A.useState(ie==null?void 0:ie.micOn),Ce=ue[0],He=ue[1],$t=A.useState(ie==null?void 0:ie.mode),nr=$t[0],Ct=$t[1],cr=function(Ye){if(Ye.track.readyState==="live")switch(Ye.kind){case"video":T!=null&&h(null),h(Ye);break;case"audio":R!=null&&P(null),P(Ye);break;case"share":j!=null&&D(null),D(Ye);break;case"shareAudio":M!=null&&I(null),I(Ye);break}},br=function(Ye){switch(Ye.kind){case"video":h(null);break;case"audio":P(null);break;case"share":D(null);break;case"shareAudio":I(null);break}},jt=function(Ye){cr(Ye),i(Ye)},nn=function(Ye){t===Ye.participantId&&Ct(Ye.mode)},Dt=function(Ye){br(Ye),d(Ye)},Xt=function(Ye){var Me=Ye.peerId,ot=Ye.prevQuality,Le=Ye.currentQuality;y({peerId:Me,prevQuality:ot,currentQuality:Le})},Gr=function(Ye){var Me=Ye.kind,ot=Ye.peerId,Le=Ye.newStatus;Me=="audio"?He(Le):Me=="video"&&se(Le),o({kind:Me,peerId:ot,newStatus:Le})},dn=function(Ye){ie==null||ie.setQuality(Ye)},Mr=function(Ye,Me){ie==null||ie.setViewPort(Ye,Me)},Yr=function(Ye){ie==null||ie.setScreenShareQuality(Ye)},un=function(){ie==null||ie.enableMic()},Lt=function(){ie==null||ie.disableMic()},pn=function(){ie==null||ie.enableWebcam()},sn=function(){ie==null||ie.disableWebcam()},zr=function(Ye){ie==null||ie.pin(Ye)},Lr=function(Ye){ie==null||ie.unpin(Ye)},xn=function(){ie==null||ie.remove()},Xr=function(Ye){var Me=Ye===void 0?{}:Ye,ot=Me.height,Le=Me.width;return Promise.resolve(ie==null?void 0:ie.captureImage({height:ot,width:Le}))},Pn=function(){return Promise.resolve(ie==null?void 0:ie.getAudioStats())},Sn=function(){return Promise.resolve(ie==null?void 0:ie.getVideoStats())},In=function(){return Promise.resolve(ie==null?void 0:ie.getShareStats())},Nn=function(){return Promise.resolve(ie==null?void 0:ie.getShareAudioStats())},Wt=function(){ie==null||ie.consumeWebcamStreams()},Mn=function(){ie==null||ie.consumeMicStreams()},ss=function(){ie==null||ie.stopConsumingWebcamStreams()},hn=function(){ie==null||ie.stopConsumingMicStreams()};return A.useEffect(function(){var or=ie==null?void 0:ie.streams;return or&&or.forEach(function(Ye){cr(Ye)}),ie!=null&&ie.micOn&&He(Ce),ie!=null&&ie.webcamOn&&se(je),ie==null||ie.on("stream-enabled",jt),ie==null||ie.on("stream-disabled",Dt),ie==null||ie.on("stream-paused",function(Ye){u(Ye)}),ie==null||ie.on("stream-resumed",function(Ye){f(Ye)}),ie==null||ie.on("media-status-changed",Gr),ie==null||ie.on("video-quality-changed",Xt),ie==null||ie.on("producer-added",function(Ye){g(Ye)}),ie==null||ie.on("producer-removed",function(Ye){w(Ye)}),ie==null||ie.on("consumer-added",function(Ye){E(Ye)}),ie==null||ie.on("consumer-removed",function(Ye){C(Ye)}),tt.on(st["participant-mode-changed"],nn),function(){ie==null||ie.off("stream-enabled",jt),ie==null||ie.off("stream-disabled",Dt),ie==null||ie.off("media-status-changed",Gr),ie==null||ie.off("video-quality-changed",Xt),tt.off(st["participant-mode-changed"],nn)}},[ie]),{displayName:ie==null?void 0:ie.displayName,participant:ie,webcamStream:T,micStream:R,screenShareStream:j,screenShareAudioStream:M,webcamOn:je||!!T,micOn:Ce||!!R,mode:nr,metaData:ie==null?void 0:ie.metaData,screenShareOn:!!j,isLocal:(Q==null?void 0:Q.id)===t,isActiveSpeaker:ae===t,isMainParticipant:(_e==null?void 0:_e.id)===t,pinState:Se,consumeMicStreams:Mn,consumeWebcamStreams:Wt,stopConsumingMicStreams:hn,stopConsumingWebcamStreams:ss,setQuality:dn,setScreenShareQuality:Yr,setViewPort:Mr,enableMic:un,disableMic:Lt,enableWebcam:pn,disableWebcam:sn,captureImage:Xr,pin:zr,unpin:Lr,remove:xn,getAudioStats:Pn,getVideoStats:Sn,getShareStats:In,getShareAudioStats:Nn}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Ml.VideoSDK.Constants;A.forwardRef(function(e,t){var r=e.participantId,n=e.type,s=n===void 0?"video":n,i=e.containerStyle,c=i===void 0?{}:i,d=e.className,l=d===void 0?"":d,o=e.classNameVideo,p=o===void 0?"":o,y=e.videoStyle,m=y===void 0?{}:y,u=fK(r),b=u.webcamOn,f=u.webcamStream,_=u.isLocal,g=u.screenShareStream,v=u.screenShareOn,w=A.useRef(null);return A.useEffect(function(){var S=s==="share"?g:f,E=s==="share"?v:b;if(w.current)if(E&&S){var O=new MediaStream;O.addTrack(S.track),w.current.srcObject=O,w.current.setAttribute("playsinline",""),w.current.setAttribute("x5-playsinline",""),w.current.setAttribute("webkit-playsinline",""),w.current.play().catch(function(C){return console.error("videoRef.current.play() failed",C)})}else w.current.srcObject=null},[s].concat(s==="share"?[v,g]:s==="video"?[b,f]:[])),pt.createElement("div",{ref:t,className:"video-container participant-video-"+r+" "+(l||""),style:Cg({objectFit:s==="share"?"contain":"none",height:"100%"},c)},pt.createElement("video",{width:"100%",height:"100%",ref:w,autoPlay:!0,className:p,style:_&&s!=="share"?Cg({transform:"scaleX(-1)",WebkitTransform:"scaleX(-1)"},m):m}))});function mK({participantId:e}){return a.jsxs("div",{children:["Participant: ",e]})}function gK(){const[e,t]=A.useState(null),{join:r,participants:n}=B6({onMeetingJoined:()=>{t("JOINED")}}),s=()=>{t("JOINING"),r()};return a.jsx("div",{className:"container",children:e&&e=="JOINED"?a.jsx("div",{children:[...n.keys()].map(i=>a.jsx(mK,{participantId:i},i))}):e&&e=="JOINING"?a.jsx("p",{children:"Joining the meeting..."}):a.jsx("button",{onClick:s,children:"Join the meeting"})})}const vK=({meetingId:e,token:t,name:r})=>a.jsx(hK,{config:{meetingId:e,micEnabled:!0,webcamEnabled:!0,name:r,debugMode:!1},token:t,children:a.jsx(gK,{})}),yK=()=>{const[e,t]=A.useState(""),[r,n]=A.useState("");return A.useEffect(()=>{(async()=>{try{const i=await Mt.post("undefined/api/chat/get-token");t(i.data.roomId),n(i.data.token)}catch(i){console.error("Error getting meeting token",i)}})()},[]),e&&r?a.jsx(vK,{meetingId:e,token:r,name:"Dr. Vasu"}):a.jsx("div",{className:"text-center mt-10 text-xl",children:" Starting Video Call..."})},bK=Yg("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$b=A.forwardRef(({className:e,variant:t,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:Ur(bK({variant:t}),e),...r}));$b.displayName="Alert";const wK=A.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:Ur("mb-1 font-medium leading-none tracking-tight",e),...t}));wK.displayName="AlertTitle";const Wb=A.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:Ur("text-sm [&_p]:leading-relaxed",e),...t}));Wb.displayName="AlertDescription";function _K(){const[e,t]=A.useState(null),[r,n]=A.useState(!1),[s,i]=A.useState("IDLE"),[c,d]=A.useState(null),[l,o]=A.useState(null),p=A.useRef(null),y="undefined/api",m="report-analyzer-state",u="report-analyzer-last",b=v=>{var S;const w=(S=v.target.files)==null?void 0:S[0];w&&t(w)},f=()=>{p.current&&(window.clearInterval(p.current),p.current=null)};A.useEffect(()=>{try{const v=localStorage.getItem(m);if(v){const S=JSON.parse(v);S!=null&&S.reportId&&(i(S.status==="PROCESSING"?"PROCESSING":"IDLE"),_(S.reportId))}const w=localStorage.getItem(u);if(w){const S=JSON.parse(w);S&&S.id&&(d(S),i(S.status||"COMPLETED"))}}catch{}return()=>f()},[]);const _=v=>{f(),p.current=window.setInterval(async()=>{var w;try{const S=await Mt.get(`${y}/report/${v}`,{withCredentials:!0});if((w=S.data)!=null&&w.success){const E=S.data.data;E.status==="COMPLETED"?(i("COMPLETED"),d(E),f(),n(!1),qt.success("Report analyzed successfully")):E.status==="FAILED"?(i("FAILED"),o(E.error||"Analysis failed"),f(),n(!1),qt.error(E.error||"Report analysis failed")):i("PROCESSING")}}catch{}},2e3)},g=async()=>{var v,w,S,E,O,C;if(e){o(null),d(null),n(!0),i("PROCESSING");try{const k=new FormData;k.append("report",e);const T=await Mt.post(`${y}/report`,k,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if((v=T.data)!=null&&v.success&&((S=(w=T.data)==null?void 0:w.data)!=null&&S.reportId)){const h=T.data.data.reportId;_(h),qt.message("Report uploaded",{description:"Analyzing in background..."})}else throw new Error(((E=T.data)==null?void 0:E.message)||"Upload failed")}catch(k){n(!1),i("FAILED");const T=((C=(O=k==null?void 0:k.response)==null?void 0:O.data)==null?void 0:C.message)||(k==null?void 0:k.message)||"Upload failed";o(T),qt.error(T)}}};return a.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Analyze Report"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Upload your medical reports for AI-powered analysis and insights."})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsxs(_n,{className:"flex items-center gap-2",children:[a.jsx(Ma,{className:"h-5 w-5"}),"Upload Medical Report"]}),a.jsx(Vn,{children:"Upload your medical reports in PDF, JPG, or PNG format for analysis."})]}),a.jsxs(Ot,{className:"space-y-4",children:[a.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[a.jsx(EI,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e?e.name:"Choose file or drag and drop"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"PDF, JPG, PNG up to 10MB"})]}),a.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:b,className:"hidden",id:"file-upload"}),a.jsx(rr,{variant:"outline",onClick:()=>{var v;return(v=document.getElementById("file-upload"))==null?void 0:v.click()},className:"mt-4",children:"Select File"})]}),e&&a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ma,{className:"h-8 w-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]}),a.jsx(rr,{variant:"outline",size:"sm",onClick:()=>t(null),children:"Remove"})]}),a.jsxs($b,{children:[a.jsx(By,{className:"h-4 w-4"}),a.jsx(Wb,{children:"Your uploaded reports will be analyzed using AI to provide insights about your health condition. All data is processed securely and confidentially."})]}),a.jsx(rr,{onClick:g,disabled:!e||r,className:"w-full",children:r?"Analyzing...":"Analyze Report"})]})]}),a.jsxs(Nt,{children:[a.jsxs(En,{children:[a.jsx(_n,{children:"Analysis Result"}),a.jsxs(Vn,{children:[s==="IDLE"&&"Upload a report to see results here.",s==="PROCESSING"&&"We are analyzing your report. This may take a moment.",s==="COMPLETED"&&"Your report has been analyzed.",s==="FAILED"&&"We couldn't analyze your report."]})]}),a.jsxs(Ot,{children:[s==="PROCESSING"&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Analyzing... Please wait."}),s==="FAILED"&&a.jsxs($b,{className:"mb-4",children:[a.jsx(By,{className:"h-4 w-4"}),a.jsx(Wb,{children:l||"Something went wrong while analyzing your report."})]}),s==="COMPLETED"&&c&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Filename"}),a.jsx("div",{className:"font-medium",children:c.filename})]}),c.summary&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Summary"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:c.summary})]}),Array.isArray(c.abnormalValues)&&c.abnormalValues.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Abnormal Values"}),a.jsx("div",{className:"space-y-3",children:c.abnormalValues.map((v,w)=>{const S=v.test_name||v.testName||v.parameter||`Result ${w+1}`,E=v.value??v.measured_value??v.measuredValue,O=v.unit||v.units||"",C=v.normal_range||v.normalRange||v.reference||"",k=v.issue||v.reason||v.flag||"";return{name:S,value:E,unit:O,normal:C,issue:k}}).map((v,w)=>a.jsx("div",{className:"rounded-lg border border-red-500/20 bg-red-500/5 p-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:v.name}),v.normal&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Normal: ",v.normal]})]}),a.jsxs("div",{className:"shrink-0 text-right",children:[a.jsxs("div",{className:"text-red-600 font-semibold",children:[v.value!==void 0?v.value:""," ",v.unit]}),v.issue&&a.jsx($r,{variant:"secondary",className:"mt-1 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",children:v.issue})]})]})},`${v.name}-${w}`))})]}),Array.isArray(c.possibleConditions)&&c.possibleConditions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Possible Conditions"}),a.jsx("ul",{className:"list-disc pl-6 space-y-1",children:c.possibleConditions.map((v,w)=>a.jsx("li",{children:typeof v=="string"?v:(v==null?void 0:v.condition)||JSON.stringify(v)},w))})]}),c.recommendation&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Recommendation"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:c.recommendation})]}),c.disclaimer&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold mb-2",children:"Disclaimer"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 whitespace-pre-wrap",children:c.disclaimer})]})]}),s==="IDLE"&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reports analyzed yet. Upload your first report to get started."})]})]})]})]})}function xK(){const[e,t]=A.useState([]),[r,n]=A.useState([]),[s,i]=A.useState(!0),[c,d]=A.useState(""),[l,o]=A.useState("all"),p=Wn(w=>w.user),y="undefined/api";A.useEffect(()=>{(p==null?void 0:p.role)==="PATIENT"&&m()},[p]),A.useEffect(()=>{u()},[e,c,l]);const m=async()=>{var w;try{i(!0);const S=await Mt.get(`${y}/patient/all-appointments`,{withCredentials:!0});S.data.success&&t(S.data.data)}catch(S){console.error("Error fetching appointment history:",S),Mt.isAxiosError(S)&&S.response?qt.error(((w=S.response.data)==null?void 0:w.message)||"Failed to fetch appointment history"):qt.error("Failed to fetch appointment history")}finally{i(!1)}},u=()=>{let w=[...e];c&&(w=w.filter(S=>S.doctor.name.toLowerCase().includes(c.toLowerCase())||S.doctor.specialty.toLowerCase().includes(c.toLowerCase()))),l!=="all"&&(w=w.filter(S=>S.status===l)),w.sort((S,E)=>new Date(E.createdAt).getTime()-new Date(S.createdAt).getTime()),n(w)},b=w=>{const S="backdrop-blur-sm rounded-full px-2.5 py-1 border shadow-sm text-xs font-medium",E={PENDING:{label:"Pending",cls:"bg-gradient-to-r from-amber-400/15 to-yellow-500/15 text-amber-700 dark:text-amber-200 border-amber-400/30"},CONFIRMED:{label:"Confirmed",cls:"bg-gradient-to-r from-emerald-400/15 to-teal-500/15 text-emerald-700 dark:text-emerald-200 border-emerald-400/30"},COMPLETED:{label:"Completed",cls:"bg-gradient-to-r from-sky-400/15 to-indigo-500/15 text-sky-700 dark:text-sky-200 border-sky-400/30"},CANCELLED:{label:"Cancelled",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"},REJECTED:{label:"Rejected",cls:"bg-gradient-to-r from-rose-400/15 to-red-500/15 text-rose-700 dark:text-rose-200 border-rose-400/30"}},O=E[w]||E.PENDING;return a.jsx($r,{variant:"outline",className:`${S} ${O.cls}`,children:O.label})},f=w=>new Date(w).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),_=w=>new Date(`2000-01-01T${w}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),v={total:e.length,pending:e.filter(S=>S.status==="PENDING").length,confirmed:e.filter(S=>S.status==="CONFIRMED").length,completed:e.filter(S=>S.status==="COMPLETED").length,cancelled:e.filter(S=>S.status==="CANCELLED").length,rejected:e.filter(S=>S.status==="REJECTED").length};return s?a.jsx("div",{className:"p-6 md:p-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"p-6 md:p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointment History"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"View your past and upcoming appointments"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8",children:[a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.total}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v.pending}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Request Sent"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.confirmed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confirmed"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.completed}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.cancelled}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cancelled"})]})})}),a.jsx(Nt,{children:a.jsx(Ot,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.rejected}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected"})]})})})]}),a.jsx(Nt,{className:"mb-6",children:a.jsx(Ot,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ih,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ls,{placeholder:"Search by doctor name or specialty...",value:c,onChange:w=>d(w.target.value),className:"pl-10"})]})}),a.jsxs(Qa,{value:l,onValueChange:o,children:[a.jsx(Aa,{className:"w-full md:w-48",children:a.jsx(Xa,{placeholder:"Filter by status"})}),a.jsxs(Oa,{children:[a.jsx(qr,{value:"all",children:"All Statuses"}),a.jsx(qr,{value:"PENDING",children:"Request Sent"}),a.jsx(qr,{value:"CONFIRMED",children:"Confirmed"}),a.jsx(qr,{value:"COMPLETED",children:"Completed"}),a.jsx(qr,{value:"CANCELLED",children:"Cancelled"}),a.jsx(qr,{value:"REJECTED",children:"Rejected"})]})]})]})})}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsx(Nt,{children:a.jsxs(Ot,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(ps,{className:"h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:e.length===0?"You don't have any appointments yet.":"No appointments match your current filters."})]})}):r.map(w=>a.jsx(Qr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a.jsx(Nt,{className:"hover:shadow-lg transition-shadow",children:a.jsxs(Ot,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:a.jsx(Oo,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:w.doctor.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:w.doctor.specialty})]})]}),a.jsxs("div",{className:"text-right",children:[b(w.status),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",f(w.createdAt)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f(w.date)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ni,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:_(w.time)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(io,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.doctor.clinicLocation})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ma,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.appointmentType})]})]}),w.notes&&a.jsx("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Notes:"})," ",w.notes]})}),w.consultationFee&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Consultation Fee:"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["",w.consultationFee]})]}),w.prescriptionId&&a.jsx("div",{className:"mt-4",children:a.jsx(rr,{variant:"secondary",onClick:()=>window.open(`${y}/patient/prescription-pdf/${w.prescriptionId}`,"_blank"),children:"View Prescription"})})]})})},w.id))})]})}function SK(){const[e,t]=A.useState(""),n=[{id:1,name:"City Pharmacy",address:"123 Main Street, Downtown",distance:"0.5 km",rating:4.5,phone:"(555) 123-4567",hours:"8:00 AM - 10:00 PM",isOpen:!0,services:["Prescription","OTC","Delivery"]},{id:2,name:"Health Plus Pharmacy",address:"456 Oak Avenue, Midtown",distance:"1.2 km",rating:4.2,phone:"(555) 234-5678",hours:"7:00 AM - 11:00 PM",isOpen:!0,services:["Prescription","OTC","Vaccination","Delivery"]},{id:3,name:"24/7 Medical Store",address:"789 Pine Street, Uptown",distance:"2.1 km",rating:4,phone:"(555) 345-6789",hours:"24/7",isOpen:!0,services:["Prescription","OTC","Emergency"]},{id:4,name:"Family Pharmacy",address:"321 Elm Street, Suburbs",distance:"3.5 km",rating:4.7,phone:"(555) 456-7890",hours:"9:00 AM - 9:00 PM",isOpen:!1,services:["Prescription","OTC","Consultation","Delivery"]}].filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.address.toLowerCase().includes(e.toLowerCase()));return a.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Pharmacy Near Me"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Find nearby pharmacies and medical stores for your prescription needs."})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ih,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx(ls,{placeholder:"Search pharmacies by name or location...",value:e,onChange:s=>t(s.target.value),className:"pl-10"})]})}),a.jsx("div",{className:"grid gap-6",children:n.length===0?a.jsx(Nt,{children:a.jsxs(Ot,{className:"text-center py-12",children:[a.jsx(io,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No pharmacies found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria."})]})}):n.map(s=>a.jsxs(Nt,{className:"hover:shadow-md transition-shadow",children:[a.jsx(En,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx(_n,{className:"text-xl",children:s.name}),a.jsxs(Vn,{className:"flex items-center gap-2 mt-1",children:[a.jsx(io,{className:"h-4 w-4"}),s.address]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($r,{variant:s.isOpen?"default":"secondary",children:s.isOpen?"Open":"Closed"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Gw,{className:"h-4 w-4 text-yellow-500 fill-current"}),a.jsx("span",{className:"text-sm font-medium",children:s.rating})]})]})]})}),a.jsxs(Ot,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nC,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.phone})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ni,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.hours})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wI,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.distance})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.services.map((i,c)=>a.jsx($r,{variant:"outline",className:"text-xs",children:i},c))}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx(rr,{variant:"outline",size:"sm",children:"Call"}),a.jsx(rr,{variant:"outline",size:"sm",children:"Directions"}),a.jsx(rr,{size:"sm",children:"View Details"})]})]})]},s.id))})]})}function EK(){return a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-900 text-white px-4",children:[a.jsx("h1",{className:"text-7xl md:text-9xl font-extrabold text-purple-500",children:"404"}),a.jsx("h2",{className:"mt-4 text-2xl md:text-3xl font-semibold",children:"Page Not Found"}),a.jsx("p",{className:"mt-3 text-gray-400 text-center max-w-md",children:"Oops! The page you're looking for doesn't exist or has been moved."}),a.jsx(bs,{to:"/",className:"mt-6 px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg transition duration-200",children:"Go Home"})]})}function RK(){return a.jsxs(Hk,{children:[a.jsx(Cr,{path:"/",element:a.jsx(y2,{children:a.jsx(B$,{})})}),a.jsx(Cr,{path:"/about",element:a.jsx(y2,{children:a.jsx(U$,{})})}),a.jsx(Cr,{path:"/auth/*",element:a.jsx(tK,{})}),a.jsxs(Cr,{element:a.jsx(c$,{}),children:[a.jsxs(Cr,{path:"/dashboard/*",element:a.jsx(zs,{}),children:[a.jsx(Cr,{path:"patient",element:a.jsx(rK,{})}),a.jsx(Cr,{path:"doctor",element:a.jsx(nK,{})})]}),a.jsx(Cr,{path:"/appointments",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(gH,{})})}),a.jsx(Cr,{path:"/doctor/appointments",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(vH,{})})}),a.jsx(Cr,{path:"/doctor/appointment-history",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(yH,{})})}),a.jsx(Cr,{path:"/prescriptions",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(bH,{})})}),a.jsx(Cr,{path:"/notifications",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(uE,{})})}),a.jsx(Cr,{path:"/pending-requests",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(wH,{})})}),a.jsx(Cr,{path:"/profile",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(mH,{})})}),a.jsx(Cr,{path:"/doctors",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(pH,{})})}),a.jsx(Cr,{path:"/doctors/:id",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(hH,{})})}),a.jsx(Cr,{path:"/book-appointment/:id",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(fH,{})})}),a.jsx(Cr,{path:"/chat",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(eK,{})})}),a.jsx(Cr,{path:"/upload-report",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(_K,{})})}),a.jsx(Cr,{path:"/appointment-history",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(xK,{})})}),a.jsx(Cr,{path:"/pharmacy",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(SK,{})})}),a.jsx(Cr,{path:"/notifications",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(uE,{})})}),a.jsx(Cr,{path:"/admin",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(ZH,{})})}),a.jsx(Cr,{path:"/start-call",element:a.jsx(zs,{}),children:a.jsx(Cr,{index:!0,element:a.jsx(yK,{})})})]}),a.jsx(Cr,{path:"*",element:a.jsx(EK,{})})]})}function kK(){return A.useEffect(()=>{Wn.getState().checkAuth()},[]),a.jsx(p3,{children:a.jsx(b3,{children:a.jsx(RK,{})})})}U0.createRoot(document.getElementById("root")).render(a.jsxs(pt.StrictMode,{children:[a.jsx(M$,{richColors:!0,position:"bottom-right"}),a.jsx(kK,{})]}));
