import{j as e}from"./ui-vendor-izRNgCO_.js";import{r as a}from"./react-vendor-r9Et1EnL.js";import{c as s,e as l,m as t,A as i,f as r,g as n,h as d,M as c,B as o,a as m,u as x}from"./index-Dpso9GU3.js";import{C as h,a as p,b as u,c as g,d as j}from"./card-Sps0XDlE.js";import{I as y}from"./input-Bk6CaQFa.js";import{L as v}from"./label-BnKDd-HG.js";import{M as N}from"./mail-BO1CeZ5_.js";import{P as f}from"./phone-B5fqYH4Q.js";import"./chart-vendor-D0NPwkge.js";
/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=s("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function w(){const s=l(e=>e.user),[w,C]=a.useState(!1),[k,P]=a.useState({name:(null==s?void 0:s.name)||"John Doe",email:(null==s?void 0:s.email)||"john.doe@example.com",phone:"+1 (555) 123-4567",age:"28",address:"123 Main Street, City, State 12345"}),[S,F]=a.useState(null),[A,M]=a.useState(null),D=l(e=>e.setUser),E="http://localhost:5000/api/user",[I,J]=a.useState(!1),R=(e,a)=>{P(s=>({...s,[e]:a}))};return e.jsxs("div",{className:"p-6 md:p-8 max-w-4xl mx-auto",children:[e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your personal information and account settings"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"lg:col-span-1",children:e.jsxs(h,{className:"sticky top-8",children:[e.jsxs(p,{className:"text-center",children:[e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs(i,{className:"w-24 h-24",children:[e.jsx(r,{src:A||(null==s?void 0:s.profilePicture)||"/placeholder-user.jpg",alt:"Profile Picture"}),e.jsx(n,{className:"text-2xl",children:k.name.split(" ").map(e=>e[0]).join("")})]}),w&&e.jsx("div",{className:"mt-3",children:e.jsx(y,{type:"file",accept:"image/*",onChange:e=>{var a;const s=(null==(a=e.target.files)?void 0:a[0])||null;if(F(s),s){const e=new FileReader;e.onload=()=>M(e.result),e.readAsDataURL(s)}else M(null)}})})]}),e.jsx(u,{className:"text-xl",children:k.name}),e.jsx(g,{className:"text-base",children:(null==s?void 0:s.role)||"Patient"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:k.email})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:k.phone})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(d,{className:"h-4 w-4"}),e.jsxs("span",{children:["Age: ",k.age]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:k.address})]})]})]})}),e.jsxs(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"lg:col-span-2",children:[e.jsxs(h,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{className:"text-2xl",children:"Personal Information"}),e.jsx(g,{children:"Update your personal details and contact information"})]}),e.jsxs(o,{variant:w?"outline":"default",onClick:()=>C(!w),className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:w?"Cancel":"Edit Profile"})]})]})}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"name",children:"Full Name"}),e.jsx(y,{id:"name",value:k.name,onChange:e=>R("name",e.target.value),disabled:!w,className:w?"bg-white":"bg-gray-50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"email",children:"Email Address"}),e.jsx(y,{id:"email",type:"email",value:k.email,onChange:e=>R("email",e.target.value),disabled:!w,className:w?"bg-white":"bg-gray-50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"phone",children:"Phone Number"}),e.jsx(y,{id:"phone",value:k.phone,onChange:e=>R("phone",e.target.value),disabled:!w,className:w?"bg-white":"bg-gray-50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"age",children:"Age"}),e.jsx(y,{id:"age",value:k.age,onChange:e=>R("age",e.target.value),disabled:!w,className:w?"bg-white":"bg-gray-50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"address",children:"Address"}),e.jsx(y,{id:"address",value:k.address,onChange:e=>R("address",e.target.value),disabled:!w,className:w?"bg-white":"bg-gray-50"})]}),w&&e.jsxs(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex space-x-4 pt-4",children:[e.jsx(o,{onClick:()=>{(async()=>{var e,a,l,t,i,r;try{J(!0);const r=new FormData;k.name&&k.name!==(null==s?void 0:s.name)&&r.append("name",k.name),S&&r.append("profilePicture",S);const n="DOCTOR"===(null==s?void 0:s.role)?`${E}/update-doctor`:`${E}/update-patient`,d=await m.put(n,r,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(!(null==(e=d.data)?void 0:e.success))throw new Error((null==(a=d.data)?void 0:a.message)||"Failed to update profile");const c=await m.get(`${E}/authenticated-profile`,{withCredentials:!0});if((null==(l=c.data)?void 0:l.success)&&(null==(i=null==(t=c.data)?void 0:t.data)?void 0:i.user)){const e=c.data.data.user;D(e),P(a=>({...a,name:e.name||a.name,email:e.email||a.email}))}x.success("Profile updated successfully"),C(!1),F(null),M(null)}catch(n){m.isAxiosError(n)&&n.response?x.error((null==(r=n.response.data)?void 0:r.message)||"Failed to update profile"):x.error("Failed to update profile")}finally{J(!1)}})()},disabled:I,className:"bg-blue-600 hover:bg-blue-700",children:I?"Saving...":"Save Changes"}),e.jsx(o,{variant:"outline",onClick:()=>{P({name:(null==s?void 0:s.name)||"John Doe",email:(null==s?void 0:s.email)||"john.doe@example.com",phone:"+1 (555) 123-4567",age:"28",address:"123 Main Street, City, State 12345"}),C(!1),F(null),M(null)},children:"Cancel"})]})]})]}),e.jsxs(h,{className:"mt-6",children:[e.jsxs(p,{children:[e.jsx(u,{className:"text-xl",children:"Account Information"}),e.jsx(g,{children:"Your account details and preferences"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Account Type"}),e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:(null==s?void 0:s.role)||"Patient"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Member Since"}),e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"January 2024"})})]})]})})]})]})]})]})}export{w as default};
