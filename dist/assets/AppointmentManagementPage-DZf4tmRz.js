import{j as e}from"./ui-vendor-izRNgCO_.js";import{d as s,r as a}from"./react-vendor-r9Et1EnL.js";import{e as t,m as i,B as n,C as r,b as l,A as c,f as d,g as o,i as m,F as x,h as p,a as h,u as j}from"./index-Dpso9GU3.js";import{C as u,a as N,b as y,c as g,d as f}from"./card-Sps0XDlE.js";import{P as v}from"./plus-Qr2NWtdU.js";import"./chart-vendor-D0NPwkge.js";function w(){const w=s(),E=t(e=>e.user),[b,D]=a.useState([]),[k,I]=a.useState([]),[C,P]=a.useState(!0),T="http://localhost:5000/api/patient";return a.useEffect(()=>{E&&"PATIENT"===E.role||w("/auth/login")},[E,w]),a.useEffect(()=>{!async function(){try{P(!0);const e=await h.get(`${T}/all-appointments`,{withCredentials:!0});if(e.data.success){let s=function(e,s){return e.includes("T")?new Date(e):new Date(`${e}T${s}`)};const a=e.data.data,t=new Date,i=a.filter(e=>s(e.date,e.time)>=t),n=a.filter(e=>s(e.date,e.time)<t);D(i),I(n)}}catch(e){h.isAxiosError(e)&&e.response?j.error(e.response.data.message):j.error("Unknown error occurred..")}finally{P(!1)}}()},[T]),a.useEffect(()=>{},[b]),C?e.jsx("div",{className:"p-6 md:p-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"My Appointments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Manage your upcoming and past appointments"})]}),e.jsxs(n,{onClick:()=>w("/doctors"),className:"bg-blue-600 hover:bg-blue-700 dark:text-white ",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Book New Appointment"]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:e.jsxs(u,{children:[e.jsxs(N,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"h-5 w-5 text-blue-600"}),"Upcoming Appointments",e.jsx(l,{variant:"secondary",className:"ml-2",children:b.length})]}),e.jsx(g,{children:"Your scheduled appointments"})]}),e.jsx(f,{className:"space-y-4",children:b.length>0?b.map(s=>e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(c,{children:[e.jsx(d,{src:s.doctor.profilePicture||"/placeholder.svg"}),e.jsx(o,{children:s.doctor.name.split(" ").map(e=>e[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.doctor.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.doctor.specialty}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(s.date).toLocaleDateString("en-US")," at ",s.time]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(l,{variant:"ONLINE"===s.appointmentType?"secondary":"default",children:"ONLINE"===s.appointmentType?"Video Call":"In-Person"}),e.jsx(l,{variant:"PENDING"===s.status?"outline":"CONFIRMED"===s.status?"default":"COMPLETED"===s.status?"secondary":"REJECTED"===s.status?"destructive":"secondary",children:"PENDING"===s.status?"Request Sent":s.status})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:["ONLINE"===s.appointmentType&&"CONFIRMED"===s.status&&e.jsxs(n,{size:"sm",variant:"outline",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Join Call"]}),e.jsxs(n,{size:"sm",variant:"outline",children:[e.jsx(x,{className:"h-4 w-4 mr-1"}),"Details"]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No upcoming appointments"}),e.jsxs(n,{onClick:()=>w("/doctors"),variant:"outline",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Book an Appointment"]})]})})]})}),e.jsx(i.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:e.jsxs(u,{children:[e.jsxs(N,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-gray-600"}),"Past Appointments",e.jsx(l,{variant:"secondary",className:"ml-2",children:k.length})]}),e.jsx(g,{children:"Your completed appointments"})]}),e.jsx(f,{className:"space-y-4",children:k.length>0?k.map(s=>e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(c,{children:[e.jsx(d,{src:s.doctor.profilePicture||"/placeholder.svg"}),e.jsx(o,{children:s.doctor.name.split(" ").map(e=>e[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.doctor.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.doctor.specialty}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(s.date).toLocaleDateString("en-US")," at ",s.time]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(l,{variant:"ONLINE"===s.appointmentType?"secondary":"default",children:"ONLINE"===s.appointmentType?"Video Call":"In-Person"}),e.jsx(l,{variant:"PENDING"===s.status?"outline":"CONFIRMED"===s.status?"default":"COMPLETED"===s.status?"secondary":"REJECTED"===s.status?"destructive":"secondary",children:"PENDING"===s.status?"Request Sent":s.status})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{size:"sm",variant:"outline",children:[e.jsx(x,{className:"h-4 w-4 mr-1"}),"View Report"]}),e.jsxs(n,{size:"sm",variant:"outline",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Feedback"]})]})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No past appointments"})]})})]})})]})]})}export{w as default};
